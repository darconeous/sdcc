2010-02-21 Borut Razem <borut.razem AT siol.net>

	* support/makebin/makebin.c:
	  check if fopen() succeeded
	* support/regression/ports/gbz80/spec.mk:
	  sdlsgb now creates .ihx file and makebin converts it to .gb;
	  removed -m (Load map file) rrgb command line option, since sdlsgb
	  doesn't generate a rrgb compatible map file. A converter from asxxxx
	  to rrgb map file format should be written...

2010-02-21 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/rt rack.c: fixed two warnings reported in #2955971
	  by Hubert Sack. (2nd warning found a bug)

2010-02-20 Philipp Klaus Krause <pkk AT spth.de>
	* device/lib/gbz80/mul.s,
	  device/lib/gbz80/Makefile.in:
	  Fixed multiplication in gbz80 port.

2010-02-20 Philipp Klaus Krause <pkk AT spth.de>
	* device/lib/gbz80/div.s:
	  Fixed mixed-sign division and modulo in gbz80 port.

2010-02-20 Borut Razem <borut.razem AT siol.net>

	* support/makebin/makebin.c: addad support for GameBoj binary file format,
	  added optional input and output file names arguments,
	  making it (hopefully) more robust, ...
	* all.dsp, sdcc.dsw, support/makebin/makebin.dsp:
	  addad makebin to the MSVC project
	* src/SDCCmain.c: fixed bug #2955614 - Regression - Warning: Couldn't find

2010-02-19 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/rt rack.h,
	  src/mcs51/rtrack.c,
	  src/mcs51/ralloc.h,
	  src/mcs51/gen.c: Implemented tracking of symbols and dptr.
	  Set environment variable SDCC_REGTRACK if you want to enable
	  register tracking. If you want diagnostic output use option
	  --fverbose-asm and additionally set SDCC_REGTRACK_VERBOSE

2010-02-18 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: search C runtime initialization object files
	  crt0.rel in system library directories, then in user defined
	  library directories

2010-02-16 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: remove crt0.rel for z80 and gb
	* src/SDCCmain.c:
	  fixed the fist part of bug #2951083: -o not working as expected:
	  rename the linker output file name to -o binary file name
	* sdas/linksrc/lkaomf51.c:
	  fixed the second part of bug #2951083: -o not working as expected:
	  remove the file extension in any case

2010-02-16 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/peeph-gbz80.def,
	  device/include/asm/z80/features.h,
	  device/lib/gbz80/Makefile.in,
	  device/lib/gbz80/div.s,
	  device/lib/gbz80/mul.s,
	  support/regression/ports/gbz80/spec.mk:
	  Made gbz80 regression tests compile again.

2010-02-11 Borut Razem <borut.razem AT siol.net>

	* sdas/linksrc/lkmain.c: removed unneeded gb linker initialization

2010-02-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/clean.mk: also clean huge library

2010-02-10 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c: (genAssign literal) loading via accumulator if it
	  pays off. Could eventually also be enabled for assigning to registers

2010-02-09 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added rules 105.b and 114.x improving parameter
	  passing for models large and huge.
	  Regression test suite is about 1% smaller for model large

2010-02-09 Borut Razem <borut.razem AT siol.net>

	* sdas/asxxsrc/sdas.c, sdas/linksrc/sdld.c:
	  convert parogram name to lower case since on Win 9x program names
	  in argv[0] are always upper case;
	  added diagnostic if SDAS_DIAG and/or SDLD_DIAG environment
	  variables are set

2010-02-08 Borut Razem <borut.razem AT siol.net>

	* src/avr/gen.c, src/avr/gen.h, src/cdbFile.c, src/ds390/gen.c,
	  src/ds390/gen.h, src/hc08/gen.c, src/hc08/gen.h, src/mcs51/gen.c,
	  src/mcs51/gen.h, src/mcs51/main.c, src/pic16/gen.c, src/pic16/gen.h,
	  src/pic16/main.c, src/pic/gen.c, src/pic/gen.h, src/port.h,
	  src/SDCCBBlock.c, src/SDCCdebug.c, src/SDCCdebug.h, src/SDCCdwarf2.c,
	  src/SDCCdwarf2.h, src/SDCCglobl.h, src/SDCCglue.c, src/SDCCmain.c,
	  src/xa51/gen.c, src/xa51/gen.h, src/xa51/main.c, src/z80/gen.c,
	  src/z80/gen.h, src/z80/main.c:
	  get rid of scratchFileName, const string pointers
	* src/SDCCmain.c, src/xa51/main.c, src/mcs51/main.c, sdcc_vc_in.h:
	  fixed bug #2947712: SDCC completely broken in multiple ways
	* sdas/linksrc/lklist.c, sdas/linksrc/lkmain.c:
	  reintroduced gameboy map file format, required by rrgb simulator,
	  reenabled gameboy regression tests

2010-02-07 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added rules 272.x helping literal left shifts

2010-02-07 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c, src/SDCCglobl.h, src/z80/main.c, src/hc08/main.c,
	  sdas/linksrc/lkmain.c, sdas/linksrc/lkar.c, sdas/linksrc/lkrloc.c:
	  fixed output file format handling
	* src/SDCCmain.c, src/port.h, src/xa51/main.c, src/mcs51/main.c,
	  src/z80/main.c, src/ds390/main.c, src/hc08/main.c:
	  list of standard library files moved to port structure,
	  defined for each target
	* sdas/linksrc/lkmain.c: re-added the gb version of map()

2010-02-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_setjmp.c: fixed --stack-auto for model-huge
	* support/regression/Makefile.in: keep the hex-file

2010-02-05 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c,
	  src/z80/mappings.i,
	  src/z80/peeph-z80.def:
	  Decompose multiline macros, fixing #1570701, #1921731.

2010-02-04 Borut Razem <borut.razem AT siol.net>

	* src/mcs51/main.c, src/z80/main.c, src/ds390/main.c, src/hc08/main.c,
	  src/xa51/main.c, src/SDCCmain.c, src/port.h:
	  list of C runtime initialization object files crt0.rel moved to port
	  structure, defined for each target

2010-02-02 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-gbz80.def,
	  src/z80/mappings.i:
	  Fixed gbz80 port to work with new assembler.

2010-02-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c(addSymChain): fixed --xstack float support in model-huge

2010-02-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c(assemble): don't destroy asmName twice

2010-02-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/ralloc.c (packRegsDPTRuse): fixed bug 2938110
	* support/regression/tests/bug2938110.c: new, added

2010-02-01 Borut Razem <borut.razem AT siol.net>

	* sdas/linksrc/lkar.c, sdas/linksrc/lksdcclib.c:
	  detection of asxxxx v3.0 and higher rel files

2010-01-31 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-z80.def:
	  Minor peephole.

2010-01-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* configure,
	* configure.in: added device/lib/huge/Makefile

2010-01-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/asm/mcs51/features.h: added _RETURN
	* device/include/setjmp.h: adapted for model-huge
	* device/lib/_setjmp.c: adapted for xstack and model-huge
	* device/lib/_decdptr.c(_decdptr): __naked
	* device/lib/_logexpf.c (_fs_cordic_rshift_r765_unsigned): __naked
	* device/lib/_mullong.c: use _AUTOMEM from sdcc-lib.h
	* device/lib/_startup.c (_sdcc_external_startup): __nonbanked
	* device/lib/_strlen.c,
	* device/lib/abs.c,
	* device/lib/labs.c: use _RETURN
	* device/lib/cotf.c,
	* device/lib/tanf.c,
	* device/lib/tancotf.c (tancotf): changed iscotan to BOOL
	* device/lib/expf.c,
	* device/lib/logf.c: adapted for model-huge
	* device/lib/printf_large.c: set USE_FLOATS for ds390, xstack, model-huge
	* device/lib/huge: added directory
	* device/lib/huge/Makefile.in: new, added
	* src/mcs51/gen.c (aopPut, Push): factored out Push,
	  (getFreePtr): save R0 in B for PCALL,
	  (opIsGptr): also true for banked function pointers,
	  (saveRegisters, unsaveRegisters): always save for banked functions,
	    don't kill R0,
	  (genCall, genPcall, genEndFunction): even static functions are banked in
	    model-huge, address could be taken,
	  (genPcall): don't kill R0-R2 before genSend
	* src/mcs51/main.c (_mcs51_keywords): added nonbanked,
	  (_mcs51_finaliseOptions): added MODEL_HUGE,
	    xstack float lib is not reentrant,
	  (mcs51_port): added MODEL_HUGE, fixed banked_overhead bug
	* src/mcs51/peep.c (termScanAtFunc): always abort for banked call and R0-R2
	* src/SDCC.y: remoed warning W_BANKED_WITH_STATIC
	* src/SDCCast.c (funcOfType): all C support routines are nonbanked,
	  (processParms): fixed banked function pointer is no codepointer,
	  (createFunction): fixed banked_overhead bug
	* src/SDCCerr.c: W_BANKED_WITH_STATIC no longer used
	* src/SDCCglue.c (_printPointerType): added size parameter,
	  (printIvalFuncPtr): adapted for banked function pointer,
	  (glue): added MODEL_HUGE
	* src/SDCCmain.c (optionsTable, parseCmdLine, preProcess): added
	    MODEL_HUGE, --model-huge and OPTION_HUGE_MODEL
	* src/SDCCmem.c (allocParms): moved banked_overhead to createFunction
	* src/SDCCsymt.c (getSize): adapted for model-huge,
	  (checkFunction): merge banked/nonbanked from prototype into definition,
	  (initCSupport):  all C support routines are made nonbanked in funcOfType
	* src/SDCCsymt.h: added BANKED_FUNCTIONS, adapted IFFUNC_ISBANKEDCALL
	* src/z80/gen.c (emitCall):  even static functions are banked in
	    model-large and model-medium, address could be taken
	* support/regression/Makefile.in: added target test-mcs51-huge
	* support/regression/ports/mcs51-common/support.c: added PSBANK,
	  (_sdcc_external_startup): must be nonbanked
	* support/regression/ports/mcs51-xstack-auto/spec.mk: moved USE_FLOATS to
	    printf_large.c
	* support/regression/ports/mcs51-huge: added directory
	* support/regression/ports/mcs51-huge/spec.mk: new, added
	* support/regression/tests/bug1678803.c,
	* support/regression/tests/bug1712928.c: adapted for model-huge
	* support/regression/tests/float_single.c: added putchar for debugging
	* support/regression/tests/snprintf.c: adapted for model-huge

2010-01-29 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c:
	  Minor comment.

2010-01-29 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c:
	  Minor comment.

2010-01-29 Philipp Klaus Krause <pkk AT spth.de>

	* src/SDCCsymt.h:
	  Minor fix.

2010-01-29 Borut Razem <borut.razem AT siol.net>

	* sdcc/src/xa51/main.c, sdcc/src/mcs51/main.c, sdcc/src/SDCCmain.c,
	  sdcc/src/z80/main.c, sdcc/src/ds390/main.c, sdcc/src/hc08/main.c,
	  sdcc/sdas/asxxsrc/asmain.c:
	  fixed bug #2925290: SDCC assemblers do not process "-o" option correctly
	  The sdas command line syntax is now compatible with asxxxx v5.0

2010-01-24 Philipp Klaus Krause <pkk AT spth.de>
	* support/regression/tests/bool.c,
	  support/regression/tests/bitopcse.c,
	  device/include/stdbool.h:
	  Added test for bool.

2010-01-24 Borut Razem <borut.razem AT siol.net>

	* src/z80/gen.c:
	  fixed declaration in the middle of the block
	* support/cpp/ansidecl.h, support/cpp/libcpp/directives.c,
	  support/cpp/libcpp/errors.c, support/cpp/libcpp/init.c,
	  support/cpp/libcpp/internal.h, support/cpp/libcpp/lex.c,
	  support/cpp/libiberty.h, support/cpp/libiberty/hex.c,
	  support/cpp/libiberty/md5.c, support/cpp/libiberty/splay-tree.c,
	  support/cpp/md5.h:
	  SDCPP synchronized with GCC CPP release version 4.4.3

2010-01-24 Philipp Klaus Krause <pkk AT spth.de>
	* src/SDCCcse.c,
	  src/SDCCval.c,
	  src/SDCCicode.c,
	  src/SDCCsymt.c,
	  src/SDCCsymt.h,
	  src/SDCC.y,
	  src/SDCCdwarf2.c,
	  src/SDCCglue.c,
	  src/z80/gen.c,
	  src/z80/main.c,
	  src/z80/peep.c,
	  src/z80/peeph-z80.def,
	  src/SDCCglobl.h,
	  src/SDCC.lex,
	  src/SDCCast.c,
	  device/include/stdbool.h,
	  support/regression/tests/bug1546986.c,
	  support/regression/tests/constantRange.c,
	  support/regression/tests/bug2805333.c,
	  support/regression/tests/bug1337835.c,
	  support/regression/tests/bitopcse.c,
	  support/regression/tests/bug1723128.c,
	  support/regression/tests/bug-908454.c,
	  support/regression/tests/bug1734654.c,
	  support/regression/tests/bug1745717.c,
	  support/regression/tests/bug2719592.c,
	  support/regression/tests/bug1738367.c,
	  support/regression/tests/funptrs.c,
	  support/regression/tests/bug1509084.c,
	  support/regression/tests/bug1788177.c,
	  support/regression/tests/bitvars.c:
	  Finally implemented true _Bool support.
	* src/SDCCpeeph.c,
	  doc/random-notes.txt:
	  Generic cleanup.

2010-01-24 Borut Razem <borut.razem AT siol.net>

	* sdas/as8051/i51adr.c, sdas/as8051/i51pst.c, sdas/asz80/z80pst.c,
	  sdas/asz80/z80adr.c, sdas/linksrc/lkdata.c, sdas/linksrc/lkmain.c,
	  sdas/linksrc/aslink.h, sdas/as6808/m08adr.c, sdas/as6808/m08pst.c,
	  sdas/asxxsrc/asmain.c, sdas/asxxsrc/asxxxx.h, sdas/asxxsrc/aslex.c,
	  sdas/asxxsrc/asdata.c, sdas/asgb/gbadr.c, sdas/asgb/gbpst.c:
	  optimized .optsdcc handling

2010-01-23 Borut Razem <borut.razem AT siol.net>

	* src/SDCCicode.c, src/SDCCast.c, src/SDCCast.h:
	  fixed bug #1767885: Parameters lost from scope of intermediate inline function
	  applied patches from Pavel Pisa; tahks Pavel
	* support/regression/tests/inline.c:
	  merged inline regression tests bug1717305.c, bug1864577.c and bug 1767885

2010-01-18 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c, sdas/linksrc/lkmain.c, sdas/linksrc/aslink.h:
	  fixed bug #2933892 - Weird default ouput location for linker - regression
	  The sdld command line syntax is now compatible with asxxxx v5.0

2010-01-18 Philipp Klaus Krause <pkk AT spth.de>

	* src/SDCCast.c:
	  Taking the address of _Bool works on the z80 and gbz80 ports.

2010-01-17 Philipp Klaus Krause <pkk AT spth.de>

	* src/SDCCcse.c,
	  src/SDCCicode.c,
	  src/SDCCglue.c,
	  src/z80/gen.c,
	  src/z80/main.c,
	  src/z80/peep.c,
	  src/z80/peeph-z80.def,
	  device/include/stdbool.h,
	  device/lib/z80/crt0.s:
	  Support for bool on the Z80 (RFE #1751355).
	* device/lib/z80/asm_strings.s,
	  device/lib/z80/mulchar.s,
	  device/lib/z80/stubs.s,
	  device/lib/z80/fstubs.s,
	  device/lib/z80/heap.s,
	  device/lib/gbz80/stubs.s,
	  device/lib/gbz80/fstubs.s,
	  device/lib/gbz80/asm_strings.s,
	  device/lib/gbz80/heap.s:
	  Z80 library cleanup.
	* src/SDCCpeeph.c:
	  Enable jump-to-jump optimizations for jump table entries.

2010-01-16 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: sfr at to __sfr __at

2010-01-16 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/SDCCmain.c: added ReadcfgFile() - get options from
	  a sdcc.cfg file.

2010-01-15 Borut Razem <borut.razem AT siol.net>

	* support/regression/ports/hc08/support.c,
	  support/regression/ports/pic14/support.c,
	  support/regression/ports/pic16/support.c,
	  support/regression/ports/xa51/support.c,
	  support/regression/tests/macro.c:
	  _asm and _endasm changed to __asm and __endasm

2010-01-15 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/gbz80/string.c:
	  Removed unused gbz80-specific string routines.

2010-01-14 Borut Razem <borut.razem AT siol.net>

	* src/SDCCerr.c, src/SDCCerr.h, src/SDCC.lex, doc/sdccman.lyx,
	  device/include/mcs51/mcs51reg.h,
	  support/regression/tests/bug2817646.c,
	  support/regression/tests/driverstruct.c,
	  support/regression/tests/nullstring.c,
	  support/regression/tests/bug1546986.c,
	  support/regression/tests/bug-1981238.c,
	  support/regression/tests/array.c,
	  support/regression/tests/bug-1699804.c,
	  support/regression/tests/bug-221100.c,
	  support/regression/tests/bug1839277.c,
	  support/regression/tests/bug-460010.c,
	  support/regression/tests/bug1921073.c,
	  support/regression/tests/bug1839321.c,
	  support/regression/tests/float.c,
	  support/regression/tests/simplefloat.c,
	  support/regression/tests/bug2783061.c,
	  support/regression/tests/critical.c,
	  support/regression/tests/bug1551947.c,
	  support/regression/tests/bug663539.c,
	  support/regression/tests/absolute.c,
	  support/regression/tests/bug-221168.c,
	  support/regression/tests/bug-716242.c,
	  support/regression/tests/bug1348008.c,
	  support/regression/tests/bug1928022.c,
	  support/regression/tests/bug1938300.c,
	  support/regression/tests/bug-880197.c,
	  support/regression/tests/bug1536762.c,
	  support/regression/tests/bug1198642.c,
	  support/regression/tests/bug1749275.c,
	  support/regression/tests/bitopcse.c,
	  support/regression/tests/bug1535242.c,
	  support/regression/tests/bug-868103.c,
	  support/regression/tests/using.c,
	  support/regression/tests/bug1723128.c,
	  support/regression/tests/bug1750318.c,
	  support/regression/tests/bug1409955.c,
	  support/regression/tests/bug1856409.c,
	  support/regression/tests/regtrack.c,
	  support/regression/tests/setjmp.c,
	  support/regression/tests/bug1618050.c,
	  support/regression/tests/float_single.c,
	  support/regression/tests/malloc.c,
	  support/regression/tests/bug-524691.c,
	  support/regression/tests/bug1908493.c,
	  support/regression/tests/bug2761883.c,
	  support/regression/tests/sfr16.c,
	  support/regression/tests/zeropad.c,
	  support/regression/tests/staticinit.c,
	  support/regression/tests/bug2655200.c,
	  support/regression/tests/bug2435941.c,
	  support/regression/fwk/include/testfwk.h,
	  support/regression/fwk/lib/testfwk.c,
	  support/regression/ports/pic14/spec.mk,
	  support/regression/ports/ds390/spec.mk,
	  support/regression/ports/ds390/support.c,
	  support/regression/ports/hc08/spec.mk,
	  support/regression/ports/ucz80/spec.mk,
	  support/regression/ports/mcs51-common/spec.mk,
	  support/regression/ports/mcs51-common/T2_isr.c,
	  support/regression/ports/mcs51-common/support.c,
	  support/regression/generate-cases.py:
	  implemented RFE #2931693: deprecate warnings for sdcc specific keyword
	* configure.in, configure:
	  implemented RFE #2932327: remove unsupported and broken targets xa51 and avr
	* .version, doc/sdccman.lyx: bumped version to 2.9.7

2010-01-11 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure, Makefile.in, sdcc.dsw,
	  sdas/asranlib/asranlib.dsp, sdas/asranlib/Makefile.in:
	  sdas/aslink renamed to sdas/linksrc

2009-01-10 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (genCmp): do not clobber CARRY when storing the
	  result of the comparison (fixes #2929477), cosmetic changes

2010-01-10 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure, Makefile.in, sdas/*/Makefile.in,
	  sdcc/sdcc.dsw, sdas/asranlib/asranlib.dsp, config.dsp:
	  as renamed to sdas, as/link renamed to sdas/aslink,
	  as/z80 renamed to sdac/asz80, as/mcs51 renamed to sdas/as8051,
	  as/hc80 renamed to sdcc/sdas/as6808
	* debugger/mcs51/cmd.c, sim/ucsim/utils.cc, sdcc/sdas/aslink/lklibr.c,
	  support/cpp/libcpp/macro.c: fixed compiler warnings

2010-01-09 Borut Razem <borut.razem AT siol.net>

	* as/*/conf.mk: removed
	  as/conf.mk: added
	  as/*/Makefile.in: use common as/conf.mk
	  as/*/clean.in: unified
	* src/SDCCmain.c, src/z80/main.c,
	  device/lib/z80/Makefile.in, device/lib/gbz80/Makefile.in,
	  as/asxxsrc/asmain.c, as/link/aslink.h,
	  support/regression/Makefile.in,
	  support/regression/ports/ucz80/spec.mk:
	  object file extension for z80 and gb targets changed from .o to .rel
	* .version, doc/sdccman.lyx: bumped version to 2.9.6

2010-01-04 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, support/cpp/libcpp/internal.h,
	  support/cpp/libcpp/lex.c, support/cpp/sdcpp.c:
	  fixed bug #2919991: #Pragma preproc_asm cannot be used by -- std-c99.
	* support/cpp/libcpp/macro.c, support/cpp/version.c:
	  SDCPP synchronized with GCC CPP release version 4.4.2
	* as/link/lklist.c: fixed NULL pointer dereference
	* as/link/lkmain.c: do not complaint when opening optional adb files

2009-12-31 Borut Razem <borut.razem AT siol.net>

	* as/link/lkarea.c, as/link/lkdata.c, as/link/lklist.c,
	  as/link/lks19.c, as/link/lkmain.c, as/link/lkeval.c,
	  as/link/lklibr.c, as/link/lkaomf51.c, as/link/lkhead.c,
	  as/link/lklex.c, as/link/lkrloc.c, as/link/aslink.h:
	  sync with aslink 2.0
	* as/link/lks19.c: include "sdld.c"
	* as/link/aslink.dsp: cleaning
	* as/link/aslink.h: changed the type Character Type Definitions to char

2009-12-25 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c: fixed bug 2912013

2009-12-25 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/link/aslink.dsp, as/link/sdld_all.dsp: fixed destination path of
	sdld.exe, sdldz80.exe, sdldgb.exe, and sdld6808.exe

2009-12-21 Borut Razem <borut.razem AT siol.net>

	* Makefile.in: fixed hc08
	* Makefile.in, as/link/Makefile.in: fixed installation

2009-12-20 Borut Razem <borut.razem AT siol.net>

	* as/link/lkmain.c, as/link/lksdcclib.c,
	  as/link/lklib.c, as/link/lklex.c, as/link/aslink.h:
	  fixed "o" file extension for z80 and gb targets

2009-12-19 Borut Razem <borut.razem AT siol.net>

	* configure, Makefile.in, configure.in, as/link/Makefile.in,
	  all.dsp, as/link/aslink.dsp, as/link/sdld_all.dsp,
	  as/link/lkmain.c, as/link/lkgb.c, as/link/lkihx.c,
	  as/link/sdld.c, as/link/sdld.h, as/link/lkmem.c,
	  as/link/clean.mk, as/link/lkrloc.c: modified
	  as/link/lkarea.c, as/link/readme.390, conf.mk, aslink.dsp:
	  moved from as/link/mcs51,
	  as/link/z80, as/link/mcs51, as/link/hc08: removed,
	  unification of lkarea.c, one polymorphic sdld
	* as/asxxsrc/sdas.h, as/asxxsrc/sdas.c:
	  renamed TRAGET_IS_XXXX to TARGET_ID_XXXX
	* .version, doc/sdccman.lyx: bumped version to 2.9.5

2009-12-18 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/abs.c, device/lib/labs.c: assembler version
	  for mcs51, other targets slightly shorter too
	* support/regression/tests/abs.c: added regression test

2009-12-17 Indy Sams < drift_solutions AT users.sourceforge.net >

	* device/lib/_strpbrk.c: fixed bug #2908537 (svn commit by Frieder)

2009-12-17 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/tests/strpbrk.c: added regression test

2009-12-16 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/w7100.h: added.

2009-12-16 Borut Razem <borut.razem AT siol.net>

	* as/link/lkihx.c,
	  as/link/z80/Makefile.in, as/link/z80/linkz80.dsp,
	  as/link/z80/linkgbz80.dsp,
	  as/link/mcs51/Makefile.in, as/link/mcs51/aslink.dsp,
	  as/link/hc08/Makefile.in, as/link/hc08/link_hc08.dsp,
	  as/link/z80/lkihx.c, as/link/hc08/lkihx.c
	  as/link/mcs51/lkihx.c: unification of lkihx.c

2009-12-14 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic16devices.txt:
	  mask _XINST for 18f97j60 family, fix configword locations
	* device/include/pic16/pic18f24j50.h,
	  device/include/pic16/pic18f25j50.h,
	  device/include/pic16/pic18f44j50.h,
	  device/include/pic16/pic18f45j50.h,
	  device/include/pic16/pic18f46j50.h,
	  device/include/pic16/pic18f66j60.h,
	  device/include/pic16/pic18f66j65.h,
	  device/include/pic16/pic18f67j60.h,
	  device/include/pic16/pic18f86j60.h,
	  device/include/pic16/pic18f86j65.h,
	  device/include/pic16/pic18f87j60.h,
	  device/include/pic16/pic18f96j60.h,
	  device/include/pic16/pic18f96j65.h,
	  device/include/pic16/pic18f97j60.h:
	  add symbolic addresses to configuration bits
	* device/include/pic16/pic18fregs.h: add __CONFIG() macro

2009-12-14 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: fixed crashing if -o option is not defined,
	  bug #2913769: sdcc crashes on cygwin
	* as/link/lkgb.c, as/link/z80/lkihx.c, as/link/lkrloc.c,
	  as/link/z80/Makefile.in, as/link/z80/linkz80.dsp,
	  as/link/z80/linkgbz80.dsp,
	  as/link/mcs51/Makefile.in, as/link/mcs51/aslink.dsp,
	  as/link/hc08/Makefile.in, as/link/hc08/link_hc08.dsp,
	  as/link/z80/lkrloc.c, as/link/hc08/lkrloc.c
	  as/link/mcs51/lkrloc.c:
	  unification of lkrloc.c

2009-12-13 Borut Razem <borut.razem AT siol.net>

	* as/link/aslink.h. as/link/lksym.c, as/link/lkstore.c:
	  StrStore() replaced with strsto(), removed as/link/lkstore.c
	* as/link/lkgb.c, as/link/lkgg.c, as/link/z80/lkgb.c,
	  as/link/z80/lkgg.c, as/link/z80/Makefile.in,
	  as/link/z80/linkz80.dsp, as/link/z80/linkgbz80.dsp,
	  as/link/mcs51/Makefile.in, as/link/mcs51/aslink.dsp,
	  as/link/hc08/Makefile.in, as/link/hc08/link_hc08.dsp:
	  as/link/z80/lkgb.c and as/link/z80/lkgg.c moved to as/link
	* as/link/lkelf.c: added casts to new()
	* as/link/lkmem.c: fixed code asld6808 crash
	* all.dsp, as/link/z80/linkz80.dsp, as/link/z80/linkgbz80.dsp:
	  fixed for new sdld names
	* src/SDCCmain.c: fixed cygwin compilation

2009-12-12 Borut Razem <borut.razem AT siol.net>

	* as/link/z80/lkmain.c: removed
	* as/link/z80/linkgbz80.dsp, as/link/z80/linkz80.dsp,
	  as/link/z80/Makefile.in: use as/link/lkmain.c
	* as/link/lkmain.c: fixed command line option handling
	* src/port.h, src/SDCCmain.c, src/z80/main.c:
	  fixed crt object file handling with asld, ...
	* as/link/lkdata.c, as/link/mcs51/lkarea.c,
	  as/link/aslink.h, as/link/hc08/Makefile.in,
	  as/link/mcs51/Makefile.in, as/link/z80/Makefile.in,
	  as/link/z80/linkz80.dsp, as/link/z80/linkgbz80.dsp,
	  as/link/mcs51/aslink.dsp, as/link/hc08/link_hc08.dsp:
	  modified
	  as/link/z80/lks19.c, as/link/z80/lkmem.c,
	  as/link/mcs51/lks19.c, as/link/mcs51/lkmem.c,
	  as/link/hc08/lks19.c, as/link/hc08/lkmem.c,
	  as/link/hc08/lkelf.c: moved to as/link
	  unification of lkelf.c, lks19.c and lkmem.c

2009-12-10 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* all.dsp, as/link/hc08/link_hc08.dsp, as/link/mcs51/aslink.dsp:
	 renamed linker executables.

2009-12-04 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: renamed liker executables
	* as/link/mcs51/Makefile.in, as/link/hc08/Makefile.in:
	  fixed installation linker executable name

2009-12-03 Borut Razem <borut.razem AT siol.net>

	* device/lib/z80/Makefile.in, device/lib/gbz80/Makefile.in,
	  device/lib/ds390/Makefile.in, device/lib/Makefile.in,
	  device/lib/ds400/Makefile.in, device/lib/mcs51/Makefile.in,
	  device/lib/hc08/Makefile.in:
	  fixed bug #2907642: version of make > 3.80 required to build SDCC
	* as/asxxsrc/asxxxx.h: fixed typo

2009-12-02 Borut Razem <borut.razem AT siol.net>

	* as/link/hc08/link_hc08.dsp, as/link/mcs51/aslink.dsp,
	  as/link/z80/linkgbz80.dsp, as/link/z80/linkz80.dsp,
	  as/link/lkmain.c: re-enabled msvc build

2009-12-01 Borut Razem <borut.razem AT siol.net>

	* as/link/aslink.h, as/link/lkmain.c, as/link/z80/Makefile.in,
	  as/link/z80/lkmain.c:
	  temporarily re-added special lkmain.c for z80 and gb targets

2009-11-29 Borut Razem <borut.razem AT siol.net>

	* src/mcs51/main.c, src/z80/main.c, src/hc08/main.c, src/ds390/main.c,
	  as/asxxsrc/sdas.c, as/link/Makefile.in, as/link/lkmain.c,
	  as/link/z80/Makefile.in, as/link/mcs51/Makefile.in,
	  as/link/hc08/Makefile.in, as/link/aslink.h, as/link/sdlink.[ch],
	  as/link/sdld.[ch], as/asxxsrc/sdas.c, as/link/lkdata.c,
	  as/link/lkmain.c:
	  fixed bug in target detection, sdlink renamed to sdld

2009-11-28 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/asdata.c, as/asxxsrc/asmain.c, as/asxxsrc/asxxxx.h:
	  mark sdas specifics
	* as/asxxsrc/sdas.c, as/asxxsrc/sdas.h, as/link/aslink.h,
	  as/link/hc08/lkarea.c, as/link/hc08/lkmain.c, as/link/hc08/lkmem.c,
	  as/link/hc08/Makefile.aslink, as/link/hc08/Makefile.in,
	  as/link/lkmain.c, as/link/Makefile.in, as/link/mcs51/lkmain.c,
	  as/link/mcs51/Makefile.aslink, as/link/mcs51/Makefile.in,
	  as/link/z80/linkgbz80.dsp, as/link/z80/linkz80.dsp,
	  as/link/z80/lkarea.c, as/link/z80/lkgb.c, as/link/z80/lkmain.c,
	  as/link/z80/lkmem.c, as/link/z80/Makefile.in, src/ds390/main.c,
	  src/hc08/main.c, src/mcs51/main.c, src/z80/main.c,
	  as/link/sdlink.[ch]:
	  lkmain.c unification; linkers renamed to sdlinkXXXX

2009-11-27 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/config.guess, sim/ucsim/ltmain.sh, sim/ucsim/config.sub:
	  upgraded to libtool 2.2.5,
	  fixed dug #2897829: ancient-libtool sim/ucsim/ltmain.sh 1.4.2

2009-11-06 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (pic14_getDataSize): use true size of generic
	  pointers to fix assignment of the result of pointer arithmetics

2009-11-05 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (genUnpackBits): setup FSR before using it, fixes
	  "[Sdcc-user] The damned loop from hell"; plus cosmetic changes

2009-11-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmem.c(defaultOClass, allocDefault): refactored
	* src/SDCCmem.h: added defaultOClass
	* src/SDCCsymt.c(processFuncArgs): use defaultOClass to support storage
	  class in parameters, fixes bug 2761883
	* support/regression/tests/bug2761883.c: new, added
	* doc/sdccman.lyx: removed warning about ignored storage class in params

2009-11-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c(constExprTree): struct fields have a constant offset

2009-11-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c(initValPointer): fixed bug 1503239
	* support/regression/tests/bug1928022.c: added test cases

2009-11-01 Philipp Klaus Krause <pkk AT spth.de>

	* src/SDCCpeeph.c,
	* src/mcs51/peeph.def,
	* src/avr/peeph.def,
	* src/z80/peeph-z80.def,
	* src/ds390/peeph.def,
	* support/regression/tests/bug-2890326.c:
	  Fixed bug #2890326.

2009-11-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c(addSymChain, checkDecl): fixed bug 1470790
	* support/regression/tests/zeropad.c: added test

2009-11-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c(decorateType,CAST): fold literal pointers
	* src/SDCCdflow.c(usedInRemaining),
	* src/SDCCicode.c(geniCodeCall): fix for non-symbol values
	* src/SDCCsymt.c(isConstant): reverted, make literals const instead
	* src/SDCCval.c(constFloatVal, constFixed16x16Val, constVal, constCharVal,
	  strVal): make literals const
	  (valForArray),
	  (valForStructElem): fixed bug 1928022 with folded literal pointers
	* src/ds390/gen.c(genCall),
	* src/hc08/gen.c(genCall),
	* src/mcs51/gen.c(genCall),
	* src/z80/gen.c(emitCall): handle literal function pointers
	* support/regression/tests/bug1928022.c: new, added

2009-10-30 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/P89LPC922.h, device/include/mcs51/P89LPC932.h,
	  device/include/mcs51/p89lpc938.h: fixed bug 2889428, double definition
	  for CMP1 and CMP2.
	* device/include/mcs51/p89lpc925.h: for consistency with the other lpc
	  files, renamed CMP1b and CMP2b to CMP_1 and CMP_2.

2009-10-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c(newIfxNode): fixed bug 2887512
	  (decorateType, '='): use different error for function pointers
	* src/SDCCglue.c(printIvalFuncPtr): fixed bug 2806238, don't throw away
	  function pointer value just like that
	  (printIval): use different error for function pointers
	* src/SDCCsymt.c(compareFuncType, compareType): new function to compare
	  function pointer types
	  (isConstant): treat literals as constant too to warn before bug 2887512

2009-10-26 Borut Razem <borut.razem AT siol.net>

	* doc/cdbfileformat.lyx, doc/sdccman.lyx, doc/test_suite_spec.lyx:
	  converted to LyX 1.6.4 (\lyxformat 345) format

2009-10-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/mcs51/lkarea.c(lnkarea2): fixed bug 2839083

2009-10-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c(decorateType): also set OCLS for PTR_OP, fixed bug 2823963
	* src/SDCCast.h: cosmetic changes
	* src/SDCCicode.c,
	* src/SDCCicode.h: moved setOClass prototype
	* support/regression/tests/bug2823963.c: new, added

2009-10-22 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/p89lpc9321.h, device/include/mcs51/p89lpc9331.h,
	  device/include/mcs51/p89lpc9351.h: added

2009-10-21 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c(createIvalPtr),
	* src/SDCCglue.c(printIvalFuncPtr): fixed bug 2881971
	* support/regression/tests/zeropad.c: added test

2009-10-18 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: assemblers renamed to sdasxxxx

2009-10-17 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/mcs51/gen.c: Fixed bug 2880909
	* all.dsp, device/lib/make51lib.bat: renamed assemblers to sdasxxxx

2009-10-17 Borut Razem <borut.razem AT siol.net>

	* as/asgb/asgb.dsp, as/asgb/Makefile.in, as/asxxsrc/asexpr.c,
	  as/asxxsrc/asmain.c, as/asxxsrc/asout.c, as/asxxsrc/sdas.c,
	  as/asxxsrc/sdas.h, as/hc08/as_hc08.dsp, as/hc08/Makefile.in,
	  as/mcs51/asx8051.dsp, as/mcs51/Makefile.in, as/z80/as_z80.dsp,
	  as/z80/Makefile.in, device/lib/gbz80/Makefile.in,
	  device/lib/hc08/Makefile.in, device/lib/mcs51/Makefile.in,
	  device/lib/z80/Makefile.in, src/ds390/main.c, src/hc08/main.c,
	  src/mcs51/main.c, src/z80/main.c,
	  support/regression/ports/gbz80/spec.mk,
	  support/regression/ports/hc08/spec.mk,
	  support/regression/ports/ucz80/spec.mk,
	  support/regression/ports/z80/spec.mk:
	  assemblers renamed to sdasxxxx:
	    as-gbz80 -> sdasgb,
	    as-hc08 -> sdas6808
	    asx8051 -> sdas8051
	    as-z80 -> sdasz80
	* .version, doc/sdccman.lyx: bumped version to 2.9.4

2009-10-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_fsadd.c: optimized (for mcs51-xstack) and enhanced precision
	  to fix some float_single regression tests
	* device/lib/_fssub.c: optimized
	* device/lib/asinf.c,
	* device/lib/acosf.c,
	* device/lib/asincosf.c: optimized
	* device/lib/mcs51/crtxpop.asm,
	* device/lib/mcs51/crtxpopbits.asm,
	* device/lib/mcs51/crtxpush.asm,
	* device/lib/mcs51/crtxpushr0.asm: new (slow) helper functions for xstack
	* device/lib/mcs51/Makefile.in: added crtxpush... and crtxpop...
	* src/mcs51/gen.c(aopForSym): optimized stack access
	  (xstackRegisters): new, calculates bitmask
	  (saveRegisters, unsaveRegisters): use (slow) crtxpush/pop to save memory
	  (genFunction): optimized stack access
	* src/mcs51/peep.c(removeDeadMove): removed unused parm
	* support/regression/tests/float_single.c: enabled now passing tests

2009-10-12 Borut Razem <borut.razem AT siol.net>

	* as/link/aslink.h, as/link/hc08/lkarea.c, as/link/hc08/lkmain.c,
	  as/link/lkdata.c, as/link/lksym.c, as/link/mcs51/lkarea.c,
	  as/link/mcs51/lkmain.c, as/link/z80/lkarea.c, as/link/z80/lkmain.c:
	  itroduced zflag for case senditivity; zflag is forced to 1

2009-10-10 Borut Razem <borut.razem AT siol.net>

	* as/asgb/Makefile.in, as/z80/Makefile.in: added -lm to LDFLAGS

2009-10-10 Borut Razem <borut.razem AT siol.net>

	* as/hc08/m08adr.c, as/hc08/m08mch.c, as/hc08/m6808.h,
	  as/mcs51/i51adr.c, as/mcs51/i51mch.c, as/mcs51/i51pst.c,
	  as/mcs51/i8051.h, as/z80/z80.h, as/z80/z80adr.c, as/z80/z80mch.c:
	  targets synced with asxxxx v2.0 and later
	* as/asgb/asgb.dsp, as/asgb/clean.mk, as/asgb/conf.mk, as/asgb/gb.h,
	  as/asgb/gbadr.c, as/asgb/gbext.c, as/asgb/gbmch.c, as/asgb/gbpst.c,
	  as/asgb/Makefile.in,
	  as/Makefile.in, as/z80/as_gbz80.dsp,
	  as/mcs51/i51ext.c, as/z80/Makefile.in, as/z80/z80.h, as/z80/z80adr.c,
	  as/z80/z80ext.c, as/z80/z80mch.c, as/z80/z80pst.c,
	  configure, configure.in, Makefile.in, sdcc.dsw:
	  split asz80 and asgb
	* as/asgb/gb.h, as/asgb/gbmch.c, as/asxxsrc/asdata.c,
	  as/asxxsrc/asexpr.c, as/asxxsrc/aslex.c, as/asxxsrc/asmain.c,
	  as/asxxsrc/asxxxx.h, as/hc08/m08adr.c, as/hc08/m08mch.c,
	  as/hc08/m6808.h, as/link/aslink.h, as/link/hc08/lkarea.c,
	  as/link/hc08/lkelf.c, as/link/hc08/lkihx.c, as/link/hc08/lkmain.c,
	  as/link/hc08/lkrloc.c, as/link/hc08/lks19.c, as/link/lkdata.c,
	  as/link/lkeval.c, as/link/lkhead.c. as/link/lklist.c,
	  as/link/lknoice.c, as/link/lksym.c, as/link/mcs51/lkarea.c,
	  as/link/mcs51/lkihx.c, as/link/mcs51/lkmain.c,
	  as/link/mcs51/lkrloc.c, as/link/mcs51/lks19.c, as/link/z80/lkarea.c,
	  as/link/z80/lkihx.c, as/link/z80/lkmain.c, as/link/z80/lkrloc.c,
	  as/link/z80/lks19.c, as/mcs51/i51mch.c, as/mcs51/i8051.h,
	  as/z80/z80.h, as/z80/z80mch.c: type Addr_T renamed to a_uint,
	  function comma() moved to aslex.c

2009-10-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCC.y,
	* src/SDCCsymt.c(mergeDeclSpec): fixed bug 1376285

2009-10-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCerr.c,
	* src/SDCCerr.h: changed W_STRUCT_AS_ARG to error E_STRUCT_AS_ARG
	* src/SDCCsymt.c(aggregateToPointer),
	* src/SDCCast.c(processParms): throw error for struct parameters,
	  fixes bug 2874687

2009-10-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c(initValPointer, initPointer): fixed bug 2166213

2009-10-05 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/asmain.c:
	  removed forced wide listing format for symbol table and
	  removed forced enable case sensitivity for symbols in case of sdas

2009-10-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/asxxsrc/assubr.c: include sdas.h
	* as/asxxsrc/assym.c(symeq): type of n is size_t
	* src/SDCCglue.c(initPointer): fixed bug 2655200 by using oclass->ptrType
	* support/regression/tests/bug2655200.c: enabled --model-medium

2009-10-04 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/asdata.c, as/asxxsrc/aslex.c, as/asxxsrc/assubr.c,
	  as/asxxsrc/assym.c, as/asxxsrc/asxxxx.h:
	  partially synced with asxxxx v2.0
	* src/ds390/main.c, src/hc08/main.c, src/mcs51/main.c, src/z80/main.c:
	  added -z and -w option to assembler invocation

2009-10-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/string.h,
	* device/lib/_strlen.c: return size_t
	* device/lib/_memchr.c,
	* device/lib/_strcspn.c: cosmetic changes
	* device/lib/sincosf.c,
	* device/lib/cosf.c,
	* device/lib/sinf.c: use BOOL instead of larger int
	* src/z80/gen.c,
	* src/z80/mappings.i: cosmetic changes
	* src/SDCCsymt.c (pointerTypes, mergeDeclSpec, checkSClass): fixed bug 2817646
	  (checkFunction): disabled __naked
	  (dbuf_printTypeChain): more like RFE 2824498, print C-ish
	  (isRestrict): added
	* src/SDCCsymt.h: added IS_RESTRICT, mergeDeclSpec, isRestrict
	* src/SDCC.y: use mergeDeclSpec to fix bug 2817646
	* src/SDCCicode.c (checkPtrQualifiers, checkTypes, geniCodeAssign,
	  geniCodeParms, geniCodeCall): fixed bug 1302048
	* src/SDCCerr.c,
	* src/SDCCerr.h: added warning W_TARGET_LOST_QUALIFIER
	* support/regression/tests/bug-136564.c,
	* support/regression/tests/bug-223113.c,
	* support/regression/tests/bug1839277.c,
	* support/regression/tests/bug2655200.c: added necessary const keywords
	* support/regression/tests/strtok.c: removed incorrect const keyword
	* support/regression/tests/bug2817646.c: new, added
	* .version,
	* doc/sdccman.lyx: bumped version to 2.9.3

2009-10-03 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/z80-peeph.def:
	  Reenabled unproblematic peephole changes.

2009-10-03 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/z80-peeph.def:
	  Reverted recent peephole changes.

2009-09-30 Philipp Klaus Krause <pkk AT spth.de>
	* src/SDCCcse.c:
	  A step towards #1923898.

2009-09-29 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/gen.c,
	  Minor 16-bit addition improvement.

2009-09-28 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/ralloc.c,
	* src/z80/peeph-z80.def:
	  Improved usage of accumulator as inter-i-code temporary.

2009-09-28 Philipp Klaus Krause <pkk AT spth.de>
	* src/SDCCOpt.c:
	  Burn the corpses to fight necromancy.

2009-09-27 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/gen.c,
	* src/z80/ralloc.c,
	* src/z80/peeph-z80.def
	  Improved usage of accumulator as inter-i-code temporary.

2009-09-26 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/peeph-z80.def:
	  Minor peephole improvement.

2009-09-26 Philipp Klaus Krause <pkk AT spth.de>
	* src/SDCCpeeph.c,
	  src/z80/peeph-z80.def:
	  Fixed #2867572.

2009-09-20 Philipp Klaus Krause <pkk AT spth.de>
	* device/include/string.h,
	  device/lib/_strspn.c,
	  device/lib/incl.mk,
	  device/lib/_memchr.c,
	  device/lib/_strcspn.c,
	  device/lib/_memcmp.c:
	  Minor string library improvements, including #772292.

2009-09-20 Philipp Klaus Krause <pkk AT spth.de>
	* src/SDCCmain.c:
	  Fixed #2819835 applying #2853488.

2009-09-20 Philipp Klaus Krause <pkk AT spth.de>
	* debugger/mcs51/sdcdb.c,
	  src/SDCCerr.c,
	  src/z80/gen.c,
	  src/z80/mappings.i,
	  src/pic16/gen.c,
	  src/pic16/pcode.c,
	  support/librarian/sdcclib.c:
	  Applied spelling patch #2862563.

2009-09-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/at89Sx051.h: new, added, applied patch 2858106,
	  thanks Ben Boeckel

2009-09-08 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/p89v51rd2.h: Watchdog Timer Control sfr is
	  bit addressable.

2009-08-31 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genAnd, genOr): applied patch for bug 2719592,
	  thanks to Robert Larice
	* support/regression/tests/bug2719592.c: new, added

2009-09-02 Borut Razem <borut.razem AT siol.net>

	* support/regression/ports/gbz80/spec.mk,
	  support/regression/ports/ucz80/spec.mk,
	  support/regression/ports/z80/spec.mk: fixed *z80 regression test if
	  built ran directly from sdcc source directory

2009-08-31 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/asxxsrc/asmain.c,
	* as/asxxsrc/asxxxx.h: fixed warning, main should return int
	* as/hc08/Makefile.in,
	* as/mcs51/Makefile.in: added -lm to LDFLAGS

2009-08-31 Raphael Neider <rneider AT web.de>

	* device/lib/_fsmul.c, device/lib/pic/libsdcc/fsmul.c,
	  device/lib/pic16/libsdcc/float/fsmul.c: fix overflow during rounding
	* support/regression/tests/float.c: add testcase for the fix

2009-08-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (aopGet): applied patch 2837100 to fix bug 2805333
	* support/regression/tests/bug2805333.c: new, added,
	  thanks Ruud van Silfhout

2009-08-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/ctype.h: removed _REENTRANT as they are already with
	  --stack-auto, optimized _tolower and _toupper with char casts
	* device/include/string.h,
	* device/lib/_strcat.c,
	* device/lib/_strchr.c,
	* device/lib/_strcmp.c,
	* device/lib/_strcpy.c,
	* device/lib/_strcspn.c,
	* device/lib/_strlen.c,
	* device/lib/_strncat.c,
	* device/lib/_strncmp.c,
	* device/lib/_strncpy.c,
	* device/lib/_strpbrk.c,
	* device/lib/_strrchr.c,
	* device/lib/_strspn.c,
	* device/lib/_strstr.c,
	* device/lib/_strtok.c,
	* device/lib/pic16/libc/stdio/printf_small.c,
	* device/lib/pic16/libc/stdio/printf_tiny.c,
	* device/lib/pic16/libc/stdio/vfprintf.c,
	* device/lib/printf_large.c,
	* device/lib/time.c: added required const keywords to pointers
	* device/lib/pic16/debug/Makefile.in: changed ommitFramePtr to omitFramePtr
	* support/regression/tests/bug-716242.c,
	* support/regression/tests/nullstring.c,
	* support/regression/tests/strstr.c,
	* support/regression/tests/strtok.c: added const and set svn-properties
	* support/regression/tests/bug1908493.c: added cast
	* support/regression/tests/float_single.c: fixed check for result=0.0

2009-08-28 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/asout.c: as/mcs51/asout.c moved to as/asxxsrc/asout.c
	* as/mcs51/asout.c, as/hc08/asout.c, as/z80/asout.c: removed
	* as/asxxsrc/sdas.c, as/asxxsrc/sdas.h:
	  added function is_sdas_target_mcs51_like()
	* as/z80/as_gbz80.dsp, as/hc08/as_hc08.dsp, as/z80/as_z80.dsp,
	  as/mcs51/asx8051.dsp, as/hc08/Makefile.in, as/mcs51/Makefile.in,
	  as/z80/Makefile.in: updated project files
	* as/asxxsrc/asexpr.c: as/mcs51/asexpr.c moved to as/asxxsrc/asexpr.c
	* as/mcs51/asexpr.c, as/hc08/asexpr.c, as/z80/asexpr.c: removed
	* as/z80/as_gbz80.dsp, as/hc08/as_hc08.dsp, as/z80/as_z80.dsp,
	  as/mcs51/asx8051.dsp, as/hc08/Makefile.in, as/mcs51/Makefile.in,
	  as/z80/Makefile.in: updated project files
	* support/regression/ports/z80/spec.mk:
	  unified as-z80 and as-gbz80 call convention with other assemblers

2009-08-27 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/asmain.c:
	  HUGE changed to ASXXXX_HUGE due to redefinition in math.h
	* support/regression/ports/gbz80/spec.mk,
	  support/regression/ports/ucz80/spec.mk,
	  support/regression/ports/z80/spec.mk:
	  unified as-z80 and as-gbz80 call convention with other assemblers

2009-08-26 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/sdas.c, as/asxxsrc/sdas.h: added
	* as/asxxsrc/asmain.c: calls sdas
	* src/z80/main.c: unified as-z80 and as-gbz80 call convention with
	  other assemblers
	* as/hc08/Makefile.in, as/mcs51/Makefile.in, as/z80/Makefile.in,
	  as/hc08/as_hc08.dsp, as/mcs51/asx8051.dsp, as/z80/as_gbz80.dsp,
	  as/z80/as_z80.dsp: updated project files
	* device/lib/z80/Makefile.in, device/lib/gbz80/Makefile.in:
	  unified call convention, sync with device/lib/z80/Makefile.in
	* as/asxxsrc/aslist.c: as/mcs51/aslist.c moved to as/asxxsrc/aslist.c
	* as/asxxsrc/asxxxx.h, as/z80/asout.c, as/mcs51/asout.c,
	  as/hc08/asout.c:
	  HUGE changed to ASXXXX_HUGE due to redefinition in math.h
	* as/asxxsrc/asmain.c: forced wflag and zflag
	* as/z80/aslist.c, as/mcs51/aslist.c, as/hc08/aslist.c: removed

2009-08-25 Borut Razem <borut.razem AT siol.net>

	* as/hc08/Makefile.in, as/mcs51/Makefile.in, as/z80/Makefile.in:
	  removed duplicated asdata.c
	* as/hc08/aslist.c, as/hc08/asmain.c, as/hc08/asout.c,
	  as/mcs51/aslist.c, as/mcs51/asmain.c, as/mcs51/asout.c:
	  fixed copy&paste problem in S_ORG
	* as/asxxsrc/asmain.c, as/hc08/Makefile.in, as/mcs51/Makefile.in,
	  as/z80/Makefile.in,
	* as/mcs51/asx8051.dsp, as/z80/as_z80.dsp, as/hc08/as_hc08.dsp,
	  as/z80/as_gbz80.dsp: as/mcs51/asmain.c moved to s/asxxsrc/asmain.c
	* as/hc08/asmain.c, as/z80/asmain.c: removed
	* as/asxxsrc/asmain.c, as/asxxsrc/asdata.c, as/asxxsrc/asxxxx.h:
	  added wflag and zflag
	* as/hc08/aslist.c, as/hc08/asout.c, as/mcs51/aslist.c,
	  as/mcs51/asout.c: fixed compiler wrning about unused variables

2009-08-24 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/asdata.c, as/asxxsrc/asxxxx.h, as/asxxsrc/aslex.c,
	  as/asxxsrc/asnoice.c, as/asxxsrc/assubr.c, as/asxxsrc/assym.c,
	  as/hc08/asexpr.c, as/hc08/aslist.c, as/hc08/asmain.c,
	  as/hc08/asout.c, as/hc08/m08adr.c, as/hc08/m08ext.c,
	  as/hc08/m08mch.c, as/hc08/m08pst.c, as/mcs51/asexpr.c,
	  as/mcs51/aslist.c, as/mcs51/asmain.c, as/mcs51/asout.c,
	  as/mcs51/i51adr.c, as/mcs51/i51ext.c, as/mcs51/i51mch.c,
	  as/mcs51/i51pst.c, as/z80/asexpr.c, as/z80/aslist.c,
	  as/z80/asmain.c, as/z80/asout.c, as/z80/z80adr.c,
	  as/z80/z80ext.c, as/z80/z80mch.c, as/z80/z80pst.c,
	  as/hc08/as_hc08.dsp, as/mcs51/asx8051.dsp, as/z80/as_gbz80.dsp,
	  as/z80/as_z80.dsp,
	  as/hc08/Makefile.in, as/mcs51/Makefile.in, as/z80/Makefile.in:
	  as/mcs51/asdata.c moved to as/asxxsrc/asdata.c,
	  as/mcs51/asm.h moved to as/asxxsrc/asxxxx.h
	* as/hc08/asdata.c, as/mcs51/asdata.c, as/z80/asdata.c,
	  as/hc08/asm.h, as/mcs51/asm.h, as/z80/asm.h: removed

2009-08-10 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/assubr.c, as/hc08/asm.h, as/hc08/asmain.c,
	  as/mcs51/asm.h, as/mcs51/asmain.c, as/z80/asm.h:
	  increnemt aserr only on fatal errors

2009-08-09 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/assubr.c: moved and mergerd from as/mcs51/assubr.c
	  as/hc08/assubr.c, as/mcs51/assubr.c, as/z80/assubr.c: deleted
	  as/hc08/asmain.c, as/mcs51/asmain.c: removed variable fatalError
	* as/z80/as_gbz80.dsp, as/hc08/as_hc08.dsp,
	  as/z80/as_z80.dsp, as/mcs51/asx8051.dsp: assubr.c moved to as/asxxsrc
	* as/hc08/Makefile.as_hc08, as/mcs51/Makefile.asx8051,
	  as/hc08/Makefile.bcc, as/link/hc08/Makefile.bcc,
	  as/link/mcs51/Makefile.bcc, as/mcs51/Makefile.bcc,
	  as/z80/Makefile.bcc, device/examples/ds390/tinitalk/Makefile.bcc,
	  Makefile.bcc, src/avr/Makefile.bcc, src/ds390/Makefile.bcc,
	  src/hc08/Makefile.bcc, src/izt/Makefile.bcc, src/Makefile.bcc,
	  src/mcs51/Makefile.bcc, src/pic16/Makefile.bcc, src/pic/Makefile.bcc,
	  src/xa51/Makefile.bcc, src/z80/Makefile.bcc, Bcc.inc
	  support/cpp/Makefile.bcc, support/librarian/Makefile.bcc,
	  support/packihx/Makefile.bcc: removed unmaintained makefiles,
	  implemented RFE #2786753: Remove Borland C support
	* support/Util/dbuf_string.h: include stdio.h

2009-08-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/pic16/libc/Makefile.in,
	* device/lib/pic16/libdev/Makefile.in,
	* device/lib/pic16/libio/Makefile.in,
	* device/lib/pic16/libm/Makefile.in,
	* device/lib/pic16/libsdcc/Makefile.in,
	* device/lib/pic16/startup/Makefile.in,
	* device/lib/pic16/Makefile.common,
	* device/lib/pic16/Makefile.in,
	* src/hc08/main.c (_hc08_setDefaultOptions),
	* src/pic16/gen.c (genFunction, genEndFunction),
	* src/pic16/NOTES,
	* src/SDCCglobl.h,
	* src/SDCCmain.c,
	* src/z80/gen.c (genFunction),
	* doc/sdccman.lyx: changed ommitFramePtr to omitFramePtr
	* src/mcs51/main.c (_mcs51_finaliseOptions),
	* src/SDCCmain.c (parseCmdLine): moved mcs51 specific code for float_rent
	* src/SDCCast.h,
	* src/SDCCast.c (decorateType): removed incorrect fix for bug 1372851 which
	   caused bug 1458678
	  (CodePtrPointsToConst),
	* src/SDCCicode.c (isOperandVolatile),
	* src/SDCCsymt.h (IS_CONSTANT, IS_VOLATILE),
	* src/SDCCsymt.c (structElemType, checkSClass, isConstant, isVolatile)
	* src/SDCCglue.c (emitRegularMap, initPointer),
	* src/pic16/glue.c (pic16_initPointer): skip arrays when setting/checking
	   const/volatile, fixes bugs 1372851 and 1458678
	* src/SDCCbitv.c (bitVectnBitsOn): made mask const
	* src/SDCCicode.c (opFromOpWithDU),
	* src/SDCCopt.c (replaceRegEqv): use OPDEFS and OP_USES
	* src/SDCCptropt.c: cosmetic changes
	* src/z80/gen.c (isRegString, isConstantString): renamed isConstant and
	  made them static
	* support/regression/tests/bug1458678.c: new, added

2009-08-06 Philipp Klaus Krause <pkk AT spth.de>

	* src/SDCCpepph.c:
	  Fixed #1947081.
	* src/z80/peeph-z80.def:
	  Fixed #1703943.

2009-08-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/lksym.c (newsym): only allow redefinition in ABS area
	  fixes bug 1057171
	* src/hc08/main.c,
	* src/mcs51/main.c,
	* src/z80/main.c: made RSEG absolute
	* src/SDCCglue.c (emitDebugSym): new, factored out
	  (emitRegularMap): add org 0x0000 to SFR/SBIT,
	  (emitRegularMap, emitStaticSeg) fixed bug for absolute debug symbols
	* src/SDCCmem.h,
	* src/SDCCsymt.h: cosmetic changes
	* src/SDCCsymt.c (dbuf_printTypeChain): implemented RFE 2824498

2009-07-26 Borut Razem <borut.razem AT siol.net>

	* support/regression/Makefile.in,
	  support/regression/ports/pic14/spec.mk,
	  support/regression/ports/z80/spec.mk,
	  support/regression/ports/pic16/spec.mk,
	  support/regression/ports/gbz80/spec.mk,
	  support/regression/ports/ds390/spec.mk,
	  support/regression/ports/hc08/spec.mk,
	  support/regression/ports/ucz80/spec.mk,
	  support/regression/ports/host/spec.mk,
	  support/regression/ports/mcs51-common/spec.mk,
	  support/regression/ports/xa51/spec.mk:
	  preparations for running WIN32 regression test on Linux / wine

2009-07-22 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: add SDCC bin directory to path if silent mode

2009-07-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/asranlib/asranlib.dsp: removed all windows library dependencies
	* as/mcs51/asx8051.dsp: no debugging for Release build
	* src/SDCCast.h,
	* src/SDCCast.c (createRMW): IS_DEREF now also checks for PTR_OP
	* src/SDCCicode.c (geniCodeStruct): added assert for really being a struct,
	  (ast2iCode): IS_DEREF now also checks for PTR_OP, fixes bug 2821333
	* src/SDCCptropt.c: changed all TAB's to spaces
	* support/regression/tests/float_single.c,
	* device/lib/asincosf.c: removed unnecessary macros, const on global always
	  means 'put it in code memory', and 'reentrant' is predefined in testfwk.h

2009-07-20 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: various changes
	* src/SDCCmain.c: fix typo in help text

2009-07-19 Borut Razem <borut.razem AT siol.net>

	* src/SDCCast.c: removed check for "unanticipated opcode in tree",
	  introduced with patch #2802510

2009-07-18 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: RFE #1204438 - make SDCC a multicall binary,
	  fixed for WIN32
	* as/link/lkar.c: fixed bug 2817508 - double free or memory corruption
	  in aslink
	* src/SDCCast.c, support/regression/tests/bug2740884.c:
	  applied patch #2802510 - fix for bug #2740884,
	  fixed bug #2740884 - Incorrect assignment in array of structs,
	  thanks to Robert Larice
	* as/hc08/clean.mk, as/link/clean.mk, as/link/hc08/clean.mk,
	  as/link/mcs51/clean.mk, as/link/z80/clean.mk, as/mcs51/clean.mk,
	  as/z80/clean.mk, device/lib/clean.mk, device/lib/large/Makefile.in,
	  device/lib/Makefile.in, device/lib/mcs51/Makefile.in,
	  device/lib/medium/Makefile.in, device/lib/pic/Makefile.in,
	  device/lib/small/Makefile.in, support/cpp/Makefile.in:
	  applied patch #2801385 - make clean and distclean,
	  fixed bug #2799101 - make clean does not remove .obj in /as,
	  fixed bug #2783160 - "make distclean" fails to clean properly,
	  thanks to Robert Larice
	* .version, doc/sdccman.lyx: changed sdcc version to 2.9.2

2009-07-15 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCCmain.c: make SDCC a multicall binary, RFE #1204438,
	  allows choosing the port by renaming the sdcc binary
	  (to f.e. z80-sdcc) or by calling SDCC from a suitable link
	  (parameter -m takes precedence)
	* src/SDCCglue.c: be more verbose about constants in code space

2009-07-07 Raphael Neider <rneider AT web.de>

	* src/pic16/device.c (find_in_list): ignore case during device
	  selection, fixes #2816817

2009-06-24 Raphael Neider <rneider AT web.de>

	* src/pic/ralloc.c (pic14_assignRegisters): avoid incorrect register
	  reuse among functions (fixes #2810015), cosmetic changes

2009-06-22 Raphael Neider <rneider AT web.de>

	* device/include/pic16/adc.h,
	  device/include/pic16/pic16devices.txt,
	  device/include/pic16/pic18f1[34]k50.h,
	  device/include/pic16/pic18f[24][456]j50.h,
	  device/include/pic16/pic18f[68][56]27.h,
	  device/include/pic16/pic18f[68][67]22.h,
	  device/include/pic16/pic18fregs.h,
	  device/lib/pic16/libdev/Makefile.am,
	  device/lib/pic16/libdev/pic18f1[34]k50.c,
	  device/lib/pic16/libdev/pic18f[24][456]j50.c,
	  device/lib/pic16/libdev/pic18f[68][56]27.c,
	  device/lib/pic16/libdev/pic18f[68][67]22.c,
	  device/lib/pic16/libio/Makefile.am,
	  device/lib/pic16/libio/adc/adcbusy.c,
	  device/lib/pic16/libio/adc/adcopen.c,
	  device/lib/pic16/libio/adc/adcsetch.c,
	  device/lib/pic16/libio/i2c/i2copen.c,
	  device/lib/pic16/pics.all,
	  doc/sdccman.lyx: added families 18f1[34]k50 (#2783178),
	    18f[24][456]j50 (#2794505), and 18f[68][56]27/18f[68][67]22
	* device/lib/pic16/aclocal.m4,
	  device/lib/pic16/configure,
	  device/lib/pic16/Makefile.in,
	  device/lib/pic16/debug/Makefile.in,
	  device/lib/pic16/libc/Makefile.in,
	  device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libio/Makefile.in,
	  device/lib/pic16/libm/Makefile.in,
	  device/lib/pic16/libsdcc/Makefile.in,
	  device/lib/pic16/startup/Makefile.in: regenerated

2009-06-13 Borut Razem <borut.razem AT siol.net>

	* src/SDCCasm.c: fixed bug #2805536: Assembly code comment cause Internal Error
	* support/regression/tests/macro.c: new, added

2009-06-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCC.y,
	* src/SDCCsymt.c (finalizeSpec),
	* src/SDCCsymt.h: applied patch for bug 2798646, thanks Robert Larice
	* src/SDCCsymt.c (initCSupport): also handle --funsigned-char for floating
	  point support routines
	* src/z80/ralloc.c (regTypeNum): fixed warning
	* device/lib/_atof.c,
	* support/regression/tests/args.c,
	* support/regression/tests/arithcse.c,
	* support/regression/tests/bitvars.c,
	* support/regression/tests/compare.c,
	* support/regression/tests/onebyte.c,
	* support/regression/tests/shifts.c,
	* support/regression/tests/uminus.c,
	* support/regression/tests/vaargs.c: fixed for --funsigned-char

2009-05-30 Borut Razem <borut.razem AT siol.net>

	* device/include/mcs51/80c51xa.h: moved to device/include/xa51
	  device/include/mcs51/ds400rom.h: moved to device/include/ds400
	  device/include/mcs51/serial390.h: moved to device/include/ds390
	  device/include/mcs51/ds80c390.h, device/include/mcs51/tinibios.h:
	  moved back to device/include, since they are used also by ds400
	  device/include/Makefile.in: new include directories ds390, ds400
	  and xa51
	* device/include/stdlib.h: coorected types for _itoa and _ltoa
	* device/lib/ds400/Makefile.in: added include serch path include/ds400

2009-05-25 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/gen.c:
	  Fixed an ancient, but difficult to reproduce and detect bug, that
	  led to stack corruption under certain conditions.

2009-05-25 Borut Razem <borut.razem AT siol.net>

	* device/include/80c51xa.h, device/include/ds400rom.h,
	  device/include/ds80c390.h, device/include/ser.h,
	  device/include/ser_ir.h, device/include/serial.h,
	  device/include/serial390.h, device/include/tinibios.h:
	  moved to device/include/mcs51/
	  device/include/z180.h:
	  moved to device/include/z80/
	  implemented RFE #1930974: Some device specific header files are not
	  in their folders

2009-05-24 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/ralloc.c,
	  src/z80/peeph-z80.def,
	  src/SDCCasm.c:
	  Propagate rematerializability over addition of constants.

2009-05-24 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/ralloc.c:
	  Improved use of hl as inter-i-code temporary.

2009-05-24 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c:
	  Fixed bug #2795942.

2009-05-22 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genGenericShift): do not overwrite the shift count
	  for `val = 1 << val', fixes bug #2795131

2009-05-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c (printIvalBitFields): cleaned up
	* src/pic16/glue.c (pic16_printIvalBitFields): same fix for bug 2791782

2009-05-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_iscntrl.c,
	* device/lib/_isdigit.c,
	* device/lib/_isgraph.c,
	* device/lib/_islower.c,
	* device/lib/_isprint.c,
	* device/lib/_ispunct.c,
	* device/lib/_isspace.c,
	* device/lib/_isupper.c,
	* device/lib/_isxdigit.c,
	* device/lib/_ltoa.c,
	* device/lib/pic16/libc/ctype/iscntrl.c,
	* device/lib/pic16/libc/ctype/isdigit.c,
	* device/lib/pic16/libc/ctype/isgraph.c,
	* device/lib/pic16/libc/ctype/islower.c,
	* device/lib/pic16/libc/ctype/isprint.c,
	* device/lib/pic16/libc/ctype/ispunct.c,
	* device/lib/pic16/libc/ctype/isspace.c,
	* device/lib/pic16/libc/ctype/isupper.c,
	* device/lib/pic16/libc/ctype/isxdigit.c,
	* device/lib/pic16/libc/stdlib/ltoa.c: fixed warnings after patch 2704189
	* src/SDCCglue.c (printIvalBitFields): fixed bug 2791782, a bug with
	  bitfields in next integer and an endianness bug for hc08
	* support/regression/tests/bitfields.c: added testcase for these bugs

2009-05-09 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/ralloc.c,
	  src/z80/gen.c,
	  support/regression/test/bug-2646174.c:
	  Fixed bug #2646174.

2009-05-09 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-z80.def:
	  Fixed bug #1924707.

2009-05-09 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: implemented RFE #2786753: Remove Borland C support

2009-05-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/uPSD32xx.h: added, thanks G.H.J. Morsink
	* device/include/mcs51/C8051F920.h: added, from patch 2486338,
	  thanks Steven Borley

2009-05-07 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* support/librarian/sdcclib.c: fixed bugs in GetNameFromPath() and
	  ChangeExtension().  Thanks to Jon Nall for pointed the bug out and
	  patch #2788108.

2009-05-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: documented pointer casting for vararg function params

2009-05-04 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/link/hc08/link_hc08.dsp, as/link/mcs51/aslink.dsp,
	  as/link/z80/linkgbz80.dsp, as/link/z80/linkz80.dsp: replaced getline.c
	  with lk_readnl.c.

2009-05-04 Borut Razem <borut.razem AT siol.net>

	* support/cpp/sdcpp.c, support/cpp/version.c: fixed crash due to
	  missing initialization of line_table,
	  corrected sdcpp version to 4.4.0

2009-04-19 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/div.s:
	  Applied patch #2764475 from Marco Bodrato to speed up Z80 division.

2009-05-03 Borut Razem <borut.razem AT siol.net>

	* as/link/hc08/Makefile.in, as/link/mcs51/Makefile.in,
	  as/link/z80/Makefile.in, as/link/lk_readnl.c, as/link/lk_readnl.h,
	  as/link/lklib.c, as/link/lkrel.c, as/link/lksdcclib.c:
	  getline renamed to lk_readln to prevent conflicts with Fedora 11
	  glibc-2.9.90-19 getline;
	  see https://bugzilla.redhat.com/show_bug.cgi?id=488217

2009-05-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (processParms): fixed bug 2783061 by applying patch from
	  Keith Packard, thanks
	* support/regression/tests/bug2783061.c: new, added

2009-04-28 Borut Razem <borut.razem AT siol.net>

	* support/cpp/output.h, support/cpp/opts-common.c,
	  support/cpp/c-ppoutput.c, support/cpp/cppdefault.c,
	  support/cpp/system.h, support/cpp/cppdefault.h,
	  support/cpp/prefix.c, support/cpp/except.h, support/cpp/hwint.h,
	  support/cpp/prefix.h, support/cpp/libiberty/safe-ctype.h,
	  support/cpp/libiberty/filenames.h, support/cpp/libiberty/xstrdup.c,
	  support/cpp/libiberty/md5.c, support/cpp/libiberty/obstack.h,
	  support/cpp/sdcpp.c, support/cpp/intl.h, support/cpp/sdcpp.h
	  support/cpp/libcpp/symtab.c, support/cpp/libcpp/directives.c,
	  support/cpp/libcpp/macro.c, support/cpp/libcpp/include/cpplib.h,
	  support/cpp/libcpp/include/symtab.h,
	  support/cpp/libcpp/include/line-map.h,
	  support/cpp/libcpp/include/cpp-id-data.h,
	  support/cpp/libcpp/include/mkdeps.h, support/cpp/libcpp/files.c,
	  support/cpp/libcpp/line-map.c, support/cpp/libcpp/init.c,
	  support/cpp/libcpp/identifiers.c, support/cpp/libcpp/ucnid.h,
	  support/cpp/libcpp/traditional.c, support/cpp/libcpp/errors.c,
	  support/cpp/libcpp/expr.c, support/cpp/libcpp/internal.h,
	  support/cpp/libcpp/mkdeps.c, support/cpp/libcpp/lex.c,
	  support/cpp/libcpp/system.h, support/cpp/libcpp/charset.c,
	  support/cpp/opts.h, support/cpp/sdcpp-opts.c:
	  SDCPP synchronized with GCC CPP release version 4.4.0.
	  SDCPP license changed to GPL version 3 or later.

2009-04-28 Borut Razem <borut.razem AT siol.net>

	* fixed GCC 4.4.0 mingw compilation:
	  sim/ucsim/cmd.src/cmdlex.cc: regenerated - added #include <stdio.h>
	* src/SDCCsymt.c: fixed warning:
	  suggest parentheses around operand of '!' or change '&' to '&&' or
	  '!' to '~'
	* support/scripts/sdcc_mingw32: sync with sdcc-build

2009-04-27 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genNearPointerGet): fix double indirect
	  access to bitfields (#2782405)

2009-04-27 Borut Razem <borut.razem AT siol.net>

	* fixed GCC 4.4.0 mingw compilation:
	* sim/ucsim/cmd.src/cmdlex.l: added #include <stdio.h>
	* support/cpp/sdcpp-opts.c: fixed warning:
	  unknown conversion type character 'm' in format,
	  use strerror(errno) instead of %m glibc extension format specifier
	* src/SDCCsymt.c: fixed warning:
	  suggest parentheses around operand of '!' or change '&' to '&&' or
	  '!' to '~'
	* src/pic16/pcode.c, src/pic16/glue.c: fixed warning:
	  unknown conversion type character 'h' in format,
	  replaced hh printf format specifier with parameter casting to
	  unsigned char

2009-04-19 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/shift.s,
	  device/lib/z80/memmove.s,
	  device/lib/z80/mul.s,
	  device/lib/z80/mulchar.s,
	  device/lib/z80/div.s,
	  device/lib/z80/mod.s:
	  Applied patch #2762516 from Marco Bodrato containing minor
	  improvements of many Z80 asm routines.

2009-04-19 Philipp Klaus Krause <pkk AT spth.de>

	* support/regression/tests/strtok.c,
	  support/regression/tests/strstr.c,
	  support/regression/tests/strspn.c,
	  support/regression/tests/strncmp.c,
	  support/regression/tests/strcpy.c,
	  support/regression/tests/strcmp.c:
	  Added some regression tests by Ruud van Silfhout from patch #2321830.

2009-04-13 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in, device/lib/ds390/Makefile.in,
	  device/lib/ds400/Makefile.in, device/lib/gbz80/Makefile.in,
	  device/lib/hc08/Makefile.in, device/lib/mcs51/Makefile.in,
	  device/lib/z80/Makefile.in: override PORTDIR in sub-makefiles

2009-04-13 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/bootstrap.sh: avoid symlinks
	* device/lib/pic16/configure.ac,
	  device/lib/pic16/configure.gnu: removed obsolete configure-wrapper

2009-04-13 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in: remove abspath for PORTDIR, introduced in
	  svn revision #5341, since it makes asranlib to fail on cygming and
	  mingw builds: win32 native asranlib doesn't understand cygwin paths.

2009-04-10 Raphael Neider <rneider AT web.de>

	* device/lib/pic/libsdcc/fs2ulong.c, device/lib/pic/libsdcc/fsadd.c,
	  device/lib/pic/libsdcc/fsdiv.c, device/lib/pic/libsdcc/fseq.c,
	  device/lib/pic/libsdcc/fsgt.c, device/lib/pic/libsdcc/fslt.c,
	  device/lib/pic/libsdcc/fsmul.c, device/lib/pic/libsdcc/fsneq.c,
	  device/lib/pic/libsdcc/fssub.c, device/lib/pic/libsdcc/ulong2fs.c,
	  device/lib/pic16/libsdcc/float/fs2ulong.c,
	  device/lib/pic16/libsdcc/float/fsadd.c,
	  device/lib/pic16/libsdcc/float/fsdiv.c,
	  device/lib/pic16/libsdcc/float/fsmul.c: fixed pic14 libraries, merge
	  changes from the pic16 port, minor code cleanup
	* src/pic/gen.c: implemented genUminusFloat(), fixed warning and style

2009-04-09 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/mod.s,
	  device/lib/z80/Makefile.in,
	  device/lib/z80/div.s,
	  device/lib/z80/modsigned.s,
	  device/lib/z80/divsigned.s:
	  Applied patch #2741451 from Marco Bodrato
	  and moved functions for signed modulo into
	  separate file.

2009-04-06 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: disabled rule 270, fixing bug #2736282

2009-04-04 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c,
	  src/z80/peeph-z80.def:
	  Improved caching of pointers in hl and iy.
	  device/lib/z80/div.s:
	  Applied patch #2727917 from Marco Bodrato.

2009-04-03 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/ralloc.c:
	  Enabled use of hl as inter-i-code temporary.

2009-04-03 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-z80.def:
	  Reenabled peephole 0t.

2009-04-03 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c:
	  Fixed bugs #2728224, #2728218.
	  src/z80/peeph-z80.def:
	  Workaround for bug #2728445.
	  support/regression/tests/memory.c:
	  Added test for memcmp().

2009-04-03 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/mul.s,
	  device/lib/z80/memmove.s,
	  device/lib/z80/strlen.s:
	  Minor improvements, code cleanup and license clarification.

2009-04-01 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/mul.s:
	  Minor improvement in Z80 16x16 bit multiplication.

2009-03-23 Borut Razem <borut.razem AT siol.net>

	* src/SDCCval.c, src/SDCCmain.c, device/include/limits.h,
	  device/include/pic/limits.h, device/include/pic16/limits.h,
	  device/lib/_fs2schar.c, device/lib/pic/libsdcc/fs2schar.c,
	  device/lib/pic16/libsdcc/float/fs2schar.c, doc/sdccman.lyx,
	  support/regression/tests/funsigned-char.c:
	  applied patch 2704189: character constant sign fix
	  thanks to Robert Larice

2009-03-22 Borut Razem <borut.razem AT siol.net>

	* Small Device C Compiler 2.9.0 released
	* .version, doc/sdccman.lyx: changed sdcc version to 2.9.1

2009-03-15 Borut Razem <borut.razem AT siol.net>

	* support/scripts/repack_release.sh: added

2009-03-13 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: "freeware" replaced with "free open source"

2009-03-12 Borut Razem <borut.razem AT siol.net>

	* src/z80/peep.c: #2652979: --debug crashes sdcc

2009-03-12 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCCglue.c,
	  support/regression/tests/bug2655200.c:
	  applied modified patch from Robert Larice <larice AT vidisys.de>
	  fixing original report of bug #2655200: pointer to pdata memory
	  not correctly initialized

2009-03-11 Borut Razem <borut.razem AT siol.net>

	* as/asranlib/asranlib.c: retain the original file mode

2009-03-10 Borut Razem <borut.razem AT siol.net>

	* src/mcs51/gen.c, src/z80/gen.c, src/hc08/gen.c, src/ds390/gen.c,
	  support/regression/tests/bug1875933.c:
	  fixed bug #1875933: Evelyn jumps into the void
	  thanks to Robert Larice

2009-03-10 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (LinkFlow): fix invalid cast from pCodeLabel
	  to pCodeInstruction to avoid a segmentation fault

2009-03-03 Borut Razem <borut.razem AT siol.net>

	* device/lib/printf_large.c: fixed bug #2656821: bug in printf

2009-03-03 Raphael Neider <rneider AT web.de>

	* device/lib/pic/libdev/Makefile.in: build device-specific
	  libraries for the correct processor, fixes #2654585

2009-03-01 Raphael Neider <rneider AT web.de>

	* device/lib/Makefile.in: fixed parallel builds (i.e., make -jN, N>1)

2009-03-01 Borut Razem <borut.razem AT siol.net>

	* src/z80/peep.c: fixed bug #2648964: --i-code-in-asm crashes sdcc
	* .version, sdcc.spec, doc/sdccman.lyx, doc/INSTALL.txt:
	  changed sdcc version to 2.9.0

2009-03-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/ralloc.c (spillThis, spilSomething): fixed bug 2435941
	  (serialRegAssign): do not spil bit registers
	  throughout cosmetic changes
	* support/regression/tests/bug2435941.c: new, added

2009-02-28 Raphael Neider <rneider AT web.de>

	* src/regression/compare10.c,
	  src/regression/compare7.c,
	  src/regression/compare8.c,
	  src/regression/compare9.c: reset watchdog timer in time
	* src/regression/configword.c: apply patch from #2488150
	* src/pic/glue.c (pic14createInterruptVect): pin RESET vector
	  handler to 0x0000 as the linker no longer knows STARTUP sections
	* src/pic/pcode.c (register_reassign, ReuseReg): applied modified
	  patch #2512926 to (mostly) fix #1762626, cosmetic changes
	* src/pic/pcodepeep.c: remove reference to nonexisting function

2009-02-28 Raphael Neider <rneider AT web.de>

	* device/include/pic16/signal.h: avoid multiline inline
	  assembler statements in macros, addresses #2644965

2009-02-27 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f[24][3456]k20.h,
	  device/include/pic16/pic18f[68][567]j50.h,
	  device/include/pic16/pic18f[68]6j55.h,
	  device/lib/pic16/libdev/pic18f[24][3456]k20.c,
	  device/lib/pic16/libdev/pic18f[68][567]j50.c,
	  device/lib/pic16/libdev/pic18f[68]6j55.c,
	  device/include/pic16/pic18fregs.h,
	  device/include/pic16/pic16devices.txt,
	  device/lib/pic16/pics.all,
	  device/lib/pic16/libdev/Makefile.am,
	  device/lib/pic16/libio/Makefile.am: added/re-enabled many device
	  families (87j50 family contributed by Robert Wuest)

	* device/include/pic16/adc.h,
	  device/lib/pic16/libio/adc/adcbusy.c,
	  device/lib/pic16/libio/adc/adcclose.c,
	  device/lib/pic16/libio/adc/adcconv.c,
	  device/lib/pic16/libio/adc/adcopen.c,
	  device/lib/pic16/libio/adc/adcsetch.c: added 65j50-style ADC

	* doc/sdccman.lyx: updated list of supported devices, fixed typo
	* device/lib/pic16/Makefile.common: do not suppress assembler warnings

	* device/lib/pic16/Makefile.in,
	  device/lib/pic16/libm/Makefile.in,
	  device/lib/pic16/debug/Makefile.in,
	  device/lib/pic16/libio/Makefile.in,
	  device/lib/pic16/startup/Makefile.in,
	  device/lib/pic16/libsdcc/Makefile.in,
	  device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libc/Makefile.in: regenerated

2009-02-27 Borut Razem <borut.razem AT siol.net>

	* as/z80/asexpr.c, as/z80/z80mch.c: re-fixed bugs
	  #1829678 and #1704376 in the way proposed by Alan Baldwin

2009-02-23 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/at89c51ed2.h: Fixed address of SFR P5. Thanks
	  to Steve Qu for the fix.

2009-02-23 Borut Razem <borut.razem AT siol.net>

	* as/z80/asexpr.c: fixed bug #1829678: Z-80 CP A,<xxx> assembly
	  it is already fixed for mcs51 and hc08 targets
	* as/z80/z80mch.c: fixed bug #1704376: missing as-z80 errors

2009-02-22 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in: fixed parenthesis error
	* doc/sdccman.lyx: fixed webdocs bug #2071421: error in the manual,
	  fixed webdocs bug #1967920: --version

2009-02-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/at89c51ed2.h: fixed bug #2071949 bitmask RBCK wrong

2009-02-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/mcs51/lkihx.c (hexRecord): bugfix do not insert extended address
	  when addresses are unsorted

2009-02-15 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/mcs51/p89v66x.h: added ENBOOT thanks
	  Gudjon Gudjonsson <gudjon AT gudjon.org>
	* device/include/mcs51/p89c66x.h: fixed some defines
	* device/include/mcs51/p89v66x.h: fixed some sbit addresses
	* doc/sdccman.lyx: added <NO FLOAT> to index, try to reanimate
	  svn keywords

2009-02-14 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: corrected cpp info

2009-02-13 Borut Razem <borut.razem AT siol.net>

	* as/Makefile.in: *.doc renamed to *.txt

2009-02-11 Borut Razem <borut.razem AT siol.net>

	* as/doc/aslnk.doc, as/doc/abstra.doc: renamed to *.txt
	* as/doc/aslnk.txt, as/doc/asxhtml.html: changed licens to GPLv3

2009-02-11 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: documented ar format libraries

2009-02-10 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/tests/float_single.c: added regression
	  test. Some testpoints for probably rarely used functions
	  (acosf, sinhf, tanf, expf) disabled for some targets

2009-02-10 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_freeAsmop): avoid NULL pointer dereference,
	  (genAssign): fixed for operands on the stack

	* device/lib/pic16/libc/stdio/vfprintf.c,
	  device/lib/pic16/configure.ac,
	  device/lib/pic16/Makefile.common: add configurable support for
	  printing floats via ./configure --enable-floats
	* device/lib/pic16/configure,
	  device/lib/pic16/Makefile.in,
	  device/lib/pic16/libm/Makefile.in,
	  device/lib/pic16/debug/Makefile.in,
	  device/lib/pic16/libio/Makefile.in,
	  device/lib/pic16/startup/Makefile.in,
	  device/lib/pic16/libsdcc/Makefile.in,
	  device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libc/Makefile.in: regenerated
	* doc/sdccman.lyx: documented float support and how to get it
	* doc/Makefile.in: fixed race condition on parallel builds

	* device/lib/pic16/libc/stdio/sprintf.c,
	  device/lib/pic16/libc/stdio/vsprintf.c: do not mess up the user's
	  pointer to the string buffer, enlarge buffer for x_ftoa()

2009-02-10 Borut Razem <borut.razem AT siol.net>

	* device/lib/printf_tiny.c: replaced non-C89 comments '//' with '/* */'

2009-02-10 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f*.h: add bit aliases in INTCONbits_t

2009-02-09 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (assignToSameBank): add force argument to ignore
	  artificial bank size limits for compound data (structs, arrays),
	  avoids assert if --obanksel=N, N > 1, is given

2009-02-09 Borut Razem <borut.razem AT siol.net>

	* as/asranlib/asranlib.c, link/lkar.c: don't check the padding bytes since
	  the openSUSE GNU ar (GNU Binutils; openSUSE 11.0) 2.18.50.20080409-11.1
	  uses '`' character instead '\n' for padding
	* as/asranlib/asranlib.c: made it more robust

2009-02-08 Borut Razem <borut.razem AT siol.net>

	* as/COPYING3: added
	* support/scripts/sdcc.nsi: added COPYING3.txt to the package
	* device/lib/Makefile.in: reenable floating point in model-xstack-auto
	  libraries

2009-02-07 Borut Razem <borut.razem AT siol.net>

	* as/asranlib/asranlib.c: fixed BSD header length calculation
	* .version, doc/sdccman.lyx: bumped sdcc version to 2.8.9
	  due sdcc asxxxx license change to GPLv3

2009-02-05 Borut Razem <borut.razem AT siol.net>

	* as/asranlib/asranlib.c, link/lkar.h, link/lkar.c:
	  added support for BSD (Mac OS X) ar format
	* as/asxxsrc/aslex.c, as/as/asxxsrc/asnoice.c, as/as/asxxsrc/assym.c,
	  as/as/hc08/asdata.c, as/hc08/asexpr.c, as/hc08/aslist.c,
	  as/hc08/asm.h, as/hc08/asmain.c, as/hc08/asout.c, as/hc08/assubr.c,
	  as/hc08/m08adr.c, as/hc08/m08ext.c, as/hc08/m08mch.c,
	  as/hc08/m08pst.c, as/hc08/m6808.h, as/link/aslink.h,
	  as/link/hc08/lkarea.c, as/link/hc08/lkelf.c, as/link/hc08/lkihx.c,
	  as/link/hc08/lkmain.c, as/link/hc08/lkmem.c, as/link/hc08/lkrloc.c,
	  as/link/hc08/lks19.c, as/link/lkaomf51.c, as/link/lkdata.c,
	  as/link/lkeval.c, as/link/lkhead.c, as/link/lklex.c, as/link/lklib.c,
	  as/link/lklibr.c, as/link/lklibr.h, as/link/lklist.c,
	  as/link/lknoice.c, as/link/lkrel.c, as/link/lkrel.h,
	  as/link/lksdcclib.c, as/link/lkstore.c, as/link/lksym.c,
	  as/link/mcs51/lkarea.c, as/link/mcs51/lkihx.c,
	  as/link/mcs51/lkmain.c, as/link/mcs51/lkmem.c,
	  as/link/mcs51/lkrloc.c, as/link/mcs51/lks19.c, as/link/z80/lkarea.c,
	  as/link/z80/lkgb.c, as/link/z80/lkgg.c, as/link/z80/lkihx.c,
	  as/link/z80/lkmain.c, as/link/z80/lkrloc.c, as/link/z80/lks19.c,
	  as/mcs51/asdata.c, as/mcs51/asexpr.c, as/mcs51/aslist.c,
	  as/mcs51/asm.h, as/mcs51/asmain.c, as/mcs51/asout.c,
	  as/mcs51/assubr.c, as/mcs51/i51adr.c, as/mcs51/i51ext.c,
	  as/mcs51/i51mch.c, as/mcs51/i51pst.c, as/mcs51/i8051.h,
	  as/xa51/xa_link.c, as/xa51/xa_main.c, as/xa51/xa_main.h,
	  as/xa51/xa_rasm.l, as/xa51/xa_rasm.y, as/xa51/xa_version.h,
	  as/z80/asdata.c, as/z80/asexpr.c, as/z80/aslist.c, as/z80/asm.h,
	  as/z80/asmain.c, as/z80/asout.c, as/z80/assubr.c, as/z80/z80.h,
	  as/z80/z80adr.c, as/z80/z80ext.c, as/z80/z80mch.c, as/z80/z80pst.c:
	  changed license to GPL either version 3, or (at your option) any
	  later version

2009-02-05 Borut Razem <borut.razem AT siol.net>

	* as/asranlib/asranlib.c, link/lkar.h, link/lkar.c:
	  added support for BSD (Mac OS X) ar format

2009-02-02 Borut Razem <borut.razem AT siol.net>

	* device/lib/gbz80/Makefile.in, device/lib/hc08/Makefile.in,
	  device/lib/z80/Makefile.in:
	  chose source files in the PORT directory if they are available

2009-02-01 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/pic18f1220.c,
	* device/lib/pic16/libdev/pic18f4450.c:
	  define SSPBUF to allow use of printf

2009-02-01 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in, device/lib/gbz80/Makefile.in,
	  device/lib/hc08/Makefile.in, device/lib/incl.mk,
	  device/lib/z80/Makefile.in:
	  don't remake libraries
	* support/regression/tests/snprintf.c:
	  reenable floating point in small-xstack-auto library

2009-01-26 Raphael Neider <rneider AT web.de>

	* src/pic16/ralloc.c (packForPush): disabled to fix #2496919

2009-01-25 Raphael Neider <rneider AT web.de>

	* src/pic16/main.c (_pic16_linkEdit): prepend -L paths to linker
	  search path instead of appending them

2009-01-24 Borut Razem <borut.razem AT siol.net>

	* as/asranlib/asranlib.h: changed type of offset to unsigned int to
	  make it work on ppc Mac OS X (off_t is 64 bit and is not converted
	  to 32 bit unsigned int when calling sputl() since it is a macro
	* as/link/lkar.c: changed the initialization of This->loaded

2009-01-23 Borut Razem <borut.razem AT siol.net>

	* as/link/lkar.h: changed type of ar_size to size_t to make it work on
	  ppc Mac OS X (off_t is 64 bit and is not converted to 32 bit
	  unsigned int when calling new(), since asxxxx doesn't use function
	  prototypes)

2009-01-21 Borut Razem <borut.razem AT siol.net>

	* as/link/lkar.h: sgetl and sputl are independent of endianness
	* as/link/sdxxxx_config.h.in: removed endianness detection

2009-01-20 Borut Razem <borut.razem AT siol.net>

	* .version, doc/sdccman.lyx: bumped sdcc version to 2.8.8
	  due creation of ar format libraries
	* support/scripts/sdcc.nsi:
	  don't add nonexistent object files to the package

2009-01-19 Borut Razem <borut.razem AT siol.net>

	* Makefile.in, configure.in, configure,
	  device/lib/Makefile.in, device/lib/ds390/Makefile.in,
	  device/lib/ds400/Makefile.in, device/lib/gbz80/Makefile.in,
	  device/lib/hc08/Makefile.in, device/lib/large/Makefile.in,
	  device/lib/mcs51/Makefile.in, device/lib/medium/Makefile.in,
	  device/lib/small/Makefile.in,
	  device/lib/z80/Makefile.in: create ar format libraries
	* support/regression/ports/mcs51-xstack-auto/spec.mk:
	  use device/lib/Makefile to create library
	* support/regression/tests/snprintf.c:
	  floating point is not enabled in small-xstack-auto library
	* device/lib/libfloat.lib, device/lib/libint.lib,
	  device/lib/liblong.lib, device/lib/libsdcc.lib: removed

2009-01-18 Borut Razem <borut.razem AT siol.net>

	* support/cpp/auto-host.h: fixed warning: "__STDC__" redefined,
	  warning: extra tokens at end of #endif directive

2009-01-11 Borut Razem <borut.razem AT siol.net>

	* Makefile.in: added SDCC_ASRANLIB to PKGS

2009-01-10 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added asranlib.exe to the install package
	* .version, doc/sdccman.lyx: bumped sdcc version to 2.8.7
	  due added support for ar format libraries

2009-01-09 Borut Razem <borut.razem AT siol.net>

	* as/asranlib/Makefile.in, as/asranlib/asranlib.dsp,
	  as/asranlib/asranlib.c: added asranlib
	* as/link/lkar.c, as/link/lkar.h: added support for ar format libraries
	* Makefile.in, as/link/hc08/Makefile.in,
	  as/link/hc08/link_hc08.dsp, as/link/lklib.c, as/link/lklibr.c,
	  as/link/lklibr.h, as/link/lkrel.c, as/link/lkrel.h,
	  as/link/lksdcclib.c, as/link/mcs51/Makefile.in,
	  as/link/mcs51/aslink.dsp, as/link/z80/Makefile.in,
	  as/link/z80/linkgbz80.dsp, as/link/z80/linkz80.dsp, configure,
	  configure.in, sdcc.dsw: modified to support ar format libraries

2009-01-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (decorateType RETURN): use RESULT_TYPE_GPTR for generic
	  pointer return

2009-01-05 Philipp Klaus Krause <pkk AT spth.de>

	* sim/ucsim/z80.src/inst_ed.cc:
	  Fixed bug #2488074, which made regression tests fail.

2009-01-05 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/mod.s,
	  device/lib/z80/div.s,
	  device/lib/z80/mulchar.s,
	  device/lib/z80/mul.s,
	  device/lib/z80/divsigned.s,
	  device/lib/z80/Makefile.in:
	  Implemented RFE #1702376.

2009-01-05 Borut Razem <borut.razem AT siol.net>

	* as/link/lksdcclib.c:
	  fixed linker hanging in INDEXLIB is not defined (hc08)

2009-01-04 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c:
	  Implemented RFE #2485684, and some further improvements of HL caching
	  including a bugfix.
	* src/z80/peeph-z80.def:
	  Fixed a bug exposed by implementing RFE #2485684.

2009-01-04 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-z80.def:
	  Peephole improvements.
	* src/z80/gen.c,
	  src/z80/main.c,
	  device/include/string.h,
	  device/lib/z80/memmove.s:
	  Minor code cleanup.
	* device/lib/z80/Makefile.in,
	  device/lib/Makefile.in,
	  support/regression/tests/memory.c,
	  device/lib/z80/strlen.s:
	  Partially implemented RFE #2471534.

2009-01-04 Borut Razem <borut.razem AT siol.net>

	* .version, doc/sdccman.lyx: bumped sdcc version to 2.8.6
	  due changes in sdcc asxxxx linkers - it sholud be done 2 days ago :(
	* doc/README.txt: updated John Hartman's e-mail address
	* as/link/lkrel.c, as/link/lksdcclib.c:
	  fixed bug #2484677: Linker hangs
	* src/z80/peep.c: fixed msvc warning C4047:
	  'return' : 'int ' differs in levels of indirection from 'char *'
	* config.dsp: as/lib corrected to as/link

2009-01-04 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peep.c:
	  Implemented RFE #2484693.
	* src/z80/peeph-z80.def:
	  Some peephole improvements.

2009-01-03 Borut Razem <borut.razem AT siol.net>

	* as/link/lklibr.c:
	  fixed warning: 'ret' may be used uninitialized in this function

2009-01-02 Borut Razem <borut.razem AT siol.net>

	* as/link/lklib.c, as/link/lksdcclib.c, as/link/lklibr.h,
	  as/link/getline.[ch], as/link/lkrel.[ch]: added,
	  made support for differnet library formats more flexible,
	  preparation for support of ar format
	* as/link/lklibr.c, as/link/z80/Makefile.in,
	  as/link/z80/linkgbz80.dsp, as/link/z80/linkz80.dsp,
	  as/link/hc08/link_hc08.dsp, as/link/hc08/Makefile.in,
	  as/link/mcs51/aslink.dsp, as/link/mcs51/Makefile.in,
	  as/link/hc08/lkelf.c, as/link/aslink.h:
	  made support for differnet library formats more flexible,
	  preparation for support of ar format

2009-01-01 Borut Razem <borut.razem AT siol.net>

	* as/link/asxxxx_config.h.in:
	  fixed warning: extra tokens at end of #endif directive
	* src/z80/peep.c:
	  fixed warning: suggest parentheses around && within ||
	* device/lib/Makefile.in: allow whitespaces at the end of lines in
	  ports.build, in order to make it work on cygwin - it seems to be a
	  bug in cygwin grep: CR is not treated as part of end-of-line

2008-12-31 Borut Razem <borut.razem AT siol.net>

	* configure, configure.in, config.dsp, config_vc.awk,
	  as/link/asxxxx_config.h.in, as/link/hc08/lkelf.c, as/link/aslink.h,
	  as/link/hc08/Makefile.in, as/link/mcs51/Makefile.in:
	  introduced asxxxx_config.h.in

2008-12-30 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c,
	  src/z80/peeph-z80.def:
	  Minor addition improvement.

2008-12-30 Raphael Neider <rneider AT web.de>

	* as/link/hc08/lkelf.c, as/link/lkaomf51.c, as/link/lklibr.c,
	  as/link/z80/lkgb.c, debugger/mcs51/cmd.c, sim/ucsim/utils.cc,
	  src/SDCCasm.c, support/Util/dbuf_string.c, support/cpp/c-ppoutput.c,
	  support/cpp/libcpp/lex.c, support/cpp/libcpp/macro.c,
	  support/librarian/sdcclib.c, support/makebin/makebin.c:
	  partially revert changes from r5293..r5295

2008-12-29 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-z80.def:
	  Minor peephole improvement.

2008-12-29 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (insertBankSel, FixRegisterBanking): emit
	  incorrectly discarded BANKSELs

2008-12-29 Philipp Klaus Krause <pkk AT spth.de>

	* support/regression/tests/memory.c:
	  Added simple test for memset(), memcpy() and memmove()

2008-12-29 Borut Razem <borut.razem AT siol.net>

	* sdcc/support/scripts/sdcc.nsi: removed $INSTDIR\lib\src\z80\*.c

2008-12-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peeph.def (177.e): replaced notVolatile(%3) with
	  operandsNotRelated(%1 %3), had to change (a)r%1 to (a)%1 for this to work
	  (177.j): added new rule
	* src/SDCCsymt.h: added RESULT_TYPE_GPTR
	* src/SDCCast.c (processParms): use RESULT_TYPE_GPTR for generic ptr parms,
	  (decorateType CAST): propagate storage class to generic pointer results

2008-12-27 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/string.c,
	  device/lib/z80/printf.c,
	  device/lib/z80/mul.s:
	  z80 library cleanup
	* src/z80/gen.c:
	  Fixed code generation bug exposed by builtin memcpy().

2008-12-27 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/_memcpy.c:
	  fixed conflict with builtin memcpy()

2008-12-26 Borut Razem <borut.razem AT siol.net>

	* support/librarian/sdcclib.c:
	  fixed bug 2466950: "sdcclib broken"
	  by removing fgets return value check

2008-12-26 Philipp Klaus Krause <pkk AT spth.de>
	* src/z80/main.c,
	  src/z80/gen.c,
	  device/include/string.h: Implemented RFE #1914254

2008-12-26 Philipp Klaus Krause <pkk AT spth.de>
	* device/lib/z80/Makefile.in,
	  device/lib/Makefile.in,
	  device/lib/z80/memmove.s: Implemented RFE #1914256

2008-12-26 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-z80.def: fixed a bug in peephole 0zf
	* src/z80/peep.c: improved checks for unused data
	* src/z80/gen.c,
	  src/z80/main.c: Implemented RFE #1899189

2008-12-25 Borut Razem <borut.razem AT siol.net>

	* support/regression/Makefile.in:
	  add -I$(INC_DIR) to SDCCFLAGS only if INC_DIR is defined

2008-12-25 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph-z80.def: minor peephole improvements

2008-12-21 Borut Razem <borut.razem AT siol.net>

	* support/librarian/sdcclib.c: fixed build failure on Mac OS X
	  due to redefinition of symbol __assert
	  sdcclib.c:53:1:warning: "__assert" redefined
	  /Xcode2.5/SDKs/MacOSX10.4u.sdk/usr/include/assert.h:80:1:
	  warning: this is the location of the previous definition

2008-12-20 Raphael Neider <rneider AT web.de>

	* debugger/mcs51/break.c, debugger/mcs51/cmd.c,
	  debugger/mcs51/simi.c, debugger/mcs51/symtab.c,
	  support/cpp/libcpp/macro.c: fix format string errors

	* sim/ucsim/s51.src/timer2.cc: add clarifying parens

	* src/pic/device.c: partial rewrite using strtok,
	  quieten compiler warnings, adopt SDCC coding style

	* as/link/hc08/lkelf.c, as/link/lkaomf51.c, as/link/lklibr.c,
	  as/link/z80/lkgb.c, as/z80/asout.c, debugger/mcs51/cmd.c,
	  sim/ucsim/utils.cc, src/SDCCasm.c, support/Util/dbuf_string.c,
	  support/cpp/c-ppoutput.c, support/cpp/libcpp/lex.c,
	  support/librarian/sdcclib.c, support/makebin/makebin.c:
	  quieten most compiler warnings

	* sim/ucsim/avr.src/arith_inst.cc: quieten compiler warnings,
	  probably fix operator precedence bug

	* doc/clean.mk: quieten rm if no .lyx is present

2008-12-19 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, doc/random-notes.txt, doc/avr/avr_design.txt,
	  doc/TININative.txt, doc/macro-sys-design.txt, doc/libdoc.txt,
	  doc/README.txt, doc/test_suite_spec.lyx:
	  applied patch 2446381: Dcoumentation spelling correcitons
	  thanks to Steven Borley

2008-12-16 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic12f629.h,
	  device/include/pic/pic12f675.h,
	  device/lib/pic/libdev/pic12f629.c,
	  device/lib/pic/libdev/pic12f675.c: consolidated, added TRISIO bits

2008-12-14 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, cdbfileformat.lyx, test_suite_spec.lyx:
	  converted to LyX 1.5.7 (\lyxformat 276) format

2008-12-07 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bitfields.c:
	  added test case for bug #2366757

2008-12-07 Raphael Neider <rneider AT web.de>

	* src/pic16/glue.c (pic16_printIvalBitFields): prevent
	  NULL pointer dereference, closes #2366757

2008-11-25 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic16devices.txt,
	  sdcc/src/pic16/device.c,
	  sdcc/src/pic16/device.h: implicitly disable XINST
	  whenever CONFIG4L is set via an additional optional
	  argument to the configword directive in pic16devices.txt

2008-11-24 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/configure.ac,
	  device/lib/pic16/Makefile.common: fixed quoting issues

	* device/lib/pic16/configure,
	  device/lib/pic16/debug/Makefile.in,
	  device/lib/pic16/libc/Makefile.in,
	  device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libio/Makefile.in,
	  device/lib/pic16/libm/Makefile.in,
	  device/lib/pic16/libsdcc/Makefile.in,
	  device/lib/pic16/Makefile.in,
	  device/lib/pic16/startup/Makefile.in: regenerated

	* src/pic16/main.c (_pic16_finaliseOptions): revert to
	  variant of r5216

2008-11-24 Raphael Neider <rneider AT web.de>

	* src/pic16/main.c (_pic16_finaliseOptions): do not quote the
	  argument of --asm= or --link= to allow for
	  --asm="sh script --options", the user can double quote the
	  argument if needed: --asm="'c:/program files/gpasm' -q",
	  also fix some potential buffer overflows

2008-11-19 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx:
	  fixed 2314467: sdccman.lyx: fix "--" in command line parameters
	  thanks Mauro Giachero

2008-11-16 Borut Razem <borut.razem AT siol.net>

	* .version, doc/sdccman.lyx: bumped sdcc version to 2.8.5
	* doc/sdccman.lyx: documented fixed unnamed bit-field initialization

2008-11-15 Borut Razem <borut.razem AT siol.net>

	* src/pic16/glue.c, src/SDCC.y, src/SDCCast.c, src/SDCCglue.c,
	  src/SDCCsymt.c, src/SDCCsymt.h:
	  fixed RFE #2291335 : Unnamed bit-field initialization
	* support/regression/tests/bitfields.c:
	  added test case for RFE #2291335
	* support/regression/tests/bug-1981238.c:
	  don't initialize unnamed bit-fields

2008-11-11 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f25j10.h,
	  device/include/pic16/pic18f45j10.h: remove useless boilerplate

	* device/include/pic16/adc.h,
	  device/lib/pic16/libio/adc/adcbusy.c,
	  device/lib/pic16/libio/adc/adcclose.c,
	  device/lib/pic16/libio/adc/adcconv.c,
	  device/lib/pic16/libio/adc/adcopen.c,
	  device/lib/pic16/libio/adc/adcread.c,
	  device/lib/pic16/libio/adc/adcsetch.c: generalized, documented,
	  and fixed ADC routines to work for more target devices,
	  incorporates patch #2036130 by Nick Materer

2008-11-10 Steven Borley <steven.borley AT partnerelectronics.com>

	* device/include/ctype.h,
	* device/include/ds400rom.h,
	* device/include/ds80c390.h,
	* device/include/float.h,
	* device/include/math.h,
	* device/include/serial.h,
	* device/include/stdbool.h,
	* device/include/tinibios.h: replaced non-C89 '//' with '/* */',
	  patch 2195343
	* device/include/mcs51/C8051F336.h,
	* device/include/mcs51/C8051T600.h,
	* device/include/mcs51/C8051T610.h,
	* device/include/mcs51/C8051T630.h: new, added, patch 2183334
	  (svn commit by Maarten Brock <sourceforge.brock AT dse.nl>)

2008-11-10 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/mcs51/P89LPC922.h: fixed #2255989, thanks kubi57

2008-11-10 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/mkmk.sh: obey pics.all
	* device/lib/pic16/libio/mkmk.sh: properly match whole lines in
	  .ignore files, fixes IO libs for 18f242, 18f252, 18f442, and 18f452
	  (patch by Nick Materer, #2253980)

	* device/lib/pic16/libio/adc.ignore,
	  device/lib/pic16/libio/i2c.ignore,
	  device/lib/pic16/libio/usart.ignore,
	  device/lib/pic16/pics.all: updated to build more device libs

	* device/lib/pic16/libdev/Makefile.am,
	  device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libio/Makefile.am,
	  device/lib/pic16/libio/Makefile.in: regenerated

	* src/pic16/device.c (pic16_dump_usection): fixed output of multiple
	  names per memory location, applied SDCC style to more functions

2008-11-09 Gudjon I. Gudjonsson <gudjon AT gudjon.org>

	* device/include/mcs51/p89lpc933_4.h: new NXP header file
	* device/include/mcs51/p89lpc935_6.h: new NXP header file
	* device/include/mcs51/p89v66x.h: minor changes
	  (svn commit by Frieder Ferlemann <Frieder.Ferlemann AT web.de>)

2008-11-09 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic14devices.txt: fixed memory description for
	  12f629 and 12f675, closes #2236240

2008-11-06 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: fixed bug #2224960: sdcc -MM no working correctly
	  pass system include paths with -isystem to sdcpp
	* src/SDCCglue.c, src/pic/glue.c, src/pic16/glue.c: removed unneeded
	  functions (closePipes), (closeTmpFiles) and (rmTmpFiles)

2008-11-02 Raphael Neider <rneider AT web.de>

	* doc/sdccman.lyx: updated the sections on the library build process
	  and on how to add support for new devices, and documented known
	  problems with the extended instruction set including a workaround

2008-11-01 Raphael Neider <rneider AT web.de>

	* device/include/pic16/adc.h,
	  device/include/pic16/pic16devices.txt,
	  device/include/pic16/pic18f2410.h,
	  device/include/pic16/pic18f2510.h,
	  device/include/pic16/pic18f2515.h,
	  device/include/pic16/pic18f2610.h,
	  device/include/pic16/pic18f4410.h,
	  device/include/pic16/pic18f4510.h,
	  device/include/pic16/pic18f4515.h,
	  device/include/pic16/pic18f4610.h,
	  device/include/pic16/pic18fregs.h,
	  device/lib/pic16/libdev/Makefile.am,
	  device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libdev/pic18f2410.c,
	  device/lib/pic16/libdev/pic18f2510.c,
	  device/lib/pic16/libdev/pic18f2515.c,
	  device/lib/pic16/libdev/pic18f2610.c,
	  device/lib/pic16/libdev/pic18f4410.c,
	  device/lib/pic16/libdev/pic18f4510.c,
	  device/lib/pic16/libdev/pic18f4515.c,
	  device/lib/pic16/libdev/pic18f4610.c,
	  device/lib/pic16/libio/Makefile.am,
	  device/lib/pic16/libio/Makefile.in,
	  device/lib/pic16/pics.all: added support for 18f[24][456]10
	  and 18f[24]515 devices
	* doc/sdccman.lyx: updated list of supported PIC16 devices

	* src/pic/glue.c, src/pic/pcode.c, src/pic/pcodeflow.c,
	  src/pic16/glue.c, src/pic16/pcode.c, src/pic16/pcodeflow.c,
	  src/xa51/gen.c: avoid compiler warnings
	* support/scripts/inc2h-pic16.pl: removed trailing whitespace

2008-10-22 Gudjon I. Gudjonsson <gudjon AT gudjon.org>

	* device/include/mcs51/p89v66x.h: NXP header file
	* device/include/mcs51/p89c66x.h: fixed an SBIT definition
	  (svn commit by Frieder Ferlemann <Frieder.Ferlemann AT web.de>)

2008-10-14 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/Makefile.am,
	  device/lib/pic16/libio/Makefile.am: enable building libraries for
	  18f2321, 18f4321, 18f2523, 18f4620, 18f66j60, 18f66j65, 18f67j60,
	  18f86j60, 18f86j65, 18f87j60, 18f96j60, 18f96j65, and 18f97j60
	* device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libio/Makefile.in: regenerated

2008-10-14 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f2450.h,
	  device/include/pic16/pic18f4450.h,
	  device/lib/pic16/libdev/pic18f2450.c,
	  device/lib/pic16/libdev/pic18f4450.c,
	  device/include/pic16/adc.h,
	  device/include/pic16/pic16devices.txt,
	  device/include/pic16/pic18fregs.h,
	  device/lib/pic16/libdev/Makefile.am,
	  device/lib/pic16/libdev/Makefile.in,
	  device/lib/pic16/libio/Makefile.am,
	  device/lib/pic16/libio/Makefile.in,
	  device/lib/pic16/pics.all: added 18f2450 and 18f4450, closes #1844525

	* device/lib/pic16/libsdcc/stack/stack.S: there is no need to pin the
	  stack to a fixed location, relax it to automatically work with all
	  but the smallest devices (256 byte RAM devices need #pragma stack)

2008-10-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* debugger/mcs51/break.c: bugfix from patch 1989966, thanks Risto Huotari
	* debugger/mcs51/simi.c: bugfix from patch 1989972, thanks Risto Huotari
	* device/lib/_strcspn.c: fixed bug 2140931

2008-10-06 Raphael Neider <rneider AT web.de>

	* device/include/pic16/stdio.h,
	  device/lib/pic16/libc/stdio/putchar.c: putchar should not be
	  declared __naked for convenience, named all arguments
	* device/lib/pic16/libc/stdio/strmgpsim.c,
	  device/lib/pic16/libc/stdio/strmmssp.c,
	  device/lib/pic16/libc/stdio/strmusart.c: cosmetic changes

	* src/pic16/pcode.c (createReachingDefinitions): avoid segfault on
	  empty __naked functions,
	* (pCodeLabelDestruct, pic16_unlinkpCode, pic16_pCodeUnlink): fix
	  corner cases (unlink first/last pCode in list), reuse more code

2008-10-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/main.c (_ds390_genInitStartup): added
	* src/SDCCpeeph.c (getPatternVar): new, added,
	  (labelInRange): fixed bug 2115959
	* src/mcs51/peeph.def (rules 193.x to 198.x): check for labelInRange
	* src/SDCCicode.h: added newiTempOperand
	* src/SDCCcse.c (algebraicOpts): fixed bug for x*-1,
	  added optimizations for 0/x and x/-1, see also patch 2142900
	* support/regression/tests/onebyte.c (testMul): added test cases

2008-09-20 Borut Razem <borut.razem AT siol.net>

	* src/pic16/glue.c:
	  definition of absolute address symbols without initial value,
	  fixed SDCC crash "do not know how to intialize symbol"

2008-09-16 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/z80/mul.s (__mulsuchar_rrx_s, __muluschar_rrx_s),
	* device/lib/z80/div.s (__divsuchar_rrx_s, __modsuchar_rrx_s,
	  __divuschar_rrx_s, __moduschar_rrx_s): added mixed signedness versions
	* device/lib/z80/stubs.s: added stubs for above functions
	* src/SDCCopt.c (convilong),
	* src/SDCCsymt.c (initCSupport): fixed bug 1900961
	* src/SDCCsymt.h (__muldiv): enlarged for mixed signedness
	* src/z80/main.c (_hasNativeMulFor): fixed bug, I think
	* support/regression/tests/onebyte.c: enabled all tests for z80

2008-09-15 Borut Razem <borut.razem AT siol.net>

	* device/include/pic16/stdio.h, device/lib/pic16/libc/stdio/streams.c,
	  device/lib/pic16/libc/stdio/printf.c,
	  device/lib/pic16/libc/stdio/strmusart.c,
	  device/lib/pic16/libc/stdio/printf_tiny.c,
	  device/lib/pic16/libc/stdio/sprintf.c,
	  device/lib/pic16/libc/stdio/strmgpsim.c,
	  device/lib/pic16/libc/stdio/putchar.c,
	  device/lib/pic16/libc/stdio/fprintf.c,
	  device/lib/pic16/libc/stdio/strmmssp.c,
	  device/device/lib/pic16/libc/stdio/vprintf.c,
	  device/lib/pic16/libc/stdio/printf_small.c,
	  device/lib/pic16/libc/stdio/vsprintf.c,
	  device/lib/pic16/libc/stdio/strmputchar.c,
	  device/lib/pic16/libc/Makefile.am,
	  device/lib/pic16/libc/Makefile.in:
	  *printf now returns int, puchar.c moved from stdlib to stdio,
	  *printf format parameter type changed from char * to const char *,
	  added GNU link excetion text to library source files,
	  applyed GNU coding style, removed useless svn ids,
	  added BINARY_SPECIFIER macro re-enables the use of the removed 'b'
	  binary specifier: "%b", "%hb" and "%lb"
	* device/lib/pic16/libc/stdio/vfprintf.c:
	  applied patch #2044424: PIC16: vfprintf
	  thanks Mauro Giachero
	* support/regression/tests/bug1057979.c:
	  removed old pic16 sprintf specifics
	* .version, doc/sdccman.lyx: bumped sdcc version to 2.8.4
	* doc/sdccman.lyx: documented 'b' binary format specifier removal

2008-09-15 Raphael Neider <rneider AT web.de>

	* src/pic16/device.c (pic16_dump_usection): force udata sections
	  into the addressable range (0..0xFFF), workaround for a gpsim
	  bug preventing simulation of regtest bug1750318
	* src/pic16/ralloc.c (deassignLRs): cosmetic changes,
	  (serialRegAssign): fixed regtest bug-971834,
	  (pic16_packRegisters): avoid null-pointer dereference

2008-09-14 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c, src/pic16/ralloc.c: use
	  SYM_SPIL_LOC/SPIL_LOC macros, no functional changes
	* src/pic16/ralloc.c (rematStr): reimplemented, fixes #1818857

2008-09-12 Borut Razem <borut.razem AT siol.net>

	* support/regression/fwk/testfwk.h:
	  define pdata as data for pic16 target
	  thanks Mauro Giachero

2008-09-11 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bug-221100.c, support/regression/shifts.c,
	  support/regression/absolute.c:
	  applied patch #2105615: Some PIC16 testcase fixlets
	  thanks Mauro Giachero

2008-09-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/gen.c (genCmpGt, genCmpLt): fixed bug 2094505
	* support/regression/tests/bug2094505.c: new, added

2008-09-07 Borut Razem <borut.razem AT siol.net>

	* src/SDCCglue.c, src/SDCCast.c:
	  fixed throw of "excess elements" warning for char arrays
	* support/regression/tests/nullstring.c:
	  disable warning about excess elements in array of chars initializer

2008-09-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/z80/aslist.c (lstsym): changed old K&R to ANSI
	* src/SDCCicode.c (geniCodeCritical): fixed bug for hc08
	* src/z80/gen.c (genCritical, genEndCritical): fixed bug 2077267
	* support/regression/tests/bug2077267.c: new, added

2008-09-05 Raphael Neider <rneider AT web.de>

	* configure.in, Makefile.common.in: add support for ccache,
	  remove spurious $VERSION output, detect doc-tools even without
	  --enable-doc to facilitate later manual doc-builds, minor cleanup
	* configure: regenerated

	* doc/Makefile.in: quieten pdflatex, makeindex, and latex2html,
	  avoid races in parallel VPATH builds
	* doc/clean.mk: remove .lyx files in the builddir for VPATH builds
	* doc/sdccman.lyx: mention --without-ccache configure option

2008-09-01 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_derefPtr): handle CPOINTERs as well
	* (genConstPointerGet): fix reading bitfields from __code space
	* src/pic16/glue.c (pic16_printIvalBitFields): correctly mask
	  bitfield initializers (fix regression test bug1856409.c)
	* (pic16_printIvalCharPtr,pic16_printIvalPtr): generalized to support
	  arbitrary sizes

2008-08-31 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genAssign): removed useless compiler output
	* (genPointerGet,genPointerSet,genCast),
	  src/pic16/glue.c (pic16_printGPointerType):
	  also handle PPOINTERs just to avoid spurious asserts
	* (pic16_printIvalType,pic16_printIvalBitFields):
	  generalized to arbitrary type/bitfield sizes, allows compilation of
	  regression test bug-1981238.c
	* (pic16_printIvalChar): fix regression test structflexarray.c
	* (pic16_printIvalArray): avoid SIGSEGV on uninitialized strings
	  in initialized structs and fix #1843745
	* (pic16_printIvalStruct): always output initializers for all fields,
	  even those not explicitly given, fixes zeropad.c regression test
	* (pic16_printIvalUnion): fix union initializers (bug1426356.c,
	  #2073635, #1567098, and #1485812)
	* src/pic16/main.c (_pic16_keywords): remove unsupported 'pdata'

2008-08-31 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bug-895992.c,
	  support/regression/tests/onebyte.c:
	  enabled pic16 regression testing since the bugs
	  1511794: pic16: regression test bug-895992.c fails
	  1444425: onebyte.c regression tes fails on pic16
	  are fixed, probably by fixing
	  2048464: PIC16: fix genUminus - addresses not.c regression test
	* src/SDCCsymt.c, src/SDCCglue.c,
	  support/regression/tests/bug-1981238.c:
	  applied patch 2076664: fix #1981238 + SIGSEGV in SDCCGlue.c
	  thanks to RvS

2008-08-30 Borut Razem <borut.razem AT siol.net>

	* support/cpp/libcpp/files.c: SDCPP synchronized with GCC CPP
	  release version 4.3.2

2008-08-24 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/configure, device/lib/pic16/configure.ac:
	  always use the sdcc from the current build tree (ignore $CC from
	  the environment, fixes compile farm builds)
	* device/lib/Makefile.in: rename .a into .lib for compatibility,
	  remove more build products from install directory
	* sdcc/src/pic16/main.c (_pic16_linkEdit,_pic16_finaliseOptions)
	* sdcc/support/scripts/sdcc.nsi: revert to .lib extension for libs

2008-08-24 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.y: applied patch
	  2050245: Fix # 1963382
	  for bug
	  1963382: Listing File - C file comment is incorrect
	  thanks to RvS

2008-08-23 Borut Razem <borut.razem AT siol.net>

	* src/pic16/gen.c: applied patch
	  2048464: PIC16: fix genUminus - addresses not.c regression test
	  thanks Mauro Giachero

2008-08-22 Borut Razem <borut.razem AT siol.net>

	* device/lib/pic16/configure, device/lib/pic16/configure.ac,
	  src/pic16/main.c: allow spaces in gpasm and gplink paths

2008-08-15 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peep.c,
	* src/z80/peeph-z80.def: minor peephole improvement

2008-08-15 Raphael Neider <rneider AT web.de>

	* src/z80/gen.c (_vemit2): suppress compiler warning

	* src/pic/*.[ch]: make proper use of header files and avoid
	  ad-hoc extern declarations, mark module-local helpers 'static',
	  removed dead/replaced code, no functional changes
	* src/pic16/pcode.c: disentangled from pic14 backend

2008-08-14 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c: fixed #2051348
	* support/regression/tests/bug-2051348.c: regression test for #2051348

2008-08-10 Raphael Neider <rneider AT web.de>

	* configure.in,
	* Makefile.common.in: export PACKAGE for $docdir,
	  fixes #1957036, avoid some "underquoted definition" warnings
	* configure: regenerated

2008-08-10 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/**: build pic16 library using autotools for
	  improved dependency tracking

	* device/lib/Makefile.in,
	* src/pic16/main.c,
	* support/scripts/sdcc.nsi: adapt to changes in filenames (s/.lib/.a/)

2008-08-10 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (ReuseReg): do not overlay the registers used for
	  local variables if --nooverlay is given, workaround for #2023121

2008-08-08 Raphael Neider <rneider AT web.de>

	* src/pic16/genarith.c (genAddLit): fix structure access (#1888004)

2008-08-08 Raphael Neider <rneider AT web.de>

	* src/pic/pcoderegs.c,
	* src/pic/pcode.c,
	* src/pic16/pcode.c: replace own SAFE_snprintf with common SNPRINTF

2008-08-07 Borut Razem <borut.razem AT siol.net>

	* src/SDCCval.c, src/SDCCmain.c, src/SDCC.lex,
	  device/lib/pic/Makefile.rules, device/lib/ds390/Makefile.in,
	  device/lib/ds400/Makefile.in, device/lib/hc08/Makefile.in,
	  support/cpp/libcpp/lex.c,  doc/sdccman.lyx:
	  applied modified patch 2038174: Add support for binary constants v2
	  thanks Mauro Giachero
	* .version, doc/sdccman.lyx: bumped sdcc version to 2.8.3

2008-08-04 Raphael Neider <rneider AT web.de>

	* doc/sdccman.lyx,
	* src/pic16/device.h,
	* src/pic16/glue.c,
	* src/pic16/main.c: enable --optimize-goto by default

	* device/lib/pic16/Makefile.common.in: suppress removed option

	* src/pic16/gen.c,
	* src/pic16/genutils.c: avoid too long relative branches (#2031890)

2008-07-30 Borut Razem <borut.razem AT siol.net>

	* src/pic16/device.c, src/pic16/glue.c, src/pic16/pcode.c:
	  applied patch 22032433: PIC16: fix constant strings,
	  thanks Mauro Giachero

2008-07-29 Borut Razem <borut.razem AT siol.net>

	* src/pic16/gen.c: applied patches:
	  2030306: [1/3] PIC16: fix failing rotate.c tests on 16-bit variables,
	  2030307: [2/3] PIC16: fix failing rotate.c tests for 32-bit var (1),
	  2030310: [3/3] PIC16: fix failing rotate.c tests for 32-bit var (2),
	  thanks Mauro Giachero

2008-07-13 Philipp Klaus Krause <pkk AT spth.de>

	* src/port.h: Fixed typo in comment

2008-07-12 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/mappings.i: Implemented RFE #1919415
	* src/z80/peeph-z80.def: Implemented RFE #1919415, #1861376,
	  #1880202, #1914434, prepared for RFE #1703943

2008-07-12 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph.def,
	* src/z80/peeph-z80.def,
	* src/z80/peeph-gbz80.def: separate Z80 from GBZ80 peepholes in
	  preparation for Z80 peephole improvements

2008-06-21 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f66j60.h,
	* device/include/pic16/pic18f66j65.h,
	* device/include/pic16/pic18f67j60.h,
	* device/include/pic16/pic18f86j60.h,
	* device/include/pic16/pic18f86j65.h,
	* device/include/pic16/pic18f87j60.h,
	* device/include/pic16/pic18f96j60.h,
	* device/include/pic16/pic18f96j65.h,
	* device/include/pic16/pic18f97j60.h,
	* device/lib/pic16/libdev/pic18f66j60.c,
	* device/lib/pic16/libdev/pic18f66j65.c,
	* device/lib/pic16/libdev/pic18f67j60.c,
	* device/lib/pic16/libdev/pic18f86j60.c,
	* device/lib/pic16/libdev/pic18f86j65.c,
	* device/lib/pic16/libdev/pic18f87j60.c,
	* device/lib/pic16/libdev/pic18f96j60.c,
	* device/lib/pic16/libdev/pic18f96j65.c,
	* device/lib/pic16/libdev/pic18f97j60.c,
	* device/include/pic16/pic16devices.txt,
	* device/include/pic16/pic18fregs.h,
	* device/lib/pic16/pics.all: added new devices

	* device/include/pic16/adc.h,
	* device/lib/pic16/libio/adc/adcbusy.c,
	* device/lib/pic16/libio/adc/adcopen.c,
	* device/lib/pic16/libio/adc/adcsetch.c,
	* device/lib/pic16/libio/i2c/i2copen.c,
	* device/lib/pic16/libio/usart/uopen.c: adapted to new devices,
	  all changes from a patch by Anton Strobl

2008-06-12 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/info.cc, sim/ucsim/cmd.src/bp.cc,
	  sim/ucsim/xa.src/xa.cc, sim/ucsim/xa.src/xacl.h,
	  sim/ucsim/z80.src/z80cl.h, sim/ucsim/z80.src/z80.cc,
	  sim/ucsim/sim.src/uc.cc, sim/ucsim/sim.src/uccl.h,
	  sim/ucsim/hc08.src/hc08.cc, sim/ucsim/hc08.src/hc08cl.h,
	  sim/ucsim/s51.src/uc51cl.h, sim/ucsim/s51.src/uc390.cc,
	  sim/ucsim/s51.src/uc51.cc, sim/ucsim/s51.src/uc390cl.h,
	  sim/ucsim/avr.src/avrcl.h, sim/ucsim/avr.src/avr.cc:
	  fixed bug 1990586: s51 simulator, uc::disass() unimplemented
	  by applying the modified patch from Risto Huotari

2008-06-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* .version,
	* doc/sdccman.lyx: bumped sdcc version to 2.8.2
	* src/ds390/gen.c (aopPutUsesAcc, genAddrOf): fixed bug 1015185
	* src/mcs51/gen.c (genNearPointerGet, genNearPointerSet): fixed bug 1938300
	* support/regression/tests/bug1938300.c: new, added

2008-06-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/asm/ds390/features.h,
	* device/include/asm/mcs51/features.h,
	* device/include/mcs51/regc515c.h: inserted LGPL notice

2008-05-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/gbz80/div.s,
	* device/lib/z80/div.s: fixed bug 1904314 by applying a modified part of
	  patch 1597883, Thanks Robert Ramey

2008-05-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (createIvalType, createIvalStruct, createIvalArray,
	  createIvalCharPtr, createIvalPtr, createIval),
	* src/SDCCval.h
	* src/SDCCval.c (convertIListToConstList, list2expr): handle incomplete
	  initializers for local auto variables
	* support/regression/tests/zeropad.c: added testcase for auto initializers

2008-05-26 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/startup/crt0.c,
	* device/lib/pic16/startup/crt0i.c,
	* device/lib/pic16/startup/crt0iz.c: clean up, make use of access bank
	  explicit, fixed curr_entry loop for >= 256 initializer records,
	  removed debug code (write to 0xf7e)

2008-05-25 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic16f627a.h,
	* device/include/pic/pic16f628a.h,
	* device/include/pic/pic16f648a.h: added missing ports

2008-05-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/float.h: added __INFINITY
	* device/lib/_fsadd.c: handle overflows
	* device/lib/_fsmul.c,
	* device/lib/_fsdiv.c: use __INFINITY
	* device/lib/_fseq.c,
	* device/lib/_fsneq.c: handle -0.0
	* sim/ucsim/s51.src/uc89c51r.cc,
	* sim/ucsim/s51.src/uc89c51rcl.h: fixed bug 1385430
	* sim/ucsim/sim.src/hwcl.h: */* confuses VC
	* src/mcs51/gen.c (genSend): fixed bug with --xstack
	* support/regression/ports/mcs51-xstack-auto/spec.mk: print floats
	* support/regression/tests/snprintf.c: test bug with --xstack

2008-05-19  Philipp Klaus Krause <pkk AT spth.de>

	* src/SDCCpeeph.c (callFuncByName):
	  Support nested parenthesis in peephole function arguments (#1967300)

2008-05-19 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_emitpLabel,pic16_emitpLabelFORCE):
	  fixed duplicate labels (#1911325)

2008-05-19 Raphael Neider <rneider AT web.de>

	* src/regression/empty.c: suppress warning
	* src/regression/pointer1.c: enabled index_by_pointer()
	* src/regression/inline.c: now works for pic16 as well

	* src/pic16/device.c: include dbuf declarations
	* src/pic16/device.h: removed obsolete prototypes

	* src/pic16/gen.c, src/pic16/gen.h: moved generic pointer tags
	* src/pic16/glue.c: made purely local functions static,
	  (pic16_printGPointerType, pic16_printIvalCharPtr,
	  pic16_printIvalFuncPtr, pic16_printIvalPtr): fixed initialized
	  generic pointers' tags (#1961866)

	* src/pic16/pcode.c (assignValnums): optimize literal assignments

2008-05-19 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: remove uninstall.exe after uninstallation,
	  fixed typo, uninstall include/pic16/pic16devices.txt

2008-05-18 Borut Razem <borut.razem AT siol.net>

	* support/Utils/dbuf_string.[ch]: added dbuf_chomp(),
	  the buffer is null terminated
	* src/device/pic16.c:
	  applied modified patch 1965676: Patch for Win32 16 bit PIC
	* sdcc_vc_in.h: defined YY_NO_UNISTD_H

2008-05-16 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCC.lex (check_type),
	* src/SDCC.y (type_specifier2 TYPE_NAME): fixed bug 1925942
	* as/hc08/clean.mk,
	* as/mcs51/clean.mk,
	* as/z80/clean.mk: also clean *.dep
	* device/lib/pic16/libsdcc/stack/Makefile,
	* sim/ucsim/libtool: removed as they are rebuild by configure
	* src/clean.mk: removed izt, so Makefile is not deleted for distclean

2008-05-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (fixupInline, createFunction): save currBlockno in
	  fixupInline instead of createFunction to fix bug 1864577
	  (inlineFindMaxBlockno): removed, use global blockNo
	* src/SDCCglobl.h: added blockNo
	* src/z80/peep.c,
	* src/z80/peep.h: modified properties
	* support/regression/tests/bug1864577.c: new, added

2008-05-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/asdata.c,
	* as/mcs51/asm.h: added org_cnt
	* as/mcs51/asmain.c (main, asmbl): fixed bug 1957716, changed old K&R to ANSI
	* as/mcs51/asout.c: changed old K&R to ANSI
	* as/mcs51/Makefile.in: use common identifiers
	* as/hc08/asdata.c,
	* as/hc08/asexpr.c,
	* as/hc08/asm.h,
	* as/hc08/asmain.c,
	* as/hc08/asout.c,
	* as/hc08/Makefile.bcc,
	* as/hc08/Makefile.in: synchronized with as/mcs51/*
	* sdcc_vc_in.h: added define __func__
	* src/SDCCast.c (expandInlineFuncs): applied patch 1957148 to fix bug 1717305,
	  Thanks Ruud van Silfhout
	* support/regression/tests/bug1717305.c: new, added

2008-05-05 Borut Razem <borut.razem AT siol.net>

	* support/regression/Makefile.in,
	  support/regression/ports/ds390/spec.mk,
	  support/regression/ports/hc08/spec.mk,
	  support/regression/ports/mcs51-common/spec.mk,
	  support/regression/ports/pic14/spec.mk,
	  support/regression/ports/pic16/spec.mk,
	  support/regression/ports/ucz80/spec.mk,
	  support/regression/ports/z80/spec.mk:
	  added INC_DIR and LIBDIR paths
	* src/ds390/gen.c: removed duplicated selicolon

2008-05-04 Borut Razem <borut.razem AT siol.net>

	* support/regression/Makefile.in,
	  support/regression/fwk/lib/testfwk.c,
	  support/regression/ports/ds390/spec.mk,
	  support/regression/ports/hc08/spec.mk,
	  support/regression/ports/mcs51-common/spec.mk,
	  support/regression/ports/mcs51-large/spec.mk,
	  support/regression/ports/mcs51-medium/spec.mk,
	  support/regression/ports/mcs51-small/spec.mk,
	  support/regression/ports/mcs51-stack-auto/spec.mk,
	  support/regression/ports/mcs51-xstack-auto/spec.mk,
	  support/regression/ports/pic14/spec.mk,
	  support/regression/ports/pic16/spec.mk,
	  support/regression/ports/ucz80/spec.mk:
	  added possibility to define the sdcc binary directory SDCC_BIN_PATH
	  used to run regeression tests

2008-05-01 Raphael Neider <rneider AT web.de>

	* doc/sdccman.lyx, support/scripts/inc2h-pic16.pl: updated list of
	  supported devices and instructions to add new ones

2008-05-01 Raphael Neider <rneider AT web.de>

	* device/include/pic16/adc.h,
	  device/lib/pic16/libio/adc/adcbusy.c,
	  device/lib/pic16/libio/adc/adcopen.c,
	  device/lib/pic16/libio/adc/adcsetch.c: support old 18f242 and new
	  18f2455 style ADC devices, based on patch #1776197
	* device/lib/pic16/libio/adc/adcclose.c,
	  device/lib/pic16/libio/adc/adcconv.c,
	  device/lib/pic16/libio/adc/adcread.c: cosmetic changes
	* device/include/pic16/{pic18f2331.h,pic18f2431.h},
	  device/lib/pic16/libdev/{pic18f2331.c,pic18f2431.c}: reuse 18f4331
	* device/include/pic16/pic18f4431.h,
	  device/lib/pic16/libdev/pic18f4431.c: remove outdated comments
	* device/lib/pic16/libio/adc.ignore: forbid unhandled devices

2008-05-01 Raphael Neider <rneider AT web.de>

	* src/pic16/device.h: removed unused field PIC16_device.sfrRange,
	  moved xinst flag into pic16_options_t
	* src/pic16/device.c (default_device, pic16_list_devices,
	  pic16_find_device): removed references to sfrrange
	* src/pic16/gen.c (genFunction),
	  src/pic16/glue.c (pic16initialComments),
	  src/pic16/main.c (pic16_optionsTable),
	  src/pic16/ralloc.c (newReg, pic16_writeUsedRegs): updated references
	  to xinst
	* device/include/pic16/pic16devices.txt: removed sfrrange lines

2008-04-29 Raphael Neider <rneider AT web.de>

	* src/pic16/devices.inc,
	  device/include/pic16/pic16devices.txt: replaced compiled-in list
	  of devices with a variant parsed at runtime
	* src/pic16/device.c: added support for parsing pic16devices.txt,
	  clean up
	* src/pic16/device.h: removed (now) unused fields from PIC_device
	* src/pic16/main.c: removed #pragma maxram,
	  (_pic16_initPaths): removed bogus generation of search paths,
	  setup the port proper only after the search paths (for
	  pic16devices.txt) are set up,
	  (_pic16_finaliseOptions): moved processor dependant code here
	  from _pic16_initPaths(), clean up
	* src/pic16/ralloc.c (pic16_init_stack),
	* src/pic16/ralloc.h,
	* src/pic16/pcode.c: clean up
	* device/include/Makefile.in,
	  support/scripts/sdcc.nsi: also install/package pic16devices.txt
	* support/scripts/inc2h-pic16.pl: updated instructions

2008-04-29 Raphael Neider <rneider AT web.de>

	* device/include/pic16/{pic18f2480.h, pic18f2580.h, pic18f4423.h,
	  pic18f4480.h, pic18f4523.h, pic18f4580.h, pic18f6585.h, pic18f8585.h},
	  device/lib/pic16/libdev/{pic18f2480.c, pic18f2580.c, pic18f4423.c,
	  pic18f4480.c, pic18f4523.c, pic18f4580.c, pic18f6585.c, pic18f8585.c}:
	  added missing family members and 18f2480/2580/4480/4580 family
	* device/include/pic16/{pic18f2423.h, pic18f2523.h}: use 18f4523.h
	* device/include/pic16/pic18f2525.h: use 18f4620.h
	* device/include/pic16/pic18f6680.h: use 18f8680.h
	* device/include/pic16/pic18fregs.h,
	  device/lib/pic16/pics.all,
	  src/pic16/devices.inc: add new devices
	* device/lib/pic16/libdev/{pic18f2423.c, pic18f2523.c}: use 18f4523.c
	* device/lib/pic16/libdev/pic18f2525.c: use 18f4620.c
	* device/lib/pic16/libdev/pic18f6680.c: uso 18f8680.c
	* device/lib/pic16/libio/{adc.ignore, i2c.ignore, usart.ignore}:
	  prevent attempting to build the libio for some new devices

2008-04-29 Raphael Neider <rneider AT web.de>

	* debugger/mcs51/Makefile.in: fixed paths to sources

2008-04-25 Borut Razem <borut.razem AT siol.net>

	* as/link/lklibr.c: moved from as/link/z80/lklibr.c
	* as/link/hc08/lklibr.c, as/link/mcs51/lklibr.c: deleted
	* as/link/hc08/Makefile.bcc, as/link/hc08/Makefile.in,
	* as/link/hc08/link_hc08.dsp, as/link/mcs51/Makefile.bcc,
	  as/link/mcs51/Makefile.in, as/link/mcs51/aslink.dsp,
	  as/link/z80/Makefile.in, as/link/z80/linkgbz80.dsp,
	  as/link/z80/linkz80.dsp: lklibr.c moved
	* doc/INSTALL.txt: binary archives in bz2 format
	* support/cpp/auto-host_vc_in.h: CPP2 replaced with CPP

2008-04-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c (printIvalType, printIvalBitFields): fixed bug 1856409
	* support/regression/tests/bug1856409.c: new, added

2008-04-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/peep.c,
	* src/mcs51/peep.c: Use werror for error messages.
	* src/SDCCicode.c (geniCodeConditional),
	* src/SDCCsymt.c (structElemType): fixed bug 1839321
	* src/z80/Makefile.bcc,
	* src/z80/z80.dsp: added src/z80/peep.c/h
	* support/regression/tests/bug1839321.c: new, added

2008-04-20 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f2455.h: added bitfields for port C

2008-04-20 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peep.c: Use werror for error messages.

2008-04-19 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peep.h (declaration of notUsed()),
	* src/z80/main.c (enabled notUsed() for z80 port, documented z80_port
	  struct),
	* src/z80/z80.h (added dependency on peep.h),
	* src/z80/peep.c (definition of notUsed()): Implemented RFE #1880202
	  for Z80.

2008-04-19 Philipp Klaus Krause <pkk AT spth.de>

	* src/SDCCpeeph.c (added support for notUsed()),
	* src/mcs51/main.c (added dependency on peep.h, documented mcs51_port
	  struct),
	* src/port.h (removed dependency on mcs51/peep.h, added declaration
	  for notUsed()): Implemented generic (that is not port-specific) part
	  of RFE #1880202.

2008-04-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/mcs51/lkmem.c (summary2): fixed bug 1796077
	* device/lib/libsdcc.lib,
	* device/lib/Makefile.in,
	* support/regression/ports/mcs51-xstack-auto/spec.mk,
	* device/lib/calloc.c: renamed to _calloc.c
	* device/lib/free.c: renamed to _free.c
	* device/lib/malloc.c: renamed to _malloc.c
	* device/lib/realloc.c: renamed to _realloc.c
	* src/ds390/gen.c (aopGet, aopPut, genPlusBits, genDataPointerSet,
	  genNearPointerSet, genPagedPointerSet): synchronized with mcs51/gen.c
	* src/ds390/gen.c (popForBranch, genIfxJump, genCmp, genCmpEq, ifxForOp,
	  genAnd, genOr, genXor, genIfx, gen390Code): fixed bug 1509084
	* src/mcs51/gen.c (popForBranch, genIfxJump, genCmp, genCmpEq,
	  ifxForOp, genAnd, genOr, genXor, genNearPointerGet,
	  genPagedPointerGet, genFarPointerGet, genCodePointerGet,
	  genGenPointerGet, genIfx, gen51Code): fixed bug 1509084
	* src/ds390/gen.c,
	* src/mcs51/gen.c: throughout cosmetic changes for syncing both
	* src/SDCCsymt.h: updated IS_OP_RUONLY, IS_OP_ACCUSE
	* support/regression/tests/bug1509084.c: new, added

2008-04-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/cc2510fx.h: added _XPAGE
	* device/include/mcs51/compiler.h: cosmetic changes

2008-03-31 Maarten Brock <sourceforge.brock AT dse.nl>

	* sdcc.dsw: adapted for moved cpp2, added dependency for as_z80 on
	  config

2008-03-31 Borut Razem <borut.razem AT siol.net>

	* support/cpp2 renamed to support/cpp
	* support/cpp2/libiberty/filenames.h, support/cpp2/libiberty/hex.c,
	  support/cpp2/libiberty/splay-tree.c,
	  support/cpp2/libiberty/splay-tree.h, support/cpp2/libcpp/macro.c,
	  support/cpp2/libcpp/directives.c,
	  support/cpp2/libcpp/include/cpplib.h,
	  support/cpp2/libcpp/include/symtab.h,
	  support/cpp2/libcpp/include/line-map.h,
	  support/cpp2/libcpp/line-map.c, support/cpp2/libcpp/files.c,
	  support/cpp2/libcpp/init.c, support/cpp2/libcpp/traditional.c,
	  support/cpp2/libcpp/expr.c, support/cpp2/libcpp/internal.h,
	  support/cpp2/libcpp/lex.c, support/cpp2/libcpp/system.h,
	  support/cpp2/libcpp/charset.c: SDCPP synchronized with GCC CPP
	  release version 4.3.0
	* configure.in, configure, Makefile.in, Makefile.bcc:
	  adapted for moved cpp2

2008-03-31 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/hc08/mc68hc908jkjl.h: committed fix for bug #1929739,
	  thanks Alejandro Pustowka <alejo_pustowka AT yahoo.com.mx>

2008-03-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCloop.c (loopInvariants): applied fix for bug 1717943, thanks
	  Robert Larice
	* support/regression/tests/bug1717943.c: new, added

2008-03-30 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c (assignResultValue): Reverted reversal of order of
	  bytewise return value assignments introduced in last commit.

2008-03-30 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c (emitDebug, assignResultValue, genPlus, genMinus,
	  genMult, genJumpTab):
	  Use 16-bit instructions for addition in some additional cases,
	  implemented RFEs #1914251, #1914245, #1922090, #1921382, #1918323.

2008-03-30 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/ralloc.c (serialRegAssign, allocReg, tryAllocatingRegPair):
	  Implemented RFE #1921450, changed some debug messages.

2008-03-30 Borut Razem <borut.razem AT siol.net>

	* Small Device C Compiler 2.8.0 released
	* .version, doc/sdccman.lyx: changed sdcc version to 2.8.1
	* support/scripts/sdcc.nsi: added finish page; this version
	  was used for 2.8.0 release
	* doc/knownbugs.html: removed; magically generated by the build
	  process using gen_known_bugs.pl from now on

2008-03-23 Borut Razem <borut.razem AT siol.net>

	* src/pic/gen.h: Q&D solution for the bug, found by Jim Paris
	  and reverted it, since it was already fixed by Raphael ;-)
	* doc/knownbugs.html: updated for RC2

2008-03-22 Raphael Neider <rneider AT web.de>

	* src/SDCCicode.c (getPtrType): avoid unnecessary extra assignments
	  for PIC16 targets

2008-03-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (adjustArithmeticResult): fixed bug 1839299
	* support/regression/tests/bug1839277.c: added related testBug1839299

2008-03-21 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/gen.c (opIsGptr, adjustArithmeticResult, genAddrOf, genAssign),
	* src/mcs51/gen.c (opIsGptr, adjustArithmeticResult, genAddrOf, genAssign):
	  fixed bug 1839277
	* src/mcs51/gen.c: throughout only output hex constants
	* src/SDCCicode.c (getPtrType, geniCodeCast): fixed code size regression
	* support/regression/tests/bug1839277.c: new, added

2008-03-21 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/ralloc.c (callFuncByName): Used // instead of /**/ to fix
	  compilation warning about nested comments.

2008-03-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c (comparePtrType): fixed bug 1921073
	* support/regression/tests/bug1921073.c: new, added

2008-03-17 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/SDCCpeeph.c.c (callFuncByName):
	  Commented function parameters.

2008-03-17 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/ralloc.c (packRegsForAccUse2):
	  disabled a broken accumulator packing optimization (fixed #1292721).
	* support/regression/tests/bug-1292721: Regression test for #1292721.

2008-03-16 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (SetIrp,genNearPointerGet,genNearPointerSet):
	  fixed code bloat regression using a variant of patch #1915618

2008-03-16 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added section debugging macros, added SDCC
	  icon, changed startup menu for release distribution, code cleaning,
	  create url files instead links in startup menu

2008-03-16 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCcse.c (algebraicOpts): fixed bug 1579949
	* support/regression/tests/bug1579949.c: new, added

2008-03-14 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast.c: fixed bug 1255403

2008-03-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: enhanced paragraph about bankswitching for mcs51
	* src/cdbFile.c (cdbWriteBasicSymbol): fixed bug 1909409 for locals

2008-03-14 Borut Razem <borut.razem AT siol.net>

	* as/doc/asmlnk.doc, as/doc/asxhtm.html: updated link-xx and aslink
	  command line options
	* as/link/hc08/lkmain.c: converted tabs to spaces so that the usage
	  is correctly displayed
	* as/link/z80/lkmain.c: usage line commented out

2008-03-13 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: corrected to be able to convert to PDF,
	  updated the list pf supported pic14 devices

2008-03-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: added paragraph about bankswitching for mcs51

2008-03-12 Borut Razem <borut.razem AT siol.net>

	* as/doc/asmlnk.doc, as/doc/asxhtm.html: updated command line options,
	  fixed documentation request #1718191
	* as/hc80/asmain.c, as/mcs51/asmain.c: added option -c to usage
	* doc/sdccman.lyx: added description of --no-std-crt0 gbz80
	  command line option

2008-03-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (isConformingBody): fixed bug 1505811, thanks Robert Larice
	* support/regression/tests/bug1505811.c: new, added

2008-03-09 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f2620.h,
	* device/include/pic16/pic18f4620.h,
	* device/lib/pic16/libdev/pic18f2620.c,
	* device/lib/pic16/libdev/pic18f4525.c,
	* device/lib/pic16/libdev/pic18f4620.c: merged 18f2525/2620/4525/4620
	  family to consistently use pic18f4620.[ch], fixes #1832562

2008-03-09 Borut Razem <borut.razem AT siol.net>

	* .version, sdcc.spec, doc/sdccman.lyx, doc/INSTALL.txt:
	  changed sdcc version to 2.8.0
	* knownbugs.html: regenerated
	* support/scripts/gen_known_bugs.pl: added number of open bugs

2008-03-09 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_mov2w_volatile): NEW, read volatile operands,
	  (genOr): read volatile operand even if the result is known,
	  closes #1511838
	  (genOr,genXor): removed unused legacy code,
	  (genDummyRead): use pic16_mov2w_volatile()

2008-03-08 Borut Razem <borut.razem AT siol.net>

	* src/SDCCglue.c: fixed bug #1864582: multiple definition of char
	  cons w. --model-large
	* support/regression/staticinit.c: added regression test for bug
	  #1864582

2008-03-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/gen.c (pushSide, genPcall),
	* src/hc08/gen.c (pushSide, genPcall): synchronized with mcs51
	* src/mcs51/gen.c: cosmetic changes
	* support/regression/fwk/include/testfwk.h: added macro reentrant
	* support/regression/tests/bug1908493.c: new, added

2008-03-08 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/SDCCdebug.c:, as/link/lkaomf51.c: Fixed bug 1909409: Pdata in OMF file

2008-03-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (pushSide, genPcall): fixed bug 1908493
	* src/SDCCmain.c (preProcess): removed -DSDCC_PARMS_IN_BANK1 because it is
	  already set in ds390/main.c and mcs51/main.c

2008-03-07 Raphael Neider <rneider AT web.de>

	* src/regression/init0.c: new test for initialized arrays of function
	  pointers
	* src/regression/Makefile: made a bit more flexible, added init0.c
	* src/pic/glue.c (emitIvals): hacky fix for initializing from function
	  pointers, closes #1427663

2008-03-05 Borut Razem <borut.razem AT siol.net>

	* dos/sdccman.lyx: docummented predefined macros SDCC_REVISION,
	  SDCC_PARMS_IN_BANK1, SDCC_FLOAT_REENT and SDCC_INT_LONG_REENT

2008-03-05 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* support/librarian/sdcclib.c:Added feature request 1908061:
	  Synchronise sdcclib commands with ar.

2008-03-04 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCCmain.c: added predefined macros SDCC_REVISION (RFE #1907229),
	  and (depending on corresponding compiler option) SDCC_PARMS_IN_BANK1,
	  SDCC_FLOAT_REENT, SDCC_INT_LONG_REENT
	* device/include/mcs51/compiler.h: removed umlauts, added double
	  underscore

2008-03-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCptropt.c (ptrPseudoSymConvert): fixed bug 1536762
	* support/regression/tests/bug1536762.c: new, added
	* src/SDCCutil.c,
	* src/SDCCutil.h: added getBuildDate()
	* src/SDCCmain.c (printVersionInfo),
	* src/SDCCglue.c (initialComments): use getBuildDate() instead of
	  __DATE__
	* src/*/ralloc.c: removed IS_OP_RUONLY macro
	* src/ds390/ralloc.c (packRegisters),
	* src/mcs51/ralloc.c (packRegisters),
	* src/z80/ralloc.c (packRegisters): applied fix for bug 1618050, thanks
	  Robert Larice
	* support/regression/tests/bug1618050.c: new, added
	* src/SDCCsymt.h: fixed typo in DECLSPEC2TXT
	* support/regression/fwk/include/testfwk.h,
	* support/regression/tests/bug1838000.c: moved _AUTOMEM and _STATMEM to
	  testfwk.h

2008-03-04 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c: removed unused prototypes, prevent internal errors
	  on accessing OP_SYM_TYPE(op)
	* src/pic/gen.h: removed unused prototype of genMinusDec()
	* src/pic/genarith.c (genMinus): cosmetic changes, rewritten to
	  fix #1876953 (invalid subtraction code), removed unused code

2008-03-03 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c,
	* src/pic/gen.h,
	* src/pic/genarith.c,
	* src/pic/ralloc.c,
	* src/pic/ralloc.h: removed AOP_R0, AOP_R1, AOP_DPTR, AOP_DPTR2,
	  AOP_ACC, and *_IDX and adjusted code, removed unused legacy code

2008-03-03 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (find_device): search user-specified paths first
	  for pic14devices.txt, fixes #1900827

2008-03-02 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: fixed bug in IsNT, LogicLib-isation of
	  AddToPath and RemoveFromPath

2008-03-01 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: reverted MULTIUSER page since it didn't
	  work correctly, added debugging support if -DSDCC.DEBUG command line
	  option is defined

2008-02-28 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: cosmetic changes

2008-02-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/ralloc.c (fillGaps): fixed bug 1839671
	* doc/sdccman.lyx: fixed unmeant removal of spaces

2008-02-27 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: corrected installation directory for
	  current user installation mode
	* doc/README.txt: added Philipp Klaus Krause to the developers list

2008-02-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genUnpackBits): don't generate ifxJump, instead
	  return ifx condition
	  (genNearPointerGet, genPagedPointerGet, genFarPointerGet,
	  genCodePointerGet, genGenPointerGet): cleanup aop before generating
	    ifxJump to fix bug 1838000
	* src/SDCCsymt.c (aggregateToPointer): fix problem for xstack
	* support/regression/tests/bug1838000.c: new, added
	* device/include/mcs51/cc1110.h: new, added, thanks to Pravin Angolkar

2008-02-26 Borut Razem <borut.razem AT siol.net>

	* src/SDCCast.c, doc/sdccman.lyx: fixed RFE #1901171: inerger promotion
	  of casted varargs
	* support/scripts/sdcc.nsi: added MULTIUSER page,
	  NSIS upgraded to version 2.35

2008-02-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/ralloc.c (isSpiltOnStack): fixed bug 1565152
	* support/regression/tests/bug1565152.c: new, added

2008-02-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genPagedPointerSet): fixed bug 1670148
	* support/regression/ports/mcs51-xstack-auto/spec.mk: added expf.c
	* support/regression/tests/bug1670148.c: new, added

2008-02-25 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/at89c51ed2.h: fixed bug 1901469.

2008-02-24 Borut Razem <borut.razem AT siol.net>

	* src/SDCCast.c, src/SDCCast.h: fixed bug #1874922: explicit typecast
	  is ineffective for unsigned char parameter

2008-02-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (expandInlineFuncs): fixed bug 1875869
	* src/SDCCglue.c (printIvalBitFields): fixed bug 1806631
	* support/regression/tests/bitopcse.c: removed hc08 exception, see testfwk.h
	* support/Util/MySystem.c (my_system): output errorcode when verbose

2008-02-22 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c (genMult): Rewrote 8-bit multiplication by constant,
	  implements #1898231

2008-02-22 Philipp Klaus Krause <pkk AT spth.de>

	* device/lib/z80/mul.s: Rewrote __muluchar_rrx_s, to improve 8-bit mult.,
	  implements #1896290

2008-02-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (createIvalStruct): fixed bug 1466761

2008-02-21 Borut Razem <borut.razem AT siol.net>

	* support/regression/Makefile.in,
	  support/regression/ports/ds390/spec.mk,
	  support/regression/ports/hc08/spec.mk,
	  support/regression/ports/mcs51-common/spec.mk,
	  support/regression/ports/pic14/spec.mk,
	  support/regression/ports/pic16/spec.mk,
	  support/regression/ports/ucz80/spec.mk,
	  support/regression/ports/xa51/spec.mk:
	  added CFLAGS when compiling timeout

2008-02-20 Philipp Klaus Krause <pkk AT spth.de>

	* support/regression/tests/bugs-1596270-1736867.c: Regression test for
	  #1596270, #1736867

2008-02-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCClrange.c (findPrevUse): fixed bug 1888147
	* support/regression/tests/bug1888147.c: new, added

2008-02-20 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c: fixed bugs #1596270, #1736867

2008-02-20 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/gen.c: fixed bug in register pair loading when swapping register
	  contents, mostly fixes #1596270

2008-02-20 Philipp Klaus Krause <pkk AT spth.de>

	* src/z80/peeph.def,
	* src/z80/peeph-z80.def: moved peephole that breaks gbz80 to z80-specific
	  peepholes, fixes #1806565

2008-02-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCpeeph.c (operandBaseName): added check for @Ri
	* src/mcs51/peeph.def (rule 177.c): added operandsNotRelated(%1 %3)
	  fixes bug 1739475, thanks Robert Larice
	  (rule 271): new, added

2008-02-18 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/s51.src/Makefile.in: fixed error made in previous commit

2008-02-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (linkEdit): emit -z when using --debug for z80

2008-02-17 Raphael Neider <rneider AT web.de>

	* src/pic16/genarith.c,
	* src/pic16/gen.c,
	* src/pic16/gen.h,
	* src/pic16/genutils.c: removed unused legacy code,
	  removed unused fields from struct asmop and struct _G

2008-02-17 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (AccRsh): cosmetic changes,
	  (shiftR1Left2ResultSigned,shiftR1Left2Result,shiftL1Left2Result,
	  genRightShiftLiteral): fixed to work with SFRs as result by
	  assigning only once to result,
	  removed a lot of unused/excluded code fragments

2008-02-17 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic16f88.h,
	* device/include/pic/pic16f886.h,
	* device/include/pic/pic16f887.h: added TRISA6 and TRISA7

2008-02-17 Borut Razem <borut.razem AT siol.net>

	* src/z80/peeph.def: applied patch
	  #1893626: Optimize tail calls on Z80, thanks to Philipp Krause
	* src/z80/gen.c, src/z80/peeph.def: applied patch
	  #1893510: Improve logical left shift on Z80, thanks to Philipp Krause
	* sim/ucsim/avr.src/Makefile.in, sim/ucsim/hc08.src/Makefile.in,
	  sim/ucsim/s51.src/Makefile.in, sim/ucsim/sim.src/Makefile.in,
	  sim/ucsim/xa.src/Makefile.in, sim/ucsim/z80.src/Makefile.in,
	  sim/ucsim/main_in.mk: renamed libutil.a to libucsimutil.a in order to
	  enable compilation on Mac OS X 10.5 (Leopard) and XCode v3.0

2008-02-16 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/mcs51/aslink.dsp: removed SDK define
	* as/link/z80/clean.mk: brought in sync with other ports
	* as/link/z80/lklibr.c (SdccLib, fndsym): handle the dflag here too
	* as/hc08/Makefile.bcc,
	* as/mcs51/Makefile.bcc,
	* as/z80/Makefile.bcc: noice.c was moved to as/asxxsrc/
	* src/z80/main.c (_setValues): use the now capitalized -Z,
	  (z80_port, gbz80_port): generate debug information when asked

2008-02-16 Borut Razem <borut.razem AT siol.net>

	* as/z80/asmain.c, as/z80/asm.h, as/z80/asdata.c,
	  as/link/z80/lkmain.c, as/z80/as_gbz80.dsp, as/z80/as_z80.dsp,
	  as/z80/Makefile.in. as/z80/Makefile.bcc:
	  applied patch #1893393: patch for as-z80 and link-z80 to generate
	  cdb, thanks to Armin Diehl
	* as/*/asnoice.c, as/hc08/as_hc08.dsp, as/hc08/Makefile.in,
	  as/mcs51/asx8051.dsp, as/mcs51/Makefile.in:
	  asnoice.c moved to as/asxxsrc/asnoice.c
	* src/z80/peeph-gbz80.def: applied patch
	  #1880235: Z80 return peephole, thanks to Philipp Krause

2008-02-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* .version,
	* doc/sdccman.lyx: bumped version to 2.7.5
	* src/SDCCsymt.c (compareType, comparePtrType): fixed bug 1281583

2008-02-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/pic16/stdlib.h,
	* device/lib/pic16/libc/stdlib/ltoa.c,
	* device/lib/pic16/libc/stdio/vfprintf.c: ascii strings are char*

2008-02-13 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c, src/SDCCglue.c: fixed --c1mode
	* src/pic16/glue.c, src/SDCCast.c, src/SDCCast.h, src/SDCCBBlock.c,
	  src/SDCCcse.c, src/SDCCglue.c, src/SDCCicode.c, src/SDCCloop.c,
	  src/SDCCopt.c,  src/SDCCval.c:
	  fixed bug #1890273: SDCC Warning 154 shows wrong filename

2008-02-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c (compareType): fixed bug 1309013

2008-02-09 Borut Razem <borut.razem AT siol.net>

	* src/SDCCval.c, src/SDCCval.h:
	  code cleaning, added function constChrVal()
	* src/SDCCglue.c, src/pic/glue.c, src/pic16/glue.c, src/SDCCast.c, src/SDCC.y:
	  call constChrVal() instead constVal()

2008-02-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (resolveSymbols): added reentrancy check for parameters
	  of function pointer
	* src/SDCCerr.h,
	* src/SDCCerr.c: changed warning W_NONRENT_ARGS to error E_NONRENT_ARGS
	* support/regression/tests/absolute.c: added TestStruct TestVar (see also
	  bug 1859853)

2008-02-01 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic16f886.h,
	* device/include/pic/pic16f887.h: added RA6 and RA7

2008-01-24 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic16f88.h: added RA6 and RA7
	* device/lib/pic/libdev/disabled_pic16f886.c,
	* device/lib/pic/libdev/disabled_pic16f887.c: renamed and enabled

	* src/pic16/devices.inc,
	* device/include/pic16/pic18f2423.h,
	* device/include/pic16/pic18f2523.h,
	* device/include/pic16/pic18fregs.h,
	* device/lib/pic16/pics.all
	* device/lib/pic16/libdev/pic18f2423.c,
	* device/lib/pic16/libdev/pic18f2523.c: added 18f2423 and 18f2523
	* device/lib/pic16/libio/i2c.ignore,
	* device/lib/pic16/libio/usart.ignore,
	* device/lib/pic16/libio/adc.ignore: ignore new devices

2008-01-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (createRMW): fixed bug 1582651

2008-01-20 Borut Razem <borut.razem AT siol.net>

	* src/SDCCcse.c: partially fixed enhancement request
	  #1793872 - multiply by -1 not collapsed
	* support/regression/tests/arithcsi.c: added regression test

2008-01-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/asx8051.dsp: removed define SDK
	* as/mcs51/i51mch.c (machine): fixed bug 1865114
	* device/include/asm/ds390/features.h: fixed bug with ds390 & stack-auto
	* as/link/lklex.c,
	* as/link/mcs51/lkmain.c: used LKDIRSEP, LKDIRSEPSTR and LKOBJEXT,
	  cosmetic changes, brought more in sync, changed old K&R to ANSI

2008-01-13 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added Uninstall/reinstall page, ...
	* src/SDCCicode.c: fixed bug #1870216 - Error 122: dividing by zero

2007-12-30 Borut Razem <borut.razem AT siol.net>

	* src/pic16/gen.c: fixed implementation of bitwise operations for
	  pic16 target
	* support/regression/tests/bitwise.c: added test cases

2007-12-29 Borut Razem <borut.razem AT siol.net>

	* src/SDCCasm.[ch]: renamed from asm[ch], use dbuf_getline(), ...
	* src/src.dsp, src/Makefile.bcc, src/Makefile.in, src/common.h,
	  src/SDCCglue.c, src/xa51/main.c: asm.[ch] renamed to SDCCasm.[ch]
	* support/Util/dbuf_string.[ch]: added function dbuf_getline()
	* src/ds390/gen.c, src/hc08/gen.c, src/mcs51/gen.c, src/pic16/gen.c,
	  src/pic/gen.c, src/z80/gen.c, src/xa51/gen.c, src/pic16/ralloc.c,
	  src/pic16/pcode.[ch]: added const qualifier
	* as/hc08/Makefile.bcc, as/hc08/Makefile.in, as/hc08/as_hc08.dsp,
	  as/mcs51/Makefile.bcc, as/mcs51/Makefile.in, as/mcs51/asx8051.dsp,
	  as/z80/Makefile.bcc, as/z80/Makefile.in, as/z80/as_gbz80.dsp,
	  as/z80/as_z80.dsp: added dbuf.[ch] and dbuf_string[ch] to project
	* as/asxxsrc/aslex.c: use dbuf_getline()
	* as/hc08/asdata.c, as/hc08/asexpr.c, as/hc08/asm.h, as/hc08/m08adr.c,
	  as/mcs51/asdata.c, as/mcs51/asexpr.c, as/mcs51/asm.h,
	  as/mcs51/i51adr.c, as/z80/asdata.c, as/z80/asexpr.c, as/z80/aslist.c,
	  as/z80/asm.h, as/z80/z80adr.c:
	  changed type of ib and ip to const char *

2007-12-28 Borut Razem <borut.razem AT siol.net>

	* as/asxxsrc/aslex.c: moved from as/mcs51/aslex.c;
	  introduced (readlin) - long lines are turuncated
	* as/hc08/as_hc08.dsp, as/mcs51/asx8051.dsp, as/z80/as_gbz80.dsp,
	  as/z80/as_z80.dsp, as/hc08/Makefile.in, as/mcs51/Makefile.in,
	  as/z80/Makefile.in: moved aslex.c to asxxsrc
	* as/hc08/aslex.c, as/z80/aslex.c: deleted
	* as/hc08/asmain.c, as/mcs51/asmain.c:
	  added missing initialization of a_addr field
	* support/regression/tests/long_asm_line.c: added regtest for long
	  assembler line

2007-12-22 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex: fixed bug #1852894: # character hangs the compiler

2007-12-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c (computeType): fixed bug, thanks Fan Weiguang

2007-12-16 Borut Razem <borut.razem AT siol.net>

	* device/include/pic16/stdbool.h: removed, since already exists in
	 device/include/; this also fixes bitopcse.c regression test for pic16
	 target
	* support/regression/fwk/inclusw/testfwk.h: added macro ASSERT_FAILED
	* src/pic16/glue.c: fixed bug #1851855: generic static pointer
	  dereference doesn't work; covered by regression test bug1399290

2007-12-05 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: fixed bug #1844509 - Correction to Manual 4.6.9
	  Adding new PIC16

2007-12-01 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/cmdmem.cc, sim/ucsim/cmd.src/mem.cc:
	  corrected handling of the highest_valid_address

2007-11-17 Raphael Neider <rneider AT web.de>

	* src/pic/main.c (_asmCmd): include debug arguments (-g as $3)
	* src/pic/glue.c (picglue): emit .file if --debug is given

2007-11-17 Raphael Neider <rneider AT web.de>

	* src/pic16/genarith.c (pic16_genPlus, pic16_genMinus): take special
	care when left or right operand resides in result, fixes #1830220

2007-11-17 Borut Razem <borut.razem AT siol.net>

	* src/SDCCglue.c, src/pic16/glue.c: reverted fix for bug
	  #983491 - "Merge duplicate strings function is ineffective"
	* support/regression/tests/bug-983491.c: regtest disabled
	* as/asxxsrc: created
	  as/asxxsrc/assym.c, as/asxxsrc/strcmpi.c: moved
	  as/hc08/assym.c, as/mcs51/assym.c, as/strcmpi.c,
	  as/z80/assym.c, as/hc08/asstore.c, as/mcs51/asstore.c: deleted
	  as/hc08/Makefile.bcc, as/hc08/Makefile.in, as/hc08/as_hc08.dsp,
	  as/hc08/asm.h, as/link/hc08/Makefile.bcc, as/link/hc08/Makefile.in,
	  as/link/hc08/link_hc08.dsp, as/link/mcs51/Makefile.bcc,
	  as/link/mcs51/Makefile.in, as/link/mcs51/aslink.dsp,
	  as/link/z80/Makefile.in, as/link/z80/linkgbz80.dsp,
	  as/link/z80/linkz80.dsp, as/mcs51/Makefile.bcc, as/mcs51/Makefile.in,
	  as/mcs51/asm.h, as/mcs51/asx8051.dsp, as/z80/Makefile.bcc,
	  as/z80/Makefile.in, as/z80/as_gbz80.dsp, as/z80/as_z80.dsp,
	  as/z80/Makefile.as_hc08, as/mcs51/Makefile.asx8051: modified
	  created as/asxxsrc directory, assym.c and strcpi.c moved into it

2007-11-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stdarg.h: added and removed some casts
	* src/SDCCsymt.c (compareType): Fully check types between generic and
	  non-generic pointers, also accept ptr-ptr to void-ptr assignments

2007-11-13 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bug-1817005.c:
	  added regtest for bug #1817005 - as-z80 chokes on long labels

2007-11-12 Borut Razem <borut.razem AT siol.net>

	* as/z80/asmain.c, as/z80/asm.h, as/z80/assym.c, as/z80/asdata.c,
	  as/z80/asout.c, as/z80/aslist.c:
	  fixed bug #1817005 - as-z80 chokes on long labels

2007-11-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/hc08/asmain.c,
	* as/z80/asmain.c: cosmetic changes
	* as/hc08/alloc.h,
	* as/mcs51/alloc.h,
	* as/z80/alloc.h: removed
	* as/hc08/assym.c,
	* as/mcs51/assym.c: replaced alloc.h with stdlib.h
	* as/link/aslink.h: added LKDIRSEP and, LKDIRSEPSTR
	* as/link/hc08/Makefile.in,
	* as/link/mcs51/Makefile.in,
	* as/link/z80/Makefile.in: added -DUNIX to CFLAGS
	* as/link/lklex.c,
	* as/link/mcs51/lkarea.c,
	* as/link/mcs51/lkmain.c: cosmetic changes
	* as/link/hc08/lklibr.c,
	* as/link/z80/lklibr.c,
	* as/link/mcs51/lklibr.c: used LKDIRSEP, LKDIRSEPSTR and LKOBJEXT,
	  used cygwin_conv_to_full_posix_path,
	  added warnings, cosmetic changes, brought more in sync
	  changed old K&R into ANSI function declarations
	* as/link/z80/lklibr.c (loadAdb): added
	* as/link/z80/lkmain.c: removed -- option from usage text

2007-11-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (outBitC): optimized for no result

2007-10-31 Borut Razem <borut.razem AT siol.net>

	* src/SDCCsymt.c: fixed (hopeful properly) bug
	  #1805702 - order of extern matters
	* support/regression/tests/bug-1805702.c: enabled regtest for bug
	  #1805702

2007-10-29 Borut Razem <borut.razem AT siol.net>

	* src/SDCCsymt.c: reverted bad fixed of bug #1805702
	  - order of extern matters
	* support/regression/tests/bug-1805702.c: disabled regtest for bug
	  #1805702

2007-10-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/peeph.def: replaced 24bitModeAndPortDS390 by
	  24bitMode, portIsDS390
	* src/mcs51/gen.c (genOr): optimized for RFE 1750727
	* src/SDCCpeeph.c (flat24bitModeAndPortDS390): removed
	  (notVolatileVariable): also check sloc names,
	  (callFuncByName): moved ftab[] out of function and sorted it by use

2007-10-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stdarg.h: fixed bug in va_start macro for --xstack
	* src/hc08/gen.c (aopForRemat): aop->aopu.aop_immd.from_cast_remat not set,
	  aop->aopu.aop_immd.aop_immd2 not filled with (generic) pointer type
	* src/SDCCicode.c (geniCodeCast): fixed bug 880197
	* support/regression/tests/bug-880197.c: new, added

2007-10-28 Borut Razem <borut.razem AT siol.net>

	* support/regression/Makefile.in,
	  support/regression/ports/mcs51-large/spec.mk,
	  support/regression/ports/mcs51-xstack-auto/spec.mk,
	  support/regression/ports/mcs51-stack-auto/spec.mk,
	  support/regression/ports/mcs51-medium/spec.mk,
	  support/regression/ports/mcs51-common/spec.mk,
	  support/regression/ports/mcs51-common/*,
	  support/regression/ports/mcs51-small/*:
	  mcs51 renamed to mcs51-common, created mcs51-small
	* src/SDCCsymt.c: fixed bug #1805702 - order of extern matters
	* support/regression/tests/bug-1805702.c: added regtest for bug
	  #1805702

2007-10-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peeph.def: moved rules 257.x to 253.x and re-enabled 253.b,
	  added new rules 265 - 270
	* support/regression/tests/bug1721024.c:new, added
	* support/regression/Makefile.in: renamed test-mcs51 to test-mcs51-small,
	  introduced new test-mcs51 to run all mcs51 tests

2007-10-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bug1816470.c: new, added

2007-10-21 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (resultTypePropagate): do propagate for LEFT_OP, do not
	  propagate for *,+,- with float, fixed bug 1816470
	  (decorateType): cast to resultTypeProp instead of resultType

2007-10-19 Borut Razem <borut.razem AT siol.net>

	* src/pic16/glue.c: fixed bug #983491 - "Merge duplicate strings
	  function is ineffective" for pic16 tareget
	* support/scripts/listerr.c: corrected include path
	* device/lib/_itoa.c: fixed bug #1806402 - _itoa and _uitoa leak to
	  adjacent memory

2007-10-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/using.c: new, added
	* support/regression/tests/vaargs.c: fixed and enabled test

2007-10-18 Borut Razem <borut.razem AT siol.net>

	* src/SDCCglue.c: fixed bug #983491 - Merge duplicate strings function
	  is ineffective
	* support/regression/tests/bug-983491.c: added regtest for bug #983491

2007-10-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: documented option --Werror
	* src/SDCCsymt.c (checkFunction): fixed bug 1815418 by setting
	  RegBankUsed[] earlier

2007-10-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/p89lpc938.h: new, added, thanks Kyle Guinn
	* src/pic/glue.c,
	* src/SDCCval.c,
	* src/SDCCast.c,
	* src/SDCCast.h: replaced AST_LIT_VALUE with AST_FLOAT_VALUE and
	  AST_ULONG_VALUE
	* src/SDCCast.c (decorateType): improved optimization of tri-op
	* src/SDCCerr.c (vwerror, setWError),
	* src/SDCCerr.h,
	* src/SDCCmain.c (parseCmdLine): added option --Werror to treat all
	  warnings as errors, thanks Stas Sergeev for PATCH 1813211

2007-10-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (leftRightUseAcc): use macro IS_OP_ACCUSE
	* src/SDCCast.c (decorateType): optimize bit=cond?1:0, RFE 1738430
	* support/regression/tests/bug-223113.c,
	* support/regression/tests/bug-426632.c,
	* support/regression/tests/bug-468811.c,
	* support/regression/tests/bug-477835.c,
	* support/regression/tests/bug-478094.c,
	* support/regression/tests/bug-499644.c,
	* support/regression/tests/bug-524209.c,
	* support/regression/tests/bug-524211.c,
	* support/regression/tests/packcast.c,
	* support/regression/tests/structidx.c: added empty tests
	* support/regression/tests/bug-607243.c: enabled test

2007-10-06 Borut Razem <borut.razem AT siol.net>

	* .version, doc/sdccman.lyx: bumped version to 2.7.4 to indicate the full
	   support of universal binaries on Mac OS X

2007-10-02 Borut Razem <borut.razem AT siol.net>

	* src/SDCCval.h: unified double2ul macro for all platforms
	* src/SDCCval.c: fixed bug #1777758 - applied Maarten's patch
	* support/regression/tests/bitwise.c: added regtest for bug #1777758

2007-09-30 Borut Razem <borut.razem AT siol.net>

	* src/SDCCval.h: fixed bug #1739860 - sdcc does not work correctly on some
	  platforms
	* sdcc_vc_in.h: enabled warnings
	* src/hc08/gen.c: fixed MSVC warning C4146: unary minus operator applied to
	  unsigned type, result still unsigned
	* src/mcs51/peep.c: fixed gcc warning: suggest parentheses around && within ||

2007-09-28 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (find_device): prevent buffer underflow error
	* src/pic/pcoderegs.c (OptimizeRegUsage): avoid dereferencing
	  the just destroyed list entry

2007-09-18 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: there's a dedicated wiki page for cmake and sdcc, thanks
	  Alexander Neundorf

2007-09-18 Borut Razem <borut.razem AT siol.net>

	* src/SDCCval.c: fixed MSVC warning C4146: unary minus operator
	 applied to unsigned type, result still unsigned

2007-09-17 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.y, src/SDCCast.c, src/SDCCcse.c, src/SDCCglue.c,
	  src/SDCCicode.c, src/SDCCopt.c, src/SDCCsymt.c, src/SDCCval.c,
	  src/SDCCval.h, src/hc08/gen.c, src/avr/gen.c, src/ds390/gen.c,
	  src/mcs51/gen.c, src/pic/gen.c, src/pic/genarith.c, src/pic/glue.c,
	  src/pic/ralloc.c, src/pic16/gen.c, src/pic16/genarith.c,
	  src/pic16/genutils.c, src/pic16/glue.c, src/pic16/main.c,
	  src/z80/gen.c, src/z80/ralloc.c:
	  fixed bug #1739860 - sdcc does not work correctly on some platforms
	  (not finished)
	  introduced and used ulFromVal(), double2ul(), used strtod() instead sscanf()

2007-09-17 Raphael Neider <rneider AT web.de>

	* src/pic16/device.c: reverted to previous version
	* device/lib/pic16/Makefile.common.in: quieten gpasm via -Wa,-q

2007-09-16 Raphael Neider <rneider AT web.de>

	* src/pic16/device.c (pic16_dump_usection): do not reserve 0 bytes,
	  as this raises a ton of gpasm warnings, just emit a second label
	* src/pic16/devices.inc,
	* device/lib/pic16/pics.all,
	* device/lib/pic16/libdev/pic18f2585.c,
	* device/lib/pic16/libdev/pic18f2680.c,
	* device/lib/pic16/libdev/pic18f2682.c,
	* device/lib/pic16/libdev/pic18f2685.c,
	* device/lib/pic16/libdev/pic18f4585.c,
	* device/lib/pic16/libdev/pic18f4680.c,
	* device/lib/pic16/libdev/pic18f4682.c,
	* device/lib/pic16/libdev/pic18f4685.c,
	* device/include/pic16/pic18f2585.h,
	* device/include/pic16/pic18f2680.h,
	* device/include/pic16/pic18f2682.h,
	* device/include/pic16/pic18f2685.h,
	* device/include/pic16/pic18f4585.h,
	* device/include/pic16/pic18f4680.h,
	* device/include/pic16/pic18f4682.h,
	* device/include/pic16/pic18f4685.h,
	* device/include/pic16/pic18fregs.h: added 18f2585, 18f2680,
	  18f2682, 18f2685, 18f4585, 18f4680, 18f4682, 18f4685,
	  patch contributed by Anton Strobl, applied with changes

2007-09-16 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f2431.h,
	* device/include/pic16/pic18f25j10.h,
	* device/include/pic16/pic18f4431.h,
	* device/include/pic16/pic18f45j10.h: adopted common include style
	* device/include/pic16/pic18f1320.h,
	* device/include/pic16/pic18f2320.h,
	* device/include/pic16/pic18f2525.h,
	* device/include/pic16/pic18f4320.h,
	* device/include/pic16/pic18f4525.h: NEW, just include proper .h file
	* device/include/pic16/pic18fregs.h: prepared for automatic include
	  file selection by having DEVICE.h for every DEVICE
	* device/lib/pic16/libdev/pic18f2320.c,
	* device/lib/pic16/libdev/pic18f4320.c: just include proper .c file

	* device/lib/pic16/configure.in,
	* device/lib/pic16/configure: use rm -rf instead of rmdir
	* device/lib/pic16/Makefile.in: use RMDIR to remove build directories
	* device/lib/pic16/libc/stdlib/free.c: avoid warning on pointer cast

2007-09-09 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c, src/SDCCutil.c: print newline after printVersionInfo(),
	  distingush between i386 and ppc Mac OS X versions

2007-09-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genReceive): fixed bug 1788177
	* support/regression/tests/bug1788177.c: new, added

2007-09-04 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: mentioned d52 and cmake, customizing startup code
	* device/include/mcs51/lint.h added keyword __naked

2007-09-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/pic16/glue.c,
	* src/pic/glue.c,
	* src/SDCCmem.h: removed maxRegBank
	* src/SDCCmem.c (allocVariables): removed maxRegBank and moved setting
	  RegBankUsed[] to checkFunction() in SDCCsymt.c to fix bug 1759839
	* src/SDCCsymt.c (checkFunction): set RegBankUsed[] here
	* src/mcs51/peep.c (isCallerSaveFunc, termScanAtFunc): changed function
	  name and behaviour to handle banked functions
	  (scan4op): and use it to fix bug 1786213

2007-09-03 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f248.h,
	* device/include/pic16/pic18f258.h,
	* device/include/pic16/pic18f448.h,
	* device/lib/pic16/libdev/pic18f248.c,
	* device/lib/pic16/libdev/pic18f258.c,
	* device/lib/pic16/libdev/pic18f448.c: fixed TRISEbits,
	  added T0CONbits, fixes #1786891

2007-08-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/gen.c (genFarPointerSet),
	* src/hc08/ralloc.c (packRegisters),
	* src/mcs51/ralloc.c (packRegisters),
	* src/SDCCcse.c (cseBBlock): check if result is a symbol first to fix
	  bug 1750318
	* src/SDCCicode.h: POINTER_SET can be true for literals too
	* support/regression/tests/bug1750318.c: new, added

2007-08-23 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/sdcdb.c: fixed compilation with older readline
	  library versions without the completition functionality

2007-08-22 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f1220.h,
	* device/lib/pic16/libdev/pic18f1220.c: applied patch #1776191

2007-08-12 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/Makefile.in: support/Util/SDCCerr.[ch] moved to src

2007-08-11 Borut Razem <borut.razem AT siol.net>

	* support/Util/SDCCerr.c, support/Util/SDCCerr.h, src/src.dsp,
	  src/Makefile.in, src/Makefile.bcc, support/scripts/listerr.c:
	  support/Util/SDCCerr.[ch] moved to src
	* as/hc08/as_hc08.dsp, as/link/hc08/link_hc08.dsp,
	  as/link/z80/linkgbz80.dsp, as/link/z80/linkz80.dsp,
	  device/examples/ds390/tinitalk/tinitalk.dsp,
	  device/examples/serialcomm/windows/serialcomm.dsp,
	  support/librarian/librarian.dsp:
	  removed linking of unused odbc32.lib and odbccp32.lib
	* support/scripts/winres.h:
	  added for compilation with Visual C++ 2005 Express Edition

2007-08-09 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/at89c51ed.h: Fixed typo in declarations of CKCON0
	  and CKCON1.

2007-08-07 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* sdccconf_in.h: update the endian test so that SPARC Solaris
	  does not throw syntax errors

2007-08-06 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: removed two index entries which prevented the
	  generation of sdcc doc archive

2007-08-05 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* doc/sdccman.lyx: Same changes made 2007-07-28 but using lyx 1.4.4
	  instead of lyx 1.5.0.

2007-07-31 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/include/hc08/mc68hc908apxx.h: new header contributed by
	  Lucas Loizaga, with minor modifications. Thanks!

2007-07-28 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* doc/sdccman.lyx: Documented --acall-ajmp and described new features
	  in sdcclib.

2007-07-28 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* src/SDCCglobl.h, src/SDCCpeeph.c, src/SDCCglue.c, src/mcs51/main.c,
	  src/mcs51/peeph.def: Added option --acall-ajmp: replaces lcall/ljmp
	  with acall/ajmp.

2007-07-22 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure: re-introduced .version
	* sdcc.spec, doc/INSTALL.txt: they are used only for releases;
	  the version reverted to 2.7.0

2007-07-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* configure.in,
	* doc/sdccman.lyx: bumped version to 2.7.3
	* device/include/mcs51/compiler.h: fixed elif->else
	* src/mcs51/gen.c (genAnd, genOr): handle accuse for pure bit operands
	* src/mcs51/ralloc.c (createStackSpil): fixed SCLS bug with sloc for sbit,
	  (operandUsesAcc, packRegsForAccUse): added parameter allowBitspace to
	   enable accuse for bit operands
	* src/SDCCmain.c (printVersionInfo),
	* src/SDCCutil.c (getBuildEnvironment): factored out creation of build
	  environment descriptor
	* src/SDCCutil.h: added getBuildEnvironment
	* src/SDCCglue.c (initialComments): use getBuildEnvironment
	* support/regression/tests/bug1464657.c: enabled test test_Peephole251
	* support/regression/tests/bug-408972.c: enabled test leftShiftLong
	* support/regression/tests/bug1348008.c,
	* support/regression/tests/bug1496419.c,
	* support/regression/tests/bug1503067.c,
	* support/regression/tests/preproc.c: added empty tests

2007-07-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bug1678803.c: new, added

2007-07-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/aslink.h,
	* as/link/hc08/lkihx.c,
	* as/link/hc08/lkrloc.c,
	* as/link/mcs51/lkihx.c,
	* as/link/mcs51/lkrloc.c: renamed ihxEntendedLinearAddress to
	  ihxExtendedLinearAddress
	* as/link/mcs51/lkrloc.c (relr),
	* as/mcs51/asout.c (outr11, outr19): handle absolute destination for
	  acall/ajmp, see bug 830513

2007-07-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCcse.c (replaceAllSymBySym): renamed siaddr to isaddr,
	  (cseBBlock): remember aggr2ptr has been used
	* src/SDCCicode.c (operandSize): added function to handle aggr2ptr,
	  (geniCodeAssign): fixed bug 868103
	* src/SDCCicode.h: made operand.aggr2ptr 2 bits wide,
	  added operandSize prototype
	* src/mcs51/gen.c (aopOp): use operandSize to fix bug 868103,
	  (genDataPointerSet): use max of size of right and result,
	  (gencjne): added parameter useCarry for optimization,
	  (genCmpEq): use carry if appropriate,
	  (genXor): check if operand already in carry
	* support/regression/tests/bug-868103.c: enabled test

2007-07-12 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genNearPointerSet): fixed handling of literals

2007-07-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c (compareType): fixed bugs 1738367 and 1745717 with patch
	  from Robert Larice, thanks
	* support/regression/tests/bitopcse.c,
	* support/regression/tests/bitvars.c,
	* support/regression/tests/bug-908454.c: use <stdbool.h> for the bit types
	* support/regression/tests/bug-927659.c: enabled test for z80
	* support/regression/tests/bug1738367.c: added extra tests by Frieder
	* support/regression/tests/bug1745717.c: new, added
	* support/regression/tests/literalop.c,
	* support/regression/tests/nullstring.c: removed storage definitions that
	  are now in testfwk.h

2007-07-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stdbool.h: do not define __bool_true_false_are_defined
	  and bool for targets that do not fully support it.
	* support/regression/tests/bug1546986.c,
	* support/regression/tests/bug1723128.c,
	* support/regression/tests/bug1734654.c,
	* support/regression/tests/bug1738367.c,
	* support/regression/tests/constantRange.c: only use bool if allowed

2007-07-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peep.c (isCallerSaveFunc): fixed bug 1749275, thanks Robert
	  Larice, also handle function pointers
	* support/regression/tests/bug1749275.c: new, added

2007-07-03 Borut Razem <borut.razem AT siol.net>

	* src/mcs51/gen.c, src/avr/gen.c, src/pic/gen.c, src/z80/gen.c,
	  src/pic16/gen.c, src/hc08/gen.c, src/ds390/gen.c: fixed RFE
	  #1746528: SDCC should ignore ':' in inline assembler comments
	* device/include/typeof.h: fixed bug #1747142: typeof.h needs fixing

2007-07-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/C8051F360.h: fixed bug #1746410, thanks Chris Jones
	* device/lib/mcs51/crtxclear.asm: do not set __XPAGE unconditionally

2007-06-29 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: fixed bug
	  #1744746: SDCC #4867: broken option --xram-size

2007-06-28 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/configure.in, sim/ucsim/configure, sim/ucsim/ddconfig_in.h:
	  find out the endianess of host machine for ucsim

2007-06-27 Borut Razem <borut.razem AT siol.net>

	* support/regression/generate-cases.py: corrected the file name
	  in warning
	* configure.in, configure, sdccconf_in.h: find out the endianess of
	  host machine
	* src/SDCC.y: fixed bug #1744146: Crash when compiling array of
	  negative size

2007-06-27 Gudjon I. Gudjonsson <gudjon AT gudjon.org>

	* device/include/mcs51/p89c66x.h: NXP header file, OK to change licence

2007-06-26 Borut Razem <borut.razem AT siol.net>

	* support/regression/generate-cases.py: display warning if function
	  list is empty; implemented more flexible rule for detection of
	  testing functions, allowing return type 'void' in the same line as
	  the function name in the function definition
	* support/regression/tests/bug-1654060.c: corrected test
	* support/librarian/sdcclib.c: fixed warning:
	  format '%s' expects type 'char *', but argument 2 has type 'int'

2007-06-25 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* support/librarian/sdcclib.c: Added feature Requests [1510635]
	  Multiple infiles for sdcclib.

2007-06-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (inlineFindMaxBlockno, createFunction): fixed
	  bug 1731741

2007-06-18 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: removed option -C since SDCC compiler doesn't know
	  how to handle comments, so they have to be removed by the
	  preprocessor; fixed bug #1738926:SDCC #4852: broken option -V
	* src/SDCCmain.c, src/SDCCargs.h, src/ds390/main.c, src/mcs15/main.c,
	  src/pic16/main.c, src/pic/main.c, src/z80/main.c,
	  support/Util/SDCCerr.c, support/Util/SDCCerr.h:
	  table driven option hadling

2007-06-16 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (decorateType),
	* src/SDCCicode.c (geniCodeConditional): moved optimization for '?' from
	  iCode to ast level to fix bug 1738367
	* support/regression/tests/bug1738367.c: new, added

2007-06-15 Raphael Neider <rneider AT web.de>

	* src/pic16/devices.inc,
	* device/lib/pic16/pics.all,
	* device/include/pic16/pic18fregs.h,
	* device/include/pic16/pic18f[24][45]20.h,
	* device/lib/pic16/libdev/pic18f[24][45]20.c: added support for
	  18f2420, 18f2520, and 18f4420 devices, updated 18f4520 definitions
	* device/lib/pic16/Makefile.in: faster cleanup

2007-06-13 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added 177.i (mov from a is slightly cheaper)

2007-06-13 Raphael Neider <rneider AT web.de>

	* src/SDCCmain.c: prevent NULL pointer dereference, avoid warning

2007-06-12 Raphael Neider <rneider AT web.de>

	* support/scripts/inc2h.pl: conditionally emit defines for SFR bits,
	  suppress bit defines if NO_BIT_DEFINES is #define'd
	* device/include/pic/pic*.h: recreated all headers to include
	  conditional bit defines
	* device/include/pic/pic16f886.h,
	* device/include/pic/pic16f887.h: fixed based on newer .inc file
	* device/include/pic/recreate.sh: script to recreate the complete
	  device library files based on the currently supported devices

2007-06-12 Borut Razem <borut.razem AT siol.net>

	* src/pic16/main.c, src/SDCCargs.h, SDCCmain.c,
	  support/regression/Makefile.in, support/scripts/build.mak,
	  support/scripts/Makefile.snapshot:
	  use new svn URL scheme
	* doc/sdccman.lyx: SDCC Wiki moved to
	  http://sdcc.wiki.sourceforge.net/

2007-06-10 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: disabled rule 132.d to fix #1734654
	* support/regression/tests/bug1734654.c: added

2007-06-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (decorateType): optimized '?' for equal operands
	* src/SDCCicode.c (geniCodeConditional): optimization for bit result
	  with literal operands

2007-06-10 Borut Razem <borut.razem AT siol.net>

	* as/link/z80/lklibr.c: fixed mingw build warning
	  lklibr.c:575: warning: implicit declaration of function 'tolower'
	* src/SDCCmain.c, src/ds390/main.c, src/mcs51/main.c, src/pic/main.c,
	  src/z80/main.c: move target specific options from src/SDCCmain.c
	  to src/<target>/main.c

2007-06-09 Borut Razem <borut.razem AT siol.net>

	* src/z80/gen.c: fixed bug #1294691: nested ifs make compiler crash;
	  removed unused swap_sense; removed outBitCLong, replaced with outBitC
	* support/regression/tests/bug-1294691.c: added

2007-06-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmem.c (allocDefault): removed check sym->level==0 for SPEC_ABSA,
	  can also be static, fixes bug 1733438
	* src/SDCCsymt.c (checkSClass): static local vars in reentrant funcs can
	  have absolute address too
	  (computeType): added optimization for 'cond ? true : false'
	* support/regression/tests/absolute.c: added test for static absolute var

2007-06-08 Raphael Neider <rneider AT web.de>

	* src/regression/Makefile: suppress parallel builds, allow easy
	  switching between pic14/pic16 ports
	* src/regression/picregs.h: added pic14/16 header file switch
	* src/regression/{compare7.c,compare8.c,compare9.c,compare10.c,
	  inline.c,nestfor.c,string1.c}: include "picregs.h"

2007-06-07 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/*.[ch], sim/ucsim/configure, sim/ucsim/configure.in:
	  permanent solution to suppress GCC 4.2.0 c++ warning:
	  deprecated conversion from string constant to `char *'
	  use 'const char *' where ever required
	* support/regression/generate-cases.py: implemented more flexible rule
	  for detection of testing functions, allowing white-spaces surrounding
	  the function name and the 'void' parameter.
	* support/regression/tests/constantRange.c,
	  support/regression/tests/scott-compare3.c: fixed failing regression
	  tests, uncovered by implementation of more flexible rule for detection
	  of testing functions

2007-06-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c(decorateType): better optimize '!!' and comparisons

2007-06-04 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure, config_vc.awk: sdcc version number is now
	  stored in configure.in; removed .version
	* configure.in, configure, sdcc.spec, doc/sdccman.lyx, doc/sdccman.lyx,
	  doc/INSTALL.txt: version bumped to 2.7.2
	* sim/ucsim/configure.in, sim/ucsim/configure:
	  use "read" to read from .version

2007-06-03 Borut Razem <borut.razem AT siol.net>

	* */Makefile.in: removed annoying warning:
	  Makefile:xx: Makefile.dep: No such file or directory

2007-06-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (outBitC, genRet): used IS_OP_RUONLY,
	  (genNot, genXor): used toCarry, also fixes a bug for c = bit ^ val
	* src/mcs51/ralloc.c: removed IS_OP_RUONLY + some cosmetic changes
	* src/SDCCast.c (resultTypePropagate): propagate for '!',
	  (decorateType): also optimize comparisons with RESULT_TYPE_BIT,
	  bugfix: only use newBoolLink for bit result type
	* src/SDCCicode.c (geniCodeLogic): added param tree,
	  bugfix: use newBoolLink if tree is bit type, bug appears when ruonly,
	  (geniCodeLogicAndOr): use IS_BIT,
	  (geniCodeJumpTable, geniCodeSwitch): added NULL param to geniCodeLogic,
	  (ast2iCode): added tree param to geniCodeLogic for comparisons
	* src/SDCCsymt.h: added IS_OP_RUONLY and IS_OP_ACCUSE
	* support/regression/tests/bug1723128.c: added test NotZero

2007-06-01 Borut Razem <borut.razem AT siol.net>

	* SDCPP synchronized with GCC CPP release version 4.2.0,
	  currently the latest release:
	* support/cpp2/c-incpath.c, support/cpp2/c-incpath.h,
	  support/cpp2/c-ppoutput.c, support/cpp2/cppdefault.c,
	  support/cpp2/cppdefault.h, support/cpp2/except.h,
	  support/cpp2/libcpp/directives.c, support/cpp2/libcpp/expr.c,
	  support/cpp2/libcpp/files.c, support/cpp2/libcpp/include/cpplib.h,
	  support/cpp2/libcpp/init.c, support/cpp2/libcpp/internal.h,
	  support/cpp2/libcpp/lex.c, support/cpp2/libcpp/macro.c,
	  support/cpp2/libcpp/mkdeps.c, support/cpp2/libiberty/getpwd.c,
	  support/cpp2/libiberty/hashtab.c, support/cpp2/optc-gen.awk,
	  support/cpp2/opth-gen.awk, support/cpp2/opts.c,
	  support/cpp2/opts.h, support/cpp2/output.h,
	  support/cpp2/prefix.c, support/cpp2/sdcpp-opts.c,
	  support/cpp2/sdcpp.dsp, support/cpp2/sdcpp.opt,
	  support/cpp2/system.h, support/cpp2/version.c,
	  support/cpp2/Makefile.in: modified
	* support/cpp2/opts-common.c: added
	* device/lib/pic16/libdev/pic18f[24][45]j10.c: fixed svn atrributes
	* device/lib/pic16/libdev/pic18f[24]5j10.c:
	  search for included source file in local directory
	* sim/ucsim/configure, sim/ucsim/configure.in:
	  temporary solution to suppress GCC 4.2.0 c++ warning:
	  deprecated conversion from string constant to `char *'

2007-06-01 Raphael Neider <rneider AT web.de>

	* device/lib/pic/libdev/pic12f683.c,
	* device/include/pic/pic12f683.h: added GPIO bits

2007-06-01 Raphael Neider <rneider AT web.de>

	* doc/sdccman.lyx: added --disable-pic16-port, fixed some `--' and
	  quotation marks, clarified role of PIC14 vs. PIC16 ports
	* src/pic16/devices.inc,
	* device/include/pic16/pic18fregs.h,
	* device/include/pic16/pic18f[24][45]j10.h,
	* device/lib/pic16/pics.all,
	* device/lib/pic16/libdev/pic18f[24][45]j10.c: added support for
	  18f24j10, 18f25j10, 18f44j10, and 18f45j10
	* device/lib/pic16/libio/{i2c,adc,usart}.ignore: do not build IO libs
	  for new devices as they are not yet supported by gputils

2007-05-31 Borut Razem <borut.razem AT siol.net>

	* Small Device C Compiler 2.7.0 released
	* .version, sdcc.spec, doc/sdccman.lyx, doc/INSTALL.txt:
	  changed sdcc version to 2.7.1
	* support/scripts/sdcc.nsi: added How to create WIN32 release
	  setup.exe package

2007-05-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: documented initialization and allocation of absolute
	  variables, bit parameter passing, the need for function pointers to be
	  reentrant and alpha quality support of inline and retrict

2007-05-26 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bug1057979.c, support/regression/tests/malloc.c,
	  support/regression/fwk/include/testfwk.h: fixed compilation on Mac OS x
	* docs/knownbugs.html: updated

2007-05-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: inserted footnotes about inline assembler labels,
	  thanks Jan Waclawek
	* src/mcs51/gen.c (aopPut): fixed part of bug 1723128 when result is
	  AOP_CRY and ruonly
	  (gencjneshort): optimized when left is AOP_DIR
	* src/SDCCglue.c (printIvalStruct): fixed other part of bug 1723128 for
	  initializing unions in a struct/array
	* support/regression/fwk/include/testfwk.h: added defines for data, near
	  and far for host and z80
	* support/regression/tests/bug1723128.c: new, added

2007-05-22 Borut Razem <borut.razem AT siol.net>

	* doc/knownbugs.html: updated

2007-05-21 Raphael Neider <rneider AT web.de>

	* src/pic16/glue.c (pic16_initPointer): avoid assertion, emit better
	  error message instead
	* src/pic/pcoderegs.c (pCodeOptime2pCodes): keep register state intact

2007-05-21 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peeph.def (257.b): disabled to fix bug 1721024

2007-05-21 Raphael Neider <rneider AT web.de>

	* src/pic/pcoderegs.c (pCodeOptime2pCodes): fixed bogus optimization,
	  closes #1722392
	* src/regression/gpsim_assert.h,
	* src/regression/Makefile,
	* src/regression/pcodeopt.c: regression test for the above fix

2007-05-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCpeeph.c (labelIsUncondJump): ignore identical labels for
	  jumps to self, fixed bug 1717281

2007-05-10 Borut Razem <borut.razem AT siol.net>

	* support/scripts/gen_known_bugs.pl: cosmetic fix
	* doc/knownbugs.html: generated by gen_known_bugs.pl

2007-05-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (createFunction): also generate non-inlined version of
	  function for functions declared as "static inline"
	* src/SDCCast.c (fixupInline, inlineAddDecl): reset symbol state so
	  function can be inlined after non-inlined version generated.

2007-05-10 Borut Razem <borut.razem AT siol.net>

	* support/scripts/gen_known_bugs.pl: added script
	  which generates knownbugs.html

2007-05-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/knownbugs.html: updated for release 2.7.0

2007-05-09 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/uPSD33xx.h: Added patch by Jan Waclawek.

2007-05-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/gen.c (emitcode): don't change properties of previous lines,
	  (throughout): updated generating comments
	* src/mcs51/gen.c (emitcode): don't change properties of previous lines,
	  (throughout): updated generating comments
	* src/SDCCpeeph.c (peepHole): continue searching at the first replaced
	  rule instead of at the second, or it might skip lines when removing the
	  complete match
	* support/regression/tests/bug1714204.c: changed test to foo

2007-05-08 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: changed sdcc version to 2.7.0,
	  thanks to SDCC Distributed Compile Farm members,
	  added Z80 and GBZ80 command line options
	* .version, doc/INSTALL.txt, sdcc.spec: changed sdcc version to 2.7.0

2007-05-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/mcs51/crtxinit.asm: added disabled version for dual dptr
	* device/include/mcs51/uPSD33xx.h: added sfr DPS as alias for DPTC
	* support/regression/tests/longlit.c: modified to be tested at all and
	  to pass the actual test

2007-05-07 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/uPSD33xx.h: Added.

2007-05-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_gptrput.c,
	* device/lib/_gptrget.c: removed old code,
	 (_gptrgetWord),
	* src/ds390/gen.c (genGenPointerGet): fixed bug 1714204
	* support/regression/tests/bug1714204.c: new, added

2007-05-06 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/tests/regtrack.c: test was never executed
	  because of the regression test being picky about white spaces.
	* device/lib/mcs51/crtclear.asm: added comment

2007-05-06 Raphael Neider <rneider AT web.de>

	* device/lib/pic/Makefile.rules,
	* device/lib/pic16/Makefile.rules: make sure *.ignore file exists,
	  made "&> /dev/null" redirection sh-safe ("> /dev/null 2>&1")

2007-05-06 Raphael Neider <rneider AT web.de>

	* src/pic16/device.h,
	* src/pic16/main.h,
	* src/pic16/main.c (pic16_optionsTable,_pic16_parseOptions,
	  _pic16_setDefaultOptions): removed/reordered command-line args
	* doc/sdccman.lyx: updated PIC14 and PIC16 documentation (supported
	  devices, regrouped command line args, environment variables),
	  clarified sone points, added sections on how to add devices to the
	  PIC14/PIC16 ports

2007-05-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/peeph.def: fixed bug in rule 2

2007-05-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/port.h: added TARGET_MCS51_LIKE
	* src/SDCCpeeph.c (labelIsUncondJump): new, added, other targets could
	  take advantage of it too
	* src/z80/gen.c (genIpush): push b, d or h directly instead of using a,
	  (shiftR2Left2Result): Optimized: don't check shifting by 0
	* src/z80/peeph-z80.def,
	* src/z80/peeph.def: whole set of new rules by Philipp Krause with some
	  modifications, see patch 1700823
	* src/mcs51/peep.c (): fixed bug 1712928
	* support/regression/tests/bug1712928.c: new, added

2007-05-05 Borut Razem <borut.razem AT siol.net>

	* device/lib/pic16/Makefile.common.in,
	  device/lib/pic/Makefile.common.in, sim/ucsim/cmd.src/Makefile.in:
	  removed bash dependencies

2007-05-01 Borut Razem <borut.razem AT siol.net>

	* src/SDCCicode.c:
	  fixed bug #1710507: --i-code-in-asm makes compile fail
	  all iCode comments are now one liners
	* src/mcs51/gen.c: fixed memory leak

2007-05-01 Raphael Neider <rneider AT web.de>

	* device/lib/pic/libdev/*.c
	* device/include/pic/*.h: regenerated all device libs from updated
	  .inc files
	* support/scripts/inc2h.pl: documented usage, now uses strict to
	  catch more bugs

2007-04-30 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx:
	  fixed bug #1669175: Problem with space in output paths
	  documented how to use paths with spaces for Windows users

2007-04-29 Borut Razem <borut.razem AT siol.net>

	* Fixed svn:eol-style and svn:keywords properties
	* src/SDCCval.c: fixed bug
	  #1592871: Segfault with "large" const arrays of characters
	  replaced recursion with iteration
	* Removed svn:executable property from non-executable files

2007-04-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genRet): fixed bug 1707003

2007-04-27 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (pBlockRemoveUnusedLabels,pic16_pBlockAddInval,
	  createReachingDefinitions,assignValnums,pic16_destructDF,
	  pic16_createDF,pic16_vcg_dumpedges,pic16_vcg_dump_default):
	  prevent NULL pointer dereferences
	* device/lib/pic/libdev/pic16f886.c,
	* device/lib/pic/libdev/pic16f887.c: svn mv'ed to disabled_* to
	  prevent building them, gputils do not really support them yet

2007-04-27 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/_ltoa.c: 36 bytes less __data mem. This really
	  helps printf_small. 32 bytes more __idata mem.

2007-04-27 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (addpCode2pBlock,LinkFlow,pBlockRemoveUnusedLabels):
	  return early when pb or pb->pcHead is NULL (patch #1708427)
	* src/regression/empty.c,
	* src/regression/Makefile: added test with empty functions
	* support/Util/SDCCerr.c: fixed typo in E_INIT_STRUCT message

2007-04-27 Borut Razem <borut.razem AT siol.net>

	* src/SDCCast.c: fixed feature request
	  #1547512: Redundant strings linked when using sizeof("abc")

2007-04-23 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, src/SDCCmain.c:
	  peep-hole comments are generated only if --fverbose-asm option is
	  specified and --no-peep-comments is not, as proposed by Frieder.
	* support/regression/Makefile.in: compile regression tests with
	  --fverbose-asm option so one can "grep" whether a new (or an old)
	  peephole is (still) applied; requested by Frieder.

2007-04-23 Kevin Buettner <kevin AT buettner.to>

	* device/include/pic/pic16f886.h,
	* device/include/pic/pic16f887.h,
	* device/lib/pic/libdev/pic16f886.c,
	* device/lib/pic/libdev/pic16f887.c,
	* device/include/pic/pic14devices.txt,
	* device/lib/pic/libdev/devices.txt: Add 16f886 and 16f887.

2007-04-23 Kevin Buettner <kevin AT buettner.to>

	* device/lib/pic/libsdcc/idata.c: PAGESEL _main before going there,
	  fixes #1704666

2007-04-23 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/_memset.c: assembler version for mcs51

2007-04-22 Borut Razem <borut.razem AT siol.net>

	* support/scripts/listerr.c: program to create the list of errors and
	  warnings list from - added
	* doc/sdccman.lyx: removed the note
	  "For list of warnings and corresponding codes, see err_warn.txt"
	* src/SDCCsymt.c: fixed bug #1699804:
	  Bug with some uses of sizeof(static local array) (MCS51)
	* support/regression/tests/bug-1699804.c: added

2007-04-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/asmain.c (search_path_append, search_path_fopen): new, added,
	  (main): added option -i,
	  (asmbl, case S_INCL): use search_path_fopen,
	  mostly from patch 1579668 by Peter Miller, thanks
	* src/z80/main.c: fixed typo --callee-saves-bc
	* device/include/mcs51/compiler.h: added sfrword for Tasking

2007-04-20 Borut Razem <borut.razem AT siol.net>

	* src/z80/main.c: replaced reserved keyword asm with asmblr

2007-04-19 Borut Razem <borut.razem AT siol.net>

	* src/port.h: use const pointers to strings
	* src/SDCCargs.h: declared getStringArg() and getIntArg()
	* src/pic16/main.c: include SDCCargs.h
	* src/SDCCglobl.h: code_seg and const_seg are not pointers to
	  const char, since the strings are dynamically allocated
	* src/SDCCmain.c: options.code_seg and options.const_seg are
	  dynamically allocated; check port specific command line options
	  before the general ones
	* src/z80/main.c: fixed bug #1631895: codeseg/constseg #pragma fail

2007-04-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/ds400rom.h,
	* device/lib/ds390/lcd390.c,
	* device/lib/ds390/memcpyx.c,
	* device/lib/ds390/rtc390.c,
	* device/lib/ds400/ds400rom.c,
	* device/lib/ds400/memcpyx.c,
	* device/lib/hc08/_ret.c: more replacements of keywords with their
	  double underscore equivalents
	* device/lib/ds390/Makefile.in,
	* device/lib/ds400/Makefile.in,
	* device/lib/gbz80/Makefile.in,
	* device/lib/hc08/Makefile.in,
	* device/lib/mcs51/Makefile.in,
	* device/lib/z80/Makefile.in: added --std-c89 to CFLAGS

2007-04-17 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, src/SDCCmain.c, src/SDCCglobal.h, src/ds390/gen.c,
	  src/hc08/gen.c, src/mcs51/gen.c, src/mcs51/rtrack.c:
	  fixed #1493816: option --no-gen-comments: --no-gen-comments renamed
	  to --fverbose-asm, to be gcc'ish

2007-04-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (aopOp): set size to 1 for ruonly, fixes bug 1699455

2007-04-17 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: fixed #1701874: Mac OSX references in SDCC manual
	* device/lib/ds400/tinibios.c, device/lib/hc08/_divuint.c,
	  device/lib/hc08/_divulong.c: replaced _asm and _endasm keywords
	  with their double underscore equivalent

2007-04-14 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: some additional "freeware" replaced with "free open
	  source"

2007-04-13 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: -pedantic-parse-number is not in conformance with
	  C99 standard
	* device/examples/serialcomm/windows/serial.[ch],
	  device/examples/serialcomm/windows/test_serialcomm.cpp:
	  updated by Bela Torok
	* device/examples/serialcomm/windows/serialcomm.dsw,
	  device/examples/serialcomm/windows/serialcomm.dsp: added

2007-04-13 Jan Waclawek <wek AT efton.sk>

	* doc/sdccman.lyx: additions and changes at various places
	  (submitted as #1697136).
	  (svn commit by Frieder Ferlemann <Frieder.Ferlemann AT web.de>)

2007-04-10 Borut Razem <borut.razem AT siol.net>

	* doc/cdbfileformat.lyx, doc/sdccman.lyx, doc/test_suite_spec.lyx:
	  LyX file format changed to 245
	* doc/sdccman.lyx, doc/README.txt, sdc/SDCC.lex, src/SDCCglue.c:
	  "FreeWare" replaced with "free open source"

2007-04-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/C8051F120.h: added some defines for bits in RSTSRC

2007-04-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/pic16/pic18fregs.h,
	* device/lib/_bp.c,
	* device/lib/_decdptr.c,
	* device/lib/_divsint.c,
	* device/lib/_divslong.c,
	* device/lib/_divuint.c,
	* device/lib/_divulong.c,
	* device/lib/_fs2schar.c,
	* device/lib/_fs2sint.c,
	* device/lib/_fs2slong.c,
	* device/lib/_fs2uchar.c,
	* device/lib/_fs2uint.c,
	* device/lib/_fs2ulong.c,
	* device/lib/_fsadd.c,
	* device/lib/_fscmp.c,
	* device/lib/_fsdiv.c,
	* device/lib/_fseq.c,
	* device/lib/_fsget1arg.c,
	* device/lib/_fsget2args.c,
	* device/lib/_fsgt.c,
	* device/lib/_fslt.c,
	* device/lib/_fsmul.c,
	* device/lib/_fsneq.c,
	* device/lib/_fsnormalize.c,
	* device/lib/_fsreturnval.c,
	* device/lib/_fsrshift.c,
	* device/lib/_fssub.c,
	* device/lib/_fsswapargs.c,
	* device/lib/_gptrget.c,
	* device/lib/_gptrgetc.c,
	* device/lib/_gptrput.c,
	* device/lib/_logexpf.c,
	* device/lib/_modsint.c,
	* device/lib/_modslong.c,
	* device/lib/_moduint.c,
	* device/lib/_modulong.c,
	* device/lib/_mulint.c,
	* device/lib/_mullong.c,
	* device/lib/_schar2fs.c,
	* device/lib/_ser.c,
	* device/lib/_setjmp.c,
	* device/lib/_sint2fs.c,
	* device/lib/_slong2fs.c,
	* device/lib/_spx.c,
	* device/lib/_uchar2fs.c,
	* device/lib/_uint2fs.c,
	* device/lib/_ulong2fs.c,
	* device/lib/asincosf.c,
	* device/lib/atanf.c,
	* device/lib/calloc.c,
	* device/lib/ds390/tinibios.c,
	* device/lib/ds400/tinibios.c,
	* device/lib/expf.c,
	* device/lib/free.c,
	* device/lib/hc08/_mulint.c,
	* device/lib/logf.c,
	* device/lib/malloc.c,
	* device/lib/printf_fast.c,
	* device/lib/printf_tiny.c,
	* device/lib/printfl.c,
	* device/lib/realloc.c,
	* device/lib/ser_ir.c,
	* device/lib/serial.c,
	* support/regression/tests/libmullong.c: replaced all special keywords
	  with their double underscore equivalent
	* support/regression/ports/mcs51-xstack-auto/spec.mk,
	* device/lib/Makefile.in: compile libs with --std-c99 instead of
	  --std-sdcc99
	* src/mcs51/gen.c (outBitC): don't store if result is return-use-only,
	  (genRet): if the bit-symbol is ruonly it already is in the carry
	* src/mcs51/ralloc.c (regTypeNum): make regType REG_CND for ruonly bit
	* src/SDCCast.c (createFunction): applied patch 887171 by Stas Sergeev
	* src/SDCCicode.c (ast2iCode): '!', GETHBIT, GETABIT: only set operand
	  type UCHAR if dest is not bit

2007-04-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/math.h,
	* device/lib/cotf.c,
	* device/lib/expf.c,
	* device/lib/sincoshf.c: changed XMAX to C99 HUGE_VALF

2007-04-01 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, src/SDCCmain.c, support/cpp2/sdcpp.c:
	  fixed bug #1692042: input buffer overflow...scanner uses REJECT
	* support/cpp2/sdcpp.c: fixed recursion bug - internal_error() called
	  gcc_unreachable() called internal_error()...

2007-03-30 Raphael Neider <rneider AT web.de>

	* src/pic/ralloc.c (isData): suppress garbage debug output

2007-03-28 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx:
	  "Nightly Snapshots" replaced with "Snapshot Builds", since the SDCC
	  is developed, built and used worldwide, and the word "night" doesn't
	  make any sense.

2007-03-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/C8051F360.h: new, added
	* device/include/mcs51/C8051F520.h: fixed buggy sbit addresses SPI0CN

2007-03-27 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y (declaration_specifiers, function_specifier),
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h,
	* src/SDCCsymt.h,
	* src/SDCCsymt.c (mergeSpec, checkFunction): Parse and validate the
	  inline keyword
	* src/SDCCmem.c (deallocParms),
	* src/SDCCast.c: support for function inlining, not quite complete
	* src/SDCCsymt.c (printTypeChain, printTypeChainRaw): display
	  'restrict' qualifier

2007-03-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (saveRegisters, unsaveRegisters): free some bitVects,
	  (saveRBank, unsaveRBank): don't save bits,
	  (genFunction, genEndFunction): save bits exactly once, fix bug 1535242
	* support/regression/tests/bug1535242.c: new, added
	* device/include/assert.h: applied patch 1686533 to fix bug 1686528,
	  thanks Alexey Shamrin <shamrin AT gmail.com>,
	  made assert.h header ANSI compliant (added a check for NDEBUG macro,
	  removed header guard)
	* .version,
	* sdcc.spec: bumped version to 2.6.5
	* src/SDCCmain.c(parseCmdLine): fixed bug 1677144

2007-03-22 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/cmd.c, debugger/mcs51/sdcdb.c:
	  fixed bug #1653671: sdcdb integration into ddd is broken

2007-03-22 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (popGetExternal): augmented to also create references
	  to external variables (not only labels),
	  (genCall): comment on plan to reduce PAGESEL overhead,
	  (genFunction, genEndFunction): also save/restore FSR around interrupt
	  handling code, removed lots of unused code
	  (genDivOneByte): release acquired temp register
	* src/pic/glue.c (pic14createInterruptVect): adapt to new signature
	  of popGetExternal
	* device/lib/pic/libsdcc/shadowregs.c: NEW, provide storage location
	  for registers that need to be saved during interrupts (FSR, STATUS,
	  PCLATH; W needs special handling), currently only FSR is used

2007-03-22 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic14devices.txt: 16f688 has only one config word

2007-03-19 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* /as/link/mcs51/aslink.dsp: Object extension for mcs51 is 'rel' not 'o'.

2007-03-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peeph.def (263.x): fixed bug for volatile variables

2007-03-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/aslink.h: added LKOBJEXT
	* as/link/hc08/link_hc08.dsp,
	* as/link/hc08/Makefile.bcc,
	* as/link/hc08/Makefile.in,
	* as/link/mcs51/aslink.dsp,
	* as/link/mcs51/Makefile.bcc,
	* as/link/mcs51/Makefile.in: moved lkamof51.c and lkdata.c
	* as/link/hc08/lkaomf51.c, as/link/mcs51/lkaomf51.c,
	* as/link/lkaomf51.c: merged and moved
	* as/link/hc08/lkdata.c, as/link/mcs51/lkdata.c,
	* as/link/z80/lkdata.c,
	* as/link/lkdata.c: merged and moved
	* as/link/hc08/lkmain.c,
	* as/link/mcs51/lkmain.c: cosmetic changes
	* as/link/z80/lkeval.c, as/link/lkeval.c: merged
	* as/link/lklex.c: use LKOBJEXT
	* as/link/z80/lklist.c, as/link/lklist.c: merged,
	  ANSI-fied functions, removed bubble-sorts
	* as/link/z80/lksym.c, as/link/lksym.c: merged,
	  ANSI-fied functions
	* as/link/z80/linkgbz80.dsp,
	* as/link/z80/linkz80.dsp,
	* as/link/z80/Makefile.in: added lkaomf51.c and lknoice.c,
	  moved lkdata.c, lkeval.c, lkhead.c, lklex.x, lklist.c, lksym.c
	* as/link/z80/lkhead.c,
	* as/link/z80/lklex.c: deleted
	* as/link/z80/lklibr.c: moved LKOBJEXT to aslink.h
	* as/link/z80/lkmain.c: added copyfile()

2007-03-13 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/P89LPC925.h: Added missing P1_6 and P1_7.

2007-03-13 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/_strlen.c: assembler version for mcs51

2007-03-13 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f2221.h,
	* device/include/pic16/pic18f2321.h,
	* device/include/pic16/pic18f2331.h,
	* device/include/pic16/pic18f4221.h,
	* device/include/pic16/pic18f4321.h,
	* device/include/pic16/pic18f4331.h: fixed config byte location names
	* support/scripts/inc2h-pic16.pl: removed debug output, emit
	  consistently named config byte locations

2007-03-13 Borut Razem <borut.razem AT siol.net>

	* src/Makefile.in, sim/ucsim/avr.src/Makefile.in,
	  sim/ucsim/hc08.src/Makefile.in, sim/ucsim/s51.src/Makefile.in,
	  sim/ucsim/xa.src/Makefile.in, sim/ucsim/z80.src/Makefile.in,
	  as/link/z80/Makefile.in, as/z80/Makefile.in:
	  introduced LDFLAGS

2007-03-11 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/printfl.c: 13 bytes less __data mem (12 more __idata)
	* device/lib/printf_large.c: pointer was converted to generic
	pointer for mcs51 models other than model-small (Maarten noticed)

2007-03-10 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/ADuC84x.h: Added.

2007-03-10 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, src/SDCCutil.[ch], src/SDCCval:
	  fixed RFE #1624219: double backslashes in filenames;
	  functions hexEscape(), octalEscape() and copyStr() moved from
	  SDCCval.c to SDCCutil.c and made them glovbally available

2007-03-09 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, src/SDCCast.c. src/SDCCglobl.c, src/SDCCsymt.c,
	  src/SDCCval.c: fixed bugs #1676768: Wrong line number reported and
	  1673361: Missaligned comments in output files

2007-03-09 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic14devices.txt: fixed confsiz of 16f91[3467]

2007-03-09 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c,
	* src/pic/glue.c,
	* src/pic/ralloc.c: suppress undesired debug output
	* src/SDCCmain.c (linkEdit): initialize c to quieten compiler

2007-03-08 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/printf_large.c: 6 bytes less __data mem (6 more __idata)

2007-03-07 Borut Razem <borut.razem AT siol.net>

	* device/lib/pic16/libdev/pic18f[24][34]31.c:
	  search include files in the current directory

2007-03-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c (emitMaps, glue),
	* src/SDCCmem.c (initMem, allocDefault): added x_abs for initialized
	  absolute xdata
	* support/regression/tests/absolute.c: added xdata test

2007-03-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (parseCmdLine): only set options.xstack_loc for mcs51,
	  added condition to macro, fixes bug 1666080

2007-03-02 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (genGenPointerSet): removed bogus assertion

2007-02-28 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/mcs51/crtxclear.asm: pdata segment of 256 byte would not
	be cleared. Unconditionally set __XPAGE
	* src/hc08/gen.c: --no-gen-comments (RFE #1493816) for hc08

2007-02-27 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCCglobl.h,
	* src/SDCCmain.c,
	* src/mcs51/gen.c,
	* src/mcs51/rtrack.c,
	* src/ds390/gen.c,
	* doc/sdccman.lyx: added --no-gen-comments
	* src/mcs51/peeph.def: added 192.b, disabled 185

2007-02-25 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genCast): fixed typo
	* device/lib/pic16/Makefile.subdir: only install existing files
	* device/lib/pic16/libdev/Makefile.in: build serially, avoid races

2007-02-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/mcs51/crtcall.asm: new, added for indirect calls
	* device/lib/mcs51/crtclear.asm,
	* device/lib/mcs51/crtxclear.asm: renumbered labels
	* device/lib/mcs51/Makefile.in: added crtcall.asm
	* doc/sdccman.lyx: documented mcs51 crt* library startup code
	* src/mcs51/gen.c (movc): removed,
	  (aopGet, genPlusBits): clear a after loading the carry (possibly from
	    acc.x or psw.x),
	  (toCarry, genSend, genRet): added function toCarry,
	  (genPcall): use "lcall @a+dptr" for functions w/o parameters,
	  (assignBit, genAssign, genCast): added function assignBit
	* src/mcs51/Makefile.bcc: added rtrack.c
	* src/mcs51/ralloc.h: made valueKnown a bitfield
	* src/mcs51/rtrack.c (getReg, rtrackUpdate): added getReg,
	  fixed "jbc acc" and "cpl acc" bug, enhanced "cjne", "jnz" and "djnz",
	  disabled InvalidateAllRx for lcall __gptrput, added "xch a,rn"
	* src/pic/pcode.c (FixRegisterBanking): fixed warning used uninitialized
	* src/z80/gen.c: added AOP_IS_PAIRPTR,
	  (_pop): only pop valid pairs, see gencjneshort,
	  (gencjneshort): return pair that still needs to be popped, restructured,
	  (gencjne, genCmpEq): call _pop

2007-02-23 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic14devices.txt: 16f684 has only one config word

2007-02-22 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/P89LPC925.h: Added.

2007-02-18 Raphael Neider <rneider AT web.de>

	* src/pic/glue.c (emitInitVal): fixed #1659894 (SIGSEGV on arrays)

2007-02-17 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/directives.c, support/cpp2/version.c:
	  synchronized with GCC CPP 4.1.2

2007-02-15 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/rtrack.h,
	* src/mcs51/rtrack.c: added register tracking for the mcs51 port,
	  by checking the strings passed by emitcode() to the assembler.
	  Feel free to change. This in part addresses RFE #482179.
	  Set environment variable SDCC_RTRACK to enable.
	* src/mcs51/gen.c: inserted hooks
	* src/mcs51/ralloc.h: added two members to struct regs
	* support/regression/tests/regtrack.c: added

2007-02-14 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.y: fixed bug #1291133: duplicate members across enum(s)
	* Makefile.in: applied patch from Makefile related part of
	  #1469393: Compiler does not initialize static data

2007-02-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCicode.c (geniCodeAssign): return (itemp) right instead of left
	  for better fix of bug 1273984, compiles pic16 rand.c

2007-02-12 Borut Razem <borut.razem AT siol.net>

	* src/pic16/main.c: fixed pic16 standard library directory bug

2007-02-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/hc08/gen.c (genSwap): fix swap regression test

2007-02-10 Borut Razem <borut.razem AT siol.net>

	* src/SDCCsymt.c: fixed bug #1159134: invalid duplicate declarations
	  with same scope
	* support/regression/tests/bug-1654060.c: added regression test for
	  #1654060

2007-02-09 Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (genRet): fixed RFE 1652561: added code for bit to
	bit moves in return statement

2007-02-09 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.y: fixed bug #1654060 typedef within function causes
	  syntax error

2007-02-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (aopPut): use direct name for pushing registers
	* src/SDCCmain.c (parseCmdLine): dbuf_s path must be initialised

2007-02-07 Raphael Neider <rneider AT web.de>

	* src/pic16/devices.inc,
	* device/include/pic16/pic18fregs.h,
	* device/include/pic16/pic18f[24][34]31.h,
	* device/lib/pic16/libdev/pic18f[24][34]31.c,
	* device/lib/pic16/pics.all: added 18f[24][34]31 family
	* device/lib/pic16/libio/i2c.ignore: do not build i2c

2007-02-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c (_print_format): fixed compare/assign bug, how
	  can this have lived here for so many years?
	* src/SDCCicode.c (ast2iCode): return left instead of right for assignment,
	  fixes bug 1273984, see also patch 1645121, thanks Gnther Jehle
	* support/regression/tests/bug1273984.c: new, added, thanks Gnther Jehle

2007-02-06 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCBlock.c (addiCodeToeBBlock): fixed bug 1652207: GOTO icodes
	appended by loop induction must be at the very end of the eBBlock

2007-02-05 Kevin Vigor

	* src/ds390/gen.c, src/ds390/main.c: Address bug 1469393.

2007-02-05 Borut Razem <borut.razem AT siol.net>

	* support/regression/fwk/lib/timeout.c: native WIN32 port,
	  implemented #1651830 Reg. tests: rewrite timeout.c to use WIN32 API

2007-02-03 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.y, src/SDCCmain.c, src/SDCCglobl.h, doc/sdccman.lyx:
	  applied patch #1646602 option to set default signedness of char to
	  unsigned, added -funsigned-char command line option,
	  thanks to Gunther Jehle
	* device/lib/Makefile.in: added the -f option to rm so it doesn't
	  prompt for file deletion a few hundred times (especially the
	  subversion files, which have ro permissions so it asks for
	  confirmation), thanks to Simon McAuliffe;
	  added {} + option to find in order to remove multiple files from a
	  single rm commad

2007-02-02 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/SST89x5xRDx.h: Added.

2007-02-02 Raphael Neider <rneider AT web.de>

	* src/pic/glue.c (emitSymbolSet): check sym->etype before use
	* src/regression/Makefile: use --no-pcode-opt, ignore failing tests

2007-02-01 Raphael Neider <rneider AT web.de>

	* src/pic/glue.c (picglue,emitSymbolSet,showAllMemmaps): emit the
	  config words again

2007-01-31 Borut Razem <borut.razem AT siol.net>

	* support/Util/dbuf_string.h: added ATTRIBUTE_PRINTF to dbuf_printf()
	  if compiled with GCC. Thanks to Raphael Neider

2007-01-31 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (isValidIdChar,bankCompare): fuzzy matching of
	    operand names, handles name and (name + n) for all n,
	  (sameBank): restructured, also check bank allocation policy,
	* src/pic/glue.c (emitPseudoStack): fixed printf arguments,
	  (pic14_operandsAllocatedInSameBank): check whether to operands
	    will be allocated into the same bank (i.e., section) to reduce
	    BANKSEL overhead, queried from pcode.c:sameBank,
	  (pic14printLocals): reintroduced clustering registers into a single
	    section: all compiler generated symbols will now reside in one
	    bank (per file), reducing BANKSEL overhead and code size,
	  (showAllMemmaps): use local dbuf where possible

2007-01-29 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (popGetExternal): simplified, mark symbol as used,
	  (call_libraryfunc): retrieve/create symbol and mark as used,
	  (genFunction): mark defined functions as non-extern and add again
	   to code memmap for later output
	* src/pic/glue.c (emitPseudoStack): put into own subroutine,
	  (pic14printLocals): reworked for new symbol emission,
	  (emitIfNew,pic14_constructAbsMap,emitIvalLabel,emitIvals,emitInitVal,
	  showAllMemmaps): reworked symbol output using dbufs, added handling
	    of string literals (still incomplete),
	  (picglue): removed symbol emission, moved into showAllMemmaps,
	  (emitSymbolSet): new workhorse for symbol output,
	  (pic14emitMaps,pic14printPublics,pic14printExterns): commented out

2007-01-29 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c, src/SDCCutil.c: dbuf_splitFile: file extension
	  component contains the extension separator.

2007-01-28 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/cmdutil.cc: NUL device is detected as CG_FILE type
	  on WIN32
	* src/SDCCdwarf2.c, src/SDCCglobl.h, src/SDCCmain.c, src/SDCCutil.c,
	  src/SDCCutil.h, src/avr/gen.c, src/ds390/gen.c, src/hc08/gen.c,
	  src/mcs51/gen.c, src/pic/device.c, src/pic/gen.c, src/pic/pcode.c,
	  src/pic/pcodepeep.c, src/pic/ralloc.c, src/pic16/device.h,
	  src/pic16/gen.c, src/pic16/main.c, src/pic16/pcode.c,
	  src/pic16/pcodepeep.c, src/pic16/ralloc.c, src/xa51/gen.c,
	  src/z80/gen.c, support/Util/MySystem.c:
	  accept slash and backslash as directory separator on WIN32 and
	  Cygwin ports

2007-01-28 Raphael Neider <rneider AT web.de>

	* src/pic16/devices.inc,
	* device/include/pic16/pic18f[24][23]21.h,
	* device/include/pic16/pic18fregs.h,
	* device/lib/pic16/libdev/pic18f[24][23]21.c,
	* device/lib/pic16/pics.all: added support for the 18f[24][23]21 family
	* device/lib/pic16/libio/adc.ignore,
	* device/lib/pic16/libio/i2c.ignore,
	* device/lib/pic16/libio/usart.ignore: do not build I/O lib for new
	  family, as gputils do not yet support the devices
	* device/lib/pic16/Makefile.subdir: ignore errors on install
	* support/scripts/inc2h-pic16.pl: script to generate pic16 device
	  headers and libraries from gputils .inc files

2007-01-26 Paul Stoffregen <paul AT pjrc.com>

	* doc/sdccman.lyx: add printf_fast_f precision limitation note

2007-01-26 Paul Stoffregen <paul AT pjrc.com>

	* doc/sdccman.lyx: add printf benchmarks

2007-01-25 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast.c: fix %c, char promoted to int
	* device/lib/printf_tiny.c: fix %c, char promoted to int

2007-01-25 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast.c: fix float overflow check, bug #1525093

2007-01-25 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/tests/swap.c: 64 bit hosts failed
	* doc/sdccman.lyx: added preliminary mcs51 printf feature matrix

2007-01-25 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (sameBank,FixRegisterBanking): optimize banksels
	  based on absolute register address, patch by Alex Blond

2007-01-22 Raphael Neider <rneider AT web.de>

	* src/pic/glue.c (pic14emitRegularMap):	mark initialized symbols as
	  emitted, do not emit them again...

2007-01-22 Raphael Neider <rneider AT web.de>

	* src/regression/bank1.c, src/regression/compare6.c,
	  src/regression/add.c: cosmetic changes
	* src/pic/pcode.h: moved GPTRTAG_* here from gen.c
	* src/pic/gen.c: fixed global zero and one,
	  (aopForSym): removed unued code,
	  (aopGet): assert aop is defined, check and use `index' of
	    pCodeImmd operands (fixes #1630908),
	* src/pic/pcode.c (get_op): added output of generic pointer tag,
	  (register_reassign): prevent accidental register unification,
	  (ReuseReg): cosmetic changes (also above)
	* src/pic/glue.c (pic14_constructAbsMap,pic14emitRegularMap,
	  pic14emitStaticSeg): do not emit initialized data,
	  (printIval*): replaced with working versions,
	  (pic14createInterruptVect,picglue): use idata for initialized data,
	    now init data should work in all modules (not only main()),
	* device/lib/pic/libsdcc/idata.c: NEW, handle initialized data

2007-01-21 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/configure.in: introduced macro DD_COPT_NO_IGNORE,
	  use -fPIC or -fpic if they are supported and not ignored
	* src/SDCCval.c: fixed bug introduced by me in rev. #4577
	* support/cpp2/libcpp/lex.c: fixed gcc 4.1.1 warnings

2007-01-20 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, src/SDCCmain.c, sdc/SDCCglobl.h, doc/sdccman.lyx:
	  implemented RFE #1470316: allow "$" in variable names

2007-01-20 Raphael Neider <rneider AT web.de>

	* device/include/pic/pic14regs.h: reverted accidental wipe of the file

2007-01-20 Raphael Neider <rneider AT web.de>

	* device/lib/pic/libdev/devices.txt: device list for mkall.sh
	* device/lib/pic/libdev/mkall.sh: script to rebuild all device libs
	* device/lib/pic/libdev/pic14ports.txt: device PORT specifications
	* support/scripts/inc2h.pl: fixed major .inc parsing bugs,
	  applied patch from Robert Tate (#1629249) to add PORTs and TRISs
	* device/lib/pic/libdev/pic*.c,
	* device/include/pic/pic*.h: regenerated with enhanced inc2h.pl
	* device/lib/pic/libdev/Makefile.in: show progress

2007-01-19 Bernhard Held <bernhard AT bernhardheld.de>

	* doc/sdccman.lyx: updated "configure options" for autoconf 2.6
	* support/scripts/sdcc_cygwin_mingw32,
	* support/scripts/sdcc_mingw32,
	* support/scripts/build.mak: replaced --datadir by --datarootdir for
	conformance with autoconf 2.6

2007-01-19 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (register_map): fixed list construction
	* src/pic/gen.c (genDivOneByte,genModOneByte): accept result > 1 byte,
	  (genMod): removed case for genModbits,
	  (genModbits): removed as now unused/unimplemented
	* src/pic/glue.c (picglue): prevent name clash with sources 'init.c'

2007-01-18 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/tests/swap.c: added in response to #1638622
	* doc/sdccman.lyx: synced version, minor changes

2007-01-18 Borut Razem <borut.razem AT siol.net>

	* SDCClabel.c: fixed bug #1638651: wrong linenumber presented in warning,
	  thanks to Gunther Jehle
	* src/asm.c: don't die if the file drfined in #line couldn't be opened
	* src/SDCC.lex, src/SDCCglobal.h, src/SDCCicode.c, src/SDCCsymt.c,
	  src/SDCCval.c: removed redundant definitions of currFname and mylineno;
	  use filename in lineno instead.
	* SDCCast.c: removed MSVC warning C4018: '==' : signed/unsigned mismatch,
	  print the file name in ast_print()

2007-01-18 Borut Razem <borut.razem AT siol.net>

	* support/Util/dbuf_string.c: removed (PTR) cast since it is not
	  defined in MSVC
	* src/SDCC.lex: stringLiteral() returns const char pointer,
	  EOF detection in stringLiteral(), fixed asmbuf memory leak,
	  fixed column counting
	* src/SDCCval.[ch]: constVal(), value *strVal() and charVal()
	  accept const char pointer as parameter
	* src/SDCCdwarf2.c: corrected buffer size

2007-01-17 Borut Razem <borut.razem AT siol.net>

	* support/Util/dbuf_string.c: fixed for amd64

2007-01-15 Borut Razem <borut.razem AT siol.net>

	* src/pic16/ralloc.c, src/pic/ralloc.c, src/SDCC.y:
	  removed terminal symbol ELIPSIS, since it was never generated by the
	  lexer and it was wrongly used in parameter_identifier_list rule

2007-01-15 Raphael Neider <rneider AT web.de>

	* doc/sdccman.lyx: updated PIC14/16 command line args, updated PIC14
	    code page and data banking description
	* src/pic/genarith.c,
	* src/pic/gen.h: removed bit arithmetic functions,
	    updated exit(1) to exit(EXIT_FAILURE)
	* device/lib/pic16/libsdcc/stack/stack.S: default to 256 byte stack
	* device/include/pic16/pic18f2455.h,
	* device/lib/pic16/libdev/pic18f2455.c: added PORTD, LATD, LATE,
	    TRISD and TRISE, fixed/added some bit names
	* device/lib/pic16/libdev/pic18f{2550,4550,4455}.c,
	* device/include/pic16/pic18f{2550,4550,4455}.h: simply include
	    updated pic18f2455.{c,h} instead of duplicating them

2007-01-14 Borut Razem <borut.razem AT siol.net>

	* as/mcs51/asnoice.c, as/hc08/asnoice.c: fixed bug #1447412:
	  Cannot debug files that contain spaces in the path name
	  by converting spaces in asm file name to underscores

2007-01-13 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: fixed format errors

2007-01-10 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, src/SDCCmain.c: fixed bug #1631895:
	  codeseg/constseg #pragma fail
	* suppoprt/cpp2/Makefile.bcc: reenable Borland C compilation
	* suppoprt/cpp2/configure.in, suppoprt/cpp2/libcpp/lex.c,
	  suppoprt/cpp2/Makefile.in, suppoprt/cpp2/sdcpp-opts,
	  suppoprt/cpp2/sdcpp.[ch]: house cleaning

2007-01-09 Borut Razem <borut.razem AT siol.net>

	* get rid of diagnistic.[ch], pretty-print.[ch],
	  c-pretty-print.[ch], ... used just for error, warning, ...
	  message formatting
	* suppoprt/cpp2/pretty-print.[ch], suppoprt/cpp2/diagnostic.[ch],
	  suppoprt/cpp2/diagnostic.def, suppoprt/cpp2/input.h,
	  suppoprt/cpp2/pretty-print.[ch]:
	  removed
	* suppoprt/cpp2/Makefile.in, suppoprt/cpp2/opts.c,
	  suppoprt/cpp2/sdcpp-opts.c, suppoprt/cpp2/sdcpp.[ch],
	  suppoprt/cpp2/sdcpp.dsp:
	  changed

2007-01-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c (output_float): removed recursion,
	  use smaller buffer on stack for mcs51,
	  fixed bug printing 1.96
	* support/regression/tests/snprintf.c: added test

2007-01-07 Borut Razem <borut.razem AT siol.net>

	* use dynamic memory buffers instead temporary files
	* support/Util/dbuf_string.c, support/Util/dbuf_string.h:
	  added
	* src/Makefile.in, src/SDCC.lex, src/SDCCast.c, src/SDCCast.h,
	  src/SDCCcse.c, src/SDCCglobl.h, src/SDCCglue.c, src/SDCCglue.h,
	  src/SDCCicode.c, src/SDCCicode.h, src/SDCCmain.c, src/SDCCmem.c,
	  src/SDCCmem.h, src/SDCCpeeph.c, src/SDCCpeeph.h, src/SDCCsymt.c,
	  src/SDCCsymt.h, src/SDCCutil.c, src/asm.c, src/asm.h, src/avr/gen.c,
	  src/avr/main.c, src/ds390/gen.c, src/ds390/main.c, src/hc08/gen.c,
	  src/hc08/main.c, src/izt/gen.c, src/mcs51/gen.c, src/mcs51/main.c,
	  src/pic/device.c, src/pic/gen.c, src/pic/glue.c, src/pic/main.c,
	  src/pic/ralloc.c, src/pic16/gen.c, src/pic16/glue.c,
	  src/pic16/main.c, src/pic16/ralloc.c, src/port.h, src/src.dsp,
	  src/xa51/gen.c, src/xa51/main.c, src/z80/gen.c, src/z80/main.c,
	  support/Util/dbuf.c, support/Util/dbuf.h:
	  modified
	* .version, sdcc.spec: bumped version to 2.6.4

2007-01-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/port.h: added TARGET_Z80_LIKE macro
	* src/SDCCmain.c (linkEdit): use TARGET_Z80_LIKE,
	  output PSEG location if --xram-loc or --xstack-loc was used
	* as/link/mcs51/lkarea.c (lnksect2): set segment address afterwards

2007-01-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/as_gbz80.dsp, as/z80/as_gbz80.dsp,
	* as/as_z80.dsp,   as/z80/as_z80.dsp,
	* as/asx8051.dsp,  as/mcs51/asx8051.dsp,
	* sdcc.dsw: moved project files into subdir
	* as/hc08/as_hc08.dsp,
	* as/hc08/Makefile.bcc,
	* as/hc08/Makefile.in,
	* as/mcs51/Makefile.bcc,
	* as/mcs51/Makefile.in,
	* as/z80/Makefile.bcc,
	* as/z80/Makefile.in,
	* as/link/mcs51/Makefile.bcc: use as/strcmpi.c
	* as/hc08/asm.h,
	* as/mcs51/asm.h,
	* as/z80/asm.h: added as_strcmpi() and as_strncmpi() prototypes
	* as/hc08/asmain.c,
	* as/hc08/assym.c,
	* as/mcs51/asmain.c,
	* as/mcs51/assym.c,
	* as/z80/assym.c: removed include "strcmpi.h"
	* as/hc08/strcmpi.c,
	* as/hc08/strcmpi.h,
	* as/mcs51/strcmpi.c,
	* as/mcs51/strcmpi.h,
	* support/Util/strcmpi.c,
	* support/Util/strcmpi.h: removed files
	* as/strcmpi.c: added as_strncmpi()

2007-01-05 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* sdcc.dsw: Added some dependencies on project config.dsp

2007-01-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/mcs51/lkarea.c (lnkarea2, lnksect2): replaced [di]seg_ap->a_addr
	  with [di]ram_start to fix a regresion

2007-01-03 Bernhard Held <bernhard AT bernhardheld.de>

	* configure.in: added missing mcs51 in status output
	* Makefile.in: add support/regression to SDCC_EXTRA to distclean this
	directory
	* debugger/mcs51/clean.mk (distclean): remove config.h
	* src/clean.mk (clean): remove SDCCy.c, SDCCy.h, SDCClex.c
	* support/cpp2/Makefile.in (clean): remove s-options, optionlist,
	options.h, s-options-h and options.c
	* support/cpp2/clean.mk: unused, removed
	* Makefile.common.in,
	* main_in.mk,
	* as/Makefile.in,
	* as/hc08/Makefile.in,
	* as/hc08/clean.mk,
	* as/mcs51/Makefile.in,
	* as/mcs51/clean.mk,
	* as/z80/clean.mk,
	* as/z80/conf.mk,
	* as/z80/Makefile.in,
	* as/z80/clean.mk,
	* as/link/Makefile.in,
	* as/link/hc08/Makefile.in,
	* as/link/hc08/clean.mk,
	* as/link/mcs51/Makefile.in,
	* as/link/mcs51/clean.mk,
	* as/link/z80/Makefile.in,
	* as/link/z80/clean.mk,
	* as/link/z80/conf.mk,
	* debugger/mcs51/Makefile.in,
	* debugger/mcs51/clean.mk,
	* device/include/Makefile.in,
	* device/lib/Makefile.in,
	* device/lib/mcs51/Makefile.in,
	* device/lib/pic/Makefile.in,
	* device/lib/pic/Makefile.common.in,
	* device/lib/pic/Makefile.subdir,
	* device/lib/pic/Makefile.rules,
	* device/lib/pic16/libio/Makefile.in,
	* device/lib/pic16/Makefile.subdir,
	* device/lib/pic16/libdev/Makefile.in,
	* device/lib/pic16/Makefile.rules,
	* device/lib/pic16/Makefile.common.in,
	* sim/ucsim/avr.src/Makefile.in,
	* sim/ucsim/main_in.mk,
	* sim/ucsim/cmd.src/Makefile.in,
	* sim/ucsim/doc/Makefile.in,
	* sim/ucsim/gui.src/Makefile.in,
	* sim/ucsim/gui.src/obsolete/portmon.src/Makefile.in,
	* sim/ucsim/gui.src/serio.src/Makefile.in,
	* sim/ucsim/hc08.src/Makefile.in,
	* sim/ucsim/libltdl/Makefile.in,
	* sim/ucsim/s51.src/Makefile.in,
	* sim/ucsim/sim.src/Makefile.in,
	* sim/ucsim/sim.src/conf.mk,
	* sim/ucsim/xa.src/Makefile.in,
	* sim/ucsim/z80.src/Makefile.in,
	* src/Makefile.in,
	* src/clean.mk,
	* src/port.mk,
	* support/cpp2/Makefile.in,
	* support/librarian/Makefile.in,
	* support/librarian/clean.mk,
	* support/makebin/Makefile.in,
	* support/makebin/clean.mk,
	* support/packihx/Makefile.in,
	* support/regression/Makefile.in,
	* support/regression/ports/ds390/spec.mk,
	* support/regression/ports/gbz80/spec.mk,
	* support/regression/ports/hc08/spec.mk,
	* support/regression/ports/mcs51/spec.mk,
	* support/regression/ports/mcs51-large/spec.mk,
	* support/regression/ports/mcs51-medium/spec.mk,
	* support/regression/ports/mcs51-xstack-auto/spec.mk,
	* support/regression/ports/pic14/spec.mk,
	* support/regression/ports/pic16/spec.mk,
	* support/regression/ports/mcs51-stack-auto/spec.mk,
	* support/regression/ports/ucz80/spec.mk,
	* support/regression/ports/xa51/spec.mk,
	* support/regression/ports/z80/spec.mk: fixed for autoconf 2.6x by
	adding a slash after $(top_builddir) and/or adding @datarootdir@
	* configure.in,
	* debugger/mcs51/configure.in,
	* device/lib/pic/configure.in,
	* device/lib/pic16/configure.in,
	* sim/ucsim/configure.in,
	* support/cpp2/configure.in,
	* support/packihx/configure.in: changed AC_PREREQ to 2.60
	* configure,
	* debugger/mcs51/configure,
	* device/lib/pic/configure,
	* device/lib/pic16/configure,
	* sim/ucsim/configure,
	* support/cpp2/configure,
	* support/packihx/configure: generated with autoconf 2.60

2007-01-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/hc08/lkihx.c (newArea),
	* as/link/hc08/lkrloc.c: renamed newArea() to ihxNewArea()

2007-01-02 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: documented #pragma sdcc_hash
	* support/cpp2/sdcpp.c: allow_naked_hash (value of #pragma sdcc_hash)
	  initialized to 0
	* support/cpp2/c-ppoutput.c: fixed warning: no newline at end of file

2007-01-01 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (createDo): backPatchLabels() needs falseLabel in
	empty 'while'-loop to work correctly, see regression test 'while.c'
	* support/regression/tests/while.c: added

2007-01-01 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/libcpp/directives.c, support/cpp2/libcpp/identifiers.c,
	  support/cpp2/libcpp/init.c, support/cpp2/libcpp/sdcpp-opts.c,
	  support/cpp2/libcpp/sdcpp.c:
	  sdcpp specific pragma/directive/option handling moved to sdcpp.c
	* doc/sdccman.lyx: reference to the GCC 4.1.1 CPP Manual
	* support/cpp2/libcpp/mkdeps.c: synchronized with GCC CPP 4.1.1

2006-12-31 Borut Razem <borut.razem AT siol.net>

	* SDCPP synchronized with GCC CPP release version 4.1.1,
	  currently the latest release:
	* support/cpp2/libcpp, support/cpp2/libcpp/include,
	  support/cpp2/libcpp/include/cpp-id-data.h
	  support/cpp2/libiberty/fopen_unlocked.c
	  support/cpp2/libiberty/md5.c
	  support/cpp2/md5.h
	  support/cpp2/opt-functions.awk
	  support/cpp2/opt-gather.awk
	  support/cpp2/optc-gen.awk
	  support/cpp2/opth-gen.awk:
	  added
	* support/cpp2/Makefile.in, support/cpp2/auto-host_vc_in.h,
	  support/cpp2/c-incpath.c, support/cpp2/c-incpath.h,
	  support/cpp2/c-ppoutput.c, support/cpp2/c-pretty-print.c,
	  support/cpp2/c-pretty-print.h, support/cpp2/cppdefault.c,
	  support/cpp2/cppdefault.h, support/cpp2/diagnostic.c,
	  support/cpp2/diagnostic.h, support/cpp2/except.h,
	  support/cpp2/hwint.h, support/cpp2/input.h,
	  support/cpp2/intl.h, support/cpp2/move-if-change,
	  support/cpp2/opts.c, support/cpp2/opts.h,
	  support/cpp2/output.h, support/cpp2/prefix.c,
	  support/cpp2/prefix.h, support/cpp2/pretty-print.c,
	  support/cpp2/pretty-print.h, support/cpp2/sdcpp-opts.c,
	  support/cpp2/sdcpp.c, support/cpp2/sdcpp.dsp,
	  support/cpp2/sdcpp.h, support/cpp2/sdcpp.opt,
	  support/cpp2/sdcppa.dsp, support/cpp2/symcat.h,
	  support/cpp2/version.c:
	  modified
	* support/cpp2/libcpp/charset.c, support/cpp2/libcpp/directives.c,
	  support/cpp2/libcpp/errors.c, support/cpp2/libcpp/expr.c,
	  support/cpp2/libcpp/files.c, support/cpp2/libcpp/identifiers.c,
	  support/cpp2/libcpp/include/cpplib.h, support/cpp2/libcpp/include/line-map.h,
	  support/cpp2/libcpp/include/mkdeps.h, support/cpp2/libcpp/include/symtab.h,
	  support/cpp2/libcpp/init.c, support/cpp2/libcpp/internal.h,
	  support/cpp2/libcpp/lex.c, support/cpp2/libcpp/line-map.c,
	  support/cpp2/libcpp/macro.c, support/cpp2/libcpp/mkdeps.c,
	  support/cpp2/libcpp/symtab.c, support/cpp2/libcpp/system.h,
	  support/cpp2/libcpp/traditional.c, support/cpp2/libcpp/ucnid.h,
	  support/cpp2/libiberty/hashtab.c, support/cpp2/libiberty/hashtab.h:
	  moved
	* support/cpp2/cppcharset.c, support/cpp2/cpperror.c,
	  support/cpp2/cppexp.c, support/cpp2/cppfiles.c,
	  support/cpp2/cpphash.c, support/cpp2/cpphash.h,
	  support/cpp2/cppinit.c, support/cpp2/cpplex.c,
	  support/cpp2/cpplib.c, support/cpp2/cpplib.h,
	  support/cpp2/cppmacro.c, support/cpp2/cpptrad.c,
	  support/cpp2/cppucnid.h, support/cpp2/hashtab.c,
	  support/cpp2/hashtab.h, support/cpp2/hashtable.c,
	  support/cpp2/hashtable.h, support/cpp2/line-map.c,
	  support/cpp2/line-map.h, support/cpp2/mkdeps.c,
	  support/cpp2/mkdeps.h, support/cpp2/options_vc_in.c,
	  support/cpp2/options_vc_in.h, support/cpp2/opts.sh,
	  support/cpp2/system.h:
	  deleted / moved

2006-12-31 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure: fixed bug #1538756: configure dies if bison
	  and flex are not installed, 2nd try

2006-12-30 Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/peeph.def: renamed rule 400 to 500, moved rule 253.x to
	400.x for better code in RFE 899102

2006-12-30 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCpeeph.c (deadMove),
	* src/port.h,
	* src/mcs51/peep.h: renamed 'op' by 'reg'
	* src/mcs51/peep.c (isFunc, isCallerSaveFunc): added,
	(scan4op): small change for removeDeadMove(), added support for
	'callee saves' and/or PACLL function calls,
	(removeDeadMove): added, removes superflous 'mov r%1,%2',
	(removeDeadPopPush): renamed from mcs51DeadMove(), common parts
	left in new dispatcher mcs51DeadMove()
	(mcs51DeadMove): dispatcher for removeDeadPopPush() and new
	removeDeadMove()
	* src/mcs51/peeph.def: added rule 301 removing superflous 'mov r%1,%2'

2006-12-30 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* support/cpp2/options_vc_in.h, support/cpp2/options_vc_in.c,
	  support/cpp2/sdcppa.dsp: create 'options.h' and 'options.c' under MSVC.

2006-12-30 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/spacs.h: deleted from svn
	* configure.in, configure: fixed bug #1538756: configure dies if bison
	  and flex are not installed

2006-12-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/gen.c (assignResultValue): fixed bug when registers overlap,
	  with this z80 passes printf float test when enabled
	* support/regression/tests/bug1057979.c: typo disabled ds390 float test

2006-12-28 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/config.in, support/cpp2/configure.in,
	  support/cpp2/configure, support/cpp2/Makefile.in:
	  fix for the solaris build

2006-12-27 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y (type_specifier2, pointer),
	* src/SDCCsymt.h,
	* src/SDCCsymt.c (mergeSpec, checkSClass),
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: Parse and validate the restrict keyword
	* support/valdiag/valdiag.py: Allow test cases to specify
	  required language standard
	* support/valdiag/tests/restrict.c: New file to test restrict keyword
	* support/valdiag/tests/tentdecl.c: Supress empty source file error

2006-12-27 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cppmain.c, support/cpp2/mbchar.[ch]: removed
	* support/cpp2/libiberty/Makefile.in, support/cpp2/libiberty/sdcpp.dsp:
	  mbchar removed
	* support/cpp2/libiberty/getpwd.c, support/cpp2/sdcpp.h:
	  fixed for borland C
	* support/cpp2/libiberty/Makefile.bcc: updated
	* src/pic16/main.c: fixed #pragma udata handling
	* src/mcs51/mcs51.dsp: added peep.[ch] to the project

2006-12-26 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCpeeph.c: made labelHashEntry global,
	made pcDistance, FBYNAME static,
	(pcDistance): made static, use isComment and isLabel,
	(deadMove): added,
	(getLabelRef): added, extracted from labelRefCount(),
	(labelRefCount): use new getLabelRef(),
	(callFuncByName): made static, added deadMove,
	use isComment and isLabel,
	(newPeepRule): made static, set isLabel,
	(isLabelDefinition): added parameter isPeepRule to allow '%' in
	labels from peephole rules,
	(buildLabelRefCountHash): speed up by running isLabelDefinition() only
	when isComment or isLabel is set
	* src/SDCCpeeph.h: added "isLabel" and "visited" to struct lineNode,
	added labelHashEntry, isLabelDefinition, labelHash and getLabelRef
	to make them global
	* src/mcs51/peep.h: added
	* src/mcs51/peep.c: added, implements mcs51DeadMove()
	* src/port.h: added peep->deadMove to port structure
	* src/mcs51/main.c: initialize peep->deadMove with mcs51DeadMove
	* src/mcs51/peeph.def: renumbered rule 300 to 400, added new rule 300
	deadMove, finally removed no. 1 and 2
	* src/mcs51/gen.c,
	* src/pic/gen.c,
	* src/z80/gen.c,
	* src/z80/ralloc.c,
	* src/pic16/gen.c,
	* src/ds390/gen.c,
	* src/hc08/gen.c: mark lines with isComment or isLabel
	* sim/ucsim/s51.src/uc390hw.cc: don't waist 65535 ticks before CKRDY
	* .version,
	* sdcc.spec: bumped version to 2.6.3

2006-12-26 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/Makefile.in: added dependency on options.h
	* configure: regenerated
	* support/cpp2/sdcpp.opt, support/cpp2/move-if-change: svn:eol-style native
	* support/cpp2/Makefile.in: added vasprintf.c

2006-12-25 Borut Razem <borut.razem AT siol.net>

	* SDCPP synchronized with GCC CPP release version 3.4.6,
	  the latest release before 4.x:
	* support/cpp2/Makefile.in, support/cpp2/config.h,
	  support/cpp2/configure, support/cpp2/configure.in,
	  support/cpp2/cppdefault.c, support/cpp2/cppdefault.h,
	  support/cpp2/cpperror.c, support/cpp2/cppexp.c,
	  support/cpp2/cppfiles.c, support/cpp2/cpphash.c,
	  support/cpp2/cpphash.h, support/cpp2/cppinit.c,
	  support/cpp2/cpplex.c, support/cpp2/cpplib.c,
	  support/cpp2/cpplib.h, support/cpp2/cppmacro.c,
	  support/cpp2/cpptrad.c, support/cpp2/except.h,
	  support/cpp2/hashtable.c, support/cpp2/hashtable.h,
	  support/cpp2/hwint.h, support/cpp2/intl.h,
	  support/cpp2/line-map.c, support/cpp2/line-map.h,
	  support/cpp2/mkdeps.c, support/cpp2/mkdeps.h,
	  support/cpp2/output.h, support/cpp2/prefix.c,
	  support/cpp2/prefix.h, support/cpp2/sdcpp.dsp,
	  support/cpp2/system.h, support/cpp2/version.c:
	  modified
	* support/cpp2/c-incpath.c, support/cpp2/c-incpath.h,
	  support/cpp2/c-ppoutput.c, support/cpp2/c-pretty-print.c,
	  support/cpp2/c-pretty-print.h, support/cpp2/cppcharset.c,
	  support/cpp2/cppucnid.h, support/cpp2/diagnostic.c,
	  support/cpp2/diagnostic.def, support/cpp2/diagnostic.h,
	  support/cpp2/hashtab.c, support/cpp2/hashtab.h,
	  support/cpp2/input.h, support/cpp2/libiberty/getpwd.c,
	  support/cpp2/libiberty/vasprintf.c, support/cpp2/libiberty/xmemdup.c,
	  support/cpp2/move-if-change, support/cpp2/opts.c,
	  support/cpp2/opts.h, support/cpp2/opts.sh,
	  support/cpp2/pretty-print.c, support/cpp2/pretty-print.h,
	  support/cpp2/sdcpp.opt, support/cpp2/sdcpp-opts.c,
	  support/cpp2/win32, support/cpp2/win32/dirent.c,
	  support/cpp2/win32/dirent.h:
	  added
	* support/cpp2/sdcpp.c: renamed from sdcppmain.c
	* support/cpp2/sdcpp.h: renamed from sdcc.h
	* sdcppinit.c: deleted

2006-12-23 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpphash.h, support/cpp2/cpplex.c,
	  support/cpp2/cpplib.[ch], support/cpp2/sdcppinit.c, doc/sdccman.lyx,
	  preproc.c: an other try to fix bug #982435: introduced
	  -pedantic-parse-number command line option and pedantic_parse_number
	  pragma

2006-12-21 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/mcs51/lkarea.c (lnkarea2): handle absolute areas, restructured
	   BSEG handling,
	  (lnksect2): use --data-loc and --idata-loc as lower bound for ramstart,
	   corrected overlayed areax addresses, warn about memory overlaps
	* as/mcs51/asmain.c (asmbl): create a new area for every .org directive
	* src/avr/main.c,
	* src/ds390/main.c,
	* src/hc08/main.c,
	* src/mcs51/main.c,
	* src/pic16/main.c,
	* src/pic/main.c,
	* src/xa51/main.c,
	* src/z80/main.c,
	* src/port.h: added xabs_name and iabs_name
	* src/SDCCglue.c (emitRegularMap): allocate for absolutes with initializer
	  (glue, emitMaps): create and emit maps d_abs and i_abs
	* src/SDCCglue.h: cosmetic changes
	* src/SDCCmain.c (setDefaultOptions): idata can start below 0x80
	* src/SDCCmem.h,
	* src/SDCCmem.c (initMem): added x_abs, i_abs and d_abs
	  (allocDefault): put absolute, initialized globals in them
	* support/regression/tests/absolute.c: added absolute bdata test
	* device/lib/printf_large.c (output_float): moved fpBuffer to stack/xdata

2006-12-20 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpphash.h, support/cpp2/cpplex.c: fixed bug #982435
	* support/regression/tests/preproc.c: renamed from bug-1351710.c,
	  added regression test for bug #982435

2006-12-18 Borut Razem <borut.razem AT siol.net>

	* src/SDCCutil.c: fixed a bug in (get_pragma_token)
	* src/pic16/main.c, src/SDCC.lex, src/z80/main.c:
	  small cosmetic changes
	* src/SDCC.lex: (stringLiteral) fixed bug #1351710
	* support/regression/tests/bug-1351710.c: added regression test

2006-12-18 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: added the long missed iCode table
	  "<where is figure II?>", added links to wiki

2006-12-17 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, src/pic16/main.c, src/pic/main.c, src/port.h,
	  src/SDCC.lex, src/SDCCutil.[ch], src/z80/main.c,
	  support/Util/SDCCerr.[ch]: removed deprecated pragmas,
	  unified table driven pragma handling, pragma argument type checking
	* support/Util/dbuf.c: (dbuf_set_size) allow to set size equal to the
	  current one - version 1.1.3
	* src/SDCCmain.c: (setParseWithComma) substituted brain damaged strtok

2006-12-13 Raphael Neider <rneider AT web.de>

	* src/pic/device.h: removed AssignedMemory structure and macros
	* src/pic/device.c: removed global finalMapping (linker assigns
	    memory locations),
	  (register_map): add SFRs to remembered memRanges
	  (addMemRange,isSFR,dump_map,dump_sfr,mapRegister,assignRegister,
	  assignFixedRegisters,assignRelocatableRegisters): removed,
	  (setMaxRAM,validAddress): adapted accordingly,
	  (pic14_hasSharebank,pic14_getSharedStack): only report and use
	    reasonably sized sharebanks,
	* src/pic/ralloc.c (writeUsedRegs): stripped down (remove?),
	  (allDefsOutOfRange): removed unused code,
	* src/pic/main.c (_process_pragma): removed memmap/maxram pragma
	    handling
	* src/pic/pcode.c (register_reassign): removed recursion warning,
	    fired far too often,
	* src/pic/glue.c (emitSymbolToFile,pic14_constructAbsMap): modified
	    to use existing pic14_stringInSet() to avoid duplicate symbols,
	    tidied up the code a bit,
	  (pic14printLocals): added in symmetry to printExterns, replaces
	    writeUsedRegs more or less,
	  (picglue): call new pic14_printLocals(),
	* device/include/pic/pic*.h: removed #pragma memmap directives,
	    information gathered from include/pic/pic14devices.txt
	* support/scripts/inc2h.pl: do not emit #pragma memmap lines

2006-12-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/C8051F520.h: fixed buggy CPT0MX

2006-12-11 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/cc2430.h: fixed missing ';'

2006-12-10 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libc/stdio/vfprintf.c,
	* device/lib/pic16/libc/stdio/printf_small.c,
	* device/lib/pic16/libc/stdio/printf_timy.c: pop int from stack for
	  char arguments, as char varargs are cast to int by the caller,
	  hopefully fixes #1604915 (other device libraries are still affected)

2006-12-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (packRegsForAssign),
	* src/hc08/ralloc.c (packRegsForAssign): fixed bug #1605880

2006-12-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/malloc.h: removed init_dynamic_memory
	* device/lib/malloc.c: made init_dynamic_memory static and automatically
	  call it once from malloc. Also use _sdcc_heap[] from _heap.c
	* device/lib/_heap.c: new, added, contains _sdcc_heap[]
	* device/lib/libsdcc.lib,
	* device/lib/Makefile.in,
	* support/regression/ports/mcs51-xstack-auto/spec.mk: added _heap.c
	* doc/sdccman.lyx: documented use of new _heap.c
	* support/regression/tests/malloc.c: removed init_dynamic_memory
	* src/cdbFile.c(spacesToUnderscores): new function,
	  (cdbWriteEndFunction, cdbWriteCLine): use spacesToUnderscores, fixes bug
	  1068030
	* device/include/tinibios.h: removed defines for putchar and getchar
	* device/lib/ds390/Makefile.in: added putchar.c
	* device/lib/ds390/putchar.c: new, added, fixes bug 1465671

2006-12-09 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/sdcc.h: prevent multiple inclusion
	* support/cpp2/options.h: deleted

2006-12-08 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/sdcc.h: removed x*alloc() macros
	* support/cpp2/libiberty.h: uncommented out x*alloc() declarations
	* support/cpp2/Makefile.bcc, support/cpp2/Makefile.in,
	  support/cpp2/sdcpp.sdc: x*alloc files added to the project
	* support/cpp2/system.h: moved #include "sdcc.h"
	* support/cpp2/libiberty/xexit.c, support/cpp2/libiberty/xmalloc.c,
	  support/cpp2/libiberty/xstrdup.c, support/cpp2/libiberty/xstrerror.c:
	  added
	* support/cpp2/sdcppinit.c: added -isysroot, -fsigned-char,
	  -funsigned-char options
	* support/cpp2/sdcppmain.c: fixed bug 1611411

2006-12-07 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpplib.c: reverted sdcpp special handling of _Pragma()
	  directive

2006-12-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c (addDecl): fixed bug 1609244
	* src/SDCCmain.c (linkEdit): fixed bug 1609279
	* doc/sdccman.lyx,
	* .version: bumped to 2.6.2 because a) it's been a while
	  b) the linker sources have moved c) the preprocessor is upgraded

2006-12-04 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/tests/snprintf.c: some checks
	* lib/src/printf_large.c: %bc: read char instead of int from stack

2006-12-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/cc2430.h: inserted _XPAGE

2006-12-02 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/cc2430.h: added

2006-12-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/asm/default/features.h,
	* device/include/asm/ds390/features.h,
	* device/include/mcs51/at89s53.h,
	* device/include/ser.h,
	* device/include/ser_ir.h,
	* device/include/serial.h: changed keywords to double underscore variants,
	  fixes bug 1590261 some more, thanks Steven Borley

2006-12-01 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (register_reassign): do not crash on recursive code
	  but emit warning (recursion is not supported for pic14)

2006-11-30 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added 101.a,b (moves to int/long xdata)
	* doc/sdccman.lyx: various small changes, acknowledged Sourceforge

2006-11-30 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (dump_sfr): always emit symbols
	* src/pic/glue.c (pic14printPublics): fixed typo

2006-11-30 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (create_pic,ram_map): add memRange entries to PIC
	  (pic14_getSharebankSize, pic14_getSharebankAddress): replaced with
	  (pic14_hasSharebank,pic14_isShared,pic14_allRAMShared,
	   pic14_getSharedStack): NEW, evaluate the memRange entries to locate
	   a sharebank, use a non-shared bank for the stack if none available
	* src/pic/device.h (struct memRange): added linked list next field,
	  added prototypes for above functions
	* src/pic/ralloc.c (initStack): handle shared and banked stacks,
	  (typeRegWithIdx): accept fixed and unfixed stack registers
	* src/pic/pcode.c (pCodeInitRegisters): use new functions to create
	  the stack, handle shared and banked stack (except for WSAVE),
	  (insertBankSel): removed useless optimization (will never fire),
	  (FixRegisterBanking): added optimization for devices with only one
	  possibly aliased bank of memory, like 16f84
	* src/pic/glue.c (pic14_constructAbsMap): back to udata_ovr, as some
	  devices have no SHAREBANK in the linker script
	* device/include/pic/pic14devices.txt: documented memmap
	* device/lib/pic/libdev/Makefile.in: removed --stack-loc again

2006-11-30 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (transferRegReg, loadRegFromAop, forceStackedAop,
	  storeRegToAop, freeAsmop, genPlusIncr, genPlus, genPointerGetSetOfs,
	  genAnd, genOr, genXor, genLeftShiftLiteral, genRightShiftLiteral,
	  genhc08Code): switched most of the D (debug) macros to DD (detailed
	  debug) macros to better control clutter in the generated .asm file.
	* src/hc08/gen.c: (forceStackedAop, genUminus, genLeftShift,
	  genRightShift): fixed bug with non-constant bit shift stored to
	  a volatile result (SF Open Discussion forum thread #1616749).
	  Single byte case is not yet optimized.

2006-11-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/asm/mcs51/features.h,
	* device/include/malloc.h,
	* device/include/stdio.h: changed keywords to double underscore variants,
	  fixes bug 1590261

2006-11-27 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cppexp.c, support/cpp2/hashtable.h,
	  support/cpp2/Makefile.in, support/cpp2/cppfiles.c,
	  support/cpp2/output.h, support/cpp2/cppinit.c,
	  support/cpp2/cpplib.c, support/cpp2/cpplib.h,
	  support/cpp2/Makefile.bcc, support/cpp2/cpphash.c,
	  support/cpp2/cppdefault.c, support/cpp2/system.h,
	  support/cpp2/cpphash.h, support/cpp2/cpplex.c,
	  support/cpp2/cppdefault.h, support/cpp2/mbchar.c,
	  support/cpp2/prefix.c, support/cpp2/except.h,
	  support/cpp2/hwint.h, support/cpp2/cppmacro.c,
	  support/cpp2/line-map.h, support/cpp2/sdcpp.dsp,
	  support/cpp2/sdcc.h, support/cpp2/mkdeps.c,
	  support/cpp2/version.c, support/cpp2/cppmain.c,
	  support/cpp2/version.h, support/cpp2/hashtable.c,
	  support/cpp2/cpperror.c:
	  synchronized with GCC CPP release version 3.3.6,
	  the latest where cppmain.c still exists.
	* support/cpp2/cpptrad.c, support/cpp2/sdcppmain.c,
	  support/cpp2/sdcppinit.c: added

2006-11-27 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpplex.c:
	  fixed _asm ... _endasm handling bug, introduce with GCC CPP
	  synchronization
	* support/cpp2/cpplib.c: removed definitions of unused variables

2006-11-26 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/libiberty.h: commented out x*alloc() declarations
	  since they are redefined by macros in support/cpp2/sdcc.h
	* support/cpp2/sdcc.h: x*alloc macro redefinition

2006-11-25 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cppexp.c, support/cpp2/hashtable.h,
	  support/cpp2/configure, support/cpp2/Makefile.in,
	  support/cpp2/cppfiles.c, support/cpp2/output.h,
	  support/cpp2/cppinit.c, support/cpp2/cpplib.c,
	  support/cpp2/config.h, support/cpp2/cpplib.h,
	  support/cpp2/Makefile.bcc, support/cpp2/cpphash.c,
	  support/cpp2/cppdefault.c, support/cpp2/config.in,
	  support/cpp2/system.h, support/cpp2/cpplex.c,
	  support/cpp2/cpphash.h, support/cpp2/mbchar.c,
	  support/cpp2/cppdefault.h, support/cpp2/prefix.c
	  support/cpp2/hwint.h, support/cpp2/mbchar.h,
	  support/cpp2/prefix.h, support/cpp2/cppmacro.c,
	  support/cpp2/configure.in, support/cpp2/intl.h,
	  support/cpp2/sdcpp.dsp, support/cpp2/acconfig.h,
	  support/cpp2/sdcc.h, support/cpp2/mkdeps.c,
	  support/cpp2/version.c, support/cpp2/cppmain.c,
	  support/cpp2/ansidecl.h, support/cpp2/libiberty.h,
	  support/cpp2/hashtable.c, support/cpp2/aclocal.m4,
	  support/cpp2/cpperror.c,
	  support/cpp2/libiberty/safe-ctype.c,
	  support/cpp2/libiberty/safe-ctype.h,
	  support/cpp2/libiberty/splay-tree.c,
	  support/cpp2/libiberty/obstack.c,
	  support/cpp2/libiberty/lbasename.c,
	  support/cpp2/libiberty/splay-tree.h,
	  support/cpp2/libiberty/obstack.h:
	  synchronized with GCC CPP release version 3.2.3,
	  the latest before integration of cpp into gcc
	* support/cpp2/except.h, support/cpp2/line-map.c,
	  support/cpp2/line-map.h,
	  support/cpp2/libiberty/hex.c,
	  support/cpp2/libiberty/concat.c,
	  support/cpp2/libiberty/filenames.h: added
	* support/cpp2/intl.c: deleted

2006-11-24 Borut Razem <borut.razem AT siol.net>

	* src/SDCC.y: enabled compilation of empty source file
	* support/Util/SDCCerr.[ch]: added sdcc warning 190 -
	  "ISO C forbids an empty source file"
	* device/lib/_startup.c, device/lib/printf_tiny.c: disable warning 190
	  if all the code is ifdefed out.

2006-11-24 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genPcall): fix for bug #1601032

2006-11-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/c8051f000.h, device/include/mcs51/C8051F000.h,
	* device/include/mcs51/c8051f018.h, device/include/mcs51/C8051F018.h,
	* device/include/mcs51/c8051f020.h, device/include/mcs51/C8051F020.h,
	* device/include/mcs51/c8051f040.h, device/include/mcs51/C8051F040.h,
	* device/include/mcs51/c8051f060.h, device/include/mcs51/C8051F060.h,
	* device/include/mcs51/c8051f120.h, device/include/mcs51/C8051F120.h,
	* device/include/mcs51/c8051f200.h, device/include/mcs51/C8051F200.h,
	* device/include/mcs51/c8051f300.h, device/include/mcs51/C8051F300.h,
	* device/include/mcs51/c8051f310.h, device/include/mcs51/C8051F310.h,
	* device/include/mcs51/c8051f320.h, device/include/mcs51/C8051F320.h,
	* device/include/mcs51/c8051f326.h, device/include/mcs51/C8051F326.h,
	* device/include/mcs51/c8051f330.h, device/include/mcs51/C8051F330.h,
	* device/include/mcs51/c8051f340.h, device/include/mcs51/C8051F340.h,
	* device/include/mcs51/c8051f350.h, device/include/mcs51/C8051F350.h,
	* device/include/mcs51/c8051f410.h, device/include/mcs51/C8051F410.h:
	  Renamed to all upper case as per the standard set by SiLabs

2006-11-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/C8051F520.h: new, added
	* device/include/mcs51/compiler.h: added link about predefined macros

2006-11-23 Raphael Neider <rneider AT web.de>

	* src/regression/Makefile: add -L path to fresh library
	* src/regression/simulate: emphasize FAILED output
	* src/regression/create_stc: output _failures from gpsim
	* src/regression/compare4.c,
	* src/regression/rotate6.c: fixed char literals,
	  all compile, all run =8-D

	* src/pic/pcode.h: added isPCASMDIR macro
	* src/pic/gen.c (genAnd): fixed bit offset
	* src/pic/ralloc.c (allocNewDirReg,allocDirReg,allocRegByName,
	  packBits): unified register numbering schemes,
	  (newReg): do not insert stack registers into hash table,
	  (initStack): unpinned pseudo stack, simplified,
	  (typeRegWithIdx): fixed retrieval of stack registers,
	* src/pic/pcode.c (addpCodeComment,sameBank): added,
	  (pCodeReplace): removed invalid assertion,
	  (insertPCodeInstruction): fixed newly added labels,
	  (insertBankSwitch,BankSelect,IsBankChange,DoBankSelect,
	  FixRegisterBankingInFlow,compareBankFlow,FixBankFlow,
	  DumpFlow): removed unsed (broken?) code,
	  (insertBankSel): prevent STATUS from being BANKSELed,
	  (FixRegisterBanking): rewritten from scratch, implemented generic
	    optimizations (suppress BANKSELs to same register and to registers
	    present in all banks),
	  (AnalyzeBanking): update flow after BANKSELection

	* src/pic/glue.c (pic14_constructAbsMap): emit pseudo stack in
	    sharebank, let linker place it, mark STKxx symbols as emitted

2006-11-21 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/regression/arrays.c,
	* src/regression/bank1.c,
	* src/regression/bool2.c,
	* src/regression/compare7.c,
	* src/regression/compare8.c,
	* src/regression/compare9.c,
	* src/regression/compare10.c,
	* src/regression/configword.c,
	* src/regression/for.c,
	* src/regression/mult1.c,
	* src/regression/pointer1.c,
	* src/regression/rotate6.c,
	* src/regression/string1.c,
	* src/regression/struct1.c,
	* src/regression/Makefile: make PIC14 regression tests run again
	  (3 fail, 6 won't compile)

2006-11-21 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f4550.h,
	* device/include/pic16/pic18f4455.h,
	* device/lib/pic16/libdev/pic18f4550.c,
	* device/lib/pic16/libdev/pic18f4455.c: fixed #1578591 and #1595144
	* configure.in: removed superfluous closing bracket

2006-11-21 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/lib/expf.c: Fixed bug 1599523: result of expf(x) is
	  always positive.

2006-11-21 Raphael Neider <rneider AT web.de>

	* src/pic/device.{c,h}: added pic14_getPIC()
	* src/pic/gen.c (continueIfTrue,jumpIfTrue): added PIC code,
	  (genAnd): added PIC code for one case, fixes #1597044
	* src/pic/pcode.c (BankSelect): Ohoh, added generic optimization for
	  SFRs that are present in all banks (e.g., STATUS)

2006-11-20 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c: changed inverted ops for DECFSZ/DECFSZW and
	  INCFSZ/INCFSZW and declared them as changing Z bit,
	  (insertPCodeInstruction): correctly invert the above instructions,
	  fixes #1599333,
	  (DoBankSelect): don't panic on po_immediates

2006-11-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/aslink.h,
	* as/link/mcs51/lkihx.c (newArea),
	* as/link/mcs51/lkrloc.c: renamed newArea() to ihxNewArea()
	* as/link/mcs51/lkihx.c (ihx): output reset vector as start address

2006-11-11 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (newpCodeOpBit): search SymbolTab for referenced
	  bitfield symbols, fixes #1579535 (once more...).

2006-11-09 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/generate-cases.py,
	* support/regression/fwk/include/testfwk.h,
	* support/regression/fwk/lib/testfwk.c: used code pointers,
	  (about 50kByte less code generated for mcs51)

2006-11-06 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/acinclude.m4, debugger/mcs51/aclocal.m4,
	  debugger/mcs51/configure: fixed failed check because the function
	  rl_function_of_keyseq isn't in Readline 5.2. Thanks to Ilya Goldberg
	  who submitted the patch for gpsim.
	* debugger/mcs51/configure.in: removed the result message
	* debugger/mcs51/Makefile.in: fixed the config.status warning
	  "... seems to ignore the --datarootdir setting"

2006-11-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/c8051f020.h,
	* device/include/mcs51/c8051f040.h,
	* device/include/mcs51/c8051f060.h,
	* device/include/mcs51/c8051f120.h: added PS0, fixed bug 1589279
	* src/z80/gen.c (gencjneshort),
	* src/z80/peeph.def: applied patch 1571373, thanks Philipp Krause

2006-10-31 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/acinclude.m4, debugger/mcs51/aclocal.m4,
	  debugger/mcs51/configure: get readline version

2006-10-30 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/sdcdb.c: replaced hardcoded "/" with DIR_SEPARATOR_STRING
	* debugger/mcs51/acinclude.m4, debugger/mcs51/aclocal.m4,
	  debugger/mcs51/configure: locate readline even when cross compiling
	* support/scripts/sdcc.nsi: include readline5.dll into the setup package

2006-10-29 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/serial_IO.h: putchar() and getchar() using
	  serial port.

2006-10-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/malloc.h,
	* device/lib/calloc.c,
	* device/lib/free.c,
	* device/lib/malloc.c,
	* device/lib/realloc.c: moved definition of struct into sources
	* support/regression/tests/malloc.c: use void* for init_dynamic_memory()

2006-10-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/asx8051.dsp: corrected output directories
	* as/link/hc08: new directory for hc08 linker
	* as/hc08/aslink.h,             as/link/aslink.h,
	* as/hc08/aslink.mak,           as/link/hc08/aslink.mak,
	* as/hc08/clean.mk,             as/link/hc08/clean.mk,
	* as/hc08/link_hc08.dsp,        as/link/hc08/link_hc08.dsp,
	* as/hc08/lkaomf51.c,           as/link/hc08/lkaomf51.c,
	* as/hc08/lkarea.c,             as/link/hc08/lkarea.c,
	* as/hc08/lkdata.c,             as/link/hc08/lkdata.c,
	* as/hc08/lkelf.c,              as/link/hc08/lkelf.c,
	* as/hc08/lkihx.c,              as/link/hc08/lkihx.c,
	* as/hc08/lklibr.c,             as/link/hc08/lklibr.c,
	* as/hc08/lkmain.c,             as/link/hc08/lkmain.c,
	* as/hc08/lkmem.c,              as/link/hc08/lkmem.c,
	* as/hc08/lkrloc.c,             as/link/hc08/lkrloc.c,
	* as/hc08/lks19.c,              as/link/hc08/lks19.c,
	* as/hc08/Makefile.aslink,      as/link/hc08/Makefile.aslink,
	* as/hc08/Makefile.bcc,         as/link/hc08/Makefile.bcc,
	* as/hc08/Makefile.in,          as/link/hc08/Makefile.in,
	* as/link/hc08/conf.mk,
	* configure,
	* configure.in,
	* Makefile.in,
	* sdcc.dsw: moved hc08 linker to as/link/hc08
	* as/hc08/lkeval.c,     as/link/mcs51/lkeval.c,     as/link/lkeval.c,
	* as/hc08/lkhead.c,     as/link/mcs51/lkhead.c,     as/link/lkhead.c,
	* as/hc08/lklex.c,      as/link/mcs51/lklex.c,      as/link/lklex.c,
	* as/hc08/lklist.c,     as/link/mcs51/lklist.c,     as/link/lklist.c,
	* as/hc08/lknoice.c,    as/link/mcs51/lknoice.c,    as/link/lknoice.c,
	* as/hc08/lksym.c,      as/link/mcs51/lksym.c,      as/link/lksym.c,
	* as/link/mcs51/aslink.dsp,
	* as/link/mcs51/Makefile.in: factored out the common files
	* as/hc08/lkstore.c: deleted, use the one already in as/link/
	* as/clean.mk: extra cleaning common files
	* as/link/mcs51/strcmpi.c,      as/strcmpi.c: moved
	* as/link/mcs51/strcmpi.h: deleted, moved protoype to aslink.h
	* as/mcs51/asm.h: include sdccconf.h or sdcc_vc.h

2006-10-29 Raphael Neider <rneider AT web.de>

	* src/pic/ralloc.c (newReg): create aliases for registers with
	  multiple names to fix #1579535 and #1584001,
	  (regWithIdx,dirregWithName): resolve aliases on lookup
	* src/pic/pcode.c (DoBankSelect): die with error message on failing
	  bankselect
	* device/lib/pic/libdev/Makefile.in: move pseudo stack down to 0x4f
	  to prevent build errors on small devices

2006-10-28 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (genFunction,genCall): drop "same code page"
	  assumption within interrupt handlers, fixes #1584940
	* src/pic/glue.c (pic14_constructAbsMap): mark absolute symbols as
	  "emitted" to avoid emitting them again in udata

2006-10-27 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/lib/_putchar.c, device/lib/_getchar.c, device/lib/inituart.c:
	Removed.

2006-10-26 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/lib/_putchar.c, device/lib/_getchar.c, device/lib/inituart.c:
	Initialize uart only if SM0 and SM1 are zero.  Also, use flag to turn
	on/off CR to CRLF conversion.

2006-10-25 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: updated IRQ section

2006-10-24 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/lib/serial_io.c: removed
	* device/lib/_putchar.c, device/lib/_getchar.c, device/lib/inituart.c
	replacements for serial_io.c

2006-10-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/main.c (_process_pragma, _parseOptions): fixed bug 1583318

2006-10-24 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/lib/serial_io.c: Default putchar() and getchar() for
	  mcs51 uses serial port.

2006-10-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (movc): improved check for 0 and 1, see RFE 1582704

2006-10-23 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/ports/mcs51/support.c: smaller
	_sdcc_external_startup()
	* device/lib/mcs51/crtxclear.asm: don't check high byte of l_PSEG

2006-10-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/gbz80/crt0.s,
	* device/lib/gbz80/crt0_rle.s,
	* device/lib/gbz80/div.s,
	* device/lib/gbz80/fstubs.s,
	* device/lib/gbz80/heap.s,
	* device/lib/gbz80/mul.s,
	* device/lib/gbz80/putchar.s,
	* device/lib/gbz80/stubs.s,
	* device/lib/z80/crt0.s,
	* device/lib/z80/crt0_rle.s,
	* device/lib/z80/div.s,
	* device/lib/z80/fstubs.s,
	* device/lib/z80/heap.s,
	* device/lib/z80/mul.s,
	* device/lib/z80/putchar.s,
	* device/lib/z80/stubs.s: reverted, I was mistaken

2006-10-20 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: peephole 238.x added check for notvolatile
	* support/regression/ports/mcs51/support.c: removed race
	condition on TI in _putchar allowing to use serial port mode 0

2006-10-20 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/sdcdb.c: replaced isblank() with isspace()

2006-10-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/gbz80/crt0.s,
	* device/lib/gbz80/crt0_rle.s,
	* device/lib/gbz80/div.s,
	* device/lib/gbz80/fstubs.s,
	* device/lib/gbz80/heap.s,
	* device/lib/gbz80/mul.s,
	* device/lib/gbz80/putchar.s,
	* device/lib/gbz80/stubs.s,
	* device/lib/z80/crt0.s,
	* device/lib/z80/crt0_rle.s,
	* device/lib/z80/div.s,
	* device/lib/z80/fstubs.s,
	* device/lib/z80/heap.s,
	* device/lib/z80/mul.s,
	* device/lib/z80/putchar.s,
	* device/lib/z80/stubs.s: removed all leading underscores from area names

2006-10-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/ports/mcs51/support.c: use highest baudrate so the
	  regression tests are not waiting in the simulator for simulated
	  transmission of debug output

2006-10-16 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/printf_large.c: slightly smaller
	* doc/sdccman.lyx: do not use spaces within html links

2006-10-16 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure, sdccconf_in.h, src/SDCCglobal,
	  debugger/mcs51/Makefile.in, debugger/mcs51/sdcdb.[ch],
	  debugger/mcs51/aclocal.m4, debugger/mcs51/acinclide.m4,
	  debugger/mcs51/config.h.in, debugger/mcs51/configure.in,
	  debugger/mcs51/configure:
	  [ 1185668 ] add gnu readline support to sdcdb - enabled

2006-10-16 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (BankSelect): another fix on (partial) BANKSELs,
	  fixes #1577882, removes close to all banking optimizations

2006-10-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c (checkSClass): no error for uninitialised absolute
	  variables in code memory
	* support/regression/tests/absolute.c: added test for this

2006-10-15 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (InsertBankSel): suppress BANKSELs for one bank
	  devices,
	  (BankSelect): emit BANKSEL before touching linker-placed regs,
	  fixes #1570934

2006-10-10 Raphael Neider <rneider AT web.de>

	* src/SDCCmain.c (optionsTable): accept --stack-size for PICs,
	* src/pic/device.c (pic14_getSharebankSize,pic14_getSharebankAddress),
	* src/pic/main.c (_pic14_parseOptions),
	* src/pic/main.h: mostly reverted to previous state, now use results
	    from SDCCmain.c's argument parsing

2006-10-10 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/break.[ch], debugger/mcs51/cmd.c,
	  debugger/mcs51/sdcdb.[ch], debugger/mcs51/simi.c:
	  [ 1185668 ] add gnu readline support to sdcdb -
	  prepared for READLINE, not enabled yet,
	  thanks to <tal.bav AT gmail.com>

2006-10-10 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (pic16_pCode2str): use isACCESS_BANK macro
	* src/pic16/devices.inc,
	* device/include/pic16 (pic18f[24]620.h),
	* device/include/pic18fregs.h,
	* device/lib/pic16/pics.all,
	* device/lib/pic16/libdev/pic18f[24]{620,525}.c): added support for
	    18f2620, 18f4620, 18f2525, and 18f4525 devices, thanks to
	    Gary Plumbridge and Anton Strobl

2006-10-10 Raphael Neider <rneider AT web.de>

	* src/pic/main.c (_pic14_parseOptions): added --stack-loc=NUM and
	  --stack-siz=NUM options to configure the argument passing stack
	* src/pic/main.h: added stackLocation and stackSize to pic14_options_t
	* src/pic/device.c (mapRegister): catch out-of-memory SIGSEGVs,
	  (pic14_getSharebankSize): obey --stack-siz=NUM,
	  (pic14_getSharebankAddress): obey --stack-loc=NUM

2006-10-08 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: added to the manual
	* doc/figures/ddd_example.png: added (neither pdflatex nor
	most browsers seem to like the .eps file)

2006-10-06 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCglue.c (tempfileandname): changed un*x tmp search paths
	to /tmp and /var/tmp acc. LSB
	* src/SDCCast.c (addCast): Fixed bug 1571231: promote in case of
	RESULT_TYPE_IFX
	* support/regression/tests/onebyte.c: added test

2006-10-05 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* src/mcs51/gen.c: emitcode for "add a,0x%02x" requires only 8 bits.

2006-10-05 Borut Razem <borut.razem AT siol.net>

	* partially fixed [ 1570701 ] peephole - not replacing code from multiline macros,
	  thanks to dfulab:
	  - sdcc.dsw: changed property eol-style to CRLF
	  - support/scripts/resource.rc: replaced references to "afxres.h" with "winres.h"

2006-10-04 Raphael Neider <rneider AT web.de>

	* device/include/pic/{pic16f84.h,pic16f84a.h},
	* device/lib/pic/libdev/{pic16f84.c,pic16f84a.c}: added PORT[AB]_bits
	  from patch #1522504, thanks to Robas Teodor

2006-10-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/z80/lkarea.c: essentially reverted lnksect() to #4380 which
	  fixes bug 1566015

2006-10-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/pic16/glue.c (pic16emitMaps),
	* src/pic/glue.c (pic14emitMaps): hopefully fixed bug 1568779
	* device/lib/gets.c: fixed bug 1568829,thanks Philipp Krause
	* device/lib/pic16/libc/string/memcpypgm2ram.c,
	* device/lib/pic16/libc/string/memcpyram2ram.c: fixed bug 1568836, thanks
	  Philipp Krause
	* as/mcs51/asmain.c (asmbl, newdot): fixed problems with absolute areas
	* as/link/mcs51/lkmem.c (summary2): reverted, do do count abs segments

2006-09-30 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* support/librarian/sdcclib.c: Added option -l.
	* as/link/mcs51/lkmem.c: don't use absolute segments to compute memory
	  usage totals.
	* device/lib/make51lib.bat: added.  Allows building mcs51 libraries easily
	  using Windows command prompt.

2006-09-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/libsdcc.lib: added module rand
	* src/ds390/ralloc.c (rematStr),
	* src/hc08/ralloc.c (rematStr),
	* src/mcs51/ralloc.c (rematStr),
	* src/z80/ralloc.c (rematStr): made output more consistent
	* src/mcs51/gen.c: cosmetic changes

2006-09-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/port.h: added mem.cabs_name to PORT
	* src/ds390/main.c,
	* src/hc08/main.c,
	* src/mcs51/main.c,
	* src/pic16/main.c,
	* src/pic/main.c,
	* src/xa51/main.c,
	* src/z80/main.c: added cabs_name initializers
	* src/SDCCglue.c (emitStaticSeg): allocate and initialize absolute
	  constants
	  (emitMaps): emit absolutes in code memory into cabs_name
	* src/SDCCmem.c,
	* src/SDCCmem.h: added memory map c_abs and defined CABS_NAME
	* src/ds390/gen.c (genCodePointerGet): fixed bug if left is a literal
	* support/regression/fwk/include/testfwk.h: added define for at
	* support/regression/tests/absolute.c: added, new

2006-09-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genPlusIncr, genMinusDec, genAddrOf): small
	  optimizations, see also patch 887161 by Stas Sergeev
	* src/mcs51/peeph.def(104, 207, 209, 212): disabled as they do not seem
	  to be necessary anymore,
	  (102, 103, 104, 127): renamed all occurances of bp to _bp

2006-09-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/at89c51snd1c.h: fixed MSK_SREQ definition
	  thanks Weston T. Schmidt for patch 1555221
	* src/mcs51/peeph.def: renamed rule 257 to 257.a, added 257.b
	* src/SDCCicode.c(geniCodeMultiply): small optimization

2006-09-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stdlib.h: added rand prototypes
	* device/lib/rand.c: new, added
	* device/lib/Makefile.in: added rand.c
	* src/z80/peeph.def,
	* src/z80/peeph-gbz80.def,
	* src/z80/peeph-z80.def: updated conditonals, fixed bug 1565908

2006-09-20 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libio/i2c/i2cnack.c (i2c_nack): fixed ACKDT bit

2006-09-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/aslink.h: cosmetic changes
	* as/link/mcs51/Makefile.in,
	* as/link/z80/Makefile.in: fixed build on CF where VPATH is used

2006-09-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link/aslink.h,
	* as/link/mcs51/aslink.h,
	* as/link/z80/aslink.h: merged and moved to as/link/
	* as/link/lkstore.c,
	* as/link/mcs51/lkstore.c: moved to as/link/
	* as/link/clean.mk: remove *.o
	* as/link/mcs51/alloc.h: deleted
	* as/link/mcs51/lkarea.c: added lnksect prototype
	* as/link/mcs51/lkdata.c,
	* as/link/mcs51/lklex.c,
	* as/link/mcs51/lkmain.c: renamed as_getline to lk_getline
	* as/link/mcs51/lkmem.c,
	* as/link/mcs51/lknoice.c: removed include strcmpi.h
	* as/link/mcs51/lksym.c: include stdlib.h instead of malloc.h or alloc.h
	* as/link/mcs51/aslink.dsp,
	* as/link/mcs51/Makefile.aslink,
	* as/link/mcs51/Makefile.bcc,
	* as/link/mcs51/Makefile.in: updated for moved files
	* as/link/z80/lkarea.c,
	* as/link/z80/lkhead.c,
	* as/link/z80/lklex.c,
	* as/link/z80/lklibr.c,
	* as/link/z80/lklist.c,
	* as/link/z80/lkmain.c,
	* as/link/z80/lkrloc.c,
	* as/link/z80/lksym.c: synced with mcs51
	* as/link/z80/lkdata.c,
	* as/link/z80/lkeval.c,
	* as/link/z80/lkihx.c,
	* as/link/z80/lks19.c: cosmetic changes
	* as/link/z80/Makefile.in,
	* as/link/z80/linkgbz80.dsp,
	* as/link/z80/linkz80.dsp: updated for moved files

2006-09-16 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/sdcdb.c: partially fixed
	  [ 1203664 ] sdcdb fails to open files w. two "." periods
	* debugger/mcs51/simi.c, debugger/mcs51/symtab.c,
	  debugger/mcs51/symtab.h: fixed indenting
	* configure.in, configure: up to date with latest Maarten's changes

2006-09-15 Maarten Brock <sourceforge.brock AT dse.nl>

	as/link/mcs51
	as/aslink.dsp,                  as/link/mcs51/aslink.dsp,
	as/link/mcs51/aslink.h,         as/mcs51/aslink.h,
	as/link/mcs51/aslink.mak,       as/mcs51/aslink.mak,
	as/link/mcs51/lkaomf51.c,       as/mcs51/lkaomf51.c,
	as/link/mcs51/lkarea.c,         as/mcs51/lkarea.c,
	as/link/mcs51/lkdata.c,         as/mcs51/lkdata.c,
	as/link/mcs51/lkeval.c,         as/mcs51/lkeval.c,
	as/link/mcs51/lkhead.c,         as/mcs51/lkhead.c,
	as/link/mcs51/lkihx.c,          as/mcs51/lkihx.c,
	as/link/mcs51/lklex.c,          as/mcs51/lklex.c,
	as/link/mcs51/lklibr.c,         as/mcs51/lklibr.c,
	as/link/mcs51/lklist.c,         as/mcs51/lklist.c,
	as/link/mcs51/lkmain.c,         as/mcs51/lkmain.c,
	as/link/mcs51/lkmem.c,          as/mcs51/lkmem.c,
	as/link/mcs51/lknoice.c,        as/mcs51/lknoice.c,
	as/link/mcs51/lkrloc.c,         as/mcs51/lkrloc.c,
	as/link/mcs51/lks19.c,          as/mcs51/lks19.c,
	as/link/mcs51/lkstore.c,        as/mcs51/lkstore.c,
	as/link/mcs51/lksym.c,          as/mcs51/lksym.c,
	as/link/mcs51/Makefile.aslink,  as/mcs51/Makefile.aslink,
	as/link/mcs51/alloc.h,
	as/link/mcs51/clean.mk,
	as/link/mcs51/conf.mk,
	as/link/mcs51/Makefile.bcc,
	as/link/mcs51/Makefile.in,
	as/link/mcs51/readme.390,
	as/link/mcs51/strcmpi.c,
	as/link/mcs51/strcmpi.h,
	as/mcs51/clean.mk,
	as/mcs51/Makefile.bcc,
	as/mcs51/Makefile.in,
	configure,
	Makefile.in,
	sdcc.dsw: moved mcs51 linker to as/link/mcs51

2006-09-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/link,
	* as/link/Makefile.in,
	* as/link/z80/linkgbz80.dsp,
	* as/link/z80/linkz80.dsp,
	* configure,
	* link,
	* link/clean.mk,
	* link/Makefile.in,
	* link/README,
	* link/z80,
	* link/z80/aslink.h,
	* link/z80/clean.mk,
	* link/z80/conf.mk,
	* link/z80/linkgbz80.dsp,
	* link/z80/linkz80.dsp,
	* link/z80/lkarea.c,
	* link/z80/lkdata.c,
	* link/z80/lkeval.c,
	* link/z80/lkgb.c,
	* link/z80/lkgg.c,
	* link/z80/lkhead.c,
	* link/z80/lkihx.c,
	* link/z80/lklex.c,
	* link/z80/lklibr.c,
	* link/z80/lklist.c,
	* link/z80/lkmain.c,
	* link/z80/lkrloc.c,
	* link/z80/lks19.c,
	* link/z80/lksym.c,
	* link/z80/Makefile.in,
	* Makefile.in,
	* sdcc.dsw: moved link/ to as/link/

2006-09-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/i51mch.c (machine): fixed warning

2006-09-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/i51mch.c (machine): S_DJNZ fixed bug 1554318

2006-09-09 Borut Razem <borut.razem AT siol.net>

	* debugger/mcs51/sdcdb.c, debugger/mcs51/simi.c:
	  sdcdb WIN32 native port
	* src/clean.mk: fixed

2006-09-08 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: SDCDB and ucSim are available on Win32 platforms.

2006-09-08 Raphael Neider <rneider AT web.de>

	* src/pic16/main.c (_pic16_linkEdit,pic16_linkCmd),
	* src/pic/main.c(_pic14_do_link, linkCmd): pass "-w" and "-r"
	    to gplink to disable processor mismatch warning and to allow
	    the use of devices with only aliased (shared) memory banks,
	  (_pic16_genAssemblerPreamble): include pXXX.inc on --mplab-comp

2006-09-07 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* doc/sdccman.lyx: Some re-formating plus example on using
	  #pragma preproc_asm +/-

2006-09-07 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added SDCDB executables in a separate
	  section

2006-09-06 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: fixed Error: unterminated string parsing
	  line at sdcc.nsi:153
	* sdcc/debugger/mcs51/simi.c: argsToCmdLine() fixes

2006-09-05 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure: support for winsock2
	* debugger/mcs51/break.h, debugger/mcs51/cmd.c,
	  debugger/mcs51/cmd.h, debugger/mcs51/sdcdb.c,
	  debugger/mcs51/sdcdb.h, debugger/mcs51/simi.c,
	  debugger/mcs51/simi.h, debugger/mcs51/symtab.c,
	  debugger/mcs51/symtab.h: sdcdb WIN32 native port

2006-09-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCopt.c (cnvToFcall): fixed bug 1551947 by updating OP_USES
	  and OP_DEFS
	* support/regression/tests/bug1551947.c: new, added
	* src/SDCCsymt.h: strings are char* not byte*

2006-09-05 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/pic18f4550.c,
	  device/include/pic16/pic18f4550.h: added PORTD/TRISD
	    declarations/definitions from patch #1520949

2006-09-05 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genPackBits): fix assignment to 8-bit,
	  byte-aligned bitfields, fixes #1539278

2006-09-05 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (genReceive): skip unreferenced arguments,
	  fixes #1544120

2006-09-04 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: move ucSim executables to a separate section
	* support/scripts/sdcc_cygwin_mingw32: don't disable ucsim,
	  -mno-cygwin is a part of the compiler name
	* support/scripts/sdcc_mingw32: don't disable ucsim

2006-09-03 Borut Razem <borut.razem AT siol.net>

	* sdcc.spec: corrected for 2.6.0. Thanks to Christer Weinigel.
	* device/lib/Makefile.in device/lib/clean.mk: small but essential corrections

2006-09-03 Raphael Neider <rneider AT web.de>

	* src/pic/ralloc.c,
	* src/pic/pcode.c (InitReuseRegs): allocate registers with pseudo
	  indices >= 0x1000 to disambiguate them from fixed regs __at(addr),
	  fixes #1550049

2006-09-01 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/cmdutil.cc: #include <sys/time.h> and <unistd.h>
	  to make ppc-osx happy

2006-08-31 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/newcmdposix.cc: #include <assert.h>
	* sim/ucsim/cmd.src/newcmd.cc: #include <ctype.h>
	* sim/ucsim/cmd.src/newcmd.cc: #include <ctype.h>
	* support/regression/ports/ds390/spec.mk,
	  support/regression/ports/mcs51/spec.mk,
	  support/regression/ports/xa51/spec.mk: introduced DEV_NULL variable.
	  To run regression tests in mingw environment:
	  make DEV_NULL=NUL CC=gcc

2006-08-30 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/newcmdposix.cc, sim/ucsim/cmd.src/newcmdposixcl.h,
	  sim/ucsim/cmd.src/newcmdwin32.cc, sim/ucsim/cmd.src/newcmdwin32cl.h,
	  sim/ucsim/app.cc, sim/ucsim/appcl.h, sim/ucsim/configure,
	  sim/ucsim/configure.in, sim/ucsim/ddconfig_in.h, sim/ucsim/error.cc,
	  sim/ucsim/errorcl.h, sim/ucsim/option.cc, sim/ucsim/optioncl.h,
	  sim/ucsim/utils.cc, sim/ucsim/utils.h, sim/ucsim/cmd.src/Makefile.in,
	  sim/ucsim/avr.src/avr.cc, sim/ucsim/avr.src/avrcl.h,
	  sim/ucsim/cmd.src/bp.cc, sim/ucsim/cmd.src/bpcl.h,
	  sim/ucsim/cmd.src/cmdconf.cc, sim/ucsim/cmd.src/cmdgui.cc,
	  sim/ucsim/cmd.src/cmdmem.cc, sim/ucsim/cmd.src/cmdset.cc,
	  sim/ucsim/cmd.src/cmdsetcl.h, sim/ucsim/cmd.src/cmdstat.cc,
	  sim/ucsim/cmd.src/cmduc.cc, sim/ucsim/cmd.src/cmduccl.h,
	  sim/ucsim/cmd.src/cmdutil.cc, sim/ucsim/cmd.src/cmdutil.h,
	  sim/ucsim/cmd.src/command.cc, sim/ucsim/cmd.src/commandcl.h,
	  sim/ucsim/cmd.src/get.cc, sim/ucsim/cmd.src/getcl.h,
	  sim/ucsim/cmd.src/info.cc, sim/ucsim/cmd.src/newcmd.cc,
	  sim/ucsim/cmd.src/newcmdcl.h, sim/ucsim/cmd.src/set.cc,
	  sim/ucsim/cmd.src/show.cc, sim/ucsim/cmd.src/timer.cc,
	  sim/ucsim/hc08.src/hc08.cc, sim/ucsim/hc08.src/hc08cl.h,
	  sim/ucsim/s51.src/Makefile.in, sim/ucsim/s51.src/interrupt.cc,
	  sim/ucsim/s51.src/interruptcl.h, sim/ucsim/s51.src/pca.cc,
	  sim/ucsim/s51.src/pcacl.h, sim/ucsim/s51.src/port.cc,
	  sim/ucsim/s51.src/portcl.h, sim/ucsim/s51.src/serial.cc,
	  sim/ucsim/s51.src/serialcl.h, sim/ucsim/s51.src/timer0.cc,
	  sim/ucsim/s51.src/timer0cl.h, sim/ucsim/s51.src/timer1.cc,
	  sim/ucsim/s51.src/timer1cl.h, sim/ucsim/s51.src/timer2.cc,
	  sim/ucsim/s51.src/timer2cl.h, sim/ucsim/s51.src/uc390.cc,
	  sim/ucsim/s51.src/uc390cl.h, sim/ucsim/s51.src/uc390hw.cc,
	  sim/ucsim/s51.src/uc390hwcl.h, sim/ucsim/s51.src/uc51.cc,
	  sim/ucsim/s51.src/uc51cl.h, sim/ucsim/s51.src/wdt.cc,
	  sim/ucsim/s51.src/wdtcl.h, sim/ucsim/sim.src/hw.cc,
	  sim/ucsim/sim.src/hwcl.h, sim/ucsim/sim.src/mem.cc,
	  sim/ucsim/sim.src/memcl.h, sim/ucsim/sim.src/obsolete.cc,
	  sim/ucsim/sim.src/obsolete.h, sim/ucsim/sim.src/sim.cc,
	  sim/ucsim/sim.src/simcl.h, sim/ucsim/sim.src/stack.cc,
	  sim/ucsim/sim.src/stackcl.h, sim/ucsim/sim.src/test_mem_speed.cc,
	  sim/ucsim/sim.src/uc.cc, sim/ucsim/sim.src/uccl.h,
	  sim/ucsim/xa.src/xa.cc, sim/ucsim/xa.src/xacl.h,
	  sim/ucsim/z80.src/z80.cc, sim/ucsim/z80.src/z80cl.h:
	  ucsim WIN32 native port

2006-08-30 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* doc/sdccman.lyx: added note on dynamic memory heap initialization

2006-08-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genAnd, genOr, genXor): fixed bug 1546986
	* src/ds390/gen.c (aopGetUsesAcc): handle AOP_DPTR2 and AOP_DPTRn too

2006-08-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/gen.c (genAnd, genOr, genXor): fixed bug 1546986
	* support/regression/tests/bug1546986.c: new, added
	* as/mcs51/.cvsignore,
	* debugger/mcs51/.cvsignore,
	* src/.cvsignore: deleted

2006-08-25 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/P89c51RD2.h: fixed bug 1546936 (error in sbit
	  definitions)

2006-08-20 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/newcmd.cc, sim/ucsim/cmd.src/newcmdcl.h:
	  removed cl_listen_console::match(), cl_console::match(),
	  restructured cl_commander::proc_input()

2006-08-16 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/newcmd.cc, sim/ucsim/cmd.src/newcmdcl.h,
	  sim/ucsim/cmd.src/cmdutil.cc, sim/ucsim/cmd.src/cmdutil.h,
	  sim/ucsim/sim.src/mem.cc, sim/ucsim/sim.src/uc.cc: code cleaning

2006-08-14 Borut Razem <borut.razem AT siol.net>

	* support/regression/Makefile.in,
	  support/regression/ports/pic14/gpsim.cmd,
	  support/regression/ports/pic14/spec.mk,
	  support/regression/ports/pic14/support.c:
	  added pic14 regression test

2006-08-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/doc/asxhtm.html: documented changed ABS behaviour
	* as/doc/README: fixed some typos

2006-08-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/float_trans.c: disabled test if __STDC_IEC_559__
	  not defined on host

2006-08-12 Borut Razem <borut.razem AT siol.net>

	* support/regression/fwk/include/testfwk.h,
	  support/regression/fwk/lib/testfwk.c,
	  support/regression/generate-cases.py,
	  support/regression/Makefile.in:
	  regression test framework does not depend on function pointers and
	  variable arguments

2006-08-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stddef.h: c temporary hack to fix bug 1518273

2006-08-09 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/cc2510fx.h: added
	* src/z80/z80.dsp, src/gbz80/gbz80.dsp: added support/Util/strcmpi.ch
	  to projects.

2006-08-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/z80/assym.c (mlookup): ignore case when looking up mnemonics
	* as/z80/Makefile.in: added strcmpi.c
	* as/z80/z80adr.c: added upper case registers and lower case conditionals
	* support/Util/strcmpi.ch: added with intention to remove from mcs51/hc08

2006-08-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/gbz80/asm_strings.s,
	* device/lib/gbz80/crt0_rle.s,
	* device/lib/gbz80/div.s,
	* device/lib/gbz80/mul.s,
	* device/lib/gbz80/shift.s,
	* device/lib/z80/asm_strings.s,
	* device/lib/z80/crt0_rle.s,
	* device/lib/z80/div.s,
	* device/lib/z80/mul.s,
	* device/lib/z80/shift.s: changed to all lower case menmonics except the
	  flags which are all upper case

2006-08-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/z80/asm.h: made CASE_SENSITIVE 1
	* link/z80/aslink.h: made CASE_SENSITIVE 1
	* src/z80/gen.c (throughout): made all conditionals upper case
	* support/regression/tests/bug1503067.c: new

2006-08-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/gen.c (aopPut): fixed bug !*ixy should be !*iyx,
	  (shiftIntoPair): added case 2 for PAIR_IY,
	  (setupToPreserveCarry): replaced parameters with iCode and check if
	   PAIR_DE is in use to fix bug 1399290,
	  (genPlus, genMinus): updated call to setupToPreserveCarry
	* support/regression/tests/bug1399290.c: new

2006-08-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/Makefile.in (Z80SOURCES): enabled float support
	* sim/ucsim/z80.src/inst.cc (inst_rst): generate breakpoint on RST8,ACC==0
	* src/ds390/gen.c (shiftRLong),
	* src/hc08/gen.c (shiftLLong, shiftRLong): fixed bug 1533966
	* src/mcs51/gen.c (sameReg): changed to sameByte,
	  (xch_a_aopGet): new,
	  (shiftL2Left2Result, shiftR2Left2Result, shiftRLeftOrResult, shiftLLong,
	   shiftRLong): fixed bug 1533966
	* src/z80/gen.c (shiftR2Left2Result, shiftL2Left2Result, genlshTwo,
	  genLeftShiftLiteral, genrshTwo, genRightShiftLiteral): fixed bug 1533966
	* support/regression/Makefile.in: disabled z80, enabled ucz80
	* support/regression/tests/float_trans.c: enabled test for z80 and host
	* support/regression/tests/shifts2.c: new, for testing bug 1533966

2006-08-01 Borut Razem <borut.razem AT siol.net>

	* src/mcs51/gen.c, src/dc390/gen.c: fixed warning:
	  comparison is always false due to limited range of data type
	  on PPC64 machine (openpower-linux1) where "char = unsigned char"

2006-08-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* sim/ucsim/hc08.src/hc08mac.h: removed faulty and unused add_u16_disp
	* sim/ucsim/hc08.src/hc08.cc: removed faulty and unused int8
	* sim/ucsim/z80.src/z80mac.h (add_u16_disp): use explicit signed char cast
	* sim/ucsim/z80.src/z80.cc: removed faulty and unused int8

2006-07-31 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/configure, sim/ucsim/cmd.src/newcmdcl.h,
	  sim/ucsim/cmd.src/newcmd.cc, sim/ucsim/cmd.src/cmdutil.cc,
	  sim/ucsim/z80.src/Makefile.in, sim/ucsim/configure.in,
	  sim/ucsim/hc08.src/Makefile.in, sim/ucsim/hc08.src/hc08.cc,
	  sim/ucsim/ddconfig_in.h, sim/ucsim/s51.src/Makefile.in,
	  sim/ucsim/s51.src/uc51cl.h, sim/ucsim/s51.src/serialcl.h,
	  sim/ucsim/s51.src/uc51.cc, sim/ucsim/s51.src/serial.cc,
	  sim/ucsim/app.cc, sim/ucsim/avr.src/Makefile.in:
	  enable ucsim mingw compilation. Serial port is disabled,
	  since it uses termios.h API, which is not available on native
	  WIN32

2006-07-31 Borut Razem <borut.razem AT siol.net>

	* Small Device C Compiler 2.6.0 released
	* support/scripts/sdcc.nsi: added FULL_DOC option
	* .version, doc/sdccman.lyx: changed sdcc version to 2.6.1

2006-07-28 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: remove $INSTDIR/include/asm/pic16/*.h
	* doc/INSTALL.txt: updated

2006-07-27 Borut Razem <borut.razem AT siol.net>

	* device/lib/pic/Makefile.in, device/lib/pic/Makefile.subdir,
	  device/lib/pic/libdev/Makefile.in: fixed bug
	  [ 1438354 ] pic libsdcc: distclean doesn't work
	* device/lib/pic16/Makefile.in, device/lib/pic16/Makefile.subdir,
	  device/lib/pic16/libio/Makefile.in: fixed bug
	  [ 1438344 ] pic16 lib: clean doesn't work properly
	* doc/knownbugs.html removed [ 1438354 ] and [ 1438344 ] from the list

2006-07-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/pic/libsdcc/fsdiv.c,
	* device/lib/pic/libsdcc/fsmul.c,
	* device/lib/pic16/libsdcc/float/fsdiv.c,
	* device/lib/pic16/libsdcc/float/fsmul.c,
	* device/lib/_fsdiv.c,
	* device/lib/_fsmul.c: bugfix, handle too large and too small numbers
	* support/regression/tests/bug1520966.c: added
	* doc/knownbugs.html: removed [ 1520966 ] from the list

2006-07-25 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure, sdccconf_in.h: fixed bug
	  [ 1519095 ] regression test onebyte.c fails on ppc64 host
	* doc/knownbugs.html: removed [ 1519095 ] from the list

2006-07-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/knownbugs.html: added, contains list of known bugs at release
	* device/include/mcs51/compiler.h: fixed SFR32 for SDCC

2006-07-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/compiler.h: added SFRX for xdata based special
	  function registers and corrected defaults with additional warning
	* device/lib/malloc.c: cosmetic changes
	* device/lib/realloc.c: bugfix for bug #1496907, Thanks Efim Monyak
	* src/ds390/ralloc.c (getRegBitNoSpil): reenabled,
	  (fillGaps): and used it

2006-07-20 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (addMemRange,assignRegister): suppress verbose
	  output unless SDCCPICDEBUG is set
	* device/lib/pic16/Makefile.rules (%.lib target): suppress verbose
	  output if SILENT is set

2006-07-11 Borut Razem <borut.razem AT siol.net>

	* doc/README.txt: updated

2006-07-10 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added device/include/asm/pic/features.h and
	  device/lib/src/pic/libm/*.c and device/lib/src/pic16/libsdcc/stack/*.S
	  in WIN32 installation
	* .version, sdcc.spec, doc/sdccman.lyx: changed sdcc version to 2.6.0 -
	  release candidate 1

2006-07-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/XC866.h: added sbit definitions for Px_x, P1_x, P2_x
	* src/pic16/glue.c (initPointer): fixed bug 1496419 for pic16

2006-07-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/hc08/gen.c (genAddrOf): fixed bug when offset on stack is >127

2006-07-06 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bitfields.c:
	  fixed bug [ 1518322 ] regression test bitfields fails on ppc hosts
	* support/regression/tests/constantRange.c:
	  fixed bug [ 1518317 ] regression test constantRange fails on alpha host

2006-07-04 Borut Razem <borut.razem AT siol.net>

	* src/configure.in, src/configure, src/Makefile.in, as/z80/Makefile.in,
	  src/port.mk,
	  src/avr/Makefile.in, src/ds390/Makefile.in, src/ds400/Makefile.in,
	  src/hc08/Makefile.in, src/mcs51/Makefile.in, src/pic16/Makefile.in,
	  src/pic/Makefile.in, src/xa51/Makefile.in, src/z80/Makefile.in:
	  reverted changes from 2006-07-03
	* Makefile.common.in: added @CPPFLAGS@ to CPPFLAGS
	* support/regression/Makefile.in, support/regression/ports/host/spec.mk:
	  added CPPFLAGS, used by the host port

2006-07-03 Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/valdiag/tests/switch.c,
	* support/regression/valdiag/tests/constantRange.c: adapted to gcc 4
	* support/regression/tests/libmullong.c: fixed for host
	* support/regression/ports/host/spec.mk: disable all warnings for host,
	SDCC runs with --less-pedantic too

2006-07-03 Borut Razem <borut.razem AT siol.net>

	* src/configure.in, src/configure, src/Makefile.in, as/z80/Makefile.in:
	  defined CPPFLAGS
	* src/port.mk: defined CPPFLAGS, renamed to src/port.mk.in
	* src/avr/Makefile.in, src/ds390/Makefile.in, src/ds400/Makefile.in,
	  src/hc08/Makefile.in, src/mcs51/Makefile.in, src/pic16/Makefile.in,
	  src/pic/Makefile.in, src/xa51/Makefile.in, src/z80/Makefile.in:
	  include ../port.mk
	* sim/ucsim/main_in.mk, sim/ucsim/avr.src/Makefile.in,
	  sim/ucsim/gui.src/Makefile.in, sim/ucsim/hc08.src/Makefile.in,
	  sim/ucsim/s52.src/Makefile.in, sim/ucsim/sim.src/Makefile.in,
	  sim/ucsim/xa.src/Makefile.in: ignore header files for dependencies

2006-07-02 Raphael Neider <rneider AT web.de>

	* src/pic16/devices.inc,
	* device/include/pic16/pic18fregs.h,
	* device/include/pic16/pic18f4550.h,
	* device/lib/pic16/pics.all,
	* device/lib/pic16/libdev/pic18f4550.c: added support for 18f4550

2006-07-01 Bernhard Held <bernhard AT bernhardheld.de>

	* as/hc08/lkaomf51.c (OutputName),
	* as/mcs51/lkaomf51.c (OutputName),
	* as/z80/asmain.c (asmbl),
	* src/ds390/main.c (asmLineNodeFromLineNode),
	* src/hc08/ralloc.c (hc08_assignRegisters),
	* src/mcs51/main.c (asmLineNodeFromLineNode),
	* src/xa51/ralloc.c (checkRegMask),
	* src/xa51/gen.c (emitcode),
	* src/z80/gen.c (_emit2),
	* src/SDCCast.c (searchLitOp),
	* src/SDCCglobl.h,
	* support/packihx/packihx.c,
	* support/Util/MySystem.c (split_command): fix gcc 4 warnings
	* src/ds390/gen.c (aopPutUsesAcc),
	* src/ds390/ralloc.c (getRegBitNoSpil): unused, therefore disabled
	* support/regression/tests/libmullong.c (mullong_wrapper),
	* src/SDCCsymt.c (powof2),
	* src/SDCCast.c,
	* src/SDCCicode.c: renamed TYPE_WORD by TYPE_TARGET_INT and so on
	* src/SDCCsymt.h: added TYPE_TARGET_*
	* src/SDCCutil.c (doubleFromFixed16x16, fixed16x16FromDouble),
	* src/SDCCutil.h (doubleFromFixed16x16, fixed16x16FromDouble): moved to
	SDCCast because 1) header problems 2) this is the right place
	* src/SDCCast.c (doubleFromFixed16x16, fixed16x16FromDouble): added
	* src/SDCCval.h (doubleFromFixed16x16, fixed16x16FromDouble): added
	prototype

2006-06-29 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.h: removed buggy semicolon in unused macro
	* src/SDCClrange.c (findPrevUseSym, rlivePoint): fixed bug #1486853,
	search for previous definiton of auto symbols too,
	(findPrevUse): fixed logic of emitWarnings

2006-06-26 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genFunction, genEndFunction): also preserve
	  PCLATH and PCLATU on interrupts, potentially fixes #1505141

2006-06-25 Raphael Neider <rneider AT web.de>

	* device/lib/pic/libm: NEW, added math library functions
	* device/lib/pic/libsdcc: NEW; added float support functions
	* device/lib/pic/{Makefile.in,configure.in,configure}: added libm/
	* device/include/pic/{limits.h,errno.h,sdcc-lib.h,float.h,math.h}:
	  NEW, added math related headers
	* device/include/asm/pic/features.h: NEW
	* src/pic/gen.c (emitpcode_real): emit warning on NULL pCodeOp,
	  (popGet): allow larger offsets for AOP_PCODE,
	  (genDataPointerSet): handle literals explicitly, more debug output,
	  (genAssign): fixed for float using aopLiteral ;-)
	* src/pic/glue.c (pic14createInterruptVect): inserted pagesel before
	  GOTO initialisation routine
	* src/pic/pcoderegs.c (pCodeRegMapLiveRangesInFlow): set wasUsed
	  flag on registers, fixes #1469043 (local variables do not work)
	* src/pic/main.c (_pic14_do_link),
	* src/pic16/main.c (_pic16_linkEdit): use fullDstFileName if
	  available

2006-06-25 Borut Razem <borut.razem AT siol.net>

	* device/lib/pic16/libc/stdio/sprintf.c: return the number of
	  characters printed (not including the trailing '\0' used to end
	  output to strings). Problem detected in regression test bug-927659.c.
	  NOTE: printf() family functions should return int instead
	  unsigned int!
	* device/lib/pic16/libc/stdio/vfprintf.c: "%%" prints "%", unknown
	  specifier are printed as themselves
	* sdcc/support/regression/tests/bug1057979.c: pic16 printf doesn't
	  support flags, width and precision specifiers

2006-06-24 Borut Razem <borut.razem AT siol.net>

	* sdcc/support/regression/tests/bitvars.c: added gbz80, pic16 and pic16
	  to the list of sdcc tagrets not supporting bit type
	* sdcc/support/regression/tests/bug-905992.c.c: excluded regression
	  testfor pic16 due to bug:
	  [ 1511794 ] pic16: regression test bug-895992.c fails

2006-06-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genCmp): optimization for RFE 1162453
	* src/SDCCglue.c (initPointer), fixed bug 1496419
	* support/regression/tests/bug1496419.c: new, added

2006-06-22 Borut Razem <borut.razem AT siol.net>

	* support/regression/ports/pic16/support.c: use gpsim usart module from
	  libgpsim_modules library

2006-06-21 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* device/include/mcs51/at89c51ed2.h: Fixed bug 1510144 changed
	IP0H to IPH0.

2006-06-19 Raphael Neider <rneider AT web.de>

	* src/pic/glue.h,src/pic16/glue.h: added prototypes
	* src/pic/glue.c,src/pic16/glue.c (pic1x_stringInSet,
	  pic1x_emitSymbolIfNew): NEW, check for a string in a set,
	  (pic14printExterns,pic14printPublics,pic16printPublics,
	  pic16_printExterns): use new functions to emit symbols
	  (picglue,pic16glue): emit publics before emitting externs
	* src/pic/gen.c,src/pic16/gen.c (genFunction): remember the names of
	  locally defined functions to avoid bug #1443651
	* support/regression/tests/bug-716242.c: removed pic16 workaround
	* support/regression/ports/pic16/spec.mk: ignore errors during build

2006-06-19 Raphael Neider <rneider AT web.de>

	* src/pic/glue.h: added pic14aopLiteral prototype
	* src/pic/glue.c (pic14aopLiteral): return unsigned int
	* src/pic/gen.c: removed stdint.h dependency
	  (aopGet): use Safe_strdup()
	  (bitpatternFromVal): removed, replaced use with pic14aopLiteral
	  (genDataPointerSet): use pic14aopLiteral()
	* src/pic16/glue.h, src/pic16/glue.c, src/pic16/gen.c: similar changes
	  for pic16; thanks to Bernhard and Maarten

2006-06-18 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/structflexarray.c: flexible array members
	  not supported by gcc < 3
	* sim/ucsim/configure, sim/ucsim/configure.in: do not compile serio
	  GUI tool by default
	* src/pic/gen.c: don't include [p]strdin.h on solaris
	* support/Util/pstdint.h: addad svn attributes
	* support/regression/tests/constantRange.c,
	  support/regression/tests/rotate.c: include inttypes.h instead
	  stdint.h on solaris, addad svn attributes

2006-06-18 Raphael Neider <rneider AT web.de>

	* src/SDCCsymt.c (initCSupport): change return type of divschar to
	  int for PIC16
	* src/pic16/genarith.c (genAddLit): sign-extend via standard routine
	  (pic16_genMinusBits): simplified sign-extension
	  (pic16_genUMult8XLit_8,pic16_genUMult8X8_8): renamed to
	    pic16_genMult8XLit_n resp. pic16_genMult8X8_n, fixed and
	    adjusted to correctly handle mixed-signed operands, disabled
	    now unused multiplciation routines
	* src/pic16/gen.c (pic16_pushpCodeOp): fixed to handle literals
	  (assignResultValue): added argument denoting the size of the result
	    as returned by the function (fixes upcasts in assigning from
	    function calls: char foo(); int i = foo();)
	  (genCall,genPcall,genGenPointerGet,genReceive): pass size of
	    function result to assignResultValue
	  (genMult): disabled inlined multiplication code
	  (genDiv): augmented to also handle the modulus operator, fixed to
	    handle mixed-signed operands correctly
	  (genMod): simply call genDiv, disabled unused code
	  (genAssign): fixed missing (sign-)extension on result
	* src/pic16/main.c (_hasNativeMulFor): accept literals [-128..256) as
	    valid char operands, allow signed operands for native code, added
	    division and modulo operator handling
	* device/lib/pic16/libsdcc/char/divschar.c: divschar returns an int

	As a consequence, onebyte.c (if split into two files) and muldiv.c
	pass regression tests.

2006-06-17 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/Makefile.in: two runs of makeindex seem needed to get
	correct page references in the index of sdccman.pdf
	* doc/sdccman.lyx: mentioned cmon51, added links, small changes

2006-06-17 Borut Razem <borut.razem AT siol.net>

	* sdcc/device/lib/Makefile.in: corrected PORTINCDIR path

2006-06-17 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: updated, added (porting source code, debugging),
	mentioned ec2drv and paulmon

2006-06-16 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/lkarea.c (lnkarea2): clear new xdatamap, bugfix for two
	  consecutive abs areas
	  (find_empty_space, allocate_space): added map to handle codemap or
	   xdatamap,
	  (lnksect2): renamed rloc to locIndex, fixed bug 960060 by handling
	   absolute idata and xdata
	* as/mcs51/lkmem.c (summary2): updated legend

2006-06-16 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (shiftR2Left2Result): fixed bug #1507127

2006-06-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* debugger/mcs51/cmd.c (cmdListFunctions): fixed bugs 1181163 and
	  1208515
	* src/SDCClrange.c (findPrevUse): fixed bug 1294475

2006-06-13 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/port.h (struct PORT): added field gp_tags, to hold the tag
	value of generic pointers,
	* src/avr/main.c,
	  src/ds390/main.c,
	  src/hc08/main.c,
	  src/izt/i186.c,
	  src/izt/tlcs900h.c,
	  src/mcs51/main.c,
	  src/pic/main.c,
	  src/pic16/main.c,
	  src/xa51/main.c,
	  src/z80/main.c: PORT structure, added elements for gp_tags field,
	* src/SDCCsymt.h: replaced hardwired values of GPTYPE_* macros with
	fields in the PORT structure of each port,
	* src/SDCCast.c (decorateType): allow processing of generic pointers
	for PIC16 port (FPTRSIZE equals GPTRSIZE), also set GPTYPE_NEAR for
	S_FIXED symbols

2006-06-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* link/z80/lkgb.c,
	* link/z80/lkgg.c,
	* src/pic16/gen.c,
	* src/pic16/main.c,
	* src/pic16/pcode.c,
	* src/pic/main.c,
	* src/pic/pcoderegs.c,
	* src/SDCCicode.c,
	* src/SDCCmain.c,
	* src/SDCCsymt.c: replaced all exit(-1) by exit(EXIT_FAILURE) to fix
	  bug 1504689 on minGW

2006-06-12 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/printf_tiny.c: fixed bug #1465675 (%x format specifier)

2006-06-12 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (backPatchLabels): fixed bug #1504636

2006-06-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c (OUTPUT_CHAR, _output_char): added and used
	  for optimization

2006-06-11 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/gen.c (genCast): fixed bug with assignment of a pointer
	to a char variable. Fixed bug #1504211
	* device/include/pic16/adc.h,
	device/include/lib/pic16/libio/adc/adcopen.c: applied patch #1364387
	and fixed bug #1364390

2006-06-10 Borut Razem <borut.razem AT siol.net>

	* CVSROOT: removed the CVS left-over

2006-06-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/hc08/asmain.c (asexit),
	* as/hc08/lkmain.c (lkexit),
	* as/mcs51/asmain.c (asexit),
	* as/mcs51/lkmain.c (lkexit),
	* src/SDCCglue.c (DEFSETFUNC),
	* src/SDCCmain.c (linkEdit, assemble),
	* support/librarian/sdcclib.c (AddRel),
	  replaced unlink() by standard C remove()
	* src/SDCC.y: replaced removePostIncDecOps() by createRMW()
	* src/SDCCast.c (replaceAstWithTemporary, createRMW,
	  gatherImplicitVariables): new, added to fix bug 608752,
	  (createFunction): added gatherImplicitVariables()
	* src/SDCCast.h: added createRMW prototype
	* src/SDCCsymt.h (struct symbol): added infertype
	* support/regression/tests/bug608752.c: new, added

2006-06-10 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_aopOp): use WREG as destination even for
	  multibyte dummy reads (fixes #1503234)

2006-06-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/compiler.h: new, added header file to enable
	  creating common sfr definition header files for different compilers

2006-06-05 Raphael Neider <rneider AT web.de>

	* src/pic16/{pcode.h,genarith.c}:
	  introduced pCodeOp combining any two pCodeOps (previously only
	  two register operands could be combined), removed pcop2 from
	  pCodepReg, replaced pCodeOpReg2 with pCodeOp2, fixes #1492366
	* src/pic16/pcodepeep.c (pic16_pCodeOpCopy): added case for PO_TWO_OPS
	* src/pic16/gen.c (pic16_popGet2,pic16_popGet2p,pic16_popCombine2):
	  rewritten to use new PO_TWO_OPS
	* src/pic16/main.c (_hasNativeMulFor): cover more cases natively,
	* src/pic16/pcode.c (pic16_newpCodeOpImmd): initialize rIdx field,
	  (pic16_newpCodeOp): catch invalid attempts on PO_TWO_OPS,
	  (pic16_newpCodeOp2): NEW, create combined pCodeOp,
	  (pic16_get_op): embraced return arg to allow #define return(x),
	    added new case for combined opcodes
	  (pic16_get_op2): reduced to use pic16_get_op() on second pCodeOp,
	  (pic16_pCode2str,pic16_getRegFrompCodeOp,
	   pic16_getRegFromInstruction2): fixed/added handling of new pCodeOp

2006-06-04 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (checkConstantRange): added
	* src/SDCCval.h: added checkConstantRange
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: replaced unused W_IF_NEVER_TRUE and
	W_IF_ALWAYS_TRUE by W_COMP_RANGE and W_LIT_OVERFLOW
	* src/SDCC.y: moved early 'condition transformations' to SDCCast.c
	* src/SDCCast.c (decorateType): added checkConstantRange,
	added 'condition transformations' from SDCC.y so that now W_COMP_RANGE
	can be emitted with the correct always true/false warning,
	added optimization for double '!';
	result of decorateType() must be assigned back to the tree, because
	decorateType() can change the tree
	* src/SDCCicode.c (geniCodeLogic),
	(geniCodeAssign): replaced new checkConstantRange, added warnings,
	(checkConstantRange): removed, it was only a fragment which never
	emitted a warning
	* src/SDCCsymt.c (computeType): fixed promotion for
	"-1 < (unsigned bit) b"
	* src/pic/ralloc.c (packRegsForAssign),
	* src/pic16/ralloc.c (packRegsForAssign),
	* src/hc08/ralloc.c (packRegsForAssign),
	* src/z80/ralloc.c (packRegsForAssign): ported fix for bug #930931
	from mcs51
	* src/mcs51/ralloc.c (packRegsForAssign): removed outcommented source
	* support/regression/tests/constantRange.c: added
	* support/valdiag/tests/constantRange.c: added
	* support/valdiag/valdiag.py: added -DPORT_HOST=1

2006-06-02 Borut Razem <borut.razem AT siol.net>

	* support/regression/ports/pic16/support.c: increase stack size
	  to 255 bytes
	* support/regression/Makefile.in: sort tests by name so that the
	  resutlts can be compared on different machines / platforms

2006-06-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c (output_digit): optimized further, Tnx Frieder
	* src/ds390/gen.c (emitLabel): new, added,
	  (genDjnz): fixed stack overflow bug,
	  (throughout): cosmetic changes to sync with mcs51/gen.c,
	  replaced emitcode("", "%05d$:", lbl->key + 100) with emitLabel(lbl)
	* src/mcs51/gen.c (genEndFunction): small optimization,
	  (throughout): cosmetic changes to sync with ds390/gen.c

2006-06-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c (output_digit, calculate_digit): optimized,
	  (_print_format): fixed printing pointers
	* src/mcs51/gen.c (emitLabel, movb): new, added,
	  (genAssign): small optimization,
	  (genDjnz): fixed stack overflow bug,
	  (throughout): replaced sprintf with SNPRINTF,
	  replaced mcs51_regWithIdx with REG_WITH_INDEX,
	  replaced emitcode("mov", "b,...") with MOVB(...),
	  replaced emitcode("", "%05d$:", lbl->key + 100) with emitLabel(lbl),
	  replaced D(emitcode("; genXXX", "")) with D(emitcode(";", "genXXX"))
	* src/mcs51/peeph.def: added rules 140 and 264
	* src/SDCCmem.c (allocLocal): store register declared locals in DSEG/OSEG
	  so they may get optimized into registers

2006-05-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (optionsTable, parseCmdLine): handle --use-stdout
	  immediately when encountered,
	  (printUsage): always use stderr even on windows

2006-05-30 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (isLoopCountable): fixed bug #1478316
	(processParms): fixed bug #1247551
	* src/SDCCmain.c (printVersionInfo, printOptions, printUsage,
	parseCmdLine, main): print '--version' to stdout,
	print 'help' to stdout if --help is given,
	print 'help' to stderr and exit with EXIT_FAILURE if no or bad
	arguments are given; fixed --help

2006-05-27 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCcse.c (findPointerSet): fixed bug #1493710
	* support/regression/tests/bug-1493710.c: added

2006-05-27 Borut Razem <borut.razem AT siol.net>

	* support/regression/fwk/lib/testfwk.c: define array in _printn() as
	  static instead auto
	* support/regression/ports/pic16/support.c: increase stack size
	  from default 64 bytes to 128 bytes
	* support/regression/tests/staticinit.c,
	  support/regression/tests/float.c: regression tests fully enabled
	  for pic16 port by putting the initialized data arrays into the code
	  section
	* support/regression/ports/pic16/spec.mk: don't link default libraries.
	  This was changed by mistake in the previous version.

2006-05-28 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/gen.c (genFunction, genEndFunction): some
	beautifications, fixed bug with falsely restoring FSR2 in large
	stack model, thanks to Beau E. Cox for reporting the bug

2006-05-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* debugger/mcs51/break.c,
	* debugger/mcs51/cmd.c (throughout): removed unused variables and labels,
	  use %p to print pointers, made address variables unsigned
	* debugger/mcs51/cmd.c (infoSymbols): added missing parameter to printf
	* debugger/mcs51/symtab.c (parseSymbol): must return something
	* src/mcs51/gen.c (aopForSym): small optimization,
	   moved declarations mcs51_ptrRegReq and mcs51_nRegs to ralloc.h,
	  (freeAsmop): added missing break,
	  (aopPut): removed parameter bvolatile, determine it inside the function,
	  (saveRegisters, unsaveRegisters): small optimization,
	  (genIpush): removed pointless check,
	  (throughout): replaced Safe_calloc, strcpy with Safe_strdup,
	  replaced sprintf with SNPRINTF,
	  replaced strcpy with strncpyz,
	  updated aopPut calls,
	  replaced D(emitcode("; genXXX", "")) with D(emitcode(";", "genXXX"))
	* src/mcs51/ralloc.h:  added declarations mcs51_ptrRegReq and mcs51_nRegs

2006-05-24 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bug-221100.c: fixed xdata problem caused by
	  modification of test for the pic16 port, put the array to the code
	  memory for pic16port; thanks to Maarten Brock and Frieder Ferlemann

2006-05-23 Jesus Calvino-Fraga <jesusc at ece.ubc.ca>

	* src/pic/gen.c: MSC 6 does not have <stdint.h>.  Use pstdint.h instead.
	* support/Util/pstdint.h: added

2006-05-22 Borut Razem <borut.razem AT siol.net>

	* src/regression/Makefile: removed bool2.c test, added -q linker option
	* src/regression/add2.c, src/regression/add3.c, src/regression/bool1.c,
	  src/regression/bool3.c, src/regression/nestfor.c, src/regression/ptrfunc.c,
	  src/regression/compare.c, src/regression/or1.c, src/regression/compare2.c,
	  src/regression/while.c, src/regression/compare3.c, src/regression/compare4.c,
	  src/regression/compare5.c, src/regression/sub2.c, src/regression/rotate1.c,
	  src/regression/rotate2.c, src/regression/rotate3.c, src/regression/rotate4.c,
	  src/regression/switch1.c, src/regression/rotate5.c, src/regression/for.c,
	  src/regression/add.c, src/regression/sub.c, src/regression/call1.c:
	  define SUPPORT_BIT_TYPES 0, removed unused bit variables

2006-05-22 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_storeForReturn): fragile fix for
	  bug #1492360 (problematic due to generic pointers, see code)

2006-05-22 Borut Razem <borut.razem AT siol.net>

	* support/regression/ports/pic16/specs.mk: removed stack size linker
	  directive
	* support/regression/tests/array.c,
	  support/regression/tests/bitopcse.c,
	  support/regression/tests/bug-908454.c,
	  support/regression/tests/malloc.c: modified for pic16 regression test
	* support/regression/tests/bitfields.c:
	  pic16 - excluded bitfileds of size > 8
	* support/regression/tests/bp.c: pic16 - reduced data size
	* support/regression/tests/bug-221100.c: pic16 - reduced data size
	* support/regression/tests/bug-460010.c:
	  pic16 - used the absolute address the fits in memory
	* support/regression/tests/bug-716242.c:
	  bug [ 1443651 ] pic 16: redefining symbol that cannot be redefined.
	* support/regression/tests/float.c:
	  pic16 - excluded - data size too big
	* support/regression/tests/onebyte.c:
	  pic16 - bug [ 1444425 ] onebyte.c regression tes fails on pic16
	* support/regression/tests/shifts.c:
	  pic16 - function names probably have to differ in first X characters
	  (gpasm limitation?)
	* support/regression/tests/staticinit.c:
	  pic16 - excluded some tests due error: no target memory available for
	  section ".idata"

2006-05-22 Borut Razem <borut.razem AT siol.net>

	* support/Util/dbuf.c: fixed bug #1489008 fix dbuf_c_str(),
	  second try. Thanks Stas Sergeev once more.

2006-05-21 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/hc08/gen.c (transferAopAop): aop forced to stack was not restored,
	  (genLeftShift, genRightShift): fixed bug 1491627
	* src/hc08/peeph.def (rules 7, 8.x): added
	* support/regression/tests/shifts.c (ShiftLeftByParam,
	  ShiftRightByParam, testShiftByParam): added to test variable shifting

2006-05-20 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (bitpatternFromVal): fixed for 64-bit machines
	* src/pic16/ralloc.c (newReg): use correct name in hashtable,
	  (allocReg): add only new registers to dynAllocRegs,
	  (pic16_assignRegisters): do not reset dynrIdx, fixes bugs
	    #1489055, #1445850, and probably #1483693

2006-05-19 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/glue.c (pic16_emitConfigRegs, pic16_emitIDRegs): fixed
	bug in for-loop that didn't emit the last of CONFIG and ID registers

2006-05-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genCodePointerGet): inc dptr instead of loading acc
	  with offset
	* src/mcs51/peeph.def (186.x): updated and reenabled to fix bugs
	  1489016, 1434401 and 1490124
	* src/ds390/peeph.def (186.x, 227.x): updated and reenabled to fix bugs
	  1489016, 1434401 and 1490124

2006-05-17 Borut Razem <borut.razem AT siol.net>

	* support/Util/dbuf.c: fixed bug #1489008 fix dbuf_c_str(),
	  thanks Stas Sergeev

2006-05-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/P89c51RD2.h,
	* device/include/mcs51/P89LPC901.h,
	* device/include/mcs51/P89LPC922.h,
	* device/include/mcs51/P89LPC932.h: added, thanks Omar Espinosa

2006-05-14 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* device/lib/pic16/libsdcc/stack/{stack.S, Makefile.in}: add workaround
	to fix missing stack pragma in compiled binary object file,

2006-05-14 Bernhard Held <bernhard AT bernhardheld.de>

	* support/packihx/configure.in,
	* support/packihx/configure: removed warning, autoconf >= 2.5x can
	determine sizeof basic types even while cross compiling

2006-05-13 Bernhard Held <bernhard AT bernhardheld.de>

	* src/avr/gen.c (aopop),
	* src/ds390/gen.c (aopOp),
	* src/hc08/gen.c (aopOp),
	* src/mcs51/gen.c (aopop),
	* src/pic16/gen.c (pic16_aopOp),
	* src/pic/gen.c (aopOp),
	* src/z80/gen.c (aopop): fix for bug #1479882; use new, exclusive asmop
	if size of operand is smaller than spill location

2006-05-12 Borut Razem <borut.razem AT siol.net>

	* *.dsw, *.dsp: changed property svn:eol-style to CRLF since they
	  have to have CR/LF line endings even if they are checked out on *nix
	  or on WIN32 in cygwin binmode

2006-05-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: documented numeric ranges, WEBDOC #1442369
	* device/include/ds80c390.h: added sfr16 definitions
	* src/ds390/gen.c,
	* src/ds390/gen.h,
	* src/ds390/main.c,
	* src/ds390/ralloc.c,
	* src/ds390/ralloc.h: changes all over the place to sync with mcs51
	  fixing several bugs and adding sfr16/sfr32, reentrant bit params,
	  bit returning functions
	* support/regression/tests/sfr16.c: enabled test on ds390

2006-05-11 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (asmopToBool, genIfx): fix for bug #1429722
	* src/hc08/gen.c (storeRegToAop): fix for bug #1439894

2006-05-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* sim/ucsim/sim.src/memcl.h: added get_decoder() to cl_address_space
	* sim/ucsim/sim.src/mem.cc: implemented cl_address_space::get_decoder,
	  (cl_address_space constructor): removed expensive initialization,
	  (cl_address_space::get_cell): extended for late initialization,
	  (cl_address_space::*): use late initialization,
	  (cl_address_decoder::activate): removed expensive initialization,
	  This reduced regression test running time by 25%

2006-05-11 Bernhard Held <bernhard AT bernhardheld.de>

	* packihx/,
	* configure.in,
	* configure,
	* sdcc.dsw,
	* Makefile.bcc,
	* Makefile.in,
	* support/packihx/Makefile.in,
	* support/packihx/clean.mk,
	* support/packihx/Makefile.bcc,
	* support/packihx/PackIhx.dsp: moved packihx to support/packihx

2006-05-11 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCval.c (valNot): fix for regression test failure
	  of not.c on big endian hosts

2006-05-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/inlcude/mcs51/msc1210.h: new, added, thanks Philippe Latu

2006-05-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/lib/mcs51/Makefile.in: changed string comparison operator
	  to = for POSIX compliance; == is bash extension

2006-05-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/hc08/_mulint.c: applied patch 1485428, thanks
	  kosmonaut_pirx

2006-05-09 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/gen.c (pic16_freeAsmop): release any temp registers
	allocated by aopForSym thus fixing bug #1478657 about failed testfwk.c
	* src/pic16/main.c (_pic16_keywords): added 'sfr16' keyword,
	* src/pic16/ralloc.c (pic16_allocWithIdx): also a fix for bug exposed by
	bug report #1478657,

2006-05-05 Borut Razem <borut.razem AT siol.net>

	* doc/Makefile.in: remove of WARNINGS and labels.pl immediately after
	  making the html

2006-05-02 Borut Razem <borut.razem AT siol.net>

	* doc/Makefile.in: removed *.ind dependency since there is no rule to
	  create *.ind, which made make to fail if invoked with -j 2

2006-05-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c (emitRegularMap): partial fix for bug 1477149, thanks
	  Hubert Sack for patch 1479782

2006-05-01 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/glue.c (pic16_printIvalStruct): fixed bug #1445929

2006-05-01 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (sanitise_processor_name): only remove p(ic) prefix,
	  (create_pic): store only prefix-free device name,
	  (init_pic): check for device names with "16" prefix,
	  (list_valid_pics),
	* src/pic/device.h (struct PIC_device),
	* src/pic/main.c (_pic14_genAssemblerPreamble): adapted to single
	    stored device name,
	* device/include/pic/pic12f{635,675,629,683}.h,
	* device/lib/pic/libdev/pic12f{635,675,629,683}.c: NEW device libraries
	* device/lib/pic/libdev/Makefile.in: allow pic12* devices,
	* device/include/pic/pic16f505.h,
	* device/lib/pic/libdev/pic16f505.c: removed
	* device/include/pic/pic14devices.txt: added support for pic12f
	    devices, removed unsupported non 16-bit devices
	    [above changes provided by patch from Zik Saleeba]
	* src/pic/*, src/pic16/*, device/include/pic16/*,
	  device/lib/pic/**, device/lib/pic16/**: obfuscated email address

2006-05-01 Borut Razem <borut.razem AT siol.net>

	* configure.in, configure, doc/Makefile.in:
	  sync with nightly build makefile - latex, dvipdf and dvips
	  not needed any more

2006-04-30 Bernhard Held <bernhard AT bernhardheld.de>

	* support/scripts/sdcc.nsi: removed all Readmes and Makefiles
	in the library source

2006-04-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/ports/hc08/spec.mk: fixed bug 1478892

2006-04-28 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (pic16_newpCodeOpLit12),
	* src/pic16/gen.c (pic16_popGetLit12): NEW, create 12 bit literal,
	  (pic16_loadFSR0): handle 12 bit literals correctly, fixes #1440527
	* src/pic16/pcode.h: added prototype for pic16_newpCodeOpLit12()

2006-04-28 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/pic/libdev/Makefile.in,
	* device/lib/hc08/Makefile.in,
	* device/lib/gbz80/Makefile.in,
	* device/lib/z80/Makefile.in,
	* device/lib/ds390/Makefile.in,
	* device/lib/ds400/Makefile.in: added srcdir to include search path,
	thanks to Borut for the bug report
	* configure.in,
	* configure: always create doc/Makefile independent from --enable-doc
	* Makefile.in: always install from directory doc independent from
	--enable-doc
	* device/lib/pic/Makefile.in: added libdev again, it was erroneously
	removed
	* device/lib/pic/libdev/Makefile.in: fixed VPATH build
	* doc/Makefile.in: install *.txt if present
	* device/include/Makefile.in (install): added installation of pic/*.inc
	and pic/*.txt files again, they were erroneously removed

2006-04-28 Raphael Neider <rneider AT web.de>

	* src/pic/{gen.c,main.h,pcode.c},
	* src/pic16/{gen.c,pcode.c}: quietened compiler warnings
	    concerning signedness with casts

2006-04-28 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (genFunction): set global pic14_hasInterrupt on
	    definition of an interrupt handler,
	* src/pic/glue.c (pic14_emitInterruptHandler): moved output of
	    interrupt handler stuff from picglue() to separate routine,
	  (picglue): enabled definition of intr handlers in files w/o main()

2006-04-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/librarian/sdcclib.c: moved include <limits.h> up to enable
	  compilation with MSVC 2005 Express Edition (VC8)

2006-04-26 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/Makefile: fixed build of gbz80 lib

2006-04-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bug-460010.c,
	* support/regression/tests/bug-524691.c,
	* support/regression/tests/bug-716242.c: removed conditional defines
	  that are already in testfwk.h

2006-04-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/gen.c (AccAXRrl1, AccAXLrl1): changed to real rotate by 1,
	  (AccAXRsh1): added, shift right by 1,
	  (AccAXLsh, AccAXRsh, AccAXRshS): updated for AccAXRrl1, AccAXRsh1 and
	   AccAXLrl1
	* support/regression/tests/rotate.c: use <stdint.h> and enabled ds390

2006-04-25 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): partial fix for RFE 1475769,
	remove cast to same type
	* src/SDCCast.c (decorateType): fix for RFE 1475742,
	optimize 'ifx (op == 0)' resp. 'ifx (op != 0)'
	* as/z80/Makefile,
	* link/z80/Makefile: removed, they have moved to
	Makefile.in files
	* configure,
	* configure.in: replaced duplicate message about ucsim by missing sdcpp
	* install-sh: fix bug #1204398 by setting umask 0022
	* device/lib/Makefile: separate build of z80 and gbz80 lib

2006-04-24 Bernhard Held <bernhard AT bernhardheld.de>

	Enabled VPATH feature: changed nearly all Makefiles (149 files).
	See sdccman.lyx '2.4.10 VPATH feature' about how to use it.

	One basic decision: e.g. src/clean.mk includes further files. In order
	to make this work there are two solutions:
	- rename another dozen clean.mk to clean_in.mk, add srcdir to them and
	  run configure on them. This way they can use
	  'include $(srcdir)/port-clean.mk'
	- always include clean.mk by the Makefile at the same level. To avoid
	  that `make clean` tries to include and build Makefile.dep the
	  MAKECMDGOALS are examined (see e.g. src/Makefile.in). This has been
	  implemented, because now even `make uninstall` doesn't create
	  Makefile.in. clean.mk could be eliminated by pasting it in
	  Makefile.in.

	* debugger/mcs51/Makefile.in: build own objects from library sources
	(SLIB, SDCC) in current directory

	* configure, configure.in: renamed --disable-device-lib-build in
	--disable-device-lib; added --enable-doc, the required tools are
	searched by configure; added result message; the toolchain for the
	belonging ports are now only built, if the port is enabled.

	* support/regression/*: all output is written in directory gen, because
	the fwk and ports directories don't livet in the build tree using vpath

	* doc/sdccman.lyx: renamed --disable-device-lib-build to
	--disable-device-lib, added --enable-doc, added section VPATH

	* sim/ucsim/configure.in,
	* sim/ucsim/configure.in: hc08 couldn't be disabled, now hc08 and
	z80 are enabled by default

2006-04-24 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (pic14_assignConfigWordValue): remember assignments
	    to config word, "pic14_"-prefixed some extern functions
	  (pic14_emitConfigWord): emit __config directive(s) if assignment to
	    config word has been found
	* src/pic/device.h: added prototypes
	* src/pic/pcode.c: added "pic14_"-prefix where needed
	* src/pic/ralloc.c (IS_CONFIG_ADDRESS,pic14_assignRegisters): cosmetic
	    fixup
	* src/pic/glue.c (pic14_constructAbsMap): handle assignments to config
	    words,
	  (pic14emitRegularMap): ignore config words,
	  (pic14createInterruptVect): moved generating __config directives away
	  (picglue): have __config directives emitted

2006-04-24 Borut Razem <borut.razem AT siol.net>

	* doc/Makefile: sync with nightly build makefile

2006-04-24 Raphael Neider <rneider AT web.de>

	* src/pic/pcoderegs.c (OptimizeRegUsage): do not optimize
	    registers that have not been assigned proper liveranges,
	    fixes #1469504 and #1474602,
	  (pCodeRegOptimizeRegUsage): fixed typo in comment

2006-04-24 Borut Razem <borut.razem AT siol.net>

	* device/examples/main8051.c: deleted - it was removed from CVS
	  24.mar.2000 and after that modified 18.feb.2001, so it reappered
	  after the transition to Subversion
	* src/SDCCalloc.h: deleted - it was removed  from CVS
	  3.feb.2001 and after that modified 18.feb.2001, so it reappered
	  after the transition to Subversion
	* sim/ucsim/cpu.gif, sim/ucsim/interrupt.gif, sim/ucsim/new.gif,
	  sim/ucsim/serial1.gif, sim/ucsim/serial2.gif,
	  sim/ucsim/term_cpuopt.gif, sim/ucsim/timers.gif, sim/ucsim/wins.gif,
	  sim/ucsim/post.jpg, sim/ucsim/UCsim.jpg: corrected

2006-04-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/asx8051.dsp: added mcs51/strcmpi.h
	* as/hc08/as_hc08.dsp: added asm.h, m6808.h, strcmpi.h
	* as/hc08/aslink.h: updated lnksect prototype
	* as/hc08/asm.h,
	* as/mcs51/asm.h: added a_addr to struct area and s_org to struct sym
	* as/hc08/asmain.c,
	* as/mcs51/asmain.c (asmbl): init dot.s_org for S_ORG,
	  (newdot): handle A_ABS
	* as/hc08/asout.c,
	* as/mcs51/asout.c (outarea): output address
	* as/hc08/lkaomf51.c,
	* as/mcs51/lkaomf51.c: disabled unused array UsageType
	* as/hc08/m08pst.c,
	* as/mcs51/i51pst.c,
	* as/z80/z80pst.c: "ABS" is not A_OVR
	* as/hc08/lkarea.c (newarea): read a_addr,
	  (lnkarea): added codemap array, sort absolute areas to the front,
	   combine all GSINITx/GSFINAL,
	  (find_empty_space, allocate_space): new functions,
	  (lnksect): return next address, handle absolute sections
	* as/mcs51/lkarea.c (newarea): read a_addr,
	  lnksect2 prototype changed,
	  (lnkarea2): define codemap unsigned, combine all GSINITx/GSFINAL,
	  (find_empty_space, allocate_space): new, factored out of lnksect2,
	  (lnksect2): return next address, handle absolute sections
	* as/hc08/lkhead.c,
	* as/mcs51/lkhead.c (newhead): head is absolute but not overlay
	* as/hc08/lklibr.c (addfile, fndsym),
	* as/mcs51/lklibr.c (addfile, buildlibraryindex, fndsym): prevent
	  index out of range and detect both '\' and '/'
	* device/include/mcs51/c8051f200.h: added _XPAGE, removed bad comment
	* device/include/stdbool.h: removed SDCC_ds390 from check to pass
	  regression tests (ds390 cannot return bool yet)
	* doc/sdccman.lyx: changed version number, document changed --no-peep,
	  document critical interrupts on z80, document changed SDCC define
	* src/asm.c (_asxxxx_mapping): fixed .org directive,
	  (_a390_mapping): added .org directive
	* src/hc08/gen.c (transferAopAop): made bytemask log to fix warning,
	  (genMultOneByte): fixed warnings
	* src/hc08/hc08.dsp: lowered warning level to 2 to suppress pedantic
	  ones
	* src/pic16/device.c: removed newReg prototype, removed BYTE_IN_LONG
	* src/pic16/gen.c (pic16_popGetLabel): made parameter key signed,
	  (pic16_genLeftShiftLiteral, genRightShiftLiteral): fixed warnings
	* src/pic16/gen.h: changed prototype for pic16_popGetLabel
	* src/pic16/main.c: removed newReg prototype
	* src/pic16/pcode.c,
	* src/pic16/pcode.h (pic16_emitDB): changed parameter c to int to fix
	  warnings
	* src/pic16/pic16.dsp: lowered warning level to 2 to suppress pedantic
	  ones
	* src/pic16/ralloc.c
	* src/pic16/ralloc.h (newReg): changed type to int and size to unsigned
	  to fix warnings
	* src/pic/pcode.c (allocInternalRegister): changed parameter optype
	  from short to PIC_OPTYPE
	* src/pic/pic.dsp: lowered warning level to 2 to suppress pedantic ones
	* src/pic/ralloc.c (newReg, allocInternalRegister): changed parameter
	  optype from short to PIC_OPTYPE
	* src/port.h: made int_size unsigned to fix warnings
	* src/SDCC.y: fixed warning on MSVC
	* src/SDCCicode.c (getArraySizePtr): return unsigned int
	* src/SDCCopt.c (convertToFcall): fixed warnings
	* src/SDCCsymt.h: removed double prototype for genSymName
	* src/xa51/ralloc.c (allocReg): made size unsigned int, type int and
	  offset int to fix warnings

2006-04-22 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, */Makefile, */Makefile.in:
	  references to CVS replaced with Subversion

2006-04-21 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx, */Makefile, */Makefile.in:
	  references to CVS replaced with Subversion

2006-04-19 Borut Razem <borut.razem AT siol.net>

	* src/version.awk: adapted for svn
	* /asxxxx/asxhtml/*.gif: set property svn:mime-type to image/gif
	  sim/ucsim/doc/*.gif: set property svn:mime-type to image/gif
	  sim/ucsim/doc/*.jpg: set property svn:mime-type to image/jpeg
	  /binutils-avr/etc/*.vi, *.jin: removed all properties
	  support/scripts/sdcc.ico: set property svn:mime-type to image/x-icon

2006-04-19 Borut Razem <borut.razem AT siol.net>

	* CVS to Subversion migration completed

2006-04-18 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: removed unexisting ${DEV_ROOT}/lib/pic/*.o,
	  ${DEV_ROOT}/lib/src/pic/libdev/*.S, ${DEV_ROOT}/lib/src/pic/libdev/*.inc

2006-04-17 Borut Razem <borut.razem AT siol.net>

	* device/include/Makefile.in: added pic/*.inc to the installation

2006-04-15 Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/collate-results.py: fixed output in case of
	a valdiag error
	* support/regression/generate-cases.py: fixed splitting of pathnames
	with dots
	* as/hc08/lklibr.c (addfile),
	* as/mcs51/lklibr.c (addfile): fixed off-by-one bug

2006-04-11 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (getFreePtr, pic16_popRegFromString),
	* src/pic16/ralloc.c (pic16_allocregWithName): removed debug output
	* src/pic16/pcode.c (assignValnums): fixed #1460578

2006-04-11 Raphael Neider <rneider AT web.de>

	* device/lib/pic/libdev/*.c,
	* device/include/pic/*.h: replaced sfr and data with __sfr and __data,
	  fixes #1468739, enables compilation in --std-c99 mode
	* support/scripts/inc2h.pl: emit __sfr/__data instead of sfr/data

2006-04-11 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (find_device): removed debug output
	  (list_valid_pics): enabled verbose listing of supported devices
	* device/include/stdbool.h: define bool as char for pic14/16 as well

2006-04-07 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCC.y: allow using brackets here: "__interrupt (1) __using (1)"

2006-04-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* .version: bumped version to 2.5.6
	* src/pic/ralloc.c (newReg): MSVC doesn't support __builtin_return_address

2006-04-06 Raphael Neider <rneider AT web.de>

	* .version: bumped version to 2.5.6 (pic14 ABI changed)
	* src/SDCCmain.c: add -DSDCC_PROCESSOR=<id> for pic14 port
	* src/pic/glue.c (emitSymbolToFile,pic14_constructAbsMap,
	  pic14emitRegularMap,pic14emitMaps): moved output for absolute symbols to
	    pic14_constructAbsMap
	  (pic14printPublics): declare absolute global symbols as global
	  (pic14createInterruptVect),
	* src/pic/ralloc.c (IS_CONFIG_ADDRESS): support second config word,
	  (newReg): assume new registers unused, use correct name in
	    hashtable (reg->name instead of name), more debugLog output
	* src/pic/device.h (PIC_device): added fields for verbose output
	* src/pic/device.c: moved device definition to pic14devices.txt,
	    added routines for runtime parsing of pic14devices.txt,
	    added support for second config word
	* src/pic/main.c (_process_pragma): removed #pragma maxram,
	  (_pic14_keywords): no longer accept "bit" and "sbit" keywords
	  (_pic14_initPaths): add search paths with "pic" suffix (not "pic14")
	  (_pic14_parseOptions): moved pCodeInitRegisters here
	  (_pic14_do_link): add "pic$(ARCH).lib" to linker arguments
	* src/pic/pcode.c (AnalyzeBanking): bail out on unset processor,
	  (pCodeInitRegisters): rewrapped comments, perpared new approach to
	    handling the pseudo stack
	* device/lib/Makefile.in: ignore failures in objects-pic16,
	* device/lib/pic/{configure,configure.in,Makefile}: added libdev/
	* device/lib/pic/NEWS: document new dependency on picXXX.lib
	* device/lib/pic/Makefile.subdir,
	* device/lib/pic16/Makefile.subdir: improved clean rules
	* device/lib/pic/libdev/: NEW, pic14 device libraries
	* device/lib/pic/libsdcc/_gptr{get,put}{1,2,3,4}.S: use _X not X
	* device/lib/pic/libsdcc/macros.inc: use _X not X, declare default SFRs
	* device/include/Makefile.in: create subdir and install pic14 headers
	* device/include/pic/p16f_common.inc: removed unused declarations
	* device/include/pic/pic16*.h: added header files for 100+ 14 bit
	    PICs from inc2h.pl v1.6,
	    replaced BIT_AT macros with struct declarations
	* device/include/pic/pic14devices.txt: definition of supported devices,
	    all above improvements contributed by Zik Saleeba, thanks
	* support/scripts/inc2h.pl: removed BIT_AT, replaced with structs
	* support/scripts/sdcc.nsi: also install pic14 device libraries and
	    headers

2006-04-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/c8051f410.h: added interrupt numbers,
	* device/include/mcs51/c8051f200.h: old SiLabs mcu completes the list,
	  thanks to Charles Olds

2006-04-06 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* debugger/mcs51/cmd.c (infoRegisters): show return address on stack

2006-04-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCpeeph.c (labelIsReturnOnly): fixed bug 1464657
	* src/mcs51/gen.c (genJumpTab): fixed bug in medium model
	* support/regression/bug1464657.c: added, new test

2006-04-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (preProcess): implemented RFE 1449908, define SDCC as the
	  version number

2006-04-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCpeeph.c (initPeepHole): implemented RFE 1460196, when both
	  --no-peep and --peep-file <file> are used don't use default rules but
	  do use the <file>

2006-04-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genCall): fixed bug 1457608

2006-03-30 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: reverted to version 1.129 of december as my latest
	changes seem to cause (trigger?) problems with the build system.

2006-03-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCpeeph.c (operandsLiteral): new, added,
	  (callFuncByName): inserted operandsLiteral
	* src/mcs51/peeph.def: reenabled 132.e, added extra check to 132.x

2006-03-28 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: added paragraph "Use of SDCC in Education"
	* src/mcs51/peeph.def: disabled rule 132.e fixing bug #1453093

2006-03-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/gen.c (genFunction, genEndFunction): fixed bug 1160666,
	  implemented patch 1120823 Thanks to Willy De la Court (normal
	  interrupts need an interrupt number now if they are made critical),
	  and enabled nesting of critical functions though not for gbz80
	  (genCritical, genEndCritical): added functions
	  (genZ80Code): added cases for CRITICAL and ENDCRITICAL
	* src/z80/mappings.i: added "ei" to all mappings

2006-03-20 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* sim/ucsim/cmd.src/newcmdcl.h: applied patch fixing GCC 4.1 build
	submitted by the Debian SDCC maintainer Aurelien Jarno:
	"Credits goes to Martin Michlmayr, who rebuilt the whole Debian
	archive with gcc 4.1 on mips and wrote the patch"

2006-03-16 Raphael Neider <rneider AT web.de>

	* src/pic16/genarith.c (genAddLit): simplified and fixed case where
	  the left operand is shorter than the result (c* = lit-c* + int),
	  fixes bug #1450796
	* src/pic16/gen.c (genRightShift): check IS_SYMOP before accessing
	  OP_SYMBOL

2006-03-14 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/.version: increased version number to 2.5.5
	* src/SDCCmain.c (linkEdit): do not test for PIC16 target since, PIC16
	linking is done manually in pic16 port's _linkEdit,
	* src/SDCCsymt.c (compStructSize): for target PIC16 and shell variable
	PIC16_PACKED_BITFIELDS, compact bitfield structures as much as possible,
	* src/pic16/gen.c (aopForSym): when direct register name is WREG then
	allocate asmop as AOP_ACC,
	(aopForRemat): added parameter 'bool result' in function declaration,
	(pic16_aopGet): return AOP_ACC when accessing WREG,
	(pic16_popGetTempReg): minor modification,
	(pic16_popRegFromIdx): first try with 'pic16_regWithIdx' then with
	'pic16_allocWithIdx',
	(genPcall): removed ftype, usage of OP_SYM_TYPE asserted error when
	calling function in absolute addresses,
	(genAssign): take into account AOP_ACC asmop,
	* src/pic16/pcode.c (pic16_newpCodeOpReg): minor modifications,
	* src/pic16/pcoderegs.c: some debug functions and lines added,
	* src/pic16/ralloc.c (decodeRegType): added but commented out,
	* (pic16_typeRegWithIdx): search 'pic16_dynInternalRegs' for given
	register too,
	* (pic16_findFreeReg, pic16_findFreeRegNext): allocate new register via
	call to allocReg, not by manually allocating a new one,
	(pic16_assignRegisters): now before going through the register
	allocating functions mark all registers as free. This eliminates some
	side effects resulting from peephole parser done earlier in the backbone

2006-03-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCicode.c (geniCodeLogic),
	* src/SDCCast.c (decorateType): applied patch by Bernhard for rfe 1422617

2006-03-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (sameReg): new, checks if two aop regs are the same,
	  (genSend): bugfix, do not allocate and free twice,
	  (shiftRLong): handle partially overlapping aops
	* support/regression/tests/bitopcse.c: fixed warning redefined idata

2006-03-08 Borut Razem <borut.razem AT siol.net>

	* support/regression/fwk/include/testfwk.h: added defines for xdata, idata
	  for pic16

2006-03-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bug1409955.c: new, added
	* src/mcs51/gen.h: changed asmop.freed:1 to asmop.allocated for tracking
	* src/mcs51/gen.c (newAsmop): set asmop.allocated to 1,
	  (aopForSym, aopOp): increment asmop.allocated if reused,
	  (freeAsmop): decrement asmop.allocated and check for zero instead of
	  using asmop.freed,
	  (freeForBranchAsmop): use asmop.allocated instead of asmop.freed,
	  (genNot, genCpl, genUminus, genMinus, genMult, genDiv, genMod, genCmpGt,
	   genCmpLt, genAndOp, genOrOp, genAnd, genOr, genXor, genRRC, genRLC,
	   genGetHbit, genGetAbit, genGetByte, genGetWord, genSwap,
	   genLeftShiftLiteral, genLeftShift, genRightShiftLiteral,
	   genSignedRightShift, genRightShift, genDataPointerGet,
	   genPagedPointerGet, genFarPointerGet, genCodePointerGet,
	   genGenPointerGet, genDataPointerSet, genAssign, genCast): free asmop's
	    in reverse order from allocation,
	  (genPlus, genCmpEq): free asmop's in reverse order from allocation and
	    added swappedLR to keep track
	* support/regression/fwk/include/testfwk.h: added defines for xdata, idata,
	  pdata & code for GCC, z80, gbz80 & hc08
	* support/regression/tests/zeropad.c: moved defines to testfwk.h

2006-03-08 Raphael Neider <rneider AT web.de>

	* src/pic16/main.c (_hasNativeMulFor): fixed bug #1444425

2006-03-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/c8051f410.h: new SiLabs mcu
	* src/ds390/peeph.def: disabled 186.d and 227.a as fix for #1434401
	* support/regression/tests/array.c: added parenthesis, made arrays unsigned

2006-03-06 Borut Razem <borut.razem AT siol.net>

	* support/regression/ports/pic16/spec.mk: link with libm18f.lib,
	  made the linker quiet

2006-03-06 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/gen.c (genPcall): fixed bug #1443644
	* src/pic16/device.h (struct pic16_options_t): added 'int CATregs' flag
	which dumps before the function entry point a data byte which represents
	the number of the local variables used by the specified function, added
	'xinst' for initial support for Extended Instruction Support,
	* src/pic16/gen.c (aopForSym, pic16_aopGet): beautifications,
	(pic16_testStackOverflow): do not prefix GSTACK_TEST_NAME with
	port->fun_prefix anymore (may change later),
	(genFunction, genEndFunction): do not store/restore local registers for
	_main (this should take care the --main-return command line option in
	the future),
	(genOr): removed some legacy pic-port instructions,
	* src/pic16/genarith.c (genAddLit): re-enabled old code because
	performing operations with SFR's causes data to be written more than
	once to each SFR. Perhaps SFRs should be handled in special cases...
	* src/pic16/glue.c: macros BIG_ENDIAN and BYTE_IN_LONG are moved to
	pcode.h
	* src/pic16/main.c (_process_pragma): stack bound checking did not take
	into account for stack starting position,
	(struct OPTIONS pic16_optionsTable): added command line argument
	--extended or -y for Extended Instruction Support,
	* src/pic16/ralloc.c (pic16_decodeOp): added case for FUNCTION,
	(deassignLRs): *** perhaps the most important change, old 'for' code
	(commented out for reference), didn't account for some registers which
	were left marked 'not free' after a pointer operation. The change
	reduces register usage a lot in some cases

2006-03-04 Borut Razem <borut.razem AT siol.net>

	* support/regression/ports/hc08/spec.mk: remove *.asm in traget
	  _clean
	* support/regression/tests/bug-524697.c: decreased array size for
	  mcs51 to fit into the internal RAM
	* support/regression/Makefile.in: a little bit more verbose

2006-03-03 Borut Razem <borut.razem AT siol.net>

	* support/regression/fwk/lib/testfwk.c,
	  support/regression/fwk/include/testfwk.h: introduced function
	  _prints(), nonrecursive _printn(), call _initEmu() from main()
	* support/regression/ports/gbz80/support.asm,
	  support/regression/ports/ucz80/support.asm,
	  support/regression/ports/z80/support.asm,
	  support/regression/ports/ds390/support.c,
	  support/regression/ports/hc08/support.c,
	  support/regression/ports/host/support.c,
	  support/regression/ports/mcs51/support.c,
	  support/regression/ports/xa51/support.c: added empty _initEmu()
	  function
	* support/regression/ports/pic16/gpsim.cmd,
	  support/regression/ports/pic16/spec.mk,
	  support/regression/ports/pic16/support.c,
	  support/regression/Makefile.in: added pic16 regression test

2006-03-01 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genPcall,pic16_derefPtr,genGenPointerGet,
	  genConstPointerGet): use safe way of generating MOVFF to cover
	    literals as well as registers, fixes bug #1440527
	* src/pic16/glue.c (pic16_printIvalBitFields): prevent NULL pointer
	    dereference
	  (pic16_printIvalUnion,pic16_isUnion): NEW, handle initialized unions
	    more correctly, fixes bug #1232186
	  (pic16_printIval): use pic16_printIvalUnion() for initialized unions
	* src/pic16/main.c (_pic16_linkEdit): reorder linker arguments to make
	    gplink guess the correct processor in more cases, applied patch
	    from Till Riedel attached to and fixing bug #1436552

2006-02-20 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* support/regression/tests/array.c: added, contains check for #1434401
	* src/mcs51/peeph.def: disabled 186.d as temporary fix for #1434401

2006-02-16 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/at89s8253.h: new, thanks to Krzysztof Polomka
	* device/include/mcs51/at89S8252.h: fixed, thanks to Krzysztof Polomka
	* device/include/mcs51/c8051f326.h,
	* device/include/mcs51/c8051f340.h: new SiLabs mcu's
	* device/include/mcs51/c8051f000.h,
	* device/include/mcs51/c8051f018.h,
	* device/include/mcs51/c8051f020.h: used () with __at, renamed IDLE,STOP to
	  PCON_IDLE,PCON_STOP and added sfr16 definitions

2006-02-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genPlus, genMinus, genMult, genGetAbit, genGetByte,
	  genGetWord): fixed bug 1409955

2006-02-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/hc08/mc68hc908gp32.h,
	* device/include/hc08/mc68hc908jb8.h: removed AWUL, added PTA6 & PTA7

2006-02-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (constExprValue): return NULL if not a value
	* src/SDCCglue.c (printIvalArray): fixed bug 1225568
	* src/hc08/gen.c(genUnpackBits, genUnpackBitsImmed): fixed bug 1019480
	* support/regression/tests/bitfields.c: enabled signed bitfield for all

2006-02-13 Borut Razem <borut.razem AT siol.net>

	* src/regression/ptrarg.c: added, fails due to bug #1430967
	* src/regression/Makefile: ptrarg.c added, ...

2006-02-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/gen.c (genUnpackBits): fixed bug 1019480
	* support/regression/tests/bitfields.c: enabled signed bitfield for z80

2006-02-11 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: Added "sdcc: Calling linker..." if --verbose,
	  print "Processor: xxx" message to stdout only if --verbose

2006-02-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c (printIvalStruct): fixed bug 1426356 union initializer
	* support/regression/tests/bug1426356.c: added
	* support/regression/tests/bitfields.c: removed 2 tests

2006-02-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/at89c51snd1c.h: updated comments, see patch 1428901
	* device/include/mcs51/c8051f330.h,
	* device/include/mcs51/c8051f350.h: used () with __at, renamed IDLE,STOP to
	  PCON_IDLE,PCON_STOP and added sfr16 definitions
	* device/lib/_divsint.c,
	* device/lib/_divuint.c,
	* device/lib/_divulong.c,
	* device/lib/_divulong.c: renamed a,b to x,y to avoid confusion, fixed
	  register bank bug for small stackauto

2006-02-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/fwk/lib/timeout.c: include <stdlib.h> for exit()

2006-02-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/ports/mcs51-xstack-auto/spec.mk: forgot -I(...)/mcs51
	* all.dsp: corrected several bin paths
	* device/include/mcs51/c8051f120.h,
	* device/include/mcs51/c8051f300.h,
	* device/include/mcs51/c8051f310.h: used () with __at and renamed IDLE,STOP
	  to PCON_IDLE,PCON_STOP
	* device/include/mcs51/c8051f320.h: see above, also added sfr16 definitions
	* device/lib/printf_large.c (output_float): fixed bug 1388703
	* support/regression/tests/bug1057979.c: added test for bug 1388703

2006-02-08 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (pciTRIS): fixed typo,
	  (BuildFlow,LinkFlow_pCode): added (disabled) debug output,
	  (LinkFlow): fixed handling of flows that end in a call,
	  (ReuseReg): perform safety check earlier
	* src/pic/pcoderegs.c (pCodeRegMapLiveRangesInFlow): fixed
	    to work with flows at the beginning of a pBlock,
	    fixes #1426557 (Symbol not previously defined),
	  (pic14_ReMapLiveRanges): NEW, destroy and rebuild register
	    usage information
	  (RemoveUnusedRegisters): update register usage info
	* src/pic/ralloc.c (newReg): prevent duplicate registers from being
	    created, reuse existing ones instead
	* src/pic/gen.c (genPcall): fixed #1424719

2006-02-07 Bernhard Held <bernhard AT bernhardheld.de>

	* link/z80/lkmain.c,
	* link/z80/lklex.c,
	* link/z80/lkdata.c,
	* link/z80/aslink.h: fixed build on current cygwin:
	replaced getline() by lk_getline()

2006-02-01 Borut Razem <borut.razem AT siol.net>

	* src/regression/add.c, src/regression/add2.c, src/regression/add3.c,
	  src/regression/add4.c, src/regression/and1.c, src/regression/and2.c,
	  src/regression/arrays.c, src/regression/b.c, src/regression/bank1.c,
	  src/regression/bool1.c, src/regression/bool2.c,
	  src/regression/bool3.c, src/regression/call1.c,
	  src/regression/compare.c, src/regression/compare10.c,
	  src/regression/compare2.c, src/regression/compare3.c,
	  src/regression/compare4.c, src/regression/compare5.c,
	  src/regression/compare6.c, src/regression/compare7.c,
	  src/regression/compare8.c, src/regression/compare9.c,
	  src/regression/configword.c, src/regression/for.c,
	  src/regression/inline.c, src/regression/mult1.c,
	  src/regression/nestfor.c, src/regression/or1.c,
	  src/regression/pointer1.c, src/regression/ptrfunc.c,
	  src/regression/rotate1.c, src/regression/rotate2.c,
	  src/regression/rotate3.c, src/regression/rotate4.c,
	  src/regression/rotate5.c, src/regression/rotate6.c,
	  src/regression/rotate7.c, src/regression/string1.c,
	  src/regression/struct1.c, src/regression/sub.c,
	  src/regression/sub2.c, src/regression/switch1.c,
	  src/regression/while.c, src/regression/xor.c,
	  src/regression/create_stc, src/regression/simulate,
	  src/regression/rt.sh, src/regression/Makefile: reenabled Scott's PIC14
	  regression tests
	* src/regression/gpsim_assert.h: added

2006-01-28 Bernhard Held <bernhard AT bernhardheld.de>

	* src/ds390/gen.c (unsaveRegisters): fixed literal function pointer
	((void (code *) (void)) 0) ();
	* as/hc08/aslex.c,
	* as/hc08/aslink.h,
	* as/hc08/asm.h,
	* as/hc08/asmain.c,
	* as/hc08/lkdata.c,
	* as/hc08/lklex.c,
	* as/hc08/lkmain.c,
	* as/mcs51/aslex.c,
	* as/mcs51/aslink.h,
	* as/mcs51/asm.h,
	* as/mcs51/asmain.c,
	* as/mcs51/lkdata.c,
	* as/mcs51/lklex.c,
	* as/mcs51/lkmain.c,
	* as/z80/aslex.c,
	* as/z80/asm.h,
	* as/z80/asmain.c: fixed build on current cygwin:
	replaced getline() by as_getline()

2006-01-27 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCC.y: fixed bug #716242, exchanged pointer and function
	declarator in the symbol chain
	* src/SDCCsymt.h,
	* src/SDCCsymt.c (processFuncPtrArgs): added, removes "(void)"
	parameter list for function pointers
	* src/SDCCast.c (decorateType): added call of processFuncPtrArgs()
	* support/regression/tests/bug-716242.c: added

2006-01-20 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (geniCodeAdd, geniCodeArray): use char for array
	offset if possible
	* src/SDCCast.c (getLeftResultType): 255 fits in char, not 256

2006-01-18 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (backPatchLabels): fixed bug #1408066: made it
	inifinitely recurseable, added static
	* support/regression/tests/bug-1408066.c: added

2006-01-17 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.h,
	* src/SDCCicode.c (newiTempPreheaderLabel, newiTempLoopHeaderLabel):
	renamed, added possibility to create "postLoopLbl"-labels
	* src/SDCCBBlock.c (iCodeBreakDown): renamed newiTempPreheaderLabel to
	newiTempLoopHeaderLabel
	* src/SDCCloop.c (newInduction, newRegion, backEdges, insertIntoLoop,
	isNotInBlocks, addToExitsMarkDepth, createLoop, dominatedBy,
	addDefInExprs, assignmentsToSym, isOperandInvariant, pointerAssigned,
	hasNonPtrUse, loopInvariants, addressTaken, findInduction,
	findDefInRegion, mergeRegions, ifMerged, mergeInnerLoops): made static,
	(pinduction, pregion, hasIncomingDefs, findLoopEndSeq): disabled,
	(basicInduction): fixed bug #136564, made static,
	(loopInduction): changed parameter of basicInduction, made static,
	(addPostLoopBlock): added
	* src/SDCCloop.h: removed backEdges, pregion, pinduction,
	loopOptimizations, addressTaken, findDefInRegion, hasIncomingDefs,
	findLoopEndSeq
	* support/regression/tests/bug-136564.c: added
	* support/regression/ports/mcs51-xstack-auto/spec.mk: added
	--std-sdcc99 to LIBSDCCFLAGS

2006-01-16 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (geniCodeIfx): fix bug 1406131: always false
	while loop
	* support/regression/tests/bug-1406131.c: added

2005-12-31 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): fix promotion of unary minus
	* src/SDCCsymt.c (computeType): beautified
	* src/SDCCval.c (cheapestVal): beautified, old non-Ansi version removed,
	(valUnaryPM, valComplement): fix sign and promotion,
	(valNot): ANSI: result type is int (SDCC: unsigned char)
	* support/regression/tests/uminus.c: speedup by removing superflous
	test case 'int'
	* support/regression/tests/onebyte.c: added promotion and signedness
	tests for unary minus
	* support/regressions/tests/bug-477927.c: disable warning about
	uninitialized variables
	* support/regression/tests/not.c: added

2005-12-28 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/Makefile.in: added --std-sdcc99 to CFLAGS
	* src/mcs51/gen.c (gen51Code): show final register usage after
	fillGaps in asm with --i-code-in-asm
	* src/SDCClrange.c (sequenceiCode, setLiveFrom, setLiveTo,
	markLiveRanges, markAlive, findNextUseSym, findNextUse, unvisitBlocks,
	incUsed, rliveClear, adjustIChain): made static,
	(setFromRange): excluded because it's unused,
	(findPrevUseSym, markWholeLoop): added,
	(findPrevUse): rewritten; fixes bug 895992; now a complete search
	through	all branches of predecessors enables sdcc to emit the warning
	W_LOCAL_NOINIT, marking of outermost loop was incomplete,
	(rlivePoint): made static, added parameter emitWarnings which is only
	true during the first run out of two,
	(findRecursiveSucc, findRecursivePred): removed,
	(computeLiveRanges): made static, added parameter emitWarnings,
	(dumpIcRlive): added for debugging only
	* src/SDCClrange.h: added boolean parameter to computeLiveRanges(),
	removed prototype of setFromRange()
	* src/SDCCopt.c (eBBlockFromiCode): added new parameter emitWarnings
	in call of computeLiveRanges()
	* support/regression/tests/bug-895992.c: added
	* support/regression/tests/bug-971834.c: added
	* support/valdiag/tests/bug-895992.c: added
	* support/valdiag/tests/bug-971834.c: added

2005-12-18 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c: added IS_DIRECT macro for "direct" operands,
	  (genUnpackBits): improved code for direct operands,
	  (genPackBits): improved code for literal assignment to bitfields
	    and for direct destination operands (no FSR indirection),
	    prevented redundant AND, fixes #1362800,
	  (AccLsh): added parameter to disable masking of the result
	* src/pic16/pcode.c (pic16_safepCodeUnlink): fixed to work with
	  skip instructions with side-effects (like incfsz),
	  (pic16_pCodeIsAlive): suppress verbose output unless pcode_verbose,
	* src/pic16/pcoderegs.c (RemoveRegsFromSet): removed annoying warning
	* device/lib/pic16/Makefile.common.in: added --asm=@GPASM@ to CC,
	  fixes #1375263

2005-12-11 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (geniCodeAssign): fixed bug 11369874, don't use
	volatile variables as spill location

2005-12-10 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCcse.c (findCheaperOp): fixed bug 1376320, copy signedness to
	replacing literals
	* support/regression/tests/bug-1376320.c: added

2005-12-08 Raphael Neider <rneider AT web.de>

	* src/pic/device.c: renamed is_shared to pic14_is_shared
	* src/pic/gen.c (genIfx): re-enabled handling of sbits
	* src/pic/glue.c (emitSymbolToFile): added workaround for sbits,
	  (is_valid_identifier): added for above workaround

2005-12-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/Makefile.in: fixed to enable port-specific-objects
	* device/lib/ds390/i2c390.c (BitOutI2C): optimized by making bout unsigned
	  char, thanks Hubert Sack
	* doc/sdccman.lyx: documented --xstack-loc,
	  elaborated a bit more on interrupts and pitfalls,
	  removed "setjmp/longjmp unsupported",
	  documented some unsupported C99 features
	* src/SDCCmain.c (linkEdit): adapted default lib path for --stack-auto
	* src/SDCCpeeph.c (readRules): inserted patch 1367130 for finding missing
	  if, thanks Hubert Sack
	* src/mcs51/gen.c (genEndFunction): enabled "pop psw" for regbank 0 isr
	* support/regression/Makefile.in: test-mcs51-stack-auto no longer needs to
	  make make_library
	* support/regression/get_ticks.py: new, get cpu cycles and code size, so
	  regression tests can report resource usage (rfe 700441)
	* support/regression/collate-results.py: report resource usage
	* support/regression/ports/ds390/spec.mk,
	* support/regression/ports/hc08/spec.mk,
	* support/regression/ports/mcs51/spec.mk,
	* support/regression/ports/ucz80/spec.mk: run sim output through get_ticks
	* support/regression/ports/ds390/uCsim.cmd,
	* support/regression/ports/hc08/uCsim.cmd,
	* support/regression/ports/mcs51/uCsim.cmd,
	* support/regression/ports/ucz80/uCsim.cmd: inserted "state" to report time
	* support/regression/ports/mcs51-stack-auto/spec.mk: no need to build the
	  library, use the default one
	* support/regression/ports/mcs51-xstack-auto/spec.mk: inserted rules for
	  building the library

2005-12-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* config.dsp: added dependency on .version and configure_vc.awk
	* device/include/setjmp.h: updated for --stack-auto and --xstack
	* device/include/mcs51/at89c51snd1c.h: corrected line endings
	* device/include/mcs51/XC866.h: added, thanks Llewellyn van Zyl
	* device/lib/_setjmp.c: updated for --stack-auto and --xstack
	* device/lib/libsdcc.lib: added _setjmp
	* src/SDCCast.c (createIvalCharPtr): fixed warnings,
	  (decorateType): fixed bug 1372851,
	  (optimizeGetHbit): fixed warning
	* src/SDCCglue.c (printIvalChar, printIvalArray): adapted for flexible
	  array initialisation
	* support/regression/tests/bug1057979.c: added test for bug 1358192
	* support/regression/tests/setjmp.c: added, test for setjmp/longjmp

2005-12-03 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added /SOLID option to "SetCompressor lzma"
	  command since the NSIS was upgraded to version 2.11 on CF x86-linux2

2005-11-29 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (createIvalStruct, createIvalArray, createIvalPtr,
	createIval): implement symbol independant "flexible array member",
	(createIvalCharPtr): implemented flexible array initialisation with a
	string
	* src/SDCCsymt.c (copyStruct): removed,
	(getSize): fixed misleading comment,
	(getAllocSize): removed, the additional allocation size is now in
	sym->flexArrayLength,
	(checkStructFlexArray): new, syntax checks for flexible array members,
	(compStructSize): added syntax checks for "flexible array members"
	(copyStruct): removed,
	(copyLinkChain): removed inefficient fix for bug 770487
	* src/SDCCglue.c (emitRegularMap): getAllocSize has been removed
	* src/SDCCsymt.h: added structdef.b_flexArrayMember and
	symbol->flexArrayLength
	* src/SDCCerr.c,
	* src/SDCCerr.h: added W_INVALID_FLEXARRAY, W_C89_NO_FLEXARRAY,
	E_FLEXARRAY_NOTATEND and E_FLEXARRAY_INEMPTYSTRCT
	* support/regression/tests/structflexarray.c: added
	* support/valdiag/tests/structflexiblearray.c: added

2005-11-29 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): fixed bug 1368489
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: added warning W_CMP_SU_CHAR

2005-11-28 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/mcs51/at89c51snd1c.h: added file submitted by
	  Weston T. Schmidt <schmidtw AT users.sourceforge.net>, patch #1368001

2005-11-27 Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cppinit.c, support/cpp2/cpplib.h, support/cpp2/mkdeps.c,
	  support/cpp2/mkdeps.h: added command line option
	  -obj-ext=<extension> to SDCPP to define object file externion, used
	  for generation of make dependencies (-M)
	* src/SDCCmain.c: pass -obj-ext=<extension> to SDCPP

2005-11-26 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added small-stack-auto libraries,
	  added missing device/lib/mcs51/crt*.asm, pic and pic16 sources,
	  added pic and pic16 libraries

2005-11-26 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/float.h: Corrected typo in prototype of __fsgt

2005-11-25 Borut Razem <borut.razem AT siol.net>

	* sdcc/device/lib/Makefile.in, sdcc/device/lib/incl.mk:
	  added creation of model-mcs51-stack-auto libraries

2005-11-24 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCsymt.c (copyLinkChain): fixed bug 770487, copy structdef
	and fields-list too
	* src/SDCCast.c (createIvalArray): removed obsolete comment

2005-11-24 Borut Razem <borut.razem AT siol.net>

	* sdcc/device/lib/Makefile.in: remove all unnecessary files, 2nd try...,
	  added missing device/lib/mcs51/crt*.asm sources

2005-11-23 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (createIvalCharPtr): fixed bug 1348271

2005-11-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_fs2schar.c,
	* device/lib/_fs2sint.c,
	* device/lib/_fs2slong.c: optimized inline asm

2005-11-21 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/lib/_fs2slong.c, device/lib/_fs2sint.c, device/lib/_fs2char.c:
	  Better handling of floats between -1.0 and 0.0.

2005-11-20 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added missing "if"s as noted by Hubert Sack.
	  (the missing "if"s prohibited removal of redundant labels)

2005-11-19 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/lib/_fs2slong.c, device/lib/_fs2sint.c, device/lib/_fs2char.c:
	  Properly convert floats between -1.0 and 0.0 to long, int, and char
	  types (max integer value of negative floats tends to zero).
	* device/lib/modff.c, device/lib/ceilf.c, device/lib/floorf.c:
	  Removed changes made so to work properly with floats between
	  -1.0 and 0.0, as the problem is fixed in _fs2slong.c, _fs2sint.c,
	  and _fs2char.c

2005-11-18 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCcse.c (ReplaceOpWithCheaperOp): minor fix for debugging only
	* src/mcs51/gen.c (genUnpackBits): better code and a fix,
	(genCast) cosmetic change
	* src/ds390/gen.c (genUnpackBits, ): ported from mcs51
	* src/ds390/ralloc.c (packRegsForAssign): ported fix for bitfields
	from mcs51
	* support/regression/tests/bitfields (testSignedBitfields): added

2005-11-18 Borut Razem <borut.razem AT siol.net>

	* sdcc/device/lib/Makefile.in: remove all unnecessary files
	* device/lib/pic/Makefile.rules, device/lib/pic16/Makefile.subdir:
	  introduced SILENT option to make building of pic16 libraries less

2005-11-18 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/lib/modff.c, device/lib/ceilf.c, device/lib/floorf.c:
	  Now they work properly with floats between -1.0 and 0.0
	* device/lib/printf_large.c: Removed temporary patch for bug 1358192

2005-11-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCicode.c (printOperand): added missing else

2005-11-18 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCsymt.c (computeType): fixed bug 1358192: added missing else,
	reformatted for	better readability
	* src/mcs51/gen.c (genUnpackBits): initial, incomplete support for
	signed bitfields

2005-11-17 Borut Razem <borut.razem AT siol.net>

	* device/lib/pic16/Makefile.rules, device/lib/pic16/Makefile.subdir:
	  introduced SILENT option to make building of pic16 libraries less
	  verbose - used for nightly snapshot build
	* doc/sdccman.lyx: documented that SDCDB and ucSim are currently not
	  available on Win32 platforms.
	* sdcc/device/lib/Makefile.in: added library sources for mcs51, small,
	  medium, large, pic and pic16

2005-11-16 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/lib/printf_large.c: Temporary patch for bug 1358192:
	  printf("%f"...) sets fraction to zero.

2005-11-16 Raphael Neider <rneider AT web.de>

	* src/pic/pcode.c (LinkFlow): handle empty flows correctly,
	  fixes #1357221
	* src/pic/gen.c (genIfx): implemented for CARRY bit
	* src/pic16/gen.c (genAssign,genCast): fixed assigning/casting
	  to generic pointers, fixes #1357332,
	  (pic16_movLit2f): NEW,
	  (pic16_storeForReturn,genDataPointerSet): use pic16_movLit2f

2005-11-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (parseCmdLine): fixed bug 1356800, thanks rsudjian

2005-11-11 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c: handle FPOINTERS like POINTERS everywhere
	* src/pic16/gen.c (pic16_derefPtr): now works for non-pointers as well,
	  compute pointer's type from operand,
	  (genUnpackBits,genPackBits): handle FPOINTERS correctly, re-indented,
	  improved single bit reads, fixes bug #1353379

2005-11-09 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added lib/pic to the package

2005-11-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCval.c (valUnaryPM): fixed bug 1350699

2005-11-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bug1348008.c: added
	* src/mcs51/gen.c (saveRBank, unsaveRBank): fixed bug 1348008
	* support/regression/tests/bug1337835.c: updated comment

2005-11-06 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/error.cc, sim/ucsim/errorcl.h,
	  sim/ucsim/sim.src/stack.cc, sim/ucsim/sim.src/stackcl.h,
	  sim/ucsim/sim.src/uc.cc, sim/ucsim/sim.src/uccl.h,
	  sim/ucsim/sim.src/mem.cc, sim/ucsim/sim.src/memcl.h,
	  sim/ucsim/cmd.src/set.cc, sim/ucsim/cmd.src/show.cc:
	  dynamic construction of cl_error_class and derivates - 2.nd try

2005-11-05 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/sim.src/error.cc: fixed uninitialized class member variable
	  bug, which caused Bus Errors on sparc solaris

2005-11-04 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/error.cc, sim/ucsim/errorcl.h,
	  sim/ucsim/sim.src/stack.cc, sim/ucsim/sim.src/stackcl.h,
	  sim/ucsim/sim.src/uc.cc, sim/ucsim/sim.src/uccl.h,
	  sim/ucsim/sim.src/mem.cc, sim/ucsim/sim.src/memcl.h,
	  sim/ucsim/cmd.src/cmdconf.cc: dynamic construction of cl_error_class
	  and derivates to resolve the initialization problem on OSX

2005-11-02 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/cmd.src/cmdutil.cc, sim/ucsim/cmd.src/newcmd.cc:
	  corrected typo - #include <winsock2.h>

2005-11-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/asm.c (printILine): always close tmpFile, thanks Beau E. Cox,
	  (_asxxxx_mapping): added org directive for future enhancements

2005-11-01 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/app.cc, sim/ucsim/cmd.src/cmdutil.cc, sim/ucsim/cmd.src/newcmd.cc:
	  enabled sockets on WIN32
	* sim/ucsim/cmd.src/newcmd.cc: fixed bug with uninitialized variables

2005-10-31 Borut Razem <borut.razem AT siol.net>

	* support/regression/generate-cases.py: escape backslashes in {testcase}:
	  WIN32 backslash path delimiters should be escaped when used in C strings
	* support/regression/tests/bitfields.c: exclude failing assertions for
	  __CYGWIN32__ and __MINGW32__ hosts

2005-10-30 Borut Razem <borut.razem AT siol.net>

	* src/SDCCutil.c: corrected double comparison typo

2005-10-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/medium/Makefile: added for new memory model medium
	* device/include/asm/mcs51/features.h: updated for medium/pdata
	* device/include/mcs51/c8051f120.h: added sfr16/sfr32 definitions,
	  added Multiply & Accumulate sbit's and MAC0_PAGE define
	* device/include/mcs51/c8051f300.h: added sfr16 definitions
	* device/include/mcs51/c8051f310.h: added sfr16 definitions
	* device/lib/_mullong.c: update for medium model
	* device/lib/incl.mk: added medium model
	* doc/sdccman.lyx: documented medium model
	* src/SDCCast.c (isBitAndPow2): simplified using updated powof2
	* src/SDCCicode.c (geniCodeMultiply, geniCodeDivision): use updated powof2
	* src/SDCCmain.c (optionsTable, linkEdit): enabled medium model
	* src/SDCCmem.c (allocIntoSeg): set iaccess for pdata symbols,
	  (allocParms): set SCLS and OCLS to pdata for medium model
	* src/SDCCsymt.c (processFuncArgs): use default_local_map and set iaccess
	  for pdata,
	  (powof2): return <0 if not power of 2
	* src/avr/gen.c (genBitWise): use updated powof2
	* src/mcs51/gen.c (genMinusDec): use acc if necessary,
	  (shiftR2Left2Result): small optimization in setup, save acc when storing,
	  (shiftLLeftOrResult): use B if necessary
	* src/mcs51/main.c (_mcs51_finaliseOptions, mcs51_port): added medium model
	* src/mcs51/peeph.def: renamed 226 to 226.b, added 226.a
	* src/pic/main.c (_pic14_do_link): made void parameter list explicit
	* support/regression/Makefile.in: added test-mcs51-medium
	* support/regression/ports/mcs51-medium/spec.mk: added to test medium model

2005-10-28 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCsymt.c (compStructSize): make bitfields without (un)signed
	specifier unsigned
	* device/lib/time.c (mktime): fixed bug 1334315

2005-10-28 Raphael Neider <rneider AT web.de>

	* device/include/pic/p16f_common.inc: added common declarations
	* src/pic/ralloc.c (initStack): moved regs *r to block start for Alpha

2005-10-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (getTempRegs): return 0 if not enough registers found,
	  (aopPutUsesAcc): added to predict accumulator use,
	  (assignResultValue): save acc if necessary,
	  (genMinusDec): store result if indirectly addressed,
	  (genDivOneByte):  save acc if necessary,
	  (movLeft2Result): bugfix if left already in acc,
	  (genAnd, genOr, genXor, shiftL2Left2Result, shiftR2Left2Result): pay more
	    attention to accumulator use (esp. pdata),
	  (genReceive): receive pdata correctly
	* src/SDCCicode.c (isOperandInPagedSpace): added to detect pdata operands
	* src/SDCCicode.h: added isOperandInPagedSpace prototype

2005-10-27 Raphael Neider <rneider AT web.de>

	* doc/sdccman.lyx: corrected version (should be 2.5.4 not 2.5.5)

2005-10-27 Raphael Neider <rneider AT web.de>

	* .version: changed version to 2.5.4
	* doc/sdccman.lyx: changed version to 2.5.4, added some remarks to PIC14
	* device/lib/pic/libsdcc/{_mulint.c,_mullong.c}: use unsigned literals,
	  (_divschar.c,divuchar.c,_mulchar.c,_modschar.c,_moduchar): NEW,
	    arithmetics support routines
	* device/lib/pic/Makefile.rules: have assembler sources preprocessed
	* device/lib/Makefile.in: also create installdir for pic

	* src/SDCCopt.c (cnvToFcall): mark support routines `extern' for
	  pic14 port as well
	* src/pic/device.c (dump_sfr): rewritten to delegate register
	  placement to the linker (use `extern sym' rather than sym EQU addr),
	  (validAddress): fixed to check last specified address
	* src/pic/gen.c (aopForSym): added code to deal with array (useless?),
	  (popGetLit): truncate literal value to 8 bit,
	  (popGet): moved assert to more appropriate place
	  (popGetExternal): create pCode operand from and mark the according
	    symbol as being `extern'
	  (popGetAddr): added sanity check on immediate's offset, provide
	    GPOINTER tag on demand
	  (aopPut): fixed for immediates,
	  (mov2w_op): move operand's address or contents to WREG (depending on
	    operand type), safer variant of mov2w,
	  (movwf,call_libraryfunc): NEW, handy abbreviations,
	  (get_argument_pcop,get_return_val_pcop,pass_argument,
	  get_returnvalue): interface for accessing function parameters and
	    return values,
	  (assignResultValuei,genRet): use new parameter/return value interface
	  (pic14_getDataSize): back to old version handling generic pointers,
	  (pic14_toBoolean,genNot,genCpl,genCmpEq,genOrOp): heavily rewritten,
	    provided implementation and/or fixed old one,
	  (genMultOneByte,genDivOneByte,genModOneByte): implemented as library
	    calls, removed legacy 8051 reference code
	  (AccLsh,AccRsh): rewritten and fixed to deal with signed operands
	  (loadSignToC): NEW, move the operands sign bit to CARRY,
	  (genGenericShift): NEW, replaces genLeftShift, genRightShift and
	    genRightShiftSigned, accepts negative shift counts,
	  (setup_fsr): load FSR and adjust IRP (indirect memory access),
	  (emitPtrByteGet,emitPtrByteSet): rewritten, now works with
	    generic pointers, __data pointers and __code pointers,
	  (genUnpackBits,genPackBits): rewritten to work with generic pointers
	    and signed bitfields, limit bitfields to 8 bit,
	  (genDataPointerGet): fixed number of bytes read,
	  (genGenPointerGet,genConstPointerGet): fixed bitfield access,
	  (genPointerGet,genPointerSet): fixed handling of __code pointers,
	    pointers to constant data are no longer assumed to point to __code
	    space, removed invalid pointer types,
	  (bitpatternFromVal): retrieve the PICs representation of an integer
	    or float literal,
	  (genDataPointerSet): fixed assigning to po_immediate operands,
	  (genGenPointerSet): implemented as library call,
	  (genIfx): fixed incorrect condition,
	  (genAddrOf): limit generic pointers' addresses to 2 bytes,
	    provide GPOINTER tag according to destination's storage class,
	  (genCast): added code to handle casting to generic pointers, added
	    sign-/zero extension of the result
	  (aop_isLitLike,op_isLitLike): fixed handling of immediates
	* src/pic/gen.h: added macros to access IRP bit in STATUS register
	* src/pic/genarith.c (genAddLit): use min(result's,left's) size, sign
	  extend the result
	* src/pic/glue.c (is_shared_address,is_shared): check whether a given
	  address/register resides in the shared banks
	  (emitSymbolToFile): improved to handle global and `pinned' symbols,
	    put all variables into separate sections (have the linker arrange
	    them)
	  (picglue): put init code and interrupt handlers in separate sections
	* src/pic/main.c: added port specific options table, modified to PORT
	  structure to make GPOINTERs 3 byte, added pic14_options
	  (_pic14_do_link): private linking routine (update paths to libraries,
	    add libsdcc.lib by default)
	* src/pic/main.h: declare pic14_options
	* src/pic/pcode.c: fixed instructions i/o relations,
	  (RegCond): reverted to correct version,
	  (newpCodeOpLit): truncate literals to 8 bit,
	  (genericPrint): added debug output,
	  (getRegFromInstruction): fixed for various operand types, simplified
	  (BuildFlow): fixed broken handling of isntructions with labels
	  (LinkFlow): start at last instruction in flow (skip trailing comments),
	    pass the flow on to the next instruction after CALL
	  (pCodeReplace): NEW, replace a pCode and move meta data to the new one
	  (insertPCodeInstruction): fixed inserting after a skip instruction,
	  (DoBankSelect): fixed for labeled instructions
	  (OptimizepBlock): honor --nopeep switch
	  (AnalyzeFlow,ReuseReg): prevent crash on source files with no function
	* src/pic/pcodepeep.c (pCodePeepMatchRule): prevent NULL pointer accesses
	* src/pic/pcoderegs.c (regIsLocal): NEW, check visibility of a register
	  (pCodeOptime2pCodes): allow disabling this optimization via
	    --no-pcode-opt due seldomly occuring bugs, fixed some conditions
	    but is still buggy), started implementation of a dataflow based
	    pCode optimization (CSE + dead code elimination)
	  (pCodeRegMapLiveRangesInFlow): removed bogus inCond
	* src/pic/ralloc.c (initStack): renamed stack registers to STK%d, the new
	  names are independant of the stack location and therefore portable across
	  devices

2005-10-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/ralloc.c (bitType): added to detect bit variables,
	  (selectSpil): fixed bug 1337835 by not spilling bit variables
	* support/regression/tests/bug1337835.c: added test for this bug
	* src/mcs51/peeph.def: restart after rule 3.c,
	  addded rules 263.x to optimize loading constants

2005-10-26 Raphael Neider <rneider AT web.de>

	* src/SDCCsymt.c (compStructSize): allow signed bitfields for PIC ports
	* src/pic16/gen.c (genUnpackBits): support signed bitfields,
	  (genAssign): emit warning when casting literals to generic pointer
	    type, also applies when taking the address of a fixed variable,
	  (genCast): improved casting to generic pointers
	* src/pic16/glue.c (pic16emitStaticSeg): fixed(?) handling of fixed
	  extern variables, added verbose error message
	* device/include/pic16/{string.h,errno.h}: added #pragma library c

2005-10-26 Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (genMinus): fixed bug 1270906: reverse subtraction,
	carry must be complemented too
	* src/mcs51/peeph.def: addded rule 262 to remove double cpl c, which
	could be emitted by genMinus
	* src/SDCCval.c (constVal): fixed bug 1305065

2005-10-25 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (addCast): added promotion for bit variables
	(decorateType): emit W_COMPLEMENT before the problem vanishes behind
	promotion casts + optimisation
	(optimizeGetWord): fix warning 'i' might be used uninitialized
	* src/mcs51/gen.c (genCpl): removed W_COMPLEMENT
	* src/ds390/gen.c (genCpl): removed W_COMPLEMENT

2005-10-24 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (ast2iCode): reverted to 1.224 because of regression:
	all chars are promoted to int; promotion should be handled in SDCCast.c

2005-10-15 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/lib/_strcmp.c: Fixed bug 1326457

2005-10-11 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libio/i2c.ignore: added 1320, fixes broken builds
	* device/lib/pic16/libdev/pic18f1320.c: added 1320's device library

2005-10-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCC.y (AT): fixed bug with sfr32 addresses when built with GCC
	* support/regression/tests/sfr16.c: added test for the sfr32 bug

2005-10-04 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18fregs.h, src/pic16/devices.inc,
	  device/lib/pic16/pics.all: added pic18f1320
	* src/pic16/pcode.c (mnem2key): fixed prototype's argument mismatch

2005-09-30 Raphael Neider <rneider AT web.de>

	* src/pic16/device.c (Pics16[]): moved device descriptions to devices.inc
	* src/pic16/devices.inc: NEW, provides device descriptions
	* src/pic16/gen.c (genInline): fixed handling of ';'-comments

2005-09-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCicode.c (operandOperation): added GETABIT, GETBYTE, GETWORD and
	  GETHBIT

2005-09-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: updated Highest Order Bit documentation,
	  documented Any Order Bit, Higher Order Byte and Higher Order Word
	* src/SDCC.y: added tokens GETABIT, GETBYTE, GETWORD
	* src/SDCCast.c (optimizeGetHbit): updated to also accept bool=expr&(1<<n),
	  (optimizeGetAbit): new, to get any bit, not only the high bit,
	  (optimizeGetByte): new, to get a byte from a (long) int: expr>>(8*n),
	  (optimizeGetWord): new, to get a word from a long int: expr>>(8*n),
	  (isConformingBody): also check GETABIT, GETBYTE, GETWORD,
	  (decorateType): '&': also try GETABIT, GETBYTE, GETWORD optimization,
	    RIGHT_OP: also try GETBYTE, GETWORD optimization,
	    GETABIT, GETBYTE, GETWORD: decorate them,
	  (isShiftRightLitVal, isBitAndPowOf2): new helper functions,
	  (ast_print): added GETABIT, GETBYTE, GETWORD
	* src/SDCCcse.c (isSignedOp): added GETABIT, GETBYTE, GETWORD
	* src/SDCCicode.c (codeTable): added GETABIT, GETBYTE, GETWORD,
	  (geniCodeBinary): new generic binary icode,
	  (ast2iCode): added GETABIT, GETBYTE, GETWORD
	* src/port.h: updated comment for PORT.hasExtBitOp
	* src/mcs51/gen.c (genGetAbit): new, to get any single bit,
	  (genGetByte): new, to get a single byte,
	  (genGetWord): new, to get a word from a long,
	  (gen51Code): added GETABIT, GETBYTE, GETWORD
	* src/mcs51/main.c (hasExtBitOp): added GETABIT, GETBYTE, GETWORD

2005-09-23 Raphael Neider <rneider AT web.de>

	* configure.in, configure: have device/lib/pic configured
	* device/lib/Makefile.in: added model-pic14
	* device/lib/clean.mk: added pic/ to clean rule
	* device/lib/pic: added rudimentary pic14 library providing support
	  functions for multiplication/division/generic pointer access
	* src/SDCCopt.c (convilong): mark support functions as extern
	  for pic14 port as well
	* src/pic/gen.c (genMult): added assertions,
	  (genpic14Code): emit warning on unhandled iCodes
	* src/pic/main.c (_hasNativeMulFor): return true only for 8x8 bit
	* src/pic/pcode.c (pCodeOpCopy),
	* src/pic16/pcodepeep.c (pic16_pCodeOpCopy): fixed handling of various
	  pCodeOpReg-subtypes (PO_{STATUS,INTCON,PCL,PCLATH,PCLATU,BSR,
	  SFR_REGISTER}), made safe for future extensions
	* src/pic16/pcode.c (pic16_safepCodeUnlink): allow for removal of
	  instructions even if preceeded by SKIP instructions (also remove
	  them); removed unused code
	* src/pic16/pcode.h: added arg2 to pCodeOpLit to match pCodeOpLit2,
	  prevents leaving parts of the structure uninitialized after copying

2005-09-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (genMinus): fix for undetected bug introduced 3 months
	  ago by me
	* support/regression/tests/addsub.c: added test for the bug

2005-09-21 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f1220.h,
	  device/lib/pic16/libdev/pic18f1220.c: added ECCPAS sfr and bitfield
	* device/lib/pic16/Makefile.rules: added missing opening paren
	* src/pic16/gen.c (pic16_genNot,pic16_genCpl): removed as these
	  are provided in genutils.c,
	  (genUminusFloat,genUminus,genCmpEq): added asserts on different
	  operand/result sizes,
	  (genCmp): assert on NULL pointers first, then check deref'ed values
	* src/pic16/genutils.c (pic16_genCpl): fixed for different operand/
	  result size

2005-09-18 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genFarPointerGet,genFarPointerSet): removed
	  as these are now unused,
	  (genPointerGet,genPointerSet): handle FPOINTERs like POINTERs
	* src/pic16/pcode.c (pic16_symIsSpecial): assume REG_TMPs to be
	  local, avoids uninitialized pointer dereference on r->name
	* src/pic16/ralloc.c (newReg): fixed indentation

2005-09-13 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCval.c (constVal): fixed bug 730366
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: added warning W_INVALID_INT_CONST

2005-09-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/lkmem.c (summary2): fixed report for absolute areas (bug 1210220)

2005-09-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peeph.def (241.x): fixed bug when comparing generic pointers

2005-09-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/hc08/lkaomf51.c (OutputName): made name unsigned char,
	  (hex2dec): made hex_digit unsigned char, removed ascii dependance
	* as/mcs51/lkaomf51.c (OutputName): made name unsigned char,
	  (hex2dec): made hex_digit unsigned char, removed ascii dependance
	* as/mcs51/lkarea.c (lnkarea2): sort absolute areas to the front
	* packihx/packihx.c (hexDigit): made c unsigned char
	* as/mcs51/lklibr.c (fndsym),
	* link/z80/lkgb.c (gb),
	* link/z80/lklibr.c (fndsym),
	* link/z80/lkrloc.c (relr),
	* sim/ucsim/libltdl/ltdl.c (load_deplibs, try_dlopen),
	* src/SDCC.lex (checkCurrFile, process_pragma),
	* src/SDCCglue.c (spacesToUnderscores),
	* src/SDCCmain.c (setParseWithComma, processFile),
	* src/asm.c (tvsprintf, printCLine),
	* src/avr/gen.c (emitcode, aopPut),
	* src/ds390/gen.c (emitcode),
	* src/hc08/gen.c (emitcode, emitinline),
	* src/mcs51/gen.c (emitcode, genInline),
	* src/pic/pcodepeep.c (cvt_extract_destination, cvt_extract_status,
	  tokenizeLineNode),
	* src/pic/ralloc.c (debugLog),
	* src/pic16/pcodepeep.c (cvt_extract_destination, cvt_extract_status,
	  tokenizeLineNode),
	* src/pic16/ralloc.c (debugLog),
	* src/z80/main.c (_process_pragma):
	   made all ctype.h function calls safe
	* src/SDCCopt.c: include math.h for fabs
	* src/SDCCpeeph.c: added macros ISCHARDIGIT, ISCHARSPACE and ISCHARALNUM
	  and used them throughout the code to make ctype.h function calls safe
	* src/ds390/main.c (asmLineNodeFromLineNode),
	* src/mcs51/main.c (asmLineNodeFromLineNode): made p unsigned char*
	* src/pic/gen.c (DEBUGpic14_emitcode, pic14_emitcode): made lbp
	   unsigned char*
	* src/pic/pcode.c (mnem2key): made mnem unsigned char*,
	  (newpCodeAsmDir): made ctype.h function calls safe
	* src/pic16/gen.c (pic16_emitpcomment, DEBUGpic16_emitcode,
	  pic16_emitcode):  made lbp unsigned char*
	* src/pic16/pcode.c (mnem2key): made mnem unsigned char*,
	  (pic16_newpCodeAsmDir): made ctype.h function calls safe
	* src/xa51/gen.c (emitcode),
	* src/z80/gen.c (_emit2): made lbp unsigned char*
	* support/Util/MySystem.c (split_command): made cmd_line and p unsigned
	   char*

2005-09-05 Raphael Neider <rneider AT web.de>

	* src/pic16/ralloc.c (pic16_allocDirReg): use device specific
	  access bank splitpoint

2005-09-05 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libc/Makefile: added (missing) string to SUBDIRS

2005-09-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* .version: changed to version 2.5.3
	* doc/sdccman.lyx: changed version to 2.5.3,
	  documented --codeseg and --constseg and pragma codeseg and constseg,
	  documented bit parameters (reentrant) and bit returning
	* src/SDCCicode.c (geniCodeReceive): fixed (possible) bug generating
	   currFunc->recvSize, but is this ok for all ports?
	  (ast2iCode): result of ~ on unsigned char must be cast to int for
	   bool to work
	* src/SDCCmem.c (allocGlobal, allocLocal): don't put bit returning
	  function pointers in bit space
	* src/SDCCsymt.c (checkSClass): allow bit returning function pointers,
	  (processFuncArgs): call port.reg_parm() with reentrancy info
	* src/port.h,
	* src/avr/main.c,
	* src/ds390/main.c,
	* src/hc08/main.c,
	* src/pic/main.c,
	* src/pic16/main.c,
	* src/xa51/main.c,
	* src/z80/main.c: port.reg_parm prototype extended with
	  "bool reentrant" parameter
	* src/mcs51/main.c (_mcs51_regparm): use parameter reentrant instead of
	  options.stackAuto for allocating bit register parameters
	* src/mcs51/gen.c (genNot): optimized complementing direct bit,
	  (genSend): set BitBankUsed if it is,
	  (selectRegBank): factored out of genCall for use in genPcall,
	  (genCall): removed redundant dtype assignmen, use selectRegBank,
	  (genPcall): handle returning in Carry properly, save in F0 if needed,
	  (genReceive): handle bit register parameters
	* src/mcs51/ralloc.c (updateRegUsage): update BitBankUsed along the way,
	  (mcs51_assignRegisters): enable bit registers for all reentrant
	   functions and don't set BitBankUsed unconditionally
	* src/mcs51/peeph.def (177.d): fixed bug if %2==%3
	* support/regression/tests/bitvars.c: enable tests for SDCC_STACK_AUTO
	* support/regression/tests/funptrs.c: added tests for BOOL and for return

2005-08-27 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in: cp on sparc-solaris (SunOS) and on
	ppc-osx (Darwin) does not support -u option. It seems that it is
	supported only on Linux - GNU cp

2005-08-25 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/gui.src/serio.src/Makefile.in,
	  sim/ucsim/s51.src/Makefile.in, sim/ucsim/avr.src/Makefile.in,
	  sim/ucsim/z80.src/Makefile.in, sim/ucsim/hc08.src/Makefile.in,
	  sim/ucsim/xa.src/Makefile.in: install -s changed to 2 steps:
	  install and strip, since the strip at /usr/ccs/bin should be used
	  on solaris

2005-08-24 Borut Razem <borut.razem AT siol.net>

	* clean.mk, device/lib/clean.mk: find on sparc-solaris does not support -maxdepth option

2005-08-23 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCopt.c (convertToFcall): fixed modulus with divisors 1 and
	ffffffffu

2005-08-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/aslink.h: completed lkrloc.c prototypes
	* as/mcs51/lkmain.c (link_main): fixed warning
	* device/include/stdbool.h: ds390 has no advanced bit support yet
	* src/SDCC.y: use SPEC_SHORT and renamed _signed to b_signed
	* src/SDCCsymt.c: use SPEC_SHORT and renamed _signed to b_signed
	* src/SDCCsymt.h (struct specifier): renamed _xxx bitfields to b_xxx
	  and updated their macros
	* src/SDCCval.c (constVal): updated comment for renamed b_long

2005-08-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/asdata.c: changed ctype['['] to BINOP
	* as/mcs51/asexpr.c (expr): added case '[' for bit access in bdata,
	  (term): abused bit 15 of s_addr to indicate bit-addressable bytes,
	  (oprio): set priority for '['
	* as/mcs51/aslink.h: added define R_BIT, and prototypes for adb_bit
	   and adb_24_bit
	* as/mcs51/asm.h: added defines R_BIT and S_BIT
	* as/mcs51/lkarea.c (lnksect2): use T for seg BIT_BANK and overlay it
	* as/mcs51/lkdata.c: changed ctype['['] to BINOP
	* as/mcs51/lkmain.c (Areas51): rel2 contains 12 (=C) areas now,
	  added overlayable BIT_BANK area
	* as/mcs51/lkmem.c (summary): add BIT_BANK to BSEG_BYTES in the report,
	  (summary2): explain 'T' in legenda
	* as/mcs51/lkrloc.c: replaced old K&R style,
	  (relr): added R_BIT processing,
	  (errmsg): added "Bit-addressable relocation error",
	  (adb_bit): added for converting from byte- to bit-addressable space,
	  (adb_24_bit): added for converting from byte- to bit-addressable space
	* device/include/stdbool.h: changed BOOL to __bit for mcs51 as it can be
	   used in reentrant functions now even as return value
	* device/lib/_gptrput.c (_gptrput): removed obsolete code
	* src/SDCCast.c (resultTypePropagate): also propagate AND_OP and OR_OP,
	  (decorateType): case '!', GETHBIT, AND_OP, OR_OP: result in bool or char
	* src/SDCCglobl.h: added indicator BitBankUsed
	* src/SDCCglue.c (glue): emit area BIT_BANK with byte 'bits' and equ's for
	   the bit registers b0-b7
	* src/SDCCicode.c (operandFromSymbol): removed IS_BITVAR check,
	  (geniCodeCast): fixed bug 1263853,
	  (geniCodeLogicAndOr): put result in bool or char,
	  (geniCodeReceive): added parameter func for accessing the return type,
	  (geniCodeFunctionBody): pass func to geniCodeReceive
	* src/SDCCmain.c: added indicator BitBankUsed
	* src/SDCCmem.c (allocLocal): explicitly set sclass for V_BIT
	* src/SDCCsymt.c (newBoolLink): added for creating a bool/bit,
	  (checkSClass): don't put automatic bool/bit on stack,
	  (checkFunction): removed check on function cannot return bit
	* src/SDCCsymt.h: added newBoolLink prototype
	* src/mcs51/gen.c (rb1regs): added bit registers,
	  (movc): created for assigning to carry,
	  (pushReg, popReg): created for pushing registers,
	  (sameRegs): check both AOP_REG and AOP_CRY types,
	  (aopOp): handle bit registers,
	  (aopPut): optimization no self-assign,
	  (saveRegisters): push reg->base (bits) only once for bit registers,
	   and use pushReg,
	  (unsaveRegisters): pop reg->base only once and use popReg,
	  (assignResultValue): added parameter func and return in carry for bits,
	  (genIpush): optimization no reload in A if not changed,
	  (genSend): bit parameters in reentrant functions are passed in bit
	   registers by first assigning to bits in B, then save registers and
	   copy B to bits,
	  (genCall): handle returning in Carry properly, save it in F0 if needed,
	  (genPcall): updated assignResultValue call, this is not safe yet for bit
	   returning function !!!
	  (genFunction): don't generate equ's for bit registers and use pushReg,
	  (genEndFunction): take care of bit returning functions and use popReg,
	  (genRet): return bit in Carry,
	  (genIfx): optimize bit registers and other directly addressable bits,
	  (genReceive): updated assignResultValue call
	* src/mcs51/main.c (_mcs51_reset_regparm): added regBitParmFlg,
	  (_mcs51_regparm): allow passing of upto 8 bit parameters in bit
	   registers when using stack-auto
	* src/mcs51/ralloc.c (_G): added allBitregs,
	  (regs8051): added the bit registers,
	  (createStackSpil): use macro IS_BIT,
	  (getRegBit): added to allocate a bit register, else spill,
	  (getRegBitNoSpil): added to allocate a bit register, else a gpr,
	  (updateRegUsage): factored out to ease stepping while debugging,
	  (serialRegAssign): use updateRegUsage, only spill bits if necessary,
	   also allocate bit registers,
	  (fillGaps): handle bit registers,
	  (findAllBitregs): added to create bit vector with all bit registers,
	  (mcs51_allBitregs): returns this bit vector,
	  (mcs51_assignRegisters): when using stack-auto use bit registers for
	   passing parameters and creating local variables
	* src/mcs51/ralloc.h: added B0_IDX..B7_IDX and prototype mcs51_allBitregs

2005-08-22 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in: replaced find option -or with -o
	  to make it run on solaris

2005-08-22 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_loadFromReturn): added check for AOP_PCODE,
	  fixes #1265442 (crash on Solaris)

2005-08-20 Borut Razem <borut.razem AT siol.net>

	* configure, configure.in: added tests for libsocket and libnsl libraries,
	  requred by sdcdb on sparc-solaris; generate support/regression/Makefile
	  from support/regression/Makefile.in
	* support/regression/Makefile.in: added
	* device/lib/pic16/Makefile.common.in: force make to use bash shell
	* sim/ucsim/libtool: regenerated on sparc-solaris
	* sim/ucsim/avr.src/Makefile.in, sim/ucsim/hc08.src/Makefile.in,
	  sim/ucsim/s51.src/Makefile.in, sim/ucsim/xa.src/Makefile.in,
	  sim/ucsim/z80.src/Makefile.in: removed GNU ld specific linker options
	  -Wl,--start-group and -Wl,--end-group to enable ucsim compilation on
	  sparc-solaris, which doesn't use GNU ld linker
	* device/lib/Makefile.in: cp on sparc-solaris (SunOS) does not support -u option
	* as/Makefile: find on sparc-solaris does not support -maxdepth option

2005-08-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peeph.def: updated comments

2005-08-16 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/_gptrget.c,
	* device/lib/_gptrput.c: slightly shorter
	* doc/sdccman.lyx: incremented version
	* src/mcs51/peeph.def: moved peephole comments to the line of first
	  change to better keep line correlation, reanimated 186.e
	* src/mcs51/peeph.def: renamed similar peepholes by using suffixes

2005-08-16 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/pcode.c : Pasted ".line" assembly directives patch from
	  David Saxton with quotes around file name.

2005-08-15 Borut Razem <borut.razem AT siol.net>

	* support/regression/tests/bitfields.c, support/regression/tests/bitvars.c,
	  support/regression/tests/bitwise.c, support/regression/tests/literalop.c,
	  support/regression/tests/rotate.c, support/regression/tests/zeropad.c:
	  make tests run on x86_64 platform

2005-08-13 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/Makefile.subdir: weakened clean-intermediate rule
	  as it might be executed DURING a build (parallel make is wonderful)

2005-08-13 Raphael Neider <rneider AT web.de>

	* device/lib/Makefile.in (port-specific-objects-pic16):
	  revert to cp $(PORT)/bin/*.* $(PORTDIR)
	* device/lib/pic16/Makefile: added .PHONY targets, removed builddir
	  dependency
	* device/lib/pic16/Makefile.rules: build subdirs before creating
	  the library, removed builddir rule, create $(builddir) early in
	  recurse rule, use empty recurse rule for leaf directories
	* device/lib/pic16/Makefile.subdir: added phony targets, ignore
	  mkdir errors (race condition), removed duplicate suffix "hex"
	  from clean rules
	* device/lib/pic16/libdev/Makefile: recursive make via + and $(MAKE)
	* device/lib/pic16/libio/Makefile: create sub-make's builddir early,
	  prevents mkdir -p from aborting on Alpha

2005-08-12 Raphael Neider <rneider AT web.de>

	* src/pic16/glue.c (pic16_print(G)PointerType): do not flush
	  db-statements in order to allow for arrays of pointers in code
	  sections to be placed without interspersed 0-padding, fixes
	  bug #1256215
	* (emitStatistics): fixed division by zero for pic18f1220
	* src/pic16/pcode.c: buffer (up to) 12 DB directives to allow for
	  unpadded writing of 8-bit, 16-bit, 24-bit and 32-bit values
	* (pic16_emitDS): respect DB_ITEMS_PER_LINE
	* (pic16_pCodeConstString): keep track of already emitted string
	  literals to prevent "duplicate definitions of symbol _str_NR"
	* src/pic16/ralloc.c (pic16_allocRegByName): removed not so helpful
	  debug message
	* device/lib/Makefile.in: ignore failing PIC16 library builds
	* device/lib/pic16/Makefile: do not build if gputils are missing
	* device/lib/pic16/Makefile.common.in: do not enforce MAKEFLAGS=-s

2005-08-10 Raphael Neider <rneider AT web.de>

	* device/lib/Makefile.in: fixed copying pic16 libraries (broken by
	  my last commit)

2005-08-10 Raphael Neider <rneider AT web.de>

	* src/*.c, src/pic16/{gen.c,glue.c,main.c}: applied Vangelis
	  Rokas' patch to add the new fixed point type "__fixed16x16"
	* device/lib/pic16/libsdcc/fixed16x16: added Vangelis' support
	  functions for __fixed16x16 arithmetics
	* device/lib/pic16: reimplemented the build system to support
	  a separate build directory, better handling of libio (create
	  the library in a separate subdir for each architecture) and
	  easier configuration (centralized in Makefile.common)

2005-08-07 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genrshTwo): fixed sign extension
	* src/pic16/device.c: added pic18f2320, 4220 and 4320
	* device/include/pic16/pic18f2220.h: changed some bit definitions,
	  added T0CONbits
	* device/include/pic16/pic18f4220.h: NEW, header for
	  pic18f4220 and pic18f4320
	* device/include/pic16/pic18fregs.h: added new devices,
	  embraced Nop(), ClrWdt(), Sleep() and Reset() with do {} while(0)
	* device/include/pic16/signal.h: resolved name clashes
	  on bit definitions, added DEF_HANDLER2(sig1,sig2,handler)
	  to also allow testing for interrupt enable bits, added
	  comments on how to use the macros
	* device/lib/pic16/libdev/pic18f2220.c: added T0CONbits
	* device/lib/pic16/libdev/pic18f{2320,4220,4320}.c: NEW,
	  register definitions for the devices
	* device/lib/pic16/pics.all: added new devices
	* device/lib/pic16/libc/stdlib/calloc.c: fixed zeroing
	  allocated memory
	* device/lib/pic16/libc/stdlib/memfree: do not count
	  the block header as free memory
	* device/lib/pic16/libc/stdlib/memmisc.c (_initHeap):
	  simplified and added missing end-of-blocklist-marker
	  (reported by Peter Onion, fixes #1252814)
	* (_mergeHeapBlock): fixed loop condition
	* device/lib/pic16/libc/stdlib/realloc.c: return NULL for
	  len==0, restructured code
	* device/lib/pic16/libc/stdlib/{malloc,memfreemax}.c: cleaned
	  up a bit, reduced bitfield accesses, prevent endless loops
	  in case of heap corruption
	* device/lib/pic16/libc/stdlib/x_ftoa.c: disabled
	  "unreferenced arguments/must return a value" warnings
	* device/lib/pic16/libio/usart/ubaud.c (usart_baud):
	  replaced BAUDREG with SPBRG
	* device/lib/pic16/libsdcc/lregs/{lrrest.c,lrst.c},
	  device/lib/pic16/debug/gstack/gstack.c: replaced
	  _naked, _asm, _endasm with __naked, __asm, __endasm

2005-08-05 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_aopGet): fixed handling of offsets in
	  AOP_PCODE operands, fixes multibyte union-bitfield-accesses

2005-08-05 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in: added missing ';'
	* configure: removed ^M characters

2005-08-04 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/at89c51ed2.h, device/include/mcs51/p89v51rd2.h,
	  device/include/mcs51/at89s53.h: changed to GNU Lesser General Public
	  License

2005-08-04 Borut Razem <borut.razem AT siol.net>

	* configure.in: pic16 libraries build 2nd try - enable running
	  configure in device/lib/pic16
	* configure: regenerated from configure.in
	* device/lib/Makefile.in: create $(PORT)/bin directory

2005-08-03 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_derefPtr): NEW, single place
	  to get/set values via pointers
	* (genUnpackBits,genPackBits): changed detection of
	  ptr->bitfield vs. sym.bitfield, fixed access via generic
	  pointers, removed dead (wrong) code for multibyte bitfields
	* (genNearPointerGet, genGenPointerGet): removed useless code,
	  fixed bitfield detection, fixes #1250594
	* (genNearPointerSet): removed useless code
	* src/pic16/gen.h: renamed pic16_emitpcode to pic16_emitpcode_real
	  and introduced macro pic16_emitpcode that conditionally emits
	  the origin of the following pCode (useful for debugging SDCC)
	* src/pic16/pcode.c: changed (and disabled) some debug outputs
	* (createDefmap): fixed handling of LFSR for --optimize-df

2005-08-02 Borut Razem <borut.razem AT siol.net>

	* device/lib/Makefile.in: pic16 libraries build enabled since
	  gputils-0.13.2 are now localy installed at sourceforge's compile farm

2005-08-02 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genPackBits): removed deprecated warning
	* (genGenPointerSet): fixed bitfield detection

2005-08-02 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/msm8xc154s.h: Removed PT2 definition, now in 8052.h.

2005-07-31 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/pic18f458.c,
	  device/include/pic16/pic18f458.h: added missing T0CONbits

2005-07-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/msm8xc154s.h: added, thanks to Matthias Arndt

2005-07-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (operandsEqu): fixed bug 1246687

2005-07-23 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/at89c51ed2.h: added.

2005-07-23 Raphael Neider <rneider AT web.de>

	* src/pic/gen.h: added emitpcode macro for debugging
	* src/pic/gen.c (emitpcode): renamed to emitpcode_real
	  and replace by macro adding debug information on demand
	* (genNot): fixed to C semantics (!0 = 1; !x = 0 iff x != 0)
	* (gencjne): tried to fix; replaced with correct (slower) code
	* (gen{Unp,P}ackBits): fixed single bit access
	* src/pic/pcode.c (AnalyzepCode): fixed DFPRINTF argument
	* src/pic/pcodepeep.c (pCodeSearchCondition): fixed finding
	  previous instruction
	* src/pic/pcoderegs.c (regIsSpecial): NEW, check whether a
	  register has to be handled with care (forbidding movement
	  of assignments/uses, removing assignments completely, ...)
	* (pCodeOptime2pCodes): make use of regIsSpecial
	* added lots of debugging output (commented out)
	* src/pic/rallloc.c (deassignLRs): prevent operand registers
	  from being reused as result UNLESS it is known to work

2005-07-23 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/Util/dbuf.h: include <stddef.h> for size_t
	* .version: changed to version 2.5.2

2005-07-23 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCloop.c (loopInvariants): fixed bug #1234048

2005-07-22 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genMinus): fixed bug #1241835,
	  (genModOneByte): removed needless psha/pula

2005-07-22 Raphael Neider <rneider AT web.de>

	* src/SDCCmain.c (linkEdit): initialized linkerScriptFileName,
	  have PIC14 handled like PIC16, fixes broken pic14 linker calls
	* src/pic/gen.c (resolveIfx): do not "invent" labels
	* (genSkipc): changed to positive logic
	* (genSkipCond): removed as no longer needed
	* (pic14_mov2w_regOrLit,genCmp): NEW, replacement for buggy version,
	  backport from PIC16
	* (genLeftShift): check operands are in different registers
	* src/pic/genarith.c (genPlus): replaced INCF with ADDLW as
	  INCF does not update CARRY...
	* src/pic/main.c: fixed _linkCmd
	* src/pic/pcode.c (unlinkpCode): added inactive code
	* src/pic/ralloc.c (deassignLRs): keep arguments to shift operations
	  alive (do not assign result and operand overlapping registers)

2005-07-22 Raphael Neider <rneider AT web.de>

	* src/pic/device.c (dump_sfr): replaced register declaration with
	  call to emitSymbolToFile() to avoid duplicate symbols
	* (assignRelocatableRegisters): do not declare external symbols
	* src/pic/ralloc.c (allocNewDirReg): fixed to get size of arrays
	  right (take size of type, not etype)
	* (allocDirReg): fixed call to allocNewDirReg() to pass OP_SYM_TYPE
	* (writeUsedRegs): also dump dynDirectRegs (e.g. local variables)
	* (packRegsForAccUse): disabled assignment of WREG as
	  the result reg to prevent occurence of just fixed #1235003,
	  fixes #1242954
	* src/pic/glue.c (emitSymbolToFile): NEW, central place to declare
	  symbols (avoids duplicate symbols in .asm file)
	* (pic14emitRegularMap): use emitSymbolToFile()
	* src/pic/gen.c (aopOp): fixed spillLocation handling
	* (gen{Unp,P}ackBits): fixed acquiring bit-operands
	* (genDataPointerSet): removed unneccessary variables/output

2005-07-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/lkarea.c: enlarged codemap for banked memory
	* device/lib/mcs51/crtbank.asm: added # to 0x0F

2005-07-21 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (aopOp): do not generate AOP_ACC operands as pic14
	  architecture cannot handle them efficiently, fixes bug #1235003
	* src/pic16/device.c (pic16_dump_{u,i}section,pic16_dump_int_registers):
	  check for empty sets before using them (fixes bug #1232190)

2005-07-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/lkarea.c (lnkarea, lnkarea2): improved BSEG size calculation,
	  (lnksect2): generate warnings for memory overlap
	* src/SDCC.lex (doPragma, process_pragma): added pragma's codeseg and
	  constseg to set the name of these segments so you can instruct the linker
	  to place them in banks
	* src/SDCCast.c (decorateType): use new macro IS_FUNCPTR()
	* src/SDCCglobl.h: added MODEL_HUGE to enum,
	  added code_seg and const_seg to options
	* src/SDCCglue.c (emitMaps): use options.const_seg,
	  (createInterruptVect): put interrupt vectors in segment HOME,
	  (glue): put HOME before static segment and put the main glue in HOME,
	  (glue): use options.code_seg
	* src/SDCCicode.c (geniCodeCall): use new macro IS_FUNCPTR()
	* src/SDCCmain.c: added option --codeseg and --constseg to set the name of
	  these segments so you can instruct the linker to place them in banks
	  (linkEdit): use code_loc for HOME segment which should be the first
	  segment in code memory now
	* src/SDCCmem.c: fixed more stuff like bug 1238386
	* src/SDCCsymt.c (getSize): use generic pointer size for banked functions,
	  (changePointer): don't change function pointers to code pointers for
	  banked functions,
	  (compareType): added exceptional check for banked function pointers
	* src/SDCCsymt.h: changed IFFUNC_ISBANKEDCALL, added IS_FUNCPTR
	* src/hc08/main.c (_hc08_genAssemblerPreamble): put HOME first, put CSEG
	  after static in code memory
	* src/mcs51/gen.c: added aopLiteralLong prototype,
	  (aopForSym): use getSize for functions,
	  (genCall): generate banked calls over one trampoline __sdcc_banked_call
	  in HOME with lsb of address in r0, msb in r1 and bank in r2, use
	  -Wl-bBANKSEG=0xbbaaaa option to set the address (aaaa) and bank (bb) of
	  the segment,
	  (genPcall): use call for literal function pointers and generate banked
	  calls over the one trampoline so there's only one place for the user to
	  modify according to his/hers hardware,
	  (genEndFunction): jump to __sdcc_banked_ret in HOME for banked functions,
	  (genPlusIncr): moved check icount>4 beyond inc dptr optimization
	* src/mcs51/main.c: added keyword banked,
	  (_mcs51_genExtraAreas): put HOME first followed by GSINIT, STATIC and CSEG
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: added E_BANKED_WITH_CALLEESAVES, registers are
	  needed for passing the bank and address to the trampoline
	* device/lib/mcs51/crtbank.asm: added for bankswitching
	* device/lib/mcs51/Makefile: added crtbank

2005-07-16 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcse.c (algebraicOpts): fixed loss of volatility
	  for fields at offset 0 of a struct or union as reported
	  on 2005-07-07 in the developer mailing list.

2005-07-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmem.c: fixed bug 1238386

2005-07-12 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added labelrefcounting for peepholes
	  (patch #1144962), added peephole 300, enabled 259.x
	* doc/sdccman.lyx: removed screenshot and provided link instead

2005-07-05 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: added section about debugging with ddd
	* doc/figures/ddd_example.eps: screenshot of debugging session

2005-07-04 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (genPointerGet): handle pointers to CONST values
	  like CODE pointers, fixes #1115683
	* src/pic/pcode.c (DoBankSelect): forget LastRegIdx during function
	  call, fixes bugs #1232211, #1228110,
	  fixed wrong casts to pCodeFlow from pCodeInstructions

2005-07-04 Raphael Neider <rneider AT web.de>

	* src/pic/gen.c (popGet): changed assert to allow for
	  bit operands
	* (popGetAddr): changed signature to provide
	  an additional index, patched all call sites
	* (genCmpEq): handle literal-like operands correctly
	* (genAddrOf): added sanity checks on __code/__data pointers
	* (genAssign): added handling of symbols from __code section
	* (gencjne): do not generate code for comparisons whose result
	  is neither stored nor used, fixes bug #1171114
	* (AccLsh, AccRsh): operate on operand instead of WREG
	* (shift{Left,Right}_Left2ResultLit): NEW, size independant
	  replacement for Shift{LR}{12}Left2Result; shift (byte/int/long)
	  by known count
	* rewrote complete shift-by-literal logic, commented unused
	  functions out
	* (genConstPointerGet): get multiple bytes (if result size > 1),
	  fixed handling of non-immediate addresses
	* (genPointerGet): handle CODE pointers like CONST pointers
	* (genpic14Code): insert C-SRC lines as Cource-pCodes
	* ({aop,op}_isLitLike): NEW, single place to decide whether an
	  operand is to be treated as a literal or not
	* (mov2w,genPcall,genCmpEq),
	  src/pic/genarith.c: use aop_isLitLike() to decide between
	  literal/register contents
	* (addSign): added missing offset
	* src/pic/gen.h: remove newline after FENTRY/FEXIT comments,
	  only emit comment in debug-mode,
	  use {aop,op}_isLitLike throughout the file
	* src/pic/glue.c: fix initializers for pointers (work in progress)
	* src/pic/pcode.c (get_op): honor index on _const symbols
	* ({reset,dump}pCodeStatistics): NEW, estimate code size
	* (dumppBlock): added pCode size estimation
	* src/pic/ralloc.c (deassignLRs,serialRegAssign,packRegisters):
	  check for IS_SYMOP before OP_SYMBOL'ing
	* fixed indentation, compacted switch-statements
	* (allocReg): find free register and allocate it instead of
	  allocating new registers all the time
	* (deassignLRs): prevent POINTER_GET's from being assigned the same
	  registers as its operands (necessary only for multibyte GETs)

2005-07-01 Raphael Neider <rneider AT web.de>

	* src/pic/gen.h: added prototypes emitpComment, popGetAddr and
	  debugging .asm-output macros FENTRY + FEXIT
	* src/pic/gen.c (Safe_vsnprintf): NEW, is there a more generic
	  way... I wonder...
	* (emitpComment): NEW, printf to pCode
	* (popGet): added assert on too large offsets, fixed PO_IMMEDIATE's
	  offset handling
	* (popGetAddr): NEW, variant of popGet to access an immediates
	  high(er) bytes instead of the n'th byte of memory they reference,
	  replaced popGet with popGetAddr where neccessary
	* (genDataPointerGet): reactivated and fixed implementation
	* (genNearPointerGet): enabled call to genDataPointerGet, fixes array-
	  accesses
	* (genDataPointerSet): fixed multibyte assignments
	* (genpic14Code): fixed --i-code-in-asm handling
	* src/pic/genarith.c: fixed PO_IMMEDIATE issue using popGetAddr,
	* (genPlus): fixed index-out-of-bounds error
	* src/pic/pcode.c (get_op): fixed PO_IMMEDIATE's index/offset handling
	* src/pic/ralloc.c: added debugging output macro FENTRY2
	* (spillThis): fixed indentation, enbraced for-body for clarity
	* (rematStr): commented out as now unused
	* (regTypeNum): commented out special spill case (overwrites
	  arbitrary values)
	* fixes bugs #1229346, #1216476 (both arrays) and #1115667 (SIGSEGV)

2005-06-30 Maarten Brock <sourceforge.brock AT dse.nl>

	* doc/sdccman.lyx: documented sfr16/sfr32,
	  added example for using storage class with function pointers
	* src/mcs51/gen.c (genPlusIncr): optimized small offsets from dptr

2005-06-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_gptrget.c: also push/pop _PSBANK, added # to 0x03
	* device/lib/_itoa.c,
	* device/lib/_ltoa.c: optimized codesize
	* src/SDCCsymt.c (checkSClass): added sanity check for sfr at addresses,
	  but don't know how to suppress the double warning.
	* src/mcs51/gen.c (genPlusIncr): fixed bug when incrementing volatile int's
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: added warning W_SFR_ABSRANGE for sanity check

2005-06-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/asexpr.c (expr): disabled warning "not in .flat24 mode",
	  fixed old K&R prototypes
	* as/mcs51/asout.c (outrb): always output as if generating 24bit addresses
	* device/lib/_gptrget.c,
	* device/lib/_gptrgetc.c,
	* device/lib/_gptrput.c: changed versions for new memory indicator values,
	  also new versions for small generic pointers and banked generic pointers
	* src/port.h: added const_name
	* src/SDCC.lex: added keywords sfr16, __sfr16, sfr32, __sfr32
	* src/SDCC.y: added tokens SFR16, SFR32 and their sfr_attributes
	* src/SDCCcse.c (findPrevIc): check all associative operators
	* src/SDCCglue.c (emitMaps): use CONST_NAME if defined
	* src/SDCCicode.h: added macro IS_ASSOCIATIVE
	* src/SDCCmem.c: updated comments,
	  set far-space to 0 for pdata, results in optimized code
	* src/SDCCmem.h: added macro CONST_NAME
	* src/SDCCsymt.h: renumerated generic pointer types GPTYPE_... thereby
	  moving the info into the highest bits, see also gptrget/gptrput
	* src/src.dsp: added sdcc.ico to project files
	* src/avr/gen.c (genCast): fixed bug 0x%d
	* src/avr/main.c (avr_port): added "CONST (CODE)" for const_name
	* src/ds390/gen.c (aopForRemat, adjustArithmeticResult): disconnected direct
	  relation between ptr_type and DCL_TYPE,
	  (genCast): fixed bug 0x%d
	* src/ds390/main.c (ds390_port, tininative_port, ds400_port): added "CONST
	  (CODE)" for const_name
	* src/hc08/gen.c (genCast): fixed bug 0x%d
	* src/hc08/main.c (_hc08_genAssemblerPreamble): added .area ...const_name,
	  (hc08_port): added "CONST (CODE)" for const_name
	* src/mcs51/gen.c (aopForSym): optimized pushing ACC,
	  (aopForRemat, adjustArithmeticResult): disconnected direct relation
	  between ptr_type and DCL_TYPE,
	  (aopGetUsesAcc, aopGet, aopPut): changed first parameter from asmop* to
	  operand* and took AOP() inside function so sfr-ness can be checked,
	  (all over): repaired calls to aopGetUsesAcc, aopGet, aopPut to comply with
	  new prototype,
	  (genFunction, genEndFunction): optimized stack setup,
	  (genMinus): optimized for literals with ending zeroes (in bytes),
	  (genCast): fixed bug 0x%d
	* src/mcs51/main.c (_mcs51_keywords): added sfr16 and sfr32,
	  (mcs51_port): added "CONST (CODE)" for const_name
	* src/mcs51/peeph.def: made rule 226 more generic
	* src/pic/main.c (pic_port): added "CONST (CODE)" for const_name
	* src/pic16/main.c (pic16_port): added "CONST (CODE)" for const_name
	* src/xa51/main.c (xa51_port): added "CONST (CODE)" for const_name
	* src/z80/main.c (z80_port): added NULL for const_name,
	  (gbz80_port): added NULL for const_name
	* support/regression/tests/bug663539.c,
	* support/regression/tests/sfr16.c: new tests

2005-06-25 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/include/mcs51/p89v51rd2.h, device/include/mcs51/at89s53.h: added.

2005-06-24 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/pic18f[68][567]20.c:
	  corrected typos...
	* device/include/pic16/signal.h: added USBIF
	  and SIG_USB

2005-06-24 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/pic18f2455.c,
	  device/include/pic16/pic18f2455.h: NEW
	* device/include/pic16/pic18fregs.h,
	  device/lib/pic16/pics.all,
	  src/pic16/device.c: added 18f2455
	* device/lib/pic16/libdev/pic18f[68][567]20.c,
	  device/include/pic16/{pic18f[68][567].h,usart.h}:
	  replaced MULTIPLE_USARTS define with more relaible
	  compatibility sfrs (for USART access)

2005-06-20 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/pcode.c : Fixed problem when a string constant contains a "\r\n"
	  and the output asm file line is printed on two lines.

2005-06-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* sim/ucsim/hc08.src/inst.cc (inst_condbranch): fixed simulation of
	  BGT, BLE, BHI, and BLS instructions
	* src/hc08/gen.c (outAcc, outBitC, outBitNV, genCmpLt, genCmpGt,
	  genCmpEq): removed
	* src/hc08/gen.c (genCmpEQorNE, genCmp, branchopCmp, nameCmp,
	  negatedCmp, exchangedCmp, genhc08Code): rewrite of comparison handling,
	  fixes bug #1216342
	* src/hc08/peeph.def: added rules 2g - 2l for new conditional branches

2005-06-15 Raphael Neider <rneider AT web.de>

	* src/pic16/NOTES: moved Vangelis from active developers to people to contact
	* device/include/pic16/{6520.h,8520.h}: fixed configuration bits
	* src/pic16/gen.c (): prevent iTemps from being considered to be in CODESPACE,
	  fixes bug #1221120; for symbols in CODESPACE get number of bytes to read from
	  OP_SYM_TYPE() instead of OP_SYM_ETYPE()

2005-06-06 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/mcs51/reg764.h: Changed PB0 to PBO as requested by
	  Marcel Telka in bug #1215704

2005-06-02 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/pcode.c : Changed pseudo stack size to 15 to allow WSAVE to be
	  located in shared memory bank.

2005-05-31 Raphael Neider <rneider AT web.de>

	* src/pic16/{gen.c,genarith.c}: replaced sign-extension
	  "CLRF, BTFSC <signbit>, DECF/COMF" with side-effect-free
	  "CLRF, BTFSC <signbit>, SETF"; fixes "long>>9"

2005-05-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_strncpy.c: fixed the fix

2005-05-26 Raphael Neider <rneider AT web.de>

	* src/pic16/glue.c (pic16_printIvalChar): fixed _constant_ string
	  initializers with \0, bug #1208187
	* src/pic/glue.c (printIvalChar): fixed (non- and constant) string
	  intializers with \0, bug #1208187

2005-05-26 Raphael Neider <rneider AT web.de>

	* src/pic16/glue.c (pic16_printIvalChar): fixed string
	  initializers with \0, bug #1208187
	* src/pic16/main.c (_process_pragma): added sanity checks
	  for stack position and size, emit warnings when appropriate

2005-05-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_strncpy.c: fixed not filling with \0

2005-05-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (funcOfType, funcOfTypeVarg, stringToSymbol,
	  createFunction),
	* src/SDCC.y (external_definition, enumerator, parameter_declaration,
	  compound_statement),
	* src/SDCCsymt.h,
	* src/SDCCsymt.c (addSymChain, processFuncArgs): fixed bug #1159134

2005-05-24 Raphael Neider <rneider AT web.de>

	* src/pic16/glue.c (pic16_printGPointerType): fixed #1207796

2005-05-24 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f{442,452,458}.h: fixed wrong
	  TRISE definitions, closes bug #1162453

2005-05-22 Raphael Neider <rneider AT web.de>

	* src/pic16/main.c (_process_pragma): check for missing
	  arguments to pragmas code and udata
	* device/include/pic16/pic18f{2550,4331,4455,4520}.h:
	  consistency fixes to match other headers (thanks to Jim Paris)
	* device/lib/pic16/libio/i2c.ignore: 18f4331 provides no I2C

2005-05-21 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCicode.c (isOperandEqual): fixed missing ;

2005-05-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bug1198642.c: new test
	* src/SDCCicode.c (isOperandEqual): fixed bug 1198642
	* src/SDCCcse.c (findPrevIc): added comment, please have a look
	* support/scripts/resource.h,
	* support/scripts/resource.rc,
	* src/src.dsp: added sdcc.ico to project as icon for sdcc.exe
	* support/scripts/sdcc.ico: added 32x32 icon

2005-05-18 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libdev/pic18f*.c,
	* device/include/pic16/pic18f*.h: updated "sfr" and "at X"
	  keywords to "__sfr" and "__at (X)"
	* device/include/pic16/pic18fregs.h: added pic18f4520
	* src/pic16/pcode.c (pic16_pCode2str): fixed (?) bug
	  #1203088 (MPLAB compatibility)

2005-05-17 Raphael Neider <rneider AT web.de>

	* device/include/pic16/pic18f{2550,4331,4455,4520}.h: NEW
	* device/lib/pic16/libdev/pic18f{2550,4331,4455,4520}.c: NEW
	* device/lib/pic16/pics.all: added new devices
	* src/pic16/device.c: added support for pic18f4520

2005-05-16 Raphael Neider <rneider AT web.de>
	* src/pic16/gen.{c,h}: s/mov2f/pic16_mov2f made public
	* src/pic16/genarith.c (genAddLit): fixed bug 1202480
	* src/pic16/pcode.{c,h} (pic16_newpCodeOpBit_simple): NEW
	  convenience function for bit access

2005-05-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c: fixed bug 1193299
	* support/regression/tests/bug1057979.c: added test %3.3s

2005-05-15 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/mcs51/8051.h,
	* device/include/mcs51/8052.h: made parseable with lint
	* device/include/mcs51/lint.h: added include file for (sp)lint
	* doc/sdccman.lyx: added doc about use of splint (syntax checking tool)
	* doc/cdbfileformat.lyx,
	* doc/test_suite_spec.lyx: hardcoded date to the date of last text change

2005-05-14 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/Makefile.common.in: add --optimize-df to OPT_FLAGS
	* device/lib/pic16/libc/stdlib/itoa.c (new)
	* device/lib/pic16/libc/stdlib/Makefile: have itoa.c built
	* device/lib/pic16/libio/Makefile: exclude subdir according to
	  ${subdir}.ignore for certain PICs (lacking e.g. i2c)
	* device/lib/pic16/libio/i2c.ignore (new): pic18f1220 has no I2C support
	* src/pic16/gen.c (genFunction): prevent annoying warning
	* src/pic16/pcode.c: renamed stack_t to dynstack_t to prevent
	  nameclashes on BeOS
	* support/cpp2/cppmain.c (cpp_output_string): new
	* support/cpp2/cpplib.c (_cpp_do__Pragma): fixed _Pragma(""),
	  fixes bug 1116802

2005-05-13 Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c (linkEdit): fixed bug 1195202

2005-05-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* .version: changed to version 2.5.1; back to bleeding edge development

2005-05-11 Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx doc/cdbfileformat.lyx doc/test_suite_spec.lyx:
	  generate PDF version 1.3 documents

2005-05-07 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* .version: changed to version 2.5.0

2005-04-27 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: updated weblinks, index and smaller updates

2005-04-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* doc/sdccman.lyx: changed version 2.5.0, documented --std-c89,
	--std-sdcc89, --std-c99, --std-sdcc99, and the corresponding #pragmas, as
	well as many smaller updates.
	* .version: changed to version 2.5.0-pre1

2005-04-26 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/SDCCmain.c (setIncludePath): added port->target to SDCC_INCLUDE_NAME

2005-04-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bug1185672.c: added
	* src/mcs51/gen.c (aopGetUsesAcc, genCpl, genAnd, genOr, genXor): fixed
	  bug 1185672
	* src/mcs51/gen.c (genCall): added comments, made it look safer
	* src/mcs51/gen.c (genEndFunction): simplified

2005-04-25 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/ralloc.c (serialRegAssign): fixed bug 1189609

2005-04-14 Borut Razem <borut.razem AT siol.net>

	* fixed bug 1045046 - SIGSEGV with really simple code?:
	  src/pic/pcode.c (pCodeInitRegisters)- pseudo stack size increased to 16
	  src/pic/ralloc.c (typeRegWithIdx) - error message on pseudo stack overflow

2005-04-14 Borut Razem <borut.razem AT siol.net>

	* src/pic16/gen.c (genInline), src/pic16/main.c (_process_pragma),
	  src/pic16/device.h: temporarily disabled experimental #inline pragma
	  for 2.5.0 release

2005-04-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/z80/stdio.h,
	* device/include/z80/string.h: removed these highly incomplete files so
	  SDCC can use the default ones in device/include/

2005-04-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (genEndFunction): removed unused variable to fix
	gcc warning.
	* device/lib/Makefile.in: default PORTINCDIR to the mcs51 subdir to
	fix sdcpp warnings.

2005-04-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/malloc.h: removed redundant __reentrant prototypes
	* device/lib/_mullong.c: added working xstack variant in asm (C version
	  doesn't pass regression tests)
	* device/lib/bpx.c: used __data and made bpx char for mcs51
	* src/SDCCast.c (decorateType): removed unused GPTYPE_IDATA,
	  (createFunction): fixed bug with xstackPtr
	* src/SDCCcse.c: corrected comments
	* src/SDCCopt.c (convertToFcall): fixed warning in MSVC,
	  (killDeadCode, eBBlockFromiCode): removed unused code
	* src/SDCCsymt.h: removed unused GPTYPE_GPTR and GPTYPE_IDATA,
	  corrected comments
	* src/mcs51/gen.c (aopForSym, aopPut, toBoolean, unsaveRegisters,
	  assignResultValue, genCall, genFunction, genEndFunction, genAnd,
	  genOr, genXor, genAddrOf): fixed several bugs concerning xstack
	  (genModOneByte): fixed warning in MSVC
	* src/mcs51/main.c (): added comments
	* src/mcs51/peeph.def: changed 129 to 129.a, added 129.b, 129.c & 129.d

2005-04-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (linkEdit): oops, changed one line too many

2005-04-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (linkEdit): fixed bug with finding crt0.o for z80

2005-04-10 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/glue.c (printIvalChar): fixed bug when emitting
	characters arrays of larger size than the declared one.

2005-04-10 Borut Razem <borut.razem AT siol.net>

	* src/pic/gen.c (genInline),
	  src/pic/pcode.c (newpCodeAsmDir), (pCode2str),
	  (genericPrint), (unlinkpCodeFromBranch), (compareLabel),
	  (findNextInstruction), (findPrevInstruction),
	  (findInstructionUsingLabel),
	  src/pic/pcode.h: fixed bug #1164907 - Labels not being recognized
	* src/pic/pcode.c (findLabel): added missing '\n'
	* src/src.dsp: added SDCCdwarf2.c to the project

2005-04-09 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added include/hc08/* h to NSIS setup

2005-04-08 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c: added helpers defmapInsertAfter (insert a new item
	  into the chain after a given one) and mergeDefmapSymbols (combine
	  defmap entries for each symbol per pcode)
	* (createDefmap): have defmap entries merged in the end
	* (defmapReplaceSymRef): split defmap entries covering two accesses to
	  a symbol before replacing one access type's symbol, merge symbols in
	  the end (replacement symbol might already have an entry)
	* (assignValnums): keep reference to written WREG intact

2005-04-08 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (struct defmap_s): named anonymous union (for
	  Alpha)

2005-04-08 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/pcode.c (pic16_get_op2): enlarged size of array b to 128
	bytes

2005-04-07 Raphael Neider <rneider AT web.de>

	* device/include/pic16/usart.h: added compatibility defines for
	  devices with more than one USART
	* device/include/pic16/pic18f[68][567]20.h: activated above defines

2005-04-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/Makefile.in: updated for port specific include

2005-04-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/ports/mcs51/spec.mk: added mcs51 include

2005-04-07 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/8051.h,
	* device/include/8052.h,
	* device/include/at89S8252.h,
	* device/include/at89c55.h,
	* device/include/at89x051.h,
	* device/include/at89x51.h,
	* device/include/at89x52.h,
	* device/include/mcs51reg.h,
	* device/include/reg51.h,
	* device/include/reg764.h,
	* device/include/regc515c.h,
	* device/include/sab80515.h: (re)moved these 12 files
	* device/include/mcs51/8051.h,
	* device/include/mcs51/8052.h,
	* device/include/mcs51/at89S8252.h,
	* device/include/mcs51/at89c55.h,
	* device/include/mcs51/at89x051.h,
	* device/include/mcs51/at89x51.h,
	* device/include/mcs51/at89x52.h,
	* device/include/mcs51/mcs51reg.h,
	* device/include/mcs51/reg51.h,
	* device/include/mcs51/reg764.h,
	* device/include/mcs51/regc515c.h,
	* device/include/mcs51/sab80515.h: and added them here

2005-04-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stdarg.h: changed SDCC specific keywords to double
	  underlined form.
	* device/include/stdint.h: changed intptr_t and uintptr_t for others than
	  mcs51 and ds390.
	* device/include/hc08/mc68hc908gp32.h,
	* device/include/hc08/mc68hc908jb8.h,
	* device/include/hc08/mc68hc908jkjl.h,
	* device/include/hc08/mc68hc908qy.h: fixed comments
	* device/include/mcs51/README: updated
	* device/include/mcs51/c8051f120.h: added PINRSF
	* device/lib/pic16/libc/stdlib/crc16.c: fixed comments
	* src/pic16/pcode.c: MSVC6 doesn't accept declaring new variables
	  amidst code. Also inline is not supported.

2005-04-06 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (pic16_pCodeReplace): also update pcflow->end
	* (createDefmap): fixed CALLs to depend on FSR1 and RETLW to restore
	  callers stack/frame pointers

2005-04-06 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* device/include/pic16/usart.h: added, missing in previous commit,
	* device/include/pic16/adc.h: fixed typo,
	* device/lib/pic16/libc/utils/cvtdec.S: added missing in previous
	commit,
	* device/lib/pic16/libc/stdlib/g_ftoa.S: modified to include
	<p18fxxx.inc>
	* device/lib/pic16/libc/stdio/streams.c: leave stdin, stdout
	uninitialized because a bug appears with gplink
	* device/lib/pic16/{some makefiles}: moved $(CSTD) from CFLAGS to
	COMPILE_FLAGS and added CPPFLAGS with -nostdinc because sdcpp
	complains for unrecognised option

2005-04-05 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_popCopyReg): made copying work for extended
	  structs as well (using memcpy)
	* (genFunction): fixed comparison, used pCodeOpLabel to reduce warning
	  on ISRs (GOTO has no label)
	* src/pic16/device.h: added OF_OPTIMIZE_DF
	* src/pic16/main.c: added compiler switch --optimize-df to enable the
	  new data flow analysis/optimization
	* src/pic16/pcode.c: added (prototypes for and implementation of)
	  dataflow analysis functions, fixed pCodeInstructions' inCond and
	  outCond values, made RCALL a branch instruction
	* (pic16_unlinkpCode): keep C line if possible
	* (pic16_pCodeUnlink): removed cast on left side of assignment, have
	  C line moved if possible
	* (pic16_getRegFrompCodeOp): NEW, improved version of...
	* (pic16_getRegFromInstruction,pic16_getRegFromInstruction2): changed
	  to use new pic16_getRegFrompCodeOp (works for more SFRs)
	* (pic16_BuildFlow): fixed skip instructions with label (did not start
	  new flow)
	* (pic16_getJumptabpCode): NEW, needed in...
	* (LinkFlow): fixed handling of jumptables, calls and conditional
	  branches
	* (pic16_InsertCommentAfter): NEW
	* (pic16_pCodeReplace): made verbose and flow preserving
	* (AnalyzeFlow): added call to data flow analysis
	* src/pic16/pcode.h: added defmaps to pCodeFlow struct
	* src/pic16/pcodeflow.h: added PCC_STATUS to mean all STATUS bits
	* src/pic16/ralloc.c (packRegsForAssign): added return 1 in the end

2005-04-03 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (decorateType): fixed bug #1105626

2005-04-02 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* device/include/asm/pic16/features.h,
	* pic18f*.h headers,
	* device/include/pic16/adc.h,
	* device/include/pic16/delay.h,
	* device/include/pic16/i2c.h,
	* device/include/pic16/malloc.h,
	* device/include/pic16/stdio.h,
	* device/include/pic16/stdlib.h,
	* device/include/pic16/string.h,
	* device/lib/pic16/libc/stdio/printf_tiny.c,
	* device/lib/pic16/libc/stdio/printf_small.c,
	* device/lib/pic16/libc/stdio/strmgpsim.c,
	* device/lib/pic16/libc/stdio/strmmssp.c,
	* device/lib/pic16/libc/stdio/strmusart.c,
	* device/lib/pic16/libc/stdio/vfprintf.c,
	* device/lib/pic16/libc/stdlib/ltoa.c,
	* device/lib/pic16/libc/stdlib/putchar.c,
	* device/lib/pic16/libc/stdlib/x_ftoa.c,
	* device/lib/pic16/libc/stdlib/memchrpgm.c,
	* device/lib/pic16/libc/stdlib/memchrram.c,
	* device/lib/pic16/libc/stdlib/memcpypgm2ram.c,
	* device/lib/pic16/libc/stdlib/memcpyram2ram.c,
	* device/lib/pic16/libio/adc/adcbusy.c,
	* device/lib/pic16/libio/adc/adcread.c,
	* device/lib/pic16/libio/adc/adcsetch.c,
	* device/lib/pic16/libio/usart/ubaud.c,
	* device/lib/pic16/libio/usart/ubusy.c,
	* device/lib/pic16/libio/usart/udrdy.c,
	* device/lib/pic16/libio/usart/uopen.c,
	* device/lib/pic16/libio/usart/uputc.c,
	* device/lib/pic16/libsdcc/gptr/gptrget1.c,
	* device/lib/pic16/libsdcc/gptr/gptrget2.c,
	* device/lib/pic16/libsdcc/gptr/gptrget3.c,
	* device/lib/pic16/libsdcc/gptr/gptrget4.c,
	* device/lib/pic16/libsdcc/gptr/gptrput1.c,
	* device/lib/pic16/libsdcc/gptr/gptrput2.c,
	* device/lib/pic16/libsdcc/gptr/gptrput3.c,
	* device/lib/pic16/libsdcc/gptr/gptrput4.c: modified all SDCC
	specific keywords to double underlined form,
	* device/lib/pic16/libc/Makefile.rules,
	* device/lib/pic16/libsdcc/Makefile.rules,
	* device/lib/pic16/libm/Makefile,
	* device/lib/pic16/libio/Makefile.rules: added CSTD macro in CFLAGS
	to compile with C standard set in Makefile.common
	* device/lib/pic16/libc/stdlib/Makefile: added new C sources
	rand.c and crc.c in compilation process,
	* device/lib/pic16/libsdcc/int/divuint.c,
	* device/lib/pic16/libsdcc/long/divulong.c: changed declaration of
	`c' from signed to unsigned,
	* device/lib/pic16/startup/crt0.c,
	* device/lib/pic16/startup/crt0i.c,
	* device/lib/pic16/startup/crt0iz.c: adopted to all SDCC specific
	keywords to double underlined form, bug fixes in _do_cinit function
	which prevented the correct initialization of the .idata segment,
	* src/pic16/pcoderegs.c (insideLRBlock): fixed a bug that caused the
	core to enter a infinite loop
	* device/lib/pic16/libc/stdlib/rand.c, crc.c: new files

2005-04-02 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (getArraySizePtr): fixed bug #1122171

2005-04-01 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/include/Makefile.in: add support for hc08 subdirectory
	* device/include/hc08/: new subdirectory
	* device/include/hc08/mc68hc908jkjl.h: new header contributed by
	Lucas Loizaga, thanks!
	* device/include/hc08/mc68hc908qy.h,
	* device/include/hc08/mc68hc908gp32.h,
	* device/include/hc08/mc68hc908jb8.h: moved hc08 register defs to
	their own directory. Changed internal macro names to use the compiler
	reserved namespace. Changed SDCC specific keywords to double
	underlined form.
	* device/include/math.h,
	* device/include/malloc.h,
	* device/include/stdarg.h,
	* device/include/stdbool.h
	* device/include/string.h,
	* device/include/tinibios.h,
	* device/include/ds400rom.h,
	* device/include/8051.h,
	* device/include/8052.h,
	* device/include/80c51xa.h,
	* device/include/at89c55.h,
	* device/include/at89S8252.h,
	* device/include/at89x51.h,
	* device/include/at89x52.h,
	* device/include/ds80c390.h,
	* device/include/reg764.h,
	* device/include/regc515c.h,
	* device/include/sab80515.h,
	* device/include/mcs51/c8051f000.h,
	* device/include/mcs51/c8051f018.h,
	* device/include/mcs51/c8051f020.h,
	* device/include/mcs51/c8051f040.h,
	* device/include/mcs51/c8051f060.h,
	* device/include/mcs51/c8051f120.h,
	* device/include/mcs51/c8051f300.h,
	* device/include/mcs51/c8051f310.h,
	* device/include/mcs51/c8051f320.h,
	* device/include/mcs51/c8051f330.h,
	* device/include/mcs51/c8051f350.h,
	* device/include/z180.h: Changed SDCC specific keywords to double
	underlined form.

2005-03-31 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/device.c (Pics16[]): added devices 18F2550, 18F4331,
	18F4455,
	* (pic16_assignConfigWordValue): disable testing of configuration
	register value with config mask,
	* src/pic16/gen.c (pic16_testStackOverflow): prefix stack test
	function with port->fun_prefix,
	* (genFunction): when generating a naked interrupt function never
	create an absolute segment placed in interrupt vector address, place
	the actual interrupt function at IVA instead, when an interrupt
	function is generated with unspecified interrupt then do not create
	the absolute section,
	* (genGenPointerGet, genGenPointerSet, genPackBits): replace all
	code for generating a call to generic pointer get/put function with
	a call to function pic16_callGenericPointer(),
	* src/pic16/genutils.c (pic16_callGenericPointerRW): NEW, generates
	the call to the generic pointer get/put functions with prefixing the
	function name with port->fun_prefix,
	* src/pic16/glue.c (pic16glue): ifdef-out test of OF_LR_SUPPORT,
	* src/pic16/main.c (_process_pragma): prefix function with
	port->fun_prefix,
	* (_pic16_finaliseOptions): define macro __18Fxxxx macro when
	calling assembler, old 18Fxxxx macro is deprecated,
	* src/pic16/pcode.c (unlinkpCodeFromBranch): added PC_INLINE and
	PC_ASMDIR in while condition,
	* (findInstruction): add PC_ASMDIR in while condition,
	* (buildCallTree): prefix main with port->fun_prefix,
	* (pic16_pCode2str): fixed bug that didn't emit the memory access
	identifier for variable with banked access in instructions BTFSS,
	BTFSC, BCF, BSF, BTG
	* (AnalyzeFlow): moved call to OptimizepCode to pic16_AnalyzeBanking,
	* src/pic16/pcodepeep.c (pCodeOpCompare): increase size of b to 1024,
	* src/pic16/pcoderegs.c (pic16_pCodeRegoptimizeRegUsage): don't
	perform optimization when enviroment variable NO_REG_OPT is set,
	* (insideLRBlock): NEW, return 1 if register is inside an
	INF_LOCALREGS block,
	* (RemoveRegFromLRBlock): remove a register that is completely
	eliminated by register optimization, but it is still left in local
	register store/restore in/from stack block,
	* (Remove2pcodes): after removing register, check to see if it
	should be removed from local register store/restore in/from stack
	block,
	* src/pic16/ralloc.c (pic16_decodeOp): added decode for
	DUMMY_READ_VOLATILE,

	* device/include/pic16/adc.h: minor prototype modifications and
	update,
	* device/include/pic16/malloc.h: added GPL notice various
	modifications,
	* device/include/pic16/stdint.h: NEW, standard header for ints
	* device/include/pic16/delay.h: NEW, header for delay functions,
	delay10tcy, delay100tcy, delay1ktcy, delay10ktcy, delay100ktcy,
	delay1mtcy,
	* device/include/pic16/signal.h: NEW, header providing helper macros
	for implementing signal handlers,
	* device/include/pic16/stdio.h: added prototypes for functions,
	printf, vprintf, sprintf, vsprintf, fprintf, vfprintf. Added
	prototypes for stdin and stdout, added macro PUTCHAR to
	automatically implement putchar function prototype,
	* device/include/pic16/usart.h: modified and updated USART library,
	* device/lib/pic16/libio/adc/,
	* device/lib/pic16/libio/i2c: some modifications to improve library
	performance,
	* device/lib/pic16/libc/stdio/: modifications for the new printf*
	family of functions,
	* device/lib/pic16/libc/stdlib/: various modifications in the malloc
	family of functions and other sources,
	* device/lib/pic16/libio/usart/: NEW, c sources for the usart module
	of the PIC18Fxx[28] devices,
	* device/lib/pic16/libc/delay/: NEW, c sources for the delay functions,
	* device/lib/pic16/libc/utils/: minor modifications in the .S sources,
	* device/lib/pic16/startup/{crt0i.c, crt0iz.c}: redesign of the
	_do_cinit function, because the previous failed when local variables
	where not placed in the same memory bank,
	* device/lib/pic16/libsdcc/char/: various modifications to improve
	library performance,
	* doc/sdccman.lyx: some reorganization of the PIC16 part, added many
	information on the new functions of the c library and more...

2005-03-28 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCBBlock.c (iCodeBreakDown): fixed bug #1170212

2005-03-26 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genSkipc): fixed semantics (execute branch
	  if condition == CARRY)
	* (genCmp): adapted to new genSkipc semantics
	* src/pic16/genutils.c (pic6_genCmp_special): removed side effect
	  on rIfx (genCmp was broken)

2005-03-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCmain.c (setDefaultOptions, optionsTable[], parseCmdLine),
	* src/z80/main.c (_keywords[]),
	* src/SDCCglobal.h (struct options),
	* src/SDCC.y,
	* src/SDCC.lex (isTargetKeyword, doPragma, pragma_tbl[]): new pragmas
	to enable/disable SDCC and C99 extensions/keywords (std_c89, std_sdcc89,
	std_c99, std_sdcc99). Also, equivalent command line options (--std-c89,
	--std-sdcc89, --std-c99, --std-sdcc99). SDCC specific keywords are
	always available in leading double underscore form. The C99 support is
	mostly missing, but it's a start.
	* support/regression/tests/bug-227710.c: fixed nonconforming use of
	reserved identifier "__data".

2005-03-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/peeph.def: fixed bug 1170013

2005-03-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51reg.h: fixed bug 842007

2005-03-21 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcflow.c (dfNumCompare): committed the wrong version of this
	last time.

2005-03-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/port.h (struct PORT),
	* src/avr/ralloc.c (avr_assignRegisters),
	* src/avr/main.c,
	* src/ds390/ralloc.c (ds390_assignRegisters),
	* src/ds390/main.c,
	* src/hc08/ralloc.c (hc08_assignRegisters),
	* src/hc08/main.c,
	* src/mcs51/ralloc.c (mcs51_assignRegisters),
	* src/mcs51/main.c,
	* src/pic/ralloc.c (pic14_assignRegisters),
	* src/pic/main.c,
	* src/pic16/ralloc.c (pic16_assignRegisters),
	* src/pic16/main.c,
	* src/xa51/ralloc.c (xa51_assignRegisters),
	* src/xa51/main.c,
	* src/z80/ralloc.c (z80_assignRegisters),
	* src/z80/ralloc.h,
	* src/SDCCopt.c (eBBlockFromiCode, replaceRegEqv, killDeadCode),
	* src/SDCCcse.c (ifxOptimize, cseBBlock, cseAllBlocks),
	* src/SDCCcse.h,
	* src/SDCCdflow.c (computeDataFlow),
	* src/SDCCdflow.h,
	* src/SDCCloop.c (addDefInExprs, loopInvariants, loopOptimizations),
	* src/SDCCloop.h,
	* src/SDCCcflow.c (*),
	* src/SDCCcflow.h,
	* src/SDCCBBlock.c (iCodeBreakDown, dumpEbbsToFileExt, eBBWithEntryLabel),
	* src/SDCCBBlock.h (struct ebbIndex): new struct that keeps two copies
	of the eBBlock list, sorted by both bbnum and dfnum. (fixes bug with
	immedDom() returning wrong block; probably fixes bug #1160833)

2005-03-20 Borut Razem <borut.razem AT siol.net>

	* support/scripts/inc2h.pl: WIN32 port

2005-03-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/makefile.in: added abs.c and labs.c

2005-03-17 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stdint.h: added
	* device/lib/abs.c: added
	* device/lib/labs.c: added
	* device/include/stdlib.h: added abs() and labs() prototypes
	* device/lib/libsdcc.lib: added abs and labs
	* device/include/float.h,
	* device/lib/_fsmul.c,
	* device/lib/printf_fast.c,
	* device/lib/printf_tiny.c: updated comments

2005-03-16 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeSwitch, geniCodeJumpTable): fixed
	bug #1164313

2005-03-16 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcse.c (cseBBlock): retain assignment to self when volatile
	* src/SDCCast.c (isLoopCountable): fixed bug #1161985

2005-03-15 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c: removed inline assembly for portability and
	  readability. Use printf_fast if speed or size are more important.
	* src/pic16/gen.c: removed conditions around use of DEBUGpc
	* src/pic16/genutils.h: added define for DEBUGpc for MSVC

2005-03-15 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/pic16/genutils.c (pic16_genCmp_special): initialized offs to
	prevent compiler warning

2005-03-14 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* device/lib/pic16/startup/crt0i.c (_cinit): local variables where
	moved to level 0 and declared as static. Also they are explicit
	placed in access bank. This was necessery because some times they
	might cross memory bank boundaries. crt0iz.c is *NOT* updated!!!
	* src/pic16/device.h: added flag OPTIMIZE_CMP to enable some compare
	optimizations. Currently only compare to unsigned char is implemented,
	* src/pic16/gen.c: added fReturnIdx array,
	* (struct resolvedIfx) is moved to gen.h and made public,
	* (struct _G): added sregsAlloc and sregsAllocSet fields,
	* (aopForSym): added an optimization to directly store in stack of
	the operand of a SEND iCode,
	* (pic16_aopOp): don't return return registers as strings (AOP_STR)
	but as registers instead (AOP_REG) using the fReturnIdx array,
	* (pic16_freeAsmop): remove the freed register from the
	_G.sregsAlloc field,
	* (pic16_aopGet): in case AOP_STR, the compare to 'a' is changed to
	a compare of 'WREG',
	* (pic16_popGetTempRegCond): changed function prototype, now
	function takes also a bitVector argument v which holds the current
	set of registers that are allocated for stack access by aopForSym,
	registers allocated in aopForSym for accessing stack symbols are not
	any more part of the functions usedRegs field,
	* (genCall): some times aopOp is called for a stack variable to be
	send, aopForSym might perform the push, if this is true make sure
	that genCall doesn't push the variable twice by testing _G.resDirect,
	* (genFunction): changed testing for unspecified interrupt number
	from 256 to INTNO_UNSPEC,
	* modified selection scheme of frame pointer generation. Previously
	if function did use local registers a frame pointer was generated,
	now a frame pointer is generated only if function has arguments
	(that need PLUSW2 register access), or has stack arguments, or the
	compiler is not instructed to omit the frame pointer,
	* (genEndFunction): before restoring local registers that were saved
	in the function preamble, also restore the registers that *might*
	have been allocated for stack access,
	* (genRet): removed some old comments,
	* (genCmp, the active (RN's) version): added a call to the
	pic16_genCmp_special function to perform the compare with a more
	robust and optimized way,
	* (genInline): a feature has been added in inline code generation,
	which allows a wildcard variable substitution when writing inline
	assembly. Code is incomplete and experimental therefore undocumented,
	* (genCast): changed order of aopOp for result and right to allow
	aopForSym to directly load the result if possible,
	* src/pic16/genutils.c (selectCompareOp, pic16_genCmp_special): NEW,
	perform an optimized compare on some selected special occasions,
	* src/pic16/genutils.h: declaration of resolvedIfx structure from gen.c,
	* src/pic16/glue.c (pic16createInterrupVect): make sure we never
	generate an IVT any more,
	* src/pic16/main.c (pic16_optionsTable): added command line option
	--optimize-cmp,
	* (_pic16_initPaths): when calling C preprocessor define pic18fXXXX
	macro too, when calling assembler define pic18fXXXX *and* __18Fxxxx
	macros,
	* src/pic16/NOTES: Raphael Neider added in list of active developers
	* src/pic16/pcode.c (OPT_TYPE_STR): added strings jumptable_begin and
	jumptable_end to prevent bug #,
	* (pic16_pciADDWFC, ADDFWC, COMF, CLRF): added some missing flags in
	inCond and outCond fields,
	* src/pic16/pcoderegs.c (pCodeOptime2pCodes): add a fix for bug #,
	* src/pic16/ralloc.c (serialRegAssign): explicit set willCS to 0 to
	turn off register spilling,
	* (packRegsForOneUse): synced with other ports' versions although it
	is not used currently,
	* (pic16_packRegisters): added an optimization while reading
	structure bitfields, some registers may be saved (malloc code is
	decreased by 80 bytes)

2005-03-12 Vangelis Rokas <vrokas AT users.sourceforge.net>

	* src/SDCCcse.c (cseBBlock): inside 'do operand lookup' loop test if
	left is a bitfield, if yes, then don't optimize assignment. Perhaps
	this can be optimized more?

2005-03-10 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (pic16_loadFSR0, genPackBits, genUnpackBits,
	  genNearPointerGet): (hopefully) fixed access to bitfields via
	  pointers (p->bitN = x; and x = p->bitN; failed)

2005-03-09 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast.c: fix leading zero format, eg "%02d"

2005-03-09 Raphael Neider <rneider AT web.de>

	* src/SDCCopt.c (killDeadCode): fixed bug #1156016

2005-03-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCicode.h: moved CRITICAL and ENDCRITICAL from SKIP_IC2 to SKIP_IC
	* src/mcs51/ralloc.c (willCauseSpill): added check for REG_BIT type,
	  (regTypeNum): set REG_BIT type if necessary
	* src/mcs51/ralloc.h: added define REG_BIT, used to fix bug 1144613
	* support/regression/tests/critical.c: check bug 1144613

2005-03-02 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genRightShiftLiteral): fixed bug #1154256

2005-02-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/avr/ralloc.c (serialRegAssign),
	* src/ds390/ralloc.c (serialRegAssign),
	* src/hc08/ralloc.c (serialRegAssign),
	* src/mcs51/ralloc.c (serialRegAssign),
	* src/pic/ralloc.c (serialRegAssign),
	* src/pic16/ralloc.c (serialRegAssign),
	* src/xa51/ralloc.c (serialRegAssign),
	* src/z80/ralloc.c (serialRegAssign): fixed bug #1105154

2005-02-22 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (decorateType): fixed bug 1124787

2005-02-20 Hubert Sack <sack AT digiplan.de>
	committed by Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added peepholes 3.h-k and 132.a-f from
	patch #1121755

2005-02-20 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCCpeeph.def: new keyword "labelRefCountChange" which allows peepholes
	to keep the correct label reference count when adding/removing references
	to labels. A peephole file using this is appended to patch #1144962.

2005-02-14 Raphael Neider <rneider AT web.de>

	* device/lib/pic16/libc/string/memccpy.c: changed 3rd argument to char
	* src/SDCC.lex (process_pragma): fixed to make disable_warning work for PIC16
	* src/pic16/gen.c (aopForSym, calls to pic16_aopOp): prevent unneccessary
	  retrievals of result operand's value on assignment

2005-02-13 Vangelis Rokas <vrokas AT otenet.gr>

	* device/include/pic16/string.h: modified prototype for memccpy()
	to memccpy(void *, void *, char, size_t)
	* src/pic16/gen.c (genFunction, genEndFunction): reenable if-case to
	check whether to omit frame pointer or not,
	* (genInline): convert all occurences of "\n" to LF in inline
	assembler blocks, this helps formatting the inline text,
	* (pic16_loadFSR0): modified prototype,
	* (genNearPointerGet, genNearPointerSet): reorganization of code,
	removed some 8051 legacy code,
	* (genPackBits): enabled handling bitfields exceeding one byte in size,
	* src/pic16/ralloc.c (pic16_assignRegisters): clear dynrIdx variable
	before allocating temporary registers in functions,

2005-02-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bitvars.c: corrected the "fix"

2005-02-10 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/bitvars.c,
	* support/regression/tests/bitwise.c,
	* support/regression/tests/rotate.c: "fixed" problems on Alpha

2005-02-10 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.c (assignToSameBank) : fixed cast to pointer of
	  different size for Alpha
	* src/pic16/gen.c (genCmpEq) : improved compare with 0

2005-02-09 Raphael Neider <rneider AT web.de>

	* src/SDCC.lex(doPragma) : save and restore warning options as well
	  (also added new stack plus clone- and copyAndFreeSDCCERRG())
	* have #pragma less_pedantic set the errorlevel to WARNING
	  (fixes #1117001)
	* (cloneOptimize) : fixed wrong malloc's size
	* support/Util/SDCCerr.[ch] : made SDCCERRG globally accessible to
	  facilitate correct handling of #pragma (save|restore)

2005-02-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c: removed non-standard C nameless struct/union

2005-02-04 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/gen.c : Fix for bugs #1080519 & #1115662.

2005-02-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/c8051f120.h: added declarations for sbit port 2,3&4

2005-02-02 Raphael Neider <rneider AT web.de>

	* src/SDCCast.c (processParms): disabled W_NONRENT_ARGS for pic16 port
	* src/pic16/gen.c (aopForSym): reenabled special case for function pointers
	* (pic16_storeForReturn): fixed to allow returning function pointers
	* (genPackBits): improved accessing full bytes, implemented for GPOINTERs
	* device/include/pic16/{stddef.h,stdbool.h}: added

2005-02-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51/c8051f040.h: added define CPT2_PAGE

2005-02-01 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic16/pic16.dsp : Added file graph.c to make it compile under windows
	* src/pic16/Makefile.bcc : Do not use this file but added file graph.c as it
	 appeared to be required

2005-01-31 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added include/asm/ds390, include/asm/mcs51,
	  include/mcs51 and include/z80 directories to the package

2005-01-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genFunction): fixed bug #1112752

2005-01-30 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: adapted peephole 258.x to changed gen.c (genAnd)

2005-01-29 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c (genAnd): accessing LSB/MSB by rotating acc

2005-01-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/Makefile.in: create/copy mcs51 and z80 include subdirs

2005-01-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/c8051fxxx.h: removed these 6 files
	* device/include/mcs51/c8051fxxx.h: added these 11 new files

2005-01-26 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genAssign): fixed assignment from longs
	  in codespace (were cut to three bytes)
	* (genDummyRead): implemented (except for CODESPACE...),
	  fixed bug #1108575
	* src/pic16/glue.c (emitStatistics): beautified
	* device/lib/pic16/libm/Makefile: added include path

2005-01-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (aopPut): fixed bug #1103902

2005-01-25 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/lib/expf.c: fixed bug #1095792

2005-01-24 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/pic16/libm: added Math library sources

2005-01-24 Raphael Neider <rneider AT web.de>

	* src/pic16/pcode.h: added second memory operand to pCodeOpReg
	  to enable upcast to pCodeOpReg2 (there is no type tag to
	  differenciate the two and pic16_popGet2p cast into PCOR2)
	* src/pic16/main.c (_process_pragma): fixed another malloc bug
	  (sizeof(sectNames) changed to sizeof(sectName))
	  Both patches fix segfaults under MinGW.

2005-01-23 Raphael Neider <rneider AT web.de>

	* src/pic16/{device.c,pcode.c}: s/free/Safe_free/g for
	  Safe_[mc]?alloc()'ed variables
	* src/pic16/gen.c (pic16_aopOp,pic16_popGet): added handling
	  of (byte sized) temporaries (assign them to WREG for now)
	* src/pic16/main.c (_process_pragma): fixed nasty malloc bug
	  (used sizeof(set *sectSyms) instead of sizeof(struct sectSym)),
	  this might fix SIGSEGVs on MinGW...
	* src/SDCCopt.c (killDeadCode): restored original behaviour
	  (volatile operands might get thrown away though)

2005-01-23 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c: fixed bug #1106975,
	* src/pic16/gen.c: fixed possible bug #1102572, now during TOS
	pointer update, INTCON is saved, global interrupts are disabled and
	restored after updateing TOS.
	* src/SDCC.y, src/SDCC.lex, src/SDCCsymt.c, src/SDCCsymt.h:
	* added function attribute 'shadowregs' to take advantage of shadow
	registers,
	* added function attribute 'wparam' as an alternative to the wparam
	pragma,
	* support/Utils/SDCCerr.[ch]: added error E_SHADOWREGS_NO_ISR when
	user declares a non-ISR function as 'shadowregs',
	* doc/sdccman.lyx: updated to reflect recent changes of pic16 port

2005-01-22 Vangelis Rokas <vrokas AT otenet.gr>

	* .version: bumped version number to 2.4.8
	* device/lib/pic16/pics.all: list of PIC18F devices supported by
	pic16 port,
	* device/lib/pic16/libio/i2c/: I2C module support library,
	* device/include/pic16/i2c.h: I2C support library header,
	* device/lib/pic16/libc/stdio/: standard IO support sources,
	* (printf_small.c): printf_small() source, supports float print,
	* (printf_tiny.c): printf_tiny() source, does not support floats,
	* device/lib/pic16/Makefile.common.in: added OPT_FLAGS macro to
	enable global optimizations for entire library source, other
	Makefiles in the source tree are also modified to reflect this,
	* device/lib/pic16/libc/stdlib/putchar.c (putchar): dummy putchar()
	function,
	* doc/sdccman.lyx: updated to reflect new changes,
	* src/pic16/gen.c (aopForSym): don't handle sym->iaccess in
	sym->onStack if-case,
	* src/pic16/main.c (_pic16_keywords): commented out keywords bit,
	sbit, idata, _idata, xdata, _xdata,
	* added pragma library, to link an external library, (see doc),
	* removed command line options, --pomit-config-words, --pomit-ivt,
	--pleave-reset-vector,
	* (pic16_finaliseOptions): when define macro SDCC_MODEL_{SMALL/LARGE}
	when calling assembler to reflect memory model used, also define
	macro STACK_MODEL_{SMALL/LARGE} when compiling and assembling to
	reflect stack model used,
	* src/pic16/ralloc.c (pic16_allocDirReg): when operand is allocated
	on stack return NULL,

2005-01-22 Daniel Winkler <post AT danielwinkler.de>

	* src/SDCCopt.c (killDeadCode): do not throw iCodes away if one
	  of the operands is volatile. Fixes #1020220

2005-01-22 Daniel Winkler <post AT danielwinkler.de>

	* src/pic16/pcoderegs.c (pCodeOptime2pCodes): reenabled optimization
	* (OptimizeRegUsage): make sure that there is really no other flow where
	  the first pCode is used

2005-01-22 Raphael Neider <rneider AT web.de>

	* src/pic16/pcoderegs.c (pCodeOptime2pCodes): disabled optimization
	  to fix #1106967 (pCode->seq are not set up correctly)

2005-01-22 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCglue.c (glue): make sure code area is declared before the
	static initialization area.

2005-01-21 Raphael Neider <rneider AT web.de>

	* device/lib/Makefile.in: fixed test for pic16 install dir
	* device/lib/pic16/*/Makefile*: modified compile flags to enable
	  optimizations
	* doc/sdccman.lyx: updated banksel optimization, removed --flr-support and
	  added --optimize-goto compiler switch and pragma wparam documentation
	* src/pic16/pcode.c (pic16_OptimizeBanksel): removed statistics dump
	* src/pic16/pcodepeep.c (pic16_pCodeOpCopy): fixed copying of WREG, PRODL
	  and PRODH closing bug #1071770 (peephole optimizer)

2005-01-19 Raphael Neider <rneider AT web.de>

	* src/SDCCglobl.h: ensure that PATH_MAX >= 2048 to guarantee
	  cmdLine buffers (used when calling sdcpp...) are large enough
	  (MAX_PATH=256 truncates arguments leading to system halts when
	  used in MinGW...)
	* src/pic16/gen.c (pic16_sameRegs): relaxed size criterion
	* (genUminus): rewritten to for efficiency
	* (genNearPointer[GS]et): enforce reloading of FSR0 (was still
	  used uninitialized in some cases)
	* (genCast): upcasting a 16bit int to a 24bit GPOINTER may not
	  copy the third byte from the int -- now assumes 0x80 (data memory)
	* src/pic16/genarith.c (pic16_genPlus): fixed bug when swapping
	  operands (genAddLit expects the iCode's operands to swapped as
	  well), fixed leftover bytes (crashed for short left operands)
	* (pic16_genMinusDec): performance improvements, removed false
	  PIC14 emitSKPNCs
	* (pic16_genMinus): fixed to cope with differently sized operands
	* src/pic16/glue.c (pic16_glue): added new banksel optimization
	  for --obanksel > 1
	* src/pic16/pcode.c: implemented (first phase of) banksel optimization
	* src/pic16/graph.[ch]: implementation of directed graphs, used by
	  new banksel optimization
	* src/pic16/pcoderegs.c (pCodeRegMapLiveRangesInFlow): prevented
	  analysis for temporary registers (segfaults...)
	* src/pic16/peeph.def: added rule

2005-01-18 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/pic16/libc/stdlib/x_ftoa.c: it defines x_ftoa function
	which converts a float number to its ASCII representation
	* device/lib/pic16/libc/utils/cnvfrac.S,cnvint.S: support
	functions to convert the fractional and integer part of a float to ASCII,
	* device/lib/pic16/libc/stdlib/(calloc.c,free.c, malloc.c,
	realloc.c): added _MALLOC_SPEC to explicit place variables in data
	ram
	* device/include/asm/pic16/features.h: added _CODE, _DATA, _AUTOMEM,
	_STATMEM macros,
	* device/include/pic16/adc.h: added GPL info,
	* src/pic16/gen.c (genIfxpCOpJump): perform an genIfxJump but using
	a pCodeOp as tested operand,
	* (genNearPointerGet): optimized bit testing, does not use
	intermediate register for bit value, test directly instead with
	BTFSS, BTFSC, works only for single bits,
	* (genpic16Code): dump the name of the iCode in the asm,
	* src/pic16/ralloc.c (decodeOp): removed static declaration and
	renamed to pic16_decodeOp,
	* (serialRegAssign): do not allocate a temporary register for iCode
	sequences that test a single bit for 1/0

2005-01-12 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/pcode.[ch]: introduced pic16_stackpnt_*,
	pic16_framepnt_*, pic16_stack_*, pic1_frame_* pointer variables to
	access stack and frame pointers. They are initially assigned to
	point at pic16_pc_fsr1[lh] and pic16_pc_fsr2[lh] variables and other
	accessing SFRs. Updated all occurences of modification of stack or
	frame pointer in gen.c and pcode.c,
	* src/pic16/ralloc.c (serialRegAssign): fixed two bugs with
	assigning of a literal value to pointers,
	* src/pic16/main.c (pic16_finiliseOptions): set pre-processor define
	flag STACK_MODEL_SMALL or STACK_MODEL_LARGE according to the model
	selected

2005-01-11 Vangelis Rokas <vrokas AT otenet.gr>

	* doc/sdccman.lyx: update documentation about stack pragma, added
	some info for stack memory models

2005-01-08 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/pic16/gen.c (DEBUGpc): MSVC 6 does not support macro variable arguments

2005-01-08 Raphael Neider <rneider AT web.de>

	* src/pic16/device.c (pic16_dump_usection): changed naming scheme for
	  udata sections to fix bug #1097823

2005-01-05 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genGenericShift): added handling of differently
	  sized left operand and result

2005-01-04 Raphael Neider <rneider AT web.de>

	* src/pic16/gen.c (genIfxJump): fixed inverted skips on CARRY
	* (genIfx): fixed (?) read from uninitialized SPIL_LOC (now assumes CARRY
	  to hold the condition bit)
	* added new version of genCmp (old code available via #define)
	* added new version of genShiftLeft/genShiftRight in a generic
	  way, now supports shifting by negative values
	* (genLeftShiftLiteral, genRightShiftLiteral): use absolute value of
	  shiftCount (expected by genGenericShift)
	* src/pic16/genarith.c (genPlus): added code for adding CARRY+literal
	* src/pic16/pcode.c (pic16_OptimizeJumps): removed annoying statistics
	  dump
	* (pic16_newpCodeOpLit): changed to cast to unsigned char (as e.g. -32766
	  is an invalid literal too...)

2005-01-04 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (aopForSym, genEndFunction): applied some fixes
	from Raphael Neider,
	* src/pic16/pcode.c (pic16_newpCodeOpLit): removed casting to char
	for 8-bit literals. This fixes some literal operands which are sign
	extended to 16-bits ints when instruction needs only 8-bits.

2004-12-31 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/logf.c: added mcs51 assembly version
	* device/lib/expf.c: added mcs51 assembly version
	* device/lib/_logexpf.c: new shared asm code for expf and logf
	* device/include/math.h: add defines for assembly math library
	* device/lib/Makefile.in: build new _logexpf.c
	* device/lib/libfloat.lib: use new _logexpf.c

2004-12-29 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/device.c
	* src/pic/pcode.c : adjusted internal stack and pre-allocated registers for
	  device types which have less than 0x7f registers.

2004-12-29 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/genarith.c : Fixed problem with subtraction where the result would not be updated when borrowing.

2004-12-28 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast.c: only build on supported arch.
	* device/lib/printf_tiny.c: only build on supported arch.
	* device/lib/printf_fast_f.c: only build if asm float lib
	* device/lib/_fsget1arg.c: only build if asm float lib
	* device/lib/_fsget2args.c: only build if asm float lib
	* device/lib/_fsnormalize.c: only build if asm float lib
	* device/lib/_fsreturnval.c: only build if asm float lib
	* device/lib/_fsrshift.c: only build if asm float lib
	* device/lib/_fsswapargs.c: only build if asm float lib
	* device/include/stdio.h: don't provide print_fast,
	  print_fast_f, print_tiny prototypes if --xstack used

2004-12-28 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/sincosf.c (sincosf): don't invert bit/bool by ~
	* support/regression/ports/mcs51-stack-auto/spec.mk: added new _fs.. files
	  to the SOURCES

2004-12-28 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast_f.c: same as printf_fast, but
	  with floating point enabled
	* device/lib/printf_fast.c: minor tweaks
	* device/include/stdio.h: add printf_fast_f

2004-12-27 Paul Stoffregen <paul AT pjrc.com>

	* src/SDCCmain.c: make --float-reent default for mcs51
	* device/lib/_fsadd.c: added mcs51 assembly version
	* device/lib/_fssub.c: added mcs51 assembly version
	* device/lib/_fsmul.c: added mcs51 assembly version
	* device/lib/_fsdiv.c: added mcs51 assembly version
	* device/lib/_fseq.c: added mcs51 assembly version
	* device/lib/_fsneq.c: added mcs51 assembly version
	* device/lib/_fsgt.c: added mcs51 assembly version
	* device/lib/_fslt.c: added mcs51 assembly version
	* device/lib/_fscmp.c: shared code for fseq,fsgt,fslt,fsneq
	* device/lib/Makefile.in: add _fscmp to build
	* device/lib/libfloat.lib: add _fscmp to build

2004-12-27 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/_fs2slong.c: added mcs51 assembly version
	* device/lib/_fs2sint.c: added mcs51 assembly version
	* device/lib/_fs2schar.c: added mcs51 assembly version
	* device/lib/_fs2ulong.c: added mcs51 assembly version
	* device/lib/_fs2uint.c: added mcs51 assembly version
	* device/lib/_fs2uchar.c: added mcs51 assembly version
	* device/lib/_slong2fs.c: added mcs51 assembly version
	* device/lib/_sint2fs.c: added mcs51 assembly version
	* device/lib/_schar2fs.c: added mcs51 assembly version
	* device/lib/_ulong2fs.c: added mcs51 assembly version
	* device/lib/_uint2fs.c: added mcs51 assembly version
	* device/lib/_uchar2fs.c: added mcs51 assembly version
	* device/include/float.h: added #define to select asm vs c

2004-12-26 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast.c: improvements to float output
	* device/include/float.h: add defines for assembly float library
	* device/lib/_fsget1arg.c: receive 1 float arg
	* device/lib/_fsget2args.c: receive 2 float args (reentrant)
	* device/lib/_fsnormalize.c: normalize a float
	* device/lib/_fsreturnval.c: return float, various helper routines
	* device/lib/_fsrshift.c: right shift a float's mantissa
	* device/lib/_fsswapargs.c: swap 2 floats
	* device/lib/Makefile.in: build these 6 new files for mcs51
	* device/lib/libfloat.lib: add these 6 files to the library

2004-12-26 Borut Razem <borut.razem AT siol.net>

	* sim/ucsim/avr.src/arith_inst.cc: fixed bug #1088372- savr is not
	  built by gcc 3.4.2

2004-12-25 Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_tiny.c: printf for mcs51 in only 267 bytes,
	  and fully reentrant and register bank neutral.
	* device/lib/printf_fast.c: added float (not enabled by default),
	  added compact/slower integer (also not enabled by default),
	  improved size/speed of fast integer code, other minor changes
	* device/include/stdio.h, device/lib/Makefile.in,
	  device/lib/libsdcc.lib: integrate printf_tiny into mcs51 build

2004-12-24 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/pic16/pcode.c: declaring variables other than at the start of a
	  block is not supported in C by VC6.

2004-12-22 Vangelis Rokas <vrokas AT otenet.gr>

	* applied a previous patch from Raphael Neider that wasn't included
	in the previous commits, which fixes infinite loops within jumptable
	improvements,
	* made some fixes that previous patches introduced

2004-12-21 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (pic16_aopGet): applied fix from Raphael Neider
	that fixes an issue with AOP_PCODE asmop's offset,
	* (pic16_popCopyReg): update instance field too,
	* (mov2w): modified to pic16_mov2w because it conflicts with mov2w
	function of pic port,
	* (genCmp, genAnd, genAssign),
	* src/pic16/genarith.c (genAddLit): some fixes from Raphael Neider,

2004-12-20 Vangelis Rokas <vrokas AT otenet.gr>

	* src/SDCCast.c (gatherAutoInit): allow pic16 to emit static
	variables initial values to idata section,
	* src/SDCCicode.c (geniCodeCall): patch from ### to fix unreferenced
	variables in some functions. This utilizes parmBytes field of iCode
	structure to hold the offset of the variable in stack. (might be
	able to use the stack field too?)
	* applied patch from Raphael Neider # ### , # ###
	* src/pic16/glue.c (pic16emitRegularMap): fix to print static
	variable initial values in idata section,
	* src/pic16/ralloc.c (pic16_allocDirReg): don't allocate register
	for static variables with initial value
	* src/device/lib/pic16/libsdcc/float/ulong2fs.c (__ulong2fs):
	applied fix in while loop from Raphael Neider.

2004-12-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/ds390/gen.c (genCpl): fixed bit=~(char/bit) bugs, added warning
	* src/ds390/main.c (_ds390_regparm): don't pass bit params in registers
	* src/ds390/ralloc.c (serialRegAssign): spill bits
	* src/mcs51/gen.c (genCpl): fixed bit=~(char) bugs, added warning
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: added warning W_COMPLEMENT for using bit=~(bit)
	* support/regression/tests/bitvars.c: added tests for bitwise complement(~)
	* support/regression/tests/bitwise.c: added test for bitwise complement(~)

2004-12-09 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/sdcc-lib.h: inserted LGPL, added includes
	  asm/ds390/features.h and asm/mcs51/features.h
	* device/include/asm/default/features.h,
	* device/include/asm/gbz80/features.h,
	* device/include/asm/z80/features.h: added empty _AUTOMEM
	  and _STATMEM
	* device/include/asm/ds390/features.h,
	* device/include/asm/mcs51/features.h: added files with defines for
	  _AUTOMEM and _STATMEM indicating automatic and static storage class
	* device/lib/printf_large.c (_print_format): optimized & used _AUTOMEM
	* doc/sdccman.lyx: version 2.4.7, updated xstack documentation
	* src/SDCCicode.c (geniCodeCast),
	* src/SDCCsymt.c (compareType): allow cast of data-ptr to idata-ptr
	* src/SDCCloop.c (loopInduction): removed unused variable lr
	* src/SDCCopt.c (convilong, convertToFcall): moved "easy special case"
	  to convertToFcall to include char modulo (RFE 1065037), added check
	  if left operand is unsigned and use abs of literal value
	* src/SDCCpeeph.c (setFromConditionArgs): removed double quotes option
	  as it doesn't work after conversion from peephole.def to peephole.rul
	* src/mcs51/gen.c (toBoolean): added check for size,
	  (genModOneByte): optimized code for signed char modulo a literal
	  power of 2 (thanks to Hubert Sack),
	  (genRRC): removed unnecessary "clr c",
	  (genRLC): replaced "add a,acc" with cheaper "rlc a"
	* src/mcs51/peeph.def: renamed 115 to 115.a, added rule 115.b: another
	  jump optimization,
	  swapped rules 256.c and 256.d,
	  extended 256.d by using new multiple checks (thanks Erik),
	  added rules 256.e and 256.f,
	  updated rule 261.a and 261.b to new generated code
	* support/regression/tests/muldiv.c: added test div/mod by a power of 2

2004-12-07 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCloop.c (basicInduction, loopInduction): fixed several
	  induction related bugs, including first part of bug #1074377

2004-12-05 Vangelis Rokas <vrokas AT otenet.gr>

	* applied patch from bug-report #1076292,
	* applied patches for genAnd and Goto-optimizations for Raphael
	Neider,
	* src/SDCCicode.c (printOperand): fixed !REGA source to compile and
	dump a less iCode information,
	* src/pic16/device.h (pic16_options_t): added field debgen,
	* src/pic16/gen.h: added macros DUMP_FUNCTION_ENTRY,
	DUMP_FUNCTION_EXIT, FENTRY, FENTRY2,
	* src/pic16/gen.c (my_powof2): renamed to pic16_my_powof2 and made
	puclic,
	* (various functions): added macros FENTRY and FENTRY2 to functions,
	to emit function prologue,
	* (various functions): fixed indentation,
	* (genNearPointerGet): fixed loading of FSR0,
	* (genPackBits): applied patch from Raphael Neider to fix updating
	of FSR0 and touching only the modified bits,
	* src/pic16/genarith.c (various functions): added macros FENTRY to
	emit function prologue in comments,
	* src/pic16/pcode.h: added functions debugf2, debugf3,
	* src/pic16/ralloc.c: partial fix for packForPush caused
	segmentation fault,

2004-12-04 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added 261.a,b (16 bit rotate) by Stas Sergeev
	  <stsp AT users.sourceforge.net> with reversed byte order
	* support/regression/tests/rotate.c: added (ds390 skips some tests)

2004-12-03 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (genLeftShift, genRightShift): fixed second part of
	  bug #1074377
	* src/hc08/gen.c (genrshFour, shiftRLong, shiftLLong),
	* src/mcs51/gen.c (shiftLLong): Fixed some shifting bugs Frieder found

2004-12-02 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/pcode.c : fixed a problem where banksel was not being inserted.

2004-12-02 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCpeeph.c (callFuncByName): support combined peephole rule
	  conditions,
	  (setFromConditionArgs): friendly operand parser for peephole rules,
	  (operandBaseName, operandsNotRelated): new peephole condition
	  "operandsNotRelated" -- similar to "operandsNotSame", but takes
	  architecture specific register naming into account, handles n-way
	  comparisons, and supports quoted literals
	* src/mcs51/peeph.def: restored rule 177.d with an extra condition

2004-12-02 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: fixed bug #1076940

2004-12-02 Slade Rich <slade_rich AT users.sourceforge.net>

	* device/include/pic/pic16f877.h : added an include file for the PIC16F877 device.

2004-11-28 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	Adding support for replacing ljmps with sjmps in jumptables
	generated for switch statements. For now you need to set the
	environment variable SDCC_SJMP_JUMPTABLE to enable this.
	Now 4 algorithms for mcs51 jumptable generation are used:
	ljmp or sjmp jumptables for up to 16 cases, stack-pushing target
	addresses loaded pc-relative for up to 112 cases and stack-pushing
	target addresses loaded with offset from dptr for up to 256 cases.

	* src/SDCCpeeph.c: added peephole conditional labelJTInRange
	* src/mcs51/main.c: adapted constants for switch table generation
	* src/mcs51/peeph.def: added 260.x for replacing ljmp with sjmp

2004-11-26 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/printf_large.c (_print_format): fixed bug 1073386
	* support/regression/tests/bug1057979.c: added test for bug 1073386

2004-11-25 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/pcode.c: fixed bug which may produce error in non-GNU
	compilers

2004-11-25 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.h,
	* src/pic16/genarith.c,
	* src/pic16/glue.c,
	* src/pic16/main.c,
	* src/pic16/pcode.c: applied patches #1068154 and #1070213

2004-11-24 Vangelis Rokas <vrokas AT otenet.gr>

	Large cummulative patch for pic16 port.
	* device/lib/pic16/gstack.h: NEW, user can specify its own handler
	to call when a stack overflow occurs,
	* (malloc.h): added CVS Id tag,
	* (pic18f{242,252,442,452}.h): added T0CONbits structure and
	variable,
	* added libc directory. The current version of LibC contains string
	functions, ctype functions and macros and some functions of the
	stdlib set (like malloc/free/atof/atoi etc...). All functions are to
	be extensively tested in the future. Standard disclaimer here.
	Library is not automatically build yet. But one can build it by
	invoking 'make' inside the libc directory.
	* added ADC library under libio. Preliminary version yet.

	* src/pic16/gen.h: added emitTOGC macro, to toggle Carry flag,
	* src/pic16/gen.c (aopForRemat): asmop size is filled by
	aopForRemat() now and not by pic16_aopOp(),
	* (pic16_popGetTempReg): removed warning messgae when allocating
	temporary registers, its a buggy feature and will be removed,
	* (pic16_popGet): set register instance field in AOP_CRY,
	* (pic16_outBitC): fixed for results in size greater than 1,
	* (genUminusFloat): fixed for pic16, ported code from mcs51,
	* (pic16_storeForReturn): optimized return of 0,
	* (genCmp): experimental code for new genCmp which uses PIC18's
	special compare&skip instructions. Initial tests fail some times
	with variables grater than 1 byte in size, so new code is disabled,
	* (genUnpackBits, genPackBits): more optimizations in reading/writing,
	a single bit,
	* (genCast): began a fix to optimize the casting of a bit to another
	bit, now assigning a bitfield to another bitfield will fail, sorry,
	* src/pic16/main.c: disabled the use of lr-support feature,
	* src/pic16/pcode.h: renamed PCASMDIR to PCAD,
	* added some function prototypes, added function _debugf prototype,
	* src/pic16/pcode.c: (pic16_get_op): fixed emitting operands of register
	bits with offset (case PO_GPR_BIT),
	* (genericPrint): don't emit INFO pcode when --pcode-verbose not in
	command line,
	* (isBankInstruction): modified to return 0 for no banking instruction,
	and 1 for banking instruction,
	* (pic16_isPCinFlow): check for PCAD (assembler directives) too,
	caused stop processing pCodes after a inline assembly block,
	* (pic16_popCopyGPR2Bit): updated to match bitfields with offset,
	* src/pic16/pcoderegs.c: fixed a bug with eliminating some temporary
	registers when it shouldn't,
	* src/pic16/ralloc.c (allocReg): add preliminary support for
	supporting a limited set of temporary registers,

2004-11-23 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genAssign, genPointerGetSetOfs, genDataPointerGet,
	  genDataPointerSet): ensure assignments always copy in MSB to LSB
	  order,
	  (loadRegFromAop): recognize CLRH optimization,
	  (genFunction): optimize RECEIVE iCodes in reentrant functions

2004-11-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCmain.c (parseCmdLine, optionsTable[]): fixed bug with
	  --out-fmt-s19 turning into --out-fmt-elf if s19 was already
	  selected.
	* src/SDCCmain.c (linkEdit): don't define SSEG for HC08
	* src/hc08/main.c (_hc08_setDefaultOptions): default xdata to be
	  contiguous with data

2004-11-19 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/_gptrget.c (_gptrget),
	* device/lib/_gptrgetc.c (_gptrgetc),
	* device/lib/_gptrput.c (_gptrput): _naked allows to use ret
	  instead of sjmp to ret
	* src/mcs51/peeph.def: added peepholes 3.d-g and 177.g,h provided
	  by Hubert Sack <hsack2002 AT arcor.de> in RFE #1067986, thanks

2004-11-18 Maarten Brock <sourceforge.brock AT dse.nl>

	* .version: bumped version to 2.4.7
	* device/lib/_gptrget.c (_gptrget): is now _naked
	* device/lib/_gptrgetc.c (_gptrgetc): is now _naked
	* device/lib/_gptrput.c (_gptrput): is now _naked
	* src/SDCCast.c (createBlock): removed ridiculous self-assignment,
	  (createFunction): fixed xstack
	* src/SDCCglue.c (emitMaps): set allocation required for bit area
	* src/SDCCicode.c (geniCodeCast): don't change SPEC_OCLS for literal
	  or bit either,
	  (geniCodeCritical): store original interrupt state in an iTemp bit
	  var unless stack-auto
	* src/SDCCicode.h: added CRITICAL and ENDCRITICAL to SKIP_IC2
	* src/SDCCmain.c (setIncludePath): added include/target to search path
	* src/SDCCmem.c (allocParms): store bit vars in bit space, not overlay
	* src/SDCCsymt.c (checkFunction): don't check regbank for isr's against
	  prototype,
	  (processFuncArgs): put bit vars in bit area
	* src/mcs51/gen.c (saveRegisters, unsaveRegisters, genXpush, saveRBank,
	  unsaveRBank): fixed xstack,
	  (genFunction): bugfix: replaced (global!) reentrant with fReentrant,
	  (genFunction, genEndFunction): fixed xstack,
	  (genAssign): optimization don't walk backwards through mem
	* src/mcs51/main.c (_mcs51_regparm): don't pass bit params in registers
	* src/mcs51/ralloc.c (createStackSpil): spill bits to bit area
	* support/regression/Makefile: also make library (for stack-auto) when
	  making "all" and added "test-mcs51-xstack-auto"
	* support/regression/fwk/lib/testfwk.c: added T2_isr prototype for mcs51
	* support/regression/ports/mcs51/T2_isr.c: added this file as a stub
	* support/regression/ports/mcs51/fwk.lib: added to link T2_isr stub
	* support/regression/ports/mcs51/spec.mk: added rules for fwk.lib
	* support/regression/ports/mcs51-stack-auto/spec.mk: replaced
	  make-library by MAKE_LIBRARY
	* support/regression/ports/mcs51-xstack-auto/spec.mk: file added to run
	  regression tests for xstack
	* support/regression/tests/bitvars.c: test for bit vars (bug 938782)
	* support/regression/tests/critical.c: test for critical on mcs51

2004-11-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* support/regression/ports/ucz80/spec.mk: use include and lib files from
	  built version of sdcc instead of installed version

2004-11-14 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/gen.c (toBoolean): fixed bug 1065458
	* device/lib/Makefile.in: z80 uses printf_large.c, sprintf.c and
	  vprintf.c now
	* device/lib/printf_large.c (calculate_digit): fixed bug 1057979
	* device/lib/z80/Makefile: don't use printf.c as it fails bug 1057979
	  WARNING: remove device/lib/build/z80/printf.o by hand when
	  updating from previous build!
	* device/lib/z80/printf.c: updated comment
	* support/regression/tests/bug1057979.c: test all ports now
	* support/regression/tests/bug1065458.c: file added

2004-11-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (genFunction, genEndFunction): avoided generating
	  *_start and *_end symbols for static functions

2004-11-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCmain.c (linkEdit): don't suppress crt0 if --nostdlib is used
	  and search crt0.o in all library paths,
	  (setIncludePath): proper handling of --nostdinc,
	  (setLibPath): proper handling of --nostdlib
	* support/regression/Makefile,
	* support/regression/ports/ds390/spec.mk,
	* support/regression/ports/gbz80/spec.mk,
	* support/regression/ports/hc08/spec.mk,
	* support/regression/ports/mcs51/spec.mk,
	* support/regression/ports/mcs51-large/spec.mk,
	* support/regression/ports/mcs51-stack-auto/spec.mk,
	* support/regression/ports/z80/spec.mk: use include and lib files from
	  built version of sdcc instead of installed version
	* doc/sdccman.lyx: fixed typo in --nostdinc

2004-11-10 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/pcode.c,
	* src/pic/device.c,
	* src/pic/ralloc.c,
	* src/pic/gen.c : added support to generate code for struct bit fields.

2004-11-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/xa51/xa_version.h,
	* device/include/errno.h,
	* device/include/regc515c.h,
	* device/lib/_itoa.c,
	* device/lib/_ltoa.c,
	* device/lib/ser_ir_cts_rts.c,
	* sim/ucsim/xa.src/glob.cc,
	* sim/ucsim/xa.src/inst_gen.cc,
	* sim/ucsim/xa.src/xa_bit.cc,
	* sim/ucsim/xa.src/xa_sfr.cc,
	* sim/ucsim/z80.src/inst_dd.cc,
	* sim/ucsim/z80.src/inst_fdcb.cc,
	* support/scripts/keil2sdcc.pl,
	* src/pic16/pic16.dsp,
	* src/pic16/pic16a.dsp: corrected cvs line endings
	* device/lib/printf_large.c: fixed bug 1057979
	* src/pic16/gen.c: fixed non-C standard code
	* src/SDCCmain.c: made --pack-iram default, added --no-pack-iram
	* src/SDCCglobl.h: changed pack_iram to no_pack_iram
	* support/regression/ports/mcs51/support.c: reload T1 asap
	* doc/sdccman.lyx: updated for options --pack-iram and --no-pack-iram,
	  pdata use and clear idata startup behaviour
	* support/regression/tests/bug1057979.c: added

2004-11-04 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/examples/ds390/ow390/ad26.h,
	* device/examples/ds390/ow390/cnt1d.h,
	* device/examples/ds390/ow390/crcutil.c,
	* device/examples/ds390/ow390/ownet.h,
	* device/examples/ds390/ow390/owsesu.c,
	* device/examples/ds390/ow390/swt12.h,
	* device/examples/ds390/ow390/swtoper.c,
	* device/examples/ds390/ow390/temp10.h,
	* device/examples/ds390/ow390/thermodl.c,
	* device/examples/ds390/tinitalk/tinitalk.dsp,
	* device/examples/ds390/tinitalk/tinitalk.dsw,
	* device/examples/mcs51/clock/hw.h,
	* device/examples/mcs51/simple2/go.bat,
	* device/examples/serialcomm/windows/serial.h,
	* device/examples/xa51/dummy.c,
	* device/examples/xa51/hello.c,
	* device/include/80c51xa.h,
	* device/include/at89x051.h: corrected cvs line endings

2004-11-04 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/main.c (options): added command line --gstack, to trace
	stack over/under flows,
	* added pragma 'wparam' to allow passing first byte of function
	parameters via WREG, syntax is #pragma wparam my_function[, func2...]
	* src/pic16/gen.c (pic16_testStackOverflow): function which emits a
	call to __gstack_test function and sets up the symbol as extern,
	* (pic16_pushpCodeOp, pic16_poppCodeOp, pushw, pushaop, popaopidx,
	* popaop): added call to pic16_testStackOverflow,
	* (wParamCmp, inWparamList): NEW, test existence of a symbol in
	wparamList list,
	* (genCall, genPcall): now all parameters are passed via stack
	except in functions that are pass to wparam pragma in which WREG is
	used too,
	* (genPcall): REENTRANT flag is checked to see if variable prototype
	contains reentrant keyword, don't call a non-reentrant function, via
	a reentrant function pointer or vice versa, functions are never
	passed via WREG,
	* (genJumpTab): applied patch from bug #1057478 by R.Neider and
	D.Winkler,
	* src/pic16/glue.c (pic16emitRegularMap): fixed bug which caused a
	SIGSEGV when accessing a NULL register stucture,
	* (pic16_printGPointerType): modified to handle UPPER modifier for
	function initializers, changed prototype of function to simpler one,
	* (pic16_printIvalFuncPtr): check to see if function is already
	added in externs list,
	* src/pic16/pcoderegs.c (pCodeOptime2pCodes): fixed bug which
	optimized a move from W to SFR with a move to the same register
	later after a CALL,
	* device/lib/pic16/debug: NEW directory, contains debug features
	which are enabled when linking with libdebug.lib, currently command
	line option --gstack enables stack pointer tracing for over/under
	flow, corresponding sources are in debug/gstack

2004-10-30 Vangelis Rokas <vrokas AT otenet.gr>

	* doc/sdccman.lyx: updated SDCC version,
	* (PIC16 port): update list of command line options,
	* src/pic16/device.h (structure pic16_options_t): added field gstack
	to enable stack overflow tracing on push/pops,
	* src/pic16/device.c (statistics structure): added statistics
	structure,
	* (pic16_dump_access, pic16_dump_usection, pic16_dump_gsection,
	pic16_dump_int_registers): increase statistics counters for each
	* variable which is encountered
	* (pic16_dump_usection): emit each .udata variable to its own udata
	section,
	* src/pic16/gen.c (assignResultValue, genCall, genPcall, genFunction):
	when macro USE_WREG_IN_FUNC_PARAMS is set to 0 pass all function
	parameters via stack, otherwise use old scheme,
	* src/pic16/glue.c (pic16_emitStatistics): dump statistics in
	assembler output file,
	* src/pic16/main.c: added command line options --gstack to enable
	push/pop tracing for stack overflow,
	* src/pic16/pcode.c (all pCodeInstruction records for PIC18F
	instructions): added size of each instruction,
	* (pic16_countInstruction): estimate size of instructions in
	the_pFile list, inline assembly blocks are not counted,
	* (pic16_FixRegisterBanking): trace previous register usage, when
	banksel optimizations is greater than 0, don't emit a redudant
	banksel directive,

2004-10-26 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/ralloc.c : fixed inefficient code produced when compiling a complimented bit operation.
	* src/pic16/ralloc.c : applied same fix for pic16.
	* src/pic/gen.c : tidied it up a little.

2004-10-25 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: disabled 259.a,b for removing redundant ret,
	thanks to Martin Helmling for reporting (mail on sdcc-devel 2004-10-25)

2004-10-22 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (reverseParms): fixed bug #1040577 (part 2)

2004-10-22 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/lib/ser_ir_cts_rts.c: integer promotion caused a call to the
	non-reentrant function __modsint in the interrupt function (thus
	corrupting math operations during serial I/O)
	* device/lib/ser_ir.c: as above, changed buffersize
	* src/mcs51/peeph.def: added 259.a,b for removing redundant ret,
	256.c,d for zeroing
	* doc/Makefile: added option -t for rsync

2004-10-22 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.h (struct ast),
	* src/SDCCast.c (reverseParms, copyAst): fixed bug #1040577 (part 1)

2004-10-20 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added include/pic16/*.h to the setup
	package

2004-10-20 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/pic16/libsdcc/Makefile: added lregs directory in
	makefile targets,
	* device/lib/pic16/libsdcc/lregs/{Makefile,lrst.c,lrrest.c}: NEW
	support functions to replace long sequences of MOVFF's from access
	bank registers to stack and vice versa,
	* src/pic16/device.h: added new field opt_flags, where optimization
	flags can be set to enable certain features,
	* src/pic16/gen.c (pic16_emitpinfo): NEW to add PC_INFO pCode in
	* pBlock, (genFunction, genEndFunction): surroung loop for
	saving/loading used registers in stack with PC_INFO pCodes,
	INF_LREGS. Code in between can then be optimized by pCode optimizer
	to support function calls,
	* (genDataPointerSet): fixed bug which loaded float fields in
	structures with corrupt data,
	* src/pic16/genutils.c (debugf, _debugf): macro/function which emits
	in a standard way debug info on stderr. Feature used for developing
	and debugging only,
	* src/pic16/glue.c (pic16glue): reformatted, deleted some old and
	obsolete chunks of code,
	* if optimization flag OF_LR_SUPPORT was set, call pic16_OptimizeLocalRegs,
	* src/pic16/main.c (_pic16_parseOptions): added handler for --flr-support,
	* pic16/src/pcode.c (pic16_newpCodeInfo,
	* (pic16_newpCodeOpLocalRegs),
	* (pic16_convertLocalRegs2Support): NEW, to support new optimization
	feature,
	* (pic16_pCodeConstString): printing of the initial value of a
	symbol as a comment is inhibited since parsing was already done by
	copyStr and output is corrupt,
	* (pic16_pCode2str, genericPrint): handle PC_INFO pCode,

2004-10-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (packRegisters): fixed bug #1044601

2004-10-19 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/mcs51/lkarea.c: removed old K&R style,
	  (lnksect): changed check on boundary error,
	  (lnksect2): changed check on boundary error,
	  (lnksect2): extend XSTK to end of page if size = 1
	* as/mcs51/lkmain.c: removed old K&R style,
	  (Areas51): create l_IRAM symbol
	* as/mcs51/lkmem.c (summary2): added report on PSEG and XSTK
	* device/lib/Makefile.in: renamed model-mcs51-reentrant to
	  model-mcs51-stack-auto, added model-mcs51-xstack-auto
	* device/lib/_mullong.c: added version to be compiled with xstack
	* device/lib/mcs51/crtclear.asm: clear only upto --iram-size
	* device/lib/mcs51/crtxclear.asm: clear pdata as well
	* device/lib/mcs51/crtxstack.asm: fixed comment
	* src/SDCCglue.c: maxInterrupts defaults to 0,
	  (emitMaps): added pdata,
	  (createInterruptVect): (re)moved default,
	  (glue): added pdata,
	  (glue): moved __start__xstack to XSTK with default size 1
	* src/SDCCmain.c (parseCmdLine): automatically set options.intlong_rent
	  and options.float_rent when options.stackAuto is set,
	  (linkEdit): only write XDATA_NAME if provided on command line
	* src/SDCCmem.h,
	* src/SDCCmem.c: added pdata
	* src/port.h: added pdata_name to PORT
	* src/mcs51/gen.c (toBoolean): fixed for Acc use of aopGet,
	  (saveRegisters, unsaveRegisters): removed usage of B,
	  (genMinus): fixed accumulator clash,
	  (genJumpTab): added comment, this needs another look
	* src/mcs51/gen.c: added check for "B in use" paranoia,
	  added pushB() and popB()
	* src/mcs51/peeph.def: restart after 177.c so 177.a can get a second
	  chance
	* src/avr/main.c,
	* src/ds390/main.c,
	* src/hc08/main.c,
	* src/mcs51/main.c,
	* src/pic/main.c,
	* src/pic16/main.c,
	* src/xa51/main.c,
	* src/z80/main.c: (reset_regparms) made void parameter explicit and
	  added PSEG (PAG,XDATA) or NULL to port specifier
	* src/ds390/main.c (_ds390_genIVT): moved implemented default in here
	* src/mcs51/main.c (_mcs51_genIVT): moved implemented default in here,
	  (_mcs51_genInitStartup): removed __start__xstack equ,
	  (mcs51_port): moved xstack from XSEG (XDATA) to XSTK (PAG,XDATA)
	* src/pic16/device.c (pic16_dump_usection, pic16_dump_isection),
	* src/z80/gen.c (_rleAppend): fixed warnings
	* support/regression/tests/zeropad.c: added pdata test
	* .version: bumped to 2.4.6

2004-10-17 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: cross compiling of WIN32 setup.exe on Linux
	as a part of nightly build

2004-10-16 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (struct _G): added field useWreg, is set to 1 when
	WREG holds the first byte function parameters,
	* (aopForSym): take special case for symbols which are in FARSPACE
	but in CODESPACE too,
	* (assignResultValue): modified to take into account _G.useWreg,
	* (genCall): don't use wreg for parameter passing when function is
	declared as reentrant, too, added optimization INCF to stack
	pointer when stack parameter count is 1,
	* (genFunction, genEndFunction): refurnished and fixed to not using
	wreg for passing parameters when function has varargs or is
	reentrant, fixed bug with symbol name compare for generating
	functions in absolute address,
	* (pic16_storeForReturn): refurnished,
	* (genCmp): began writing a new version of the function, not ready
	yet, therefore it is disabled,
	* (genAssign): do not read code memory when assigning a function to
	a pointer function,
	* src/pic16/glue.c (pic16emitStaticSeg): abSym->name is defined an
	array of characters, not pointer,
	* (pic16initialComments): in debug mode emit an .ident directive for
	the assembler,
	* (_process_pragma): emit a new warning type (internal to pic16)
	when setting stack to default length, emit a similar warning when
	placing a function at absolute address and address is not word aligned
	* (_pic16_parseOptions): added 'return TRUE' statement,
	* (_pic16_linkEdit): if compiling a source, then add the source's
	file object, first in the list of objects to link,

2004-10-13 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/pcoderegs.c : increased count on regUsedinRange to prevent unnecessary warning.
	* src/pic/main.c : removed VC warning.
	* src/pic/gen.c : changed comment.

2004-10-12 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/pic16/libsdcc/gptr/gptrput[234].c: an external
	reference to a deprecated symbol _GPTRREG was causing failure to
	link. Thanks G. M. Gallant for the info.

2004-10-12 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/pcode.c : Applied a code patch supplied by Paul Ashmore in
	comments for Bugs item #954788.

2004-10-10 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.c (pic16_dump_gsection,
	* pic16_groupRegistersInSection): handle symbols declared to be in
	access bank differently,
	* src/pic16/gen.c (struct _G): added field resDirect,
	* (aopForSym): if symbol on stack and iCode is '=' and result exists,
	send values read from stack directly to result and don't allocate
	temporary values,
	* (pic16_sameRegs): fixed bug that allowed MOVFF to move between
	same registers,
	* (pic16_sameRegsOfs): NEW,
	* (freeAsmop): if _G.resDirect is set then do not mark registers as
	free because they were not allocated from temporary pool,
	* pic16_popRegFromString): workaround to fix a problem with
	allocating variables twice or never,
	* (genGenPointerGet): using PRODL instead of FSR0H,
	* (genGenPointerSet): using POSTDEC1 (that is a stack location)
	instead of FSR0H,
	* (genAssign): take advantage of the _G.resDirect flag,
	* (genCast): around line 11844, use mov2f instead of directly
	MOVFF'ing between operands to account for literal values,
	* src/pic16/genutils.c: some new debug functions for gpsim have been
	added,
	* src/pic16/glue.c (pic16_printIvalType): fixed bug that initialized
	float with integer part only,
	* src/pic16/main.c (_process_pragma): handle pragma udata access to
	place variables in access bank
	* device/lib/pic16/libsdcc/gptr/gptr*.c: using BRA instead of GOTO,
	updated sources to reflect recent changes in gen.c

2004-10-06 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/pic16/libsdcc/Makefile.rules: fixed bug concerning
	sources that searched for headers in installation path, now the
	device/include/pic16 is used,
	* src/pic16/glue.c (pic16glue),
	* src/pic16/pcode.c (pCode2str, genericPrint): don't print .file or
	.line directives if not in debug mode, this suppresses assembler's
	warnings for ignored directives

2004-10-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/port.h: made reset_regparms prototype void parameter explicit.
	* src/SDCCsymt.c (processFuncArgs): removed argument "func".
	* src/mcs51/ralloc.c (packRegisters): new fix for bugs 898889 & 979599.
	* doc/sdccman.lyx: documented warning disabling and how to use
	  printf_large to make it print floats.
	* device/include/stdbool.h: NEW
	* device/lib/_atof.c,
	* device/lib/_divuint.c,
	* device/lib/_divulong.c,
	* device/lib/expf.c,
	* device/lib/printf_large.c,
	* device/lib/sincosf.c,
	* device/lib/sincoshf.c: used stdbool.h, all compile with stack-auto now
	* device/lib/Makefile.in: added target for model-mcs51-reentrant to build
	  a completely reentrant lib.

2004-10-05 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/pic16/libsdcc/gptr/gptr*.c: added return statements
	* device/include/pic16/stdio.h: fixed bug with colon

2004-10-03 Vangelis Rokas <vrokas AT otenet.gr>

	* device/include/pic16/stdio.h,
	* device/include/pic16/stdlib.h,
	* device/include/pic16/math.h: NEW
	* device/lib/pic16/libsdcc/gptr/*.c (gptrget*, gptrput*): functions
	declared as _naked to reduce overhead
	* device/lib/Makefile.in (target port-specific-objects-pic16):
	changed * to *.* so to ignore the CVS directory,
	* src/pic16/gen.c (pic16_freeAsmop): added code to store result of
	stacked variables back in stack,
	* (genEndFunction): fixed bug reported by G.M. Gallant with stack
	corruption

2004-10-01 Vangelis Rokas <vrokas AT otenet.gr>

	* .version: bumped version number to 2.4.5
	* support/Util/SDCCerr.h: added warning W_POSSBUG2.
	* support/Util/SDCCerr.c (messages structure): added entry for
	W_POSSBUG2

	Large cumulative patch for pic16 port and libraries.
	* device/include/pic16/sdcc-lib.h,
	* device/include/pic16/stdarg.h,
	* device/include/asm/pic16/features.h,
	* device/include/lib/pic16/libsdcc/gptr/{*.c, Makefile}: NEW,
	* device/include/pic16/float.h: changes reentrant keyword with
	_FS_REENTRANT, added prototype for __fsneq, included sdcc-lib.h
	* device/lib/pic16/libsdcc/Makefile: added target directory gptr,
	updated target build-libraries to include objects from gptr,
	* device/lib/pic16/libsdcc/{char,int,long}/*.c: added macro
	_IL_REENTRANT to all function headings, included sdcc-lib.h header,
	* device/lib/pic16/libsdcc/float/*.c: added macro _FS_REENTRANT to
	all function headings,
	* src/SDCCmain.c: added global parameter userIncDirsSet,
	* (parseCmdLine): when option -I is encountered add directory to
	userIncDirsSet too,
	* src/version.awk: added space between control and long,
	* src/pic16/NOTES: added some notes for the port,
	* src/pic16/gen.c: added prototype for mov2fp function,
	* (fReturnpic16[]): properly named return value registers,
	* (_G structure): added fields stackRegSet, fregsUsed, stack_lat,
	* (aopForSym): added code to handle symbols with onStack flag set,
	symbols onStack are allocated PTRSIZE bytes,
	* (aopFreeAsmop): handles special case where asmops are stack objects,
	* (aopGet, pic16_popGet): adde cod to handle new asmop AOP_STA,
	* (pic16_popGetTempReg, pic16_popGetTempRegCond, pic16_popReleaseTempReg):
	added argument lock to trace flaws in allocating temporary registers
	when developing port,
	* (pic16_popGetLit, pic16_popGetLit2): changed lit from unsigned to signed
	* (pic16_popRegFromString): reenabled allocating a direct register
	from string,
	* (assignResultValue): various beautifications,
	* fixed bug #1037717 (patch from R. Neider & D. Wrinkler) with mistaken
	referenced function argument,
	* (genIpush): reenabled to allow stacked arguments, handles only
	ic->parmPush iCodes,
	* (genCall, genPcall): major changes to allow for variable argument
	functions, fixed a bug with falsely restoring stack pointer after
	returning from call,
	* (genFunction): pending code for critical function,
	* (shiftR1Left2ResultSigned, shiftR1Left2Result, shiftL2Left2Result,
	* (shiftR2Left2Result, shiftLLong) applied patch #1032155 from R.Neider,
	* (genNearPointerGet): fixed bug with indirect reading, was always
	reading from INDF0
	* (genGenPointerGet, genGenPointerSet): rewrote to support generic
	pointers,
	* (genAddrOf): rewrote code to take address of a stacked function parameter
	* (genCast): fixed casting to generic pointer type,
	* src/pic16/gen.h: added AOP_STA,
	* (struct asmop): added field stk,
	* src/pic16/genarith.c (pic16_AopType): handle AOP_STA,
	* (pic16_genPlusIncr): changed emitSKPNZ to emitSKPNZ,
	* (pic16_genAddLit, pic16_genPlus): applied patch #1034042 by tecodev,
	* (pic16_genMinus): fixed bug #1035119 with patch submitted by tecodev,
	* src/pic16/genutils.c (pic16_genNot): removed symbol *tlbl,
	* src/pic16/glue.c (pic16_printGPPointerType): fixed to support new
	generic pointers,
	* src/pic16/main.c (_pic16_initPaths): ignores default SDCC include
	and library paths,
	* (pic16_port structure): generic pointer size is set to 3,
	* src/pic16/pcode.c (pic16_newpCodeOpLit): correctly print literal integer,
	* (insertBankSwitch): cast to (char *) to prevent 64bit CPUs'
	compiler warning,
	* src/pic16/ralloc.c (allocReg): prevent allocating register when
	operand is an iTemp,

2004-09-24 Martin Helmling <mh AT octo-soft.de>

	* debugger/mcs51/cmd.c: set PC if a symbol at pc reg is set
	* debugger/mcs51/simi.c: addapt new syntax of s51

2004-09-23 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/genutils.c (pic16_genNot): fixed bug #1032265,
	* src/pic16/pcode.c: commented out some calls to free() in order to
	fix bug #989576,

2004-09-23 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.h,
	* src/SDCCicode.c (isiCodeInFunctionCall),
	* src/avr/ralloc.c (selectSpil),
	* src/pic/ralloc.c (selectSpil),
	* src/pic16/ralloc.c (selectSpil),
	* src/ds390/ralloc.c (selectSpil),
	* src/hc08/ralloc.c (selectSpil),
	* src/xa51/ralloc.c (selectSpil),
	* src/mcs51/ralloc.c (selectSpil): Don't use remainSpil to spill to the
	stack in the middle of a function call sequence (fixes bug #1020268)
	* src/SDCCicode.c (geniCodeJumpTable): fixed error in computing the
	costs associated with the minimum switch case.

2004-09-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.lex: fixed bug #1030549

2004-09-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcse.h (struct cseDef),
	* src/SDCCcse.c (cseBBlock, newCseDef, ifFromAddrTaken): purge CSEs
	over a function call if the CSE is derived from a symbol whose
	address has been taken (fixes bug #1029883)
	* support/regression/tests/bug-1029883: a new regression test for
	this bug

2004-09-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (emitinline): fixed bug #1029778
	* src/SDCC.y (assignment_expr): fixed the grammer so that assignment
	to a cast object is no longer a syntax error ("fixes" bug #1030006,
	and starts toward RFE #905167)

2004-09-17 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (mov2f): New function to move an operand to
	another without considering if it is a literal or a register,
	* (pic16_sameRegs): don't check if they are both AOP_REG,
	* (AccRsh): removed andmask=0 lines,
	* (genLeftShift): duplicated to be improved in future versions,
	* src/pic16/main.c (_process_pragma): emit stack default size in hex,
	* src/pic16/pcode.c: added POC_INFSNZW, updated inverted_op fields
	in POC_INCFSZ, POC_INCFSZW, POC_INFSNZ,
	* (pic16initMnemonics): added initialization for POC_INFSNZW,
	* (insertBankSwitch): fixed inserting banksel directives algorithm
	for instructions that follow a skip instruction, this fixes a report
	for broken subtraction code generation,
	* src/pic16/ralloc.c (deassignLRs): do not free register if current
	iCode is a left op, just in case result and right share the same
	registers

2004-09-16 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/main.c,
	* src/hc08/gen.c (genJumpTable): more efficient jump table, supports
	preservation of HX
	* src/hc08/gen.c (pullRegs): fixed order of HX & XA pairs
	* src/mcs51/ralloc.c (packRegisters): removed the patch applied
	on 2004-09-12; it was buggy

2004-09-15 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCsymt.h: removed RESULT_CHECK
	* src/SDCCast.c,
	* src/SDCCglue.c,
	* src/SDCCval.c,
	* src/pic/glue.c,
	* src/pic16/glue.c: replaced RESULT_CHECK with RESULT_TYPE_NONE

2004-09-15 Vangelis Rokas <vrokas AT otenet.gr>

	* src/SDCCicode.c (piCode): applied patch from Raphael Neider,
	* src/pic16/device.c (pic16_assignConfigWordValues): wrong
	configuration values no more rejected by compiler, they are assigned
	to configuration registers with a warning message instead,
	* src/pic16/glue.c (pic16_emitConfigRegs): added +1 at top-limit of
	the for-loop so last conf register is emitted too,
	* (_pic16_initPaths): link library libsdcc.lib by default,
	* (_hasNativeMulFor): modified test for multiplication according to
	Raphael Neider's remarks. Integer multiplication is also done with
	support functions,
	* device/include/pic16/pic18fregs.h: corrected type error in while
	testing and including 18f6720 header file

2004-09-14 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.h (pic16_options): removed field use_crt,
	* src/pic16/gen.c (genUnpackBits): added call to pic16_loadFSR0
	until an optimization to handle single bits is added,
	* (pic16_loadFSR0): moved before genUnpackBits,
	* (genAnd): some white lines removed,
	* src/pic16/main.c (_pic16_finaliseOptions): set omit_ivt and clear
	leave_reset flags in pic16_options when using crt modules,

2004-09-12 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/mcs51/ralloc.c (packRegisters): applied fix by Bernhard Held
	  for bugs 898889 & 979599. Also used some safer print instructions.

2004-09-12 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.h (pic16_options_t): added field use_crt,
	crt_name, no_crt,
	* src/pic16/genarith.c (pic16_genPlus): added an assert(0) line to
	catch a probable future bug,
	* src/pic16/gen.c: aopIdx function commented out,
	* (genAssign): commented out old code which used aopIdx,
	* src/pic16/glue.c (pic16glue): removed some legacy fragments of
	code, added if conditionals to take into account the --use-crt
	command line options,
	* src/pic16/main.c (pic16_optionsTable): added new command line
	options, --use-crt= and --no-crt,
	* (_pic16_linkEdit): now the proper crt object is added in the
	linker command line except than when --no-crt is specified,
	* src/pic16/pcode.c,
	* src/pic16/pcode.h: added some structures and functions for a new
	optimization scheme to compansate for instruction overhead between
	same iCodes, this scheme is currently under development and is not
	working in any way,
	* src/pic16/gen.c (genAnd): added patch provided by Aaron Collwell
	to && operator,
	* device/lib/pic16/startup/crt0i.c,
	* device/lib/pic16/startup/crt0iz.c: added global char variable
	__uflags to force the generation of an idata section

2004-09-12 Bernhard Held <bernhard AT bernhardheld.de>

	* doc/Makefile,
	* doc/clean.mk: added support for easy creation of sdcc-doc.tar.bz2
	* doc/sdccman.lyx: updated sdcc version to 2.4.4

2004-09-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* doc/sdccman.lyx: fixed a problem with my new index entries (thanks
	Frieder) and clarified the default code optimization mode

2004-09-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.lex (doPragma, process_pragma),
	* src/SDCCglobl.h (struct optimize): added pragmas "opt_code_speed",
	"opt_code_size", and "opt_code_balanced"
	* src/SDCCmain.c (optionsTable[], printOptions, scanOptionsTable):
	regrouped options by category, added support for category headers
	* src/SDCCmain.c (parseCmdLine): added options "--opt-code-speed"
	and "--opt-code-size"
	* doc/sdccman.lyx: documented these new options and pragmas
	* src/hc08/gen.c (AccLsh, AccRsh): take speed/size optimization
	preference into account

2004-09-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCicode.c (geniCodePostInc, geniCodePreInc, geniCodePostDec,
	  geniCodePreDec): Fixed bug 904237 by generating a warning
	* src/SDCCerr.h,
	* src/SDCCerr.c: added warning W_SIZEOF_VOID

2004-09-09 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/device.c : When no max ram set validate full memory range.
	* src/pic/pcode.c,
	* src/pic/pcodepeep.c : Copy C code comments to optimised replacement code.

2004-09-08 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/_gptrget.c,
	* device/lib/_gptrput.c: updated comment
	* device/lib/calloc.c,
	* device/lib/free.c,
	* device/lib/malloc.c,
	* device/lib/realloc.c: added LGPL, made them reentrant-safe
	* src/SDCCcse.c (cseBBlock),
	* src/SDCCicode.c (printOperand, geniCodeArray),
	* src/SDCCicode.h (struct operand): fixed bug 868103
	* support/regression/tests/bug-868103.c: added
	* src/SDCCast.c (searchLitOp),
	* src/SDCCcse.h (struct cseDef),
	* src/SDCCglue.c (printIvalArray, spacesToUnderscores),
	* src/SDCCicode.h (struct operand),
	* src/SDCCsymt.h (struct sym_link),
	* src/avr/gen.c (hasInc),
	* src/ds390/gen.c (hasInc),
	* src/hc08/gen.c (genPlusIncr, hasInc),
	* src/mcs51/gen.c (hasInc),
	* src/pic16/glue.c (pic16_printIvalChar),
	* src/pic16/ralloc.c (regWithIdx),
	* src/xa51/gen.c (hasInc) : removed warnings
	* src/SDCCast.c (createBlock): added comment ???
	* src/hc08/ralloc.c: updated comments

2004-09-07 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: updated section on switch statements, added
	section about semaphore locking
	* doc/Makefile: added option -info for latex2html
	* device/lib/_gptrget.c,
	* device/lib/_gptrput.c: __XPAGE instead of P2 in outcommented code

2004-09-06 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/device.h,
	* src/pic/device.c,
	* src/pic/port.c : Changed PIC14 code to not set bit RP1 when
	 maxram is less than 0x100.

2004-09-06 Slade Rich <slade_rich AT users.sourceforge.net>

	* Bug fixes for PIC14 - signed RSHIFT problem. Patch supplied by Allen(agschrum).

2004-09-06 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/port.h,
	* src/mcs51/main.c,
	* src/ds390/main.c,
	* src/z80/main.c,
	* src/hc08/main.c,
	* src/pic/main.c,
	* src/pic16/main.c,
	* src/avr/main.c,
	* src/xa51/main.c
	* src/SDCCicode.c (geniCodeJumpTable): Better logic to determine if a
	a jump table is the best form for a switch statement, including
	automatic insertion of missing cases to make the case range
	continuous. Developed in collaboration with Frieder Ferlemann.

2004-09-02 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/ralloc.c (canDefAccResult): multi-byte shift is unsafe for
	accumulator result if it needs sign extension

2004-09-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/hc08/ralloc.c (canUseAccOperand): fixed comparison bug

2004-09-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/gbz80/printf.c,
	* device/lib/z80/printf.c: removed define for NULL

2004-09-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* as/xa51/xa_link.c,
	* device/examples/ds390/ow390/ad26.c,
	* device/examples/ds390/ow390/cnt1d.c,
	* device/examples/ds390/ow390/counter.c,
	* device/examples/ds390/ow390/ds2480.h,
	* device/examples/ds390/ow390/ds2480ut.c,
	* device/examples/ds390/ow390/findtype.c,
	* device/examples/ds390/ow390/gethumd.c,
	* device/examples/ds390/ow390/owllu.c,
	* device/examples/ds390/ow390/ownetu.c,
	* device/examples/ds390/ow390/swt12.c,
	* device/examples/ds390/ow390/swtloop.c,
	* device/examples/ds390/ow390/temp.c,
	* device/examples/ds390/ow390/temp10.c,
	* device/examples/ds390/ow390/thermo21.c,
	* device/examples/ds390/ow390/tinilnk.c,
	* device/examples/ds390/ow390/tstfind.c,
	* device/examples/serialcomm/windows/serial.cpp,
	* device/examples/serialcomm/windows/test_serialcomm.cpp,
	* device/include/reg51.h: fixed line endings for cvs

2004-09-02 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/ralloc.c (canDefAccResult, canUseAccOperand,
	packRegsForAccUse, packRegisters): new accumulator register
	packing algorithm
	* support/regression/ports/hc08/support.c (_putchar): suppress
	warning of unused variable
	* src/SDCCicode.c: added SWAP entry to codeTable

2004-09-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/lib/sprintf.c: forgot to add this file before previous commit

2004-09-01 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (genPackBits): added operand right in function
	parameters, load result directly if p_type is POINTER (that is
	called by genNearPointerSet)
	* (genUnPackBits): added operand left in function parameters,
	* (genNearPointerGet, genNearPointerSet): prevent the loading of
	FSR0 if accessing bitfields,

2004-08-31 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/stdio.h: added NULL, size_t, typedef pfn_outputchar,
	  _print_format; updated printf, sprintf, vsprintf
	* device/include/asm/default/features.h: corrected comment/define
	* device/lib/Makefile.in: added sprintf.c
	* device/lib/libsdcc.lib: added sprintf module
	* device/lib/printf_large.c,
	* device/lib/vprintf.c,
	* device/lib/sprintf.c: totally refactored printf_large and vprintf
	  into these 3 files
	* support/regression/Makefile: changed ALL_PORTS into a usefull default
	* support/regression/ports/mcs51-stack-auto/spec.mk: added sprintf
	* support/regression/tests/bug-927659.c: removed dummy putchar, enabled
	  hc08 test
	* support/regression/tests/zeropad.c: define idata as data for hc08

2004-08-31 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCpeeph.c (labelIsReturnOnly): support hc08 rts opcode also
	* src/SDCCpeeph.c (buildLabelRefCountHash): assume function entry point
	labels are referenced at least once (even if a reference is not found)
	* src/hc08/gen.c (emitcode): set isComment flag for comments
	* src/hc08/peeph.def: added rules 5a..5f (optimize redundant immediate
	loads), rules 6a..6b (optimize jumps to return)

2004-08-30 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/lib/acosf.c (acosf),
	* device/lib/asinf.c (asinf),
	* device/lib/atanf.c (atanf),
	* device/lib/ceilf.c (ceilf),
	* device/lib/cosf.c (cosf),
	* device/lib/coshf.c (coshf),
	* device/lib/cotf.c (cotf),
	* device/lib/fabsf.c (fabsf),
	* device/lib/floorf.c (floorf),
	* device/lib/log10f.c (log10f),
	* device/lib/logf.c (logf),
	* device/lib/sinf.c (sinf),
	* device/lib/sinhf.c (sinhf),
	* device/lib/sqrtf.c (sqrtf),
	* device/lib/tanf.c (tanf),
	* device/lib/tanhf.c (tanhf),
	* device/include/math.h: defined _FLOAT_FUNC_REENTRANT macro and
	replaced all instances of "reentrant" in the library functions
	defined in math.h with this macro.
	* support/regression/tests/float_trans.c: reenabled test for hc08

2004-08-30 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/pic16/Makefile.common.in: added MODELFLAGS again, it was
	erroneously deleted

2004-08-30 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (loadRegFromAop): better use of clra & clrx
	* src/hc08/gen.c (genAnd, genOr): fixed bug with conditional when
	multi-byte volatile operands are used
	* src/hc08/gen.c (shiftRLong): fixed bug with wrong rotate direction
	* src/hc08/main.c (_hc08_genAssemblerPreamble): moved the built-in
	initialization to area GSINIT0 so that it would always precede
	any static initializers in GSINIT
	* support/regression/tests/zeropad.c: fixed idata define for hc08
	* support/regression/tests/bug-927659.c,
	* support/regression/tests/float_trans.c: disabled tests for hc08
	pending missing library routines
	* .version: increased version number to 2.4.4 - hc08 port now passes
	regression tests


2004-08-29 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/pic16/Makefile.common.in: added $(MM) to fix `make clean`
	* Makefile.common.in,
	* as/Makefile,
	* as/hc08/Makefile.in,
	* as/mcs51/Makefile.in,
	* as/z80/Makefile.in,
	* debugger/mcs51/Makefile.in,
	* device/include/Makefile.in,
	* device/lib/Makefile.in,
	* doc/Makefile,
	* link/Makefile,
	* link/z80/Makefile.in,
	* packihx/Makefile.in,
	* sim/ucsim/main_in.mk,
	* sim/ucsim/avr.src/Makefile.in,
	* sim/ucsim/doc/Makefile.in,
	* sim/ucsim/gui.src/serio.src/Makefile.in,
	* sim/ucsim/hc08.src/Makefile.in,
	* sim/ucsim/s51.src/Makefile.in,
	* sim/ucsim/xa.src/Makefile.in,
	* sim/ucsim/z80.src/Makefile.in,
	* src/Makefile.in,
	* support/cpp2/Makefile.in,
	* support/librarian/Makefile,
	* support/makebin/Makefile: added DESTDIR to the install path proposed
	by "Maciej 'Agaran' Pijanka" <agaran AT pld-linux.org>
	* doc/sdccman.lyx: added DESTDIR documentation

2004-08-29 Vangelis Rokas (vrokas AT otenet.gr>

	* src/pic16/gen.c (genFunction, genEndFunction): fixed return
	instruction for interrupt handlers, use fast returns when returning
	from high priority interrupts

2004-08-29 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genAnd, genOr, transferAopAop, rmwWithAop): optimized
	code generation
	* src/hc08/gen.c (genrshFour, genCpl): fixed bugs
	* src/hc08/gen.c (genMultOneByte, genDivOneByte, genModOneByte): fixed
	bugs, ported much of Bernhard's code from mcs51
	* src/mcs51/gen.c (genSend),
	* src/hc08/gen.c (genSend): fixed bug with lost SEND iCodes if more
	than one when calling a reentrant function
	* device/lib/_mullong.c: defined an alternate struct layout for big
	endian ports (hc08)

2004-08-28 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (shiftL2Left2Result): fix for bug-500536 regression
	test

2004-08-28 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.c (processFuncArgs): make sure parameter types
	are sane and complete before asking the port its prefered parameter
	passing method (fixes bug #1017633)
	* device/lib/hc08/_ret.c: added "data" storage class to _ret2
	and _ret3

2004-08-27 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genPackBitsImmed, genUnpackBitsImmed): fix offset
	problem in bitfields >= 8 bits.

2004-08-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCsymt.c: undid changes that were not meant to be committed

2004-08-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/ports/hc08spec.mk: REENTRANT must be reentrant

2004-08-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/hc08/gen.c (genUminusFloat): fixed bug where only 3 bytes were
	  copied and wrong bit got inverted

2004-08-27 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genPointerSet, genFarPointerSet): moved code from
	genFarPointerSet into genPointerSet; eliminated genFarPointerSet
	* src/hc08/gen.c (genPointerGet, genFarPointerGet): moved code from
	genFarPointerGet into genPointerGet; eliminated genFarPointerGet
	* src/hc08/gen.c (genPackBitsImmed): generate optimized code for
	assignments to bitfields at known addresses
	* src/hc08/gen.c (genUnpackBitsImmed): generate optimized code for
	reads from bitfields at known addresses
	* src/hc08/ralloc.c (packRegisters),
	* src/hc08/gen.c (genPointerGet, genUnpackBits, genUnpackBitsImmed,
	genhc08Code): optimize pointer get values used as conditionals
	* src/hc08/peeph.def: added rules 2e & 2f to optimize bit test
	and branch

2004-08-24 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (genPointerGet, genNearPointerGet, genPagedPointerGet,
	genFarPointerGet, genCodePointerGet, genGenPointerGet, genUnpackBits),
	* src/mcs51/ralloc.c (packRegisters): optimize pointer get values used
	as conditionals

2004-08-22 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: peepholes 248.i-m for xdata bitfields

2004-08-21 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (packRegsForOneuse): fixed bug #1012650 and some
	related problems

2004-08-21 Bernhard Held <bernhard AT bernhardheld.de>

	* sim/ucsim/cmd.src/Makefile.in: run lex only if $(PRJDIR)/devel exists

2004-08-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/ralloc.c (packRegsForAssign): ported some bug fixes from the
	mcs51 port

2004-08-16 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/gen.c: Restored fn genRet as previous fix was incorrect.

2004-08-14 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c (genJumpTab): jumptables for more than 16 switch
	cases use more compact code.

2004-08-13 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/gen.c: Fixed problem with fn returning a variable bigger than a char.

2004-08-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCClrange.c (findPrevUse): fixed bug #1007371

2004-08-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.h,
	* src/SDCCsymt.c (changePointer, checkDecl, addSymChain): changed
	parameter of changePointer() from symbol* to sym_link*
	* src/SDCCast.c (decorateType): call changePointer() for CAST op
	* src/SDCCsymt.c (compareType): void* type is castable to other
	pointers, but not necesarily an exact match.
	* src/SDCCicode.c (geniCodeCast): allow void* casting here since it
	is no longer blindly treated as an exact match.
	* src/SDCCval.c (valCastLiteral): treat missing type as cast to void

2004-08-12 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/glue.c: Added struct initialisation fn printIvalStruct.

2004-08-11 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/gen.c,
	* src/pic/pcode.c,
	* src/pic/ralloc.h,
	* src/pic/ralloc.c: Printing rIdx on internal verbose debug.

2004-08-10 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/device.c,
	* src/pic/device.h,
	* src/pic/device.c: Will no longer exit if #pragma maxram has not been defined.

2004-08-06 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (emitcode): fixed bug #992819

2004-08-05 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/pic/ralloc.c (deassignLR): allthough pic port is buggy already,
	  there's no need to make it worse

2004-08-05 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (deassignLR),
	* src/ds390/ralloc.c (deassignLR),
	* src/hc08/ralloc.c (deassignLR),
	* src/z80/ralloc.c (deassignLR),
	* src/pic/ralloc.c (deassignLR),
	* src/pic16/ralloc.c (deassignLR),
	* src/avr/ralloc.c (deassignLR),
	* src/SDCClrange.c (findRecursiveSucc, findRecursivePred, findPrevUse,
	rlivePoint): fixed another part of bug #971834

2004-08-04 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/main.c: enabled "critical" keyword
	* src/z80/mappings.i,
	* src/z80/gen.c (genFunction, genEndFunction): support for interrupt
	functions (fixes bug #979646)
	* doc/sdccman.lyx: added a subsection explaining z80 interrupt support

2004-08-04 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/mcs51/gen.c (genInline): Add \n for labels, not DOS/WIN dirs
	  such as c:\mydir.

2004-08-03 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCloop.c (loopInvariants): fixed bug 983545, hope this
	  doesn't disable too much optimizations

2004-08-02 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/glue.c Disabled "WARNING: function 'main' undefined" when -S option is used.

2004-08-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCClrange.c (rlivePoint): fixed bug 988568, thanks to anonymous

2004-08-02 Slade Rich <slade_rich AT users.sourceforge.net>

	* src/pic/gen.c tidied up tabs
	* src/pic/genarith.c tidied up tabs and fixed bug with literal multiple where same register was used for hi and low byte
	* src/pic/main.c tidied up tabs
	* src/pic/pcode.c tidied up tabs and disabled verbose code generation
	* src/pic/pcoderegs.c tidied up tabs
	* src/pic/ralloc.c tidied up tabs

2004-07-30 Vangelis Rokas <vrokas AT otenet.gr>

	* src/SDCCmem.c (allocGlobal): don't turn S_REGISTER storage class
	to S_FIXED for pic16 port and when symbol is not in level 0,
	allocate for S_REGISTER storage class and pic16 port, too,
	* src/pic16/device.h: prototype for checkSym,
	* src/pic16/device.c (pic16_dump_access, checkSym): NEW,
	* (pic16_assignConfigWordValue): test the value and the mask to
	validate that the value is suitable for the configuration word,
	* src/pic16/glue.c (pic16_printIvalFuncPtr): use 'externs' to
	collect extern declared symbols, don't emit symbol twice, check
	first if symbol is in publics set first,
	* src/pic16/main.c (_pic16_keywords[]): added keyword 'register',
	* added command line '--fstack' which enables an experimental
	feature for stack access, too buggy to be used yet...
	* src/pic16/ralloc.c (pic16_accessregWithName): NEW,
	* (pic16_allocDirReg): when register has storage class S_REGISTER
	allocate in pic16_dynAccessRegs,
	* device/include/pic16/pic18f????.h: modified configuration word
	naming convention, words started as CONFIG0H but should be CONFIG1H

2004-07-29 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/mcs51reg.h: fixed bug 970993

2004-07-27 Maarten Brock <sourceforge.brock AT dse.nl>

	* added lib/calloc.c, lib/free.c, lib/realloc.c, include/stddef.h
	* updated lib/malloc.c, lib/libsdcc.lib, lib/Makefile.in, include/malloc.h
	* src/SDCC.lex (doPragma): added pragma disable_warning <nnn>
	* src/SDCCmain.c (parseCmdLine): added option --disable-warning <nnn>
	* src/ds390/gen.c (genPlusIncr): fixed bug when incrementing generic pointers
	* support/Util/SDCCerr.c (vwerror): suppress disabled warnings and output
	  error/warning numbers,
	  added function setWarningDisabled()
	* support/Util/SDCCerr.h: added setWarningDisabled() and MAX_ERROR_WARNING
	* support/regression/ports/mcs51-stack-auto/spec.mk: added dependencies
	  _memcmp.c _memmove.c calloc.c realloc.c free.c
	* support/regression/tests/malloc.c: added tests for new functionality
	* support/regression/tests/zeropad.c: added tests for truncated initializers
	  and initialized char arrays starting with '\x0'
	* src/mcs51/peeph.def: fixed regression, added peephole 177.f

2004-07-26 Bernhard Held <bernhard AT bernhardheld.de>

	* support/valdiag/tests/overflow.c: fixed warning on (1 >> 40)

2004-07-26 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: updated example in section "Absolute Addressing"
	* src/mcs51/peeph.def: added contributed fix for "bug" #995347 as
	peephole 177.e. Thanks to anonymous

2004-07-25 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/glue.c (pic16_printIvalFuncPtr): when an extern
	function isn't used in the source but referenced as a
	variable initializer then declare it as extern in .asm file

2004-07-24 Vangelis Rokas <vrokas AT otenet.gr>

	* .version: increased version number to 2.4.3

	Adding version extension according to ChangeLog CVS revision
	* src/Makefile.in (target all): added dependency 'version.h'
	* (rule version.h): added rule to create version.h from ChangeLog,
	* (rule dep): added dependency version.h,
	* src/version.awk: AWK script to create version.h
	* src/SDCCdwarf2.c (dwWriteModule),
	* src/SDCCglue.c (initialComments),
	* src/SDCCmain.c (printVersionInfo): modified to write after
	version string the version extension number,
	* src/SDCCutil.c: included "version.h"
	* (getBuildNumber): NEW, returns SDCC's ChangeLog minor revision
	number,
	* src/SDCCutil.h: added prototype for getBuildNumber

	* src/SDCCmain.c (parseCmdLine): when sOpt is 'I' add rest in
	includeDirsSet, too,
	* src/SDCCsymt.c (checkSClass): don't emit error when a variable,
	const char [] is found in function prototype...

	* src/pic16/genarith.c (pic16_genUMult8XLit_8): optimization to omit
	moving to WREG with source is already in WREG,
	* src/pic16/gen.h: added AOP_FSR0 and AOP_FSR2 in enum,
	* src/pic16/gen.c (getFreePtr): updated to look for FSR0 and FSR2,
	* (aopForSym): stack'ed symbols are partially supported, added
	if-clause to support symbols in FARSPACE,
	* (sameRegs): added test for AOP_ACC to see if registers are same,
	* (pic16_freeAsmop): added case for AOP_FSR0 and AOP_FSR2,
	* (pic16_aopGet): added case for AOP_FSR0 and AOP_FSR2,
	* (pic16_popRegFromString): will not allocate a new register if it
	doesn't find one by name, bug may have introduced...
	* (pic16_popGet): added case for AOP_FSR0 and AOP_FSR2,
	* (genIpush): revived to use pic16 port's stack,
	* (genAddrOf): added incomplete case for stack'ed operand,
	* (genCast): optimized a pair of MOVFW,MOVWF to MOVFF
	* src/pic16/genutils.c (pic16_genNot): almot new vesrion for NOT,
	can handle multibyte operands,
	* src/pic16/glue.c (pic16_printIval*): some debug info added,
	* (pic16initialComments): added message for MPLAB compatibility
	mode enabled,
	* src/pic16/main.h: prototype for pic16_mplab_comp,
	* src/pic16/main.c (pic16_optionsTable): new option --mplab-comp,
	which enabled MPLAB compatibility mode (i.e. no #LINE/#FILE, BANKED)
	* (_pic16_linkEdit): NEW, handles link stage, transferred here
	because of increased complexity of procedure,
	* (_process_pragma): stack pragma changed to format 'stack pos len',
	emit symbol '_stack_end' to conform with gplink,
	* src/pic16/pcode.c (pic16_newpCodeOpBit): using pic16_regWithName
	to search for register,
	* (pic16_get_op, pic16_get_op2): added case for PO_W, PO_WREG and
	PO_GPR_REGISTER,
	* (pic16_pCode2str): when in MPLAB compatibility mode, comment out
	#LINE directives and replace 'B' with 'BANKED' in instruction opcodes
	* (pic16_getRegFromInstruction, pic16_getRegFromInstruction2): added
	case for PO_GPR_REGISTER,
	* (pic16_AnalyzeBanking): removed the old message for inc2h.pl, past
	dies, the new era is ahead !...
	* src/pic16/ralloc.c: added hash reposits pic16_dynAllocRegNames and
	pic16_dynInternalRegs,
	* (pic16_allocregWithName, pic16_procregWithName, pic16_regWithname): NEW,
	* (pic16_allocDirReg): minor optimizations and bug fixes,
	* (pic16_allocWithIdx): when searching pic16_dynProcessorRegs use fixed,

	* device/lib/pic16/startup/crt0*.c: extern definition of stack_end,
	load stack and frame pointer with address of 'stack_end' symbol

2004-07-23 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/glue.c (pic16emitStaticSeg): fixed bug with files
	without source code but only variable initializers

2004-07-20 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/glue.c (pic16emitRegularMap): unused functions marked as
	external are not declared as extern to reduce overhead while linking

2004-07-20 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (decorateType): removed buggy fix for bug #979599

2004-07-11 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCglue.c (printIvalArray): fixed bug #984229, thanks to Phuah
	  Yee Keat for the patch
	* src/SDCCast.c (decorateType): fixed bug #979599
	* src/ds390/gen.h: removed local fReturnSizeDS390
	* src/ds390/gen.c: made fReturnSizeDS390 signed short to remove a warning
	* src/ds390/gen.c (genAnd, genOr, genXor),
	* src/mcs51/gen.c (genAnd, genOr, genXor): generate better optimized code

2004-07-04 Vangelis Rokas <vrokas AT otenet.gr>

	* src/SDCCmain.c (linkEdit): modifications only for pic16 port,
	add relFilesSet to $3, manipulate $2 to handle linking of object
	files without source files in command line,
	* device/include/pic16 (all headers): added ID location macros,
	* src/pic16/device.c (struct PIC16_device Pics16[]): added field
	entries for ID location bytes,
	* (pic16_assignIdByteValue): NEW,
	* src/pic16/device.h: new structures idRegInfo_t and idBytesInfo_t,
	added field dumpcalltree to pic16_options_t,
	* src/pic16/gen.c (genCmp): fixed bug case so a temporary register
	is used instead of pic16_Gstack_base_addr, check if (ifx) before
	emitting rFalseIfx label after check_carry label,
	* src/pic16/glue.c (PIC16_IS_IDLOC_ADDRESS, PIC16_IS_HWREG_ADDRESS,
	pic16_emitDIRegs), NEW
	* (pic16glue): dump .calltree file when option --calltree found,
	* src/pic16/main.c (OPTION _pic16_optionsTable): new option --calltree
	* (_pic16_genAssemblerPreamble): emit ID locations after
	configuration registers,
	* (pic16_linkCmd): modifications of the link command,
	* src/pic16/pcode.c (pic16_pciMOVFF): PCC_REGISTER replaces PCC_REGISTER2
	* (pic16_pCodeInitRegisters): don't init stack registers,
	* (pic16_findPrevInstruction): fixed bug,
	* (pic16_getRegFromInstruction, pic16_getRegFromInstruction2): fixed
	bug with immediate registers,
	* (buildCallTree): traces stack push and pop,
	* (pct2): dump also stack usage for each function,
	* src/pic16/ralloc.c (dynrIdx): registers names start from 0x00
	* (pic16_allocDirReg): various modifications,
	* (pic16_typeRegWithIdx): when searching pic16_dynProcessorRegs set
	fixed to 1,

2004-07-02 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/pcode.c: removed buggy double colon

2004-07-01 Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: added include/pic16 to setup

2004-06-30 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/Makefile.in: fixed bug in target objects-pic16,
	* device/lib/pic16/Makefile: prefixed with dash (-) command under
	target 'clean',
	* doc/sdccman.lyx: changed version to 2.4.2 and added some port
	specific command line arguments. Also added sample lkr script
	for placing a variable at a specific memory bank.
	* src/pic16/device.c (pic16_dump_gsection): NEW, to dump variables
	at a specific memory bank,
	* (pic16_dump_isection): fixed bug which caused string literals to
	be omitted when dumping idata section,
	* (pic16_groupRegistersInSection): added code to handle registers
	in specific memory banks,
	* src/pic16/gen.c: labelOffset is prefixed with pic16_ and made
	public, all references are renamed too,
	* (pic16_aopGet): removed switch cases for AOP_R0,AOP_R1,AOP_DPTR,
	AOP_DPTR2,
	* (pic16_storeForReturn): added case to handle when dest is WREG,
	* src/pic16/genarith.c (pic16_pCodeOpSubType): NEW,
	* src/pic16/glue.c (pic16emitRegularMap): when adding a register in
	pic16_rel_udata, check to see if that register is marked as being
	a member of a specific memory bank,
	* (pic16_printIvalCharPtr): added code to add string literals either
	to code or the idata sections,
	* src/pic16/main.c (_process_pragma): added \n to WHITE constant,
	also accept the 'udata' pragma,
	* src/pic16/main.h: new structure types sectName and sectSym
	* src/pic16/pcode.c: added new pCodeInstruction entry for BANKSEL
	* (newpCodeOpBit): added PIC_OPTYPE subt in function prototype,
	* (pic16_findPrevInstruction): fixed, it returned nothing,
	* (insertBankSwitch): fixed to emit banksel/skip and skip/banksel
	instruction combinations,
	* (pic16_FixRegisterBanking): heavily reorganised,
	* (pic16_AnalyzeBanking): if generating banksel directives is
	disabled, then don't call FixRegisterBanking at all,
	* src/pic16/ralloc.c (bitEQUs, aliasEQUs, allDefsOutOfRange):
	completely removed,
	* (pic16_writeUsedRegisters): added call to pic16_dump_gsection

2004-06-29 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCglue.c (printChar): fixed bug #973350, patch provided by
	Phuah Yee Keat <yk.phuah AT nestac.com>

2004-06-28 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/glue.c (pic16createInterruptVect): function now emits
	correctly the IVT even if it is relocated to some other location

2004-06-28 Vangelis Rokas <vrokas AT otenet.gr>

	* device/include/pic16/pic18fregs.h: added case for pic18f2220.h
	* device/include/pic16/pic18f2220.h: NEW,
	* device/lib/pic16/libdev/pic18f2220.c: NEW,
	* device/lib/pic16/libdev/Makefile: added 18f2220 in DEVS,
	* src/pic16/device.c (struct Pics16): added info for 18f2220,
	* src/pic16/device.h (struct pic16_options): added ivt_loc and
	nodefaultlibs, ivt_loc is the location of the interrupt vector
	table, and nodefaultlibs signs that default libraries should not be
	linked in link stage,
	* src/pic16/gen.c (genFunction): relocate interrupt vector functions
	according to --ivt-loc argument,
	* src/pic16/main.c (_process_pragma): emit '_stack' as public symbol
	when pragma stack is found,

2004-06-25 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added peepholes 182.d (return 0.0),
	256 (range check), 257 (do while), 258.a-f (bit banging
	f.e. on 3-wire SPI bus)

2004-06-21 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCClrange.c (findNextUseSym): fixed a live range bug with
	variables used exclusively within a loop

2004-06-21 Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (genCpl): quick fix for bug #974835

2004-06-21 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCClrange.c (computeClash): fixed bug #971834

2004-06-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (genCmp): fixed bug #975903
	* src/hc08/gen.c (operandsEqu),
	* src/ds390/gen.c (operandsEqu),
	* src/z80/gen.c (operandsEqu),
	* src/pic/gen.c (operandsEqu),
	* src/pic16/gen.c (operandsEqu),
	* src/mcs51/gen.c (operandsEqu): fixed bug #976283
	* src/SDCCmain.c (parseCmdLine): report --unknown-option only once

2004-06-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcse.c (cseBBlock): fixed bug #966963

2004-06-12 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (genPointerGet): added E_INTERNAL_ERROR for
	default case in switch statement,
	* glue.c (pic16_initPointer): expr is initialised via decoarteType
	to eliminate problem with initialisation of pointers, but problem
	still exists,
	* (pic16_pointerTypeToGPByte): removed, no needed for pic16,
	* (emitStaticSegment): removed various lines emitting debug info,
	* src/pic16/pcode.c, src/pic16/pcode.h, src/pic16/ralloc.h:
	added processor registers for utilizing EEPROM,
	* src/pic16/pcode.c (pic16_emitDB): number of DBs emitted is not
	configurable and set 8

2004-06-08 Vangelis Rokas <vrokas AT otenet.gr>

	* .version: increased version number to 2.4.2,

	Cumulative patch for pic16 port
	* src/pic16/device.c: changed scheme to dump initial values for
	variables in idata segment, all print_idata* functions were removed,
	now the pic16_printIval* will be called,
	* src/pic16/glue.c: (pic16_initPointer, pic16_pointerTypeToGPByte,
	* _pic16_printPointerType, pic16_printPointerType,
	* pic16_printGPointerType, pic16_printIvalArray, pic16_printIvalStruct,
	* pic16_printIvalBitFields, pic16_printIvalFuncPtr, pic16_printIvalPtr:
	NEW, similar to the respective functions in SDCCglue.c,
	* src/pic16/pcode.c (pic16_emitDB, pic16_flushDB): reverted to old
	way, emitting hex bytes,
	* (pic16_emitDS): NEW, emits a string for pointer initialisation,

2004-06-08 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/avr/ralloc.c (serialRegAssign),
	* src/xa51/ralloc.c (serialRegAssign),
	* src/pic/ralloc.c (serialRegAssign),
	* src/pic16/ralloc.c (serialRegAssign),
	* src/hc08/ralloc.c (serialRegAssign),
	* src/z80/ralloc.c (serialRegAssign),
	* src/ds390/ralloc.c (serialRegAssign),
	* src/mcs51/ralloc.c (serialRegAssign): fixed bug #964479

2004-06-08 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeJumpTable): fixed bug #967601
	* src/SDCCpeeph.c (labelIsReturnOnly): fixed bug #966505

2004-06-07 Vangelis Rokas <vrokas AT otenet.gr>

	Cumulative patch for pic16 port:
	* src/pic16/device.h (typedef PIC16_device) modified fields for
	defining microcontrollers,
	* src/pic16/device.c: added new info for all devices in Pics16 array,
	* src/pic16/gen.c (genPcall): fixed bug that caused the return label
	to be optimised out by the pCode optimiser,
	* src/pic16/glue.c (pic16emitRegularMap): treat implicit aggragates
	specially, bug reported by G.M. Gallant,
	* src/pic16/pcode.c (pic16_newpCodeLabelFORCE): NEW, marks a label
	as force'd so that cannot be optimised out by pCode optimiser,
	* src/pic16/pcode.c,
	* src/pic16/pcodepeeph.c,
	* src/pic16/pcoderegs.c: many modifications to re-enable peepholes,
	they are disabled by default, but can be enabled explicit with
	command argument --denable-peeps, for testing,
	* device/lib/pic16/startup/Makefile: added --no-peep,--pomit-config-words,
	--pomit-ivt in COMPILE_FLAGS

2004-06-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/pic16/pcode.c (pic16_emitDB): removed double semicolon which fails
	  compilation on MSVC

2004-06-06 Maarten Brock <sourceforge.brock AT dse.nl>

	* device/include/sab80515.h: added sfr P6, changed GPL to LGPL

2004-06-06 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	device/include/sab80515.h: fixed bug #967492, DAPR is defined at adress
	0xd8, but the correct adress is 0xda. Thanks to anonymous for reporting

2004-06-06 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.c (pic16_assignConfigWord): fixed bug that
	would only assign 0x300001 register.

2004-06-05 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/pic16/startup/Makefile: added $(MODELFLAGS)
	in COMPILE_FLAGS. Thanks to G. Gallant for report.

2004-06-05 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: minor changes, mentioned beta vendor support
	for ds80c400
	* src/mcs51/peeph.def: ran unexpand -a over peeph.def
	* src/mcs51/peeph.def: removed obsolete peephole 100.a,
	added peephole 254 (left shift), 255 (jump table)

2004-06-04 Vangelis Rokas <vrokas AT otenet.gr>

	* device/lib/Makefile.in: removed comment line with model-pic16,
	* (target port-specific-objects-pic16): the libraries and objects
	are copied to the build directory form the device/lib/pic16/bin
	directory

	Cumulative patch concerning pic16 port:
	* library directory has been re-organized,
	* added support for PIC18F1220,
	* added headers and library sources for chips 18f1220,18f6520,
	18f6620,18f6680,18f6720,18f8520,18f8620,18f8680,18f8720

	* configuration registers setting has changed, now each supported
	device has a complete description of the registers it uses,
	* all initialisations are moved to idata sections, these section
	can be absolute or relocatable,
	* fixed initialisation of codespace variables,
	* fixed warning about PCLATU and gpsim,
	* src/pic16/gen.c (genCmp): now can handle partially iCodes with no ifx,
	* (genAssign): use table reads when assigning from variables in codespace,
	* src/pic16/glue.c (pic16emitStaticSeg): fixed to correctly initialise
	char/int variables placed in codespace,
	* (pic16_emitConfigRegs): NEW, emits a list with configuration
	registers set in .asm file, no need for --pomit-config-words anymore,
	* (pic16glue): some 8051 legacy segments are commented out
	(to be removed completely),
	* added support for alternative assembler and linker with --asm=
	and --link= command line arguments,
	* peepholes are disabled automatically in the port, no need to
	specify on command line,
	* port supports natively char/int/long multiplication, but converts
	all divisions to support functions,
	* main.c: pic16_linkCmd and pic16_asmCmd changed to force output
	to the file set in variable $2,
	* pcode.c (pic16_emitDB, pic16_flushDB): modified to print printable
	strings in ASCII format and not in hex,
	* ralloc.c (serialRegAssign): added a triplet of conditional calls
	to pic16_allocDirReg for IC_RESULT, IC_LEFT and IC_RIGHT so to
	allocate proper register if iCodes aren't temporary,

2004-06-02 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/zeropad.c: added TEST_G macro for alpha

2004-06-02 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (genPcall): warning about gpsim and PCLATU
	is commented out

2004-06-01 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genPointerGetSetOfs): disabled optimization if
	computed address is reused
	* src/hc08/gen.c (genPackBits): fixed offsets in assignments to
	multi-byte bitfields

2004-06-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/z80/gen.c: (genArrayInit): must check for pointers too

2004-06-01 Maarten Brock <sourceforge.brock AT dse.nl>

	* support/regression/tests/zeropad.c: never meant to commit the
	  nestedstruct test: removed, added check for GCC version

2004-05-31 Maarten Brock <sourceforge.brock AT dse.nl>

	* src/SDCCast.c (createIvalArray): fixed bug 770487 SIGSEGV
	* src/SDCCglue.c (emitRegularMap): fixed bug 770484 allocation problem
	* src/SDCCglue.c (initPointer, printIvalType, printIvalStruct,
	  printIvalArray, printIvalFuncPtr, printIvalPtr, printIval): fixed
	  bugs 928906 and 954082 half-empty initializers
	* src/SDCCsymt.h,
	* src/SDCCsymt.c (getAllocSize): added for above fix
	* src/z80/gen.c (genArrayInit): fixed bug 741044
	* support/regression/tests/zeropad.c: added tests

2004-05-30 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.c (pic16_dump_section): corrected bug which
	caused some symbols of the libraries to be misplaced

2004-05-28 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/glue.c,
	* src/pic16/ralloc.h,
	* src/pic16/ralloc.cc: prefixed IS_CONFIG_ADDRESS with PIC16_
	to fix conflict with pic port

2004-05-28 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/glue.c (pic16emitStaticSeg): do not print as publics or
	externs configuration variables,
	* src/pic16/ralloc.h,
	* src/pic16/ralloc.cc: IS_CONFIG_ADDRESS is made public and added
	prototype in header, commented out some debug messages

2004-05-26 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/glue.c,
	* src/pic16/main.c,
	* src/pic16/pcode.c: added gpasm directives #FILE/#LINE
	for gpasm COFF object generation. Thanks to D. Hawkins for
	his patch info

2004-05-25 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/ds390/main.c,
	* src/mcs51/main.c: fixed sort order of mnemonics (thanks to Maarten
	Brock for spotting this)
	* src/ds390/gen.c (genEndFunction),
	* src/mcs51/gen.c (genEndFunction): always save psw if function is an
	interrupt handler and critical. Disable push/pop optimizations when
	peephole optimizations disabled.

2004-05-25 Vangelis Rokas <vrokas AT otenet.gr>

	Updated pic16 library sources and headers.
	* device/lib/pic16/pic18f*/ ,
	* device/include/pic16/*.h: modified to handle structured SFR
	definitions

2004-05-25 Vangelis Rokas <vrokas AT otenet.gr>

	* src/port.h (PORT structure): added hook initPaths, now each
	port can declare its own default search paths,
	which can been seen with the --print-search-dirs option,
	see pic16 port for example,
	* src/SDCCmain.c (setBinPaths, setIncludePaths, setLibPath,
	setDataPaths): test to options.printSearchDirs is ifdef'ed out,
	* (doPrintSearchDirs): NEW, replaces in a central manner the
	printing of search dirs which was split in set*Paths functions,
	* (main): added call to port->initPaths and doPrintSearchDirs,
	* src/avr/main.c,
	* src/ds390/main.c,
	* src/hc08/main.c,
	* src/izt/i186.c,
	* src/izt/tlcs900h.c,
	* src/mcs51/main.c,
	* src/pic/main.c,
	* src/pic16/main.c: modified port structures to reflect addition of
	initPaths hook,

	* src/pic16/device.c (regCompare): registers are finally sorted by name,
	* (pic16_dump_section): for registers in same address reserve memory once,
	* src/pic16/device.h (struct PIC16_device): changed variable gen_banksel
	to no_banksel,
	* src/pic16/genarith.c (pic16_genPlus): added code to handle cases where
	result is greater in size than right or left,
	* (pic16_genUMult8X8_8): there are some cases where the result can
	be 16 bits size, so handle these,
	* src/pic16/gen.c: changed some pic16_emitpcomment to DEBUGpic16_emitcode,
	* (pic16_outBitC): modified to emit pcodes,
	* (pic16_storeForReturn): using is_LitOp to see if operand is literal
	or not,
	* (genDivOneByte): implemented algorithm to divide 8-bits,
	* (genCmp): uncommented goto, but issues still exist,
	* (genAnd): fixed a bug with variables >8bits,
	* (genPackBits): optimization added that uses BCF/BSF to change a
	single bit,
	* (genAssign): fixed bug when assigning floating point literals,
	* src/pic16/glue.c (pic16glue): added assembler directive 'code' before
	__sdcc_gsinit_startup label,
	* src/pic16/main.c (_pic16_init): removed search directory
	initialisations,
	* (_pic16_initPaths): NEW, used to initialise search directories,
	* (_hasNativeMulFor): support functions for all except char/int
	multiplication, and char division,
	* (PIC16_port struct): modified entry for native mul support,
	* src/pic16/pcode.c (insertBankSwitch): modified to support the renamed
	no_banksel option,
	* (buildCallTree): call to register_usage is ifdef'ed out,

2004-05-22 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/include/string.h: applied Stas Sergeev's patch to make this
	header file compatible with the preprocessor -Wundef option
	* src/SDCCmain.c (main): abort compilation if preprocessor reports
	failure (fixes bug #941458)

2004-05-21 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCopt.c (killDeadCode): fixed bug #907733
	* support/Util/SDCCerr.c: reworded E_AUTO_ASSUMED diagnostic to clarify
	that the variable, not the function, should be static
	* src/SDCCval.c (valCastLiteral): fixed bit initialization from literal
	to be consistent with non-literal case

2004-05-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (isConformingBody): fixed bug #949967
	* src/SDCCopt.c (cnvToFcall, cnvToFloatCast, cnvFromFloatCast,
	convilong): fixed bug #952086

2004-05-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCmem.c (allocVariables): fixed bug #955321

2004-05-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/main.c (_hc08_genAssemblerEnd),
	* src/SDCCdwarf2.c (dwOpenFile, dwCloseFile, dwWriteFunction,
	dwWriteModule, dwWriteCLine, dwWriteALine, dwarf2FinalizeFile):
	completely eliminated the use of a temporary file
	* src/SDCCdwarf2.c (dwWriteAttr): fixed bug with location list offset
	when more than one file linked
	* src/SDCCloop.c (pointerAssigned): fixed bug #954163

2004-05-17 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCval.c (valForArray): applied Maarten Brock's patch #947682
	which fixes bug #543481
	* support/regression/tests/bug-751703.c: fixed comments left from a
	cut and paste error
	* src/SDCCdwarf2.c (dwCloseFile): don't explicitly close a temp file
	* src/SDCCdwarf2.c (dwTagFromType): added bitfield support
	* src/SDCCdwarf2.c (dwWriteSymbolInternal): handle extern within local
	scopes
	* src/SDCCdwarf2.c (dwWriteLineNumber): line number deltas are signed
	* src/SDCCmain.c (processFile, parseCmdLine): non-alphanumeric chars
	are now	changed to underscores in moduleName

2004-05-15 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkmem.c: better fix for bug #954173

2004-05-15 Maarten Brock <sourceforge.brock AT dse.nl>
	committed by Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/c8051f020.h: newly added SiLabs (Cygnal) header file
	* device/include/c8051f000.h,
	* device/include/c8051f120.h,
	* device/include/c8051f300.h,
	* device/include/c8051f310.h,
	* device/include/c8051f320.h: updated (added _XPAGE, CAPN, CAPP,
	PWM16) and detab'ed

2004-05-15 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: mentioned sourceforge's delay between web frontend
	and mailing lists, doc'ed --no-peep-comments, removed reference
	to knoppix (newest version has no LyX/LaTeX), other minor changes
	* src/SDCCglue.c (glue): save 2 bytes stack space with
	option --main-return. The ljmp could probably be avoided too

2004-05-14 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkmem.c, as/mcs51/lkaomf51: fixed bug 954173

2004-05-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.h: added IS_AUTO(symbol) test macro
	* src/SDCCopt.c (isLocalWithoutDef),
	* src/SDCCicode.c (operandFromSymbol): use the IS_AUTO test macro
	which adds a !IS_EXTERN codition. Fixes bugs #877426 and #751703.
	(credit to Maarten Brock for patch #949363, on which this is based)
	* support/regression/tests/bug-751703.c: some test cases of extern used
	within inner scopes.

2004-05-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCdwarf2.c (dwMatchTypes): structs must have matching
	SPEC_STRUCT
	* src/SDCCdwarf2.c (dwTagFromType): fix to handle recursive
	struct definitions
	* src/SDCCdwarf2.c (dwWriteModule, dwNewDebugSymbol, dwWriteEndFunction,
	dwWriteLabel): fix to create valid debugger symbols even when
	the module name has non-alphanumeric symbols in it
	* src/SDCCdwarf2.c (dwWriteSymbolInternal): better detection for
	when a variable's allocation has been optimized away


2004-05-13 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (hc08_emitDebuggerSymbol),
	* src/hc08/main.c,
	* src/mcs51/gen.c (mcs51_emitDebuggerSymbol),
	* src/mcs51/main.c,
	* src/ds390/gen.c (ds390_emitDebuggerSymbol),
	* src/ds390/main.c,
	* src/z80/gen.c (z80_emitDebuggerSymbol),
	* src/z80/main.c,
	* src/pic/gen.c (pic14_emitDebuggerSymbol),
	* src/pic/main.c,
	* src/pic16/gen.c (pic14_emitDebuggerSymbol),
	* src/pic16/main.c,
	* src/avr/gen.c (avr_emitDebuggerSymbol),
	* src/avr/main.c,
	* src/xa51/gen.c (xa51_emitDebuggerSymbol),
	* src/xa51/main.c,
	* src/SDCCdebug.c (emitDebuggerSymbol),
	* src/SDCCdebug.h,
	* src/port.h: added a debugger struct to the port struct. Added a
	callback for defining debugger symbols

	* src/SDCCast.c (createLabel),
	* src/SDCC.y (labeled_statement): mark all compiler generated labels
	with isitmp = 1
	* src/SDCCicode.h,
	* src/SDCCicode.c (geniCodeFunctionBody): added a link from the FUNCTION
	iCode back to the ast for the function

	* src/hc08/ralloc.c (hc08_assignRegisters),
	* src/hc08/ralloc.h: define a regs struct for the stack pointer. Removed
	unneeded fields from the regs struct.
	* src/hc08/gen.c (transferRegReg, genFunction, genEndFunction): use the
	pushReg() & pullReg() functions instead of emitcode()

	* src/hc08/gen.c (genLabel, genhc08Code),
	* src/SDCCdebug.h: Added additional debugger hooks needed for DWARF

	* src/cdbFile.c (cdbWriteLabel, cdbWriteScope): Added stubs for unneeded
	debugger hooks

	* src/hc08/gen.c (genEndFunction, genhc08Code),
	* src/hc08/gen.h,
	* src/mcs51/gen.c (genEndFunction, gen51Code),
	* src/mcs51/gen.h,
	* src/ds390/gen.c (genEndFunction, gen390Code),
	* src/ds390/gen.h,
	* src/z80/gen.c (genEndFunction, genZ80Code),
	* src/z80/gen.h,
	* src/z80/z80.h,
	* src/pic/gen.c (genEndFunction, genpic14Code),
	* src/pic/gen.h,
	* src/pic16/gen.c (genEndFunction, genpic16Code),
	* src/pic16/gen.h,
	* src/avr/gen.c (genEndFunction, genAVRCode),
	* src/avr/gen.h,
	* src/xa51/gen.c (genEndFunction, genXA51Code),
	* src/xa51/gen.h,
	* src/cdbFile.c (cdbWriteFunction, cdbWriteEndFunction): moved cdb
	specific code to cdbFile.c and out of the backend code generators

	* as/hc08/lkmain.c (main): removed OMF51 support from link-hc08
	* as/hc08/lkarea.c (lnkarea): areas with NOLOAD attribute default
	starting address is now 0

	* as/hc08/asm.h,
	* as/hc08/m08pst.c,
	* as/hc08/asmain.c (asmbl): implemented the .sleb128 and .uleb128
	assembler directive for DWARF support
	* as/hc08/lkelf.c (elf): only increment address when rtflg[] set

	* src/src.dsp,
	* src/Makefile.in,
	* src/SDCCdwarf2.c: preliminary DWARF (ver 2) debugger data generator

2004-05-04 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genJumpTab, emitcode, genhc08code): fixed stack error
	and inappropriate peephole optimization in jump tables

2004-04-30 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/hc08/m08pst.c,
	* src/SDCCglue.c: sdccopt works for the hc08 port now

2004-04-27 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (geniCodePreInc, geniCodePreDec): fixed bug #942130

2004-04-27 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/hc08/lkelf.c: sdccconf.h is not available in WIN32

2004-04-24 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCpeeph.c (replaceRule): support empty replacement peephole
	rules
	* src/SDCCmain.c,
	* src/SDCCglobl.h,
	* src/SDCCpeeph.c (getPeepLine): new option --no-peep-comments omits
	comments from the peephole optimizer replacement rules
	* src/SDCCmem.c (printAllocInfoSeg): give actual location of spilled
	symbols
	* src/SDCCcse.c (updateSpillLocation),
	* src/SDCCopt.c (killDeadCode, findReqv): better tracking of register
	equivalents
	* src/hc08/ralloc.c (regTypeNum): pseudo symbols must be in DATA only
	* src/hc08/main.c (_hc08_finaliseOptions): made pointers to stack
	objects far pointers

2004-04-23 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.h: a missing part of my last change
	* src/pic/ralloc.c (regTypeNum),
	* src/pic16/ralloc.c (regTypeNum): fixed statement/declaration order

2004-04-23 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.h,
	* src/SDCCicode.c (aggrToPtrDclType),
	* src/SDCCptropt.h,
	* src/SDCCptropt.c (ptrBaseRematSym, ptrPseudoSymSafe,
	ptrPseudoSymConvert),
	* src/pic/ralloc.c (regTypeNum),
	* src/pic16/ralloc.c (regTypeNum),
	* src/hc08/ralloc.c (regTypeNum),
	* src/ds390/ralloc.c (regTypeNum),
	* src/mcs51/ralloc.c (regTypeNum): check for dependancy hazards before
	creating pseudo symbols (fixed bugs #777768, #930484, and #933966)

2004-04-22 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* link/z80/lkmain.c (afile),
	* as/hc08/lkmain.c (afile),
	* as/mcs51/lkmain.c (afile): fix suggested by Maarten Brock to
	prevent a pointer problem when a filename has no directory and
	no extension specified.

2004-04-21 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* link/z80/lkmain.c (afile): allow periods in directory names
	* link/z80/lkmain.c (afile),
	* as/mcs51/lkmain.c (afile),
	* as/hc08/lkmain.c (afile): allow linker script file to have an
	extension other than ".lnk"
	* link/z80/lklex.c (getfid),
	* link/z80/lkmain.c (parse),
	* as/mcs51/lklex.c (getfid),
	* as/mcs51/lkmain.c (parse),
	* as/hc08/lklex.c (getfid),
	* as/hc08/lkmain.c (parse): Support comments in the linker script
	file on lines by themselves and after filenames

2004-04-20 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/link_hc08.dsp: Added as/hc08/lkelf.c to project.

2004-04-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/peeph-z80.def: removed some peephole rules that don't
	work with multibyte arithmetic (fixed bug #937126)
	* src/mcs51/peeph.def: fixed peephole rules 150-158 to apply only
	to registers and not global variables
	* src/SDCCicode.c (geniCodeAssign, ast2iCode, geniCodePostInc,
	geniCodePreInc, geniCodePostDec, geniCodePreDec,
	geniCodeLogicAndOr, geniCodeConditional): enforce strict lvalue
	checking for assignments not internally generated (fixed bug #931895)
	* src/SDCC.y (postfix_expr): ignore typedefs when looking for a
	structure member (fixed bug #930072)

2004-04-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCmain.c (linkEdit),
	* src/hc08/main.c (_hc08_parseOptions),
	* as/hc08/Makefile.in,
	* as/hc08/aslink.h,
	* as/hc08/asm.h,
	* as/hc08/m08pst.c,
	* as/hc08/lkrloc.c (relr, rele),
	* as/hc08/lkarea.c (lnkarea)
	* as/hc08/lkmain.c (afile, parse),
	* as/hc08/lkelf.c: support for ELF output
	* as/hc08/lks19.c (s19),
	* as/hc08/lkihx.c (ihx): ignore areas with the NOLOAD attribute

2004-04-17 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkihx.c: Fixed bug #899105.

2004-04-16 Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* doc/sdccman.lyx: Added instructons on how to convert MSVC .dsw and
	.dsp files from Unix to DOS.

2004-04-16 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* doc/sdccman.lyx: removed the ANSI-C noncompliance note regarding
	function pointers; we have been compliant for several months now.
	* src/mcs51/ralloc.c (serialRegAssign): enabled part of my 2004-04-13
	change that was accidently commented out
	* src/mcs51/gen.c (freeAsmop, getFreePtr, freeForBranchAsmop, genIfxJump,
	genCmpEq, jmpTrueOrFalse, genCmp, genAnd, genOr, genXor, genIfx): fixed
	bug #922319

2004-04-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c: output of all of the internal debugging information
	is now controlled by the D() macro; it is disabled by default

2004-04-13 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (serialRegAssign, fillGaps, allocThisReg): try
	harder to keep the same registers during a CAST iCode
	* src/SDCCopt.c (optimizeCastCast, eBBlockFromiCode): casts of char to
	long via int can be done in a single cast, if the signedness is
	correct.
	* support/regression/tests/bug-927659.c: fixed to avoid conflict with
	putchar() in tinibios.c in ds390's library

2004-04-12 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): fixed bug #898889,
	cast result of a literal complement too
	* src/mcs51/ralloc.c (packRegsForAssign): fixed bug #930931,
	fixed check for bitfields

2004-04-11 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (geniCodeLogic): made it static,
	(geniCodeLogicAndOr): added in order to fix bug #905492,
	(ast2iCode): fixed bug #905492
	* support/regression/tests/bug-905492.c: added
	* src/SDCCast.c (decorateType): don't decorate/process parms twice,
	(processParms): fixed bug #927659: don't copy parms, this will clear
	decorated flag
	* support/regression/tests/bug-927659.c: added

2004-03-29 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (addCast): don't cast float to char
	* device/lib/libsdcc.lib: added _memmove

2004-03-28 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/large/Makefile: fixed parallel execution by
	replacing `make` by `$(MAKE)`

2004-03-28 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genPointerGetSetOfs): correctly handle 1 byte array
	offsets (fixes bug #923936)

2004-03-26 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/small/Makefile: fixed parallel execution by
	replacing `make` by `$(MAKE)`

2004-03-23 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/vprintf.c (vsprintf): minor optimization, see bug #801101

2004-03-23  Scott Dattalo  <scott AT dattalo.com>

	* src/pic/gen.c (genCpl): multi-byte complements were not working.
	* src/regression/Makefile: Regression test was not running.

2004-03-23 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (resultTypePropagate, decorateType): avoid promotion to int for
	complement if possible
	* src/SDCCval.c (valComplement),
	* src/SDCCicode.c (operandOperation): fixed complement of literal
	* support/regression/tests/onebyte.c (testComplement): added

2004-03-22 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (processParms): fixed bug #920866; decorateType() can
	return an optimized tree; actually replace actParm with the new tree
	* src/SDCCast.h: added some parantheses to remove side effects
	* support/regression/tests/bug-920866.c

2004-03-21  Scott Dattalo  <scott AT dattalo.com>
	* src/pic/gen.c, src/pic/gen.h, src/pic/genarith.c, src/pic/pcode.c:
	Bit operands were not being handled properly in the pic14 port.
	(now src/regression/add.c passes again).

2004-03-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y (labeled_statement): case and default no longer require
	a following statement (RFE #893037)

2004-03-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (pushSide, genSignedRightShift, genDjnz, geniPush):
	use MOVA macro to avoid "mov a,acc" when peephole optimizer is
	disabled (fixes bug #916294)
	* sim/ucsim/s51.src/mov.cc (inst_mov_a_addr): Throw an error on
	"mov a,acc"; patch provided by Lenny Story
	* device/include/mc68hc908gp32.h: header contibuted by Juan Gonzalez

2004-03-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (genFunction): optimize RECEIVE in reentrant
	functions
	* src/ds390/gen.c (genFunction, genEndFunction),
	* src/ds390/ralloc.c (ds390_assignRegisters),
	* src/mcs51/gen.c (genFunction, genEndFunction, mcs51_assignRegisters):
	* src/mcs51/ralloc.c (mcs51_assignRegisters): Skip optimizing registers
	pushed if there are parameters passed on the stack. Also, a cleaner
	way to decide if r0/r1 should be pushed/popped. (Together they fix
	bug #918693)

2004-03-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* doc/sdccman.lyx,
	* device/lib/mcs51/crtpagesfr.asm,
	* device/lib/mcs51/crtxinit.asm,
	* device/lib/mcs51/crtxstack.asm: Changed name of _PAGESFR to _XPAGE
	to avoid confusion with Si Lab's SFRPAGE register.

2004-03-17 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCglue.c (emitMaps): allow public sfr variables
	* src/SDCCglue.c (initialComments): include compiler build date
	with compiler version and put the timestamp of the generated
	assembly file on a serperate line to be less confusing.
	* src/port.h: added genInitStartup hook
	* src/avr/main.c,
	* src/ds390/main.c,
	* src/hc08/main.c,
	* src/pic/main.c,
	* src/pic16/main.c,
	* src/xa51/main.c,
	* src/z80/main.c: genInitStartup initialize as NULL (default to
	historical behaviour)
	* src/SDCCglue.c (glue): _sdcc_gsinit_startup is now port specific.
	* src/mcs51/main.c: (_mcs51_genInitStartup, _mcs51_genExtraAreas,
	_mcs51_genXINIT, _mcs51_genRAMCLEAR): link initialization code from the
	library instead of hard coding it into the compiler.
	* support/regression/ports/mcs51-stack-auto/spec.mk,
	* src/SDCCmain.c (linkEdit): added mcs51.lib to the link libraries
	* device/lib/mcs51/Makefile,
	* device/lib/small/Makefile,
	* device/lib/large/Makefile,
	* device/lib/mcs51/crtpagesfr.asm,
	* device/lib/mcs51/crtstart.asm,
	* device/lib/mcs51/crtxclear.asm,
	* device/lib/mcs51/crtxinit.asm,
	* device/lib/mcs51/crtclear.asm,
	* device/lib/mcs51/crtxstack.asm: move most of the mcs51 C runtime
	startup/initialization out of src/SDCCglue.c and src/mcs51/main.c
	and into user configurable files.
	* device/lib/clean.mk: clean mcs51 directory too
	* support/regression/tests/longlit.c: added static to T1 declaration
	* doc/sdccman.lyx: documented _PAGESFR sfr for customizing pdata
	accesses in the initialization code

2004-03-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/include/mc68hc908qy.h: corrected declarations of FLBPR and
	OSCTRIMVAL as noted in bug #916008

2004-03-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCloop.c (basicInduction): fixed bug with loop induction
	in loops with multiple exits (reported as incorrect registers
	used by Martin Helmling in Sdcc-user list)

2004-03-12 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/ds390/main.c (_ds390_genAssemblerPreamble): cosmetic change,
	made ds390 register extensions look less like error messages

2004-03-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCglue.c (printIvalPtr): fixed bug with pointer initializer
	reported by Adam Wozniak in Sdcc-user list

2004-03-10 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): fixed with bug and promotion in
	arithmetic optimizations, added debug output

2004-03-09 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/time.c (mktime): fixed bug reported by Bert Thomas
	* sdcc.spec: updated and split sdcc into 3 rpms
	* src/SDCCast.c (decorateType): &|^ don't need addCast(); addCast() is
	needed for literals of LEFT_OP and '+'
	* src/SDCCicode.c (geniCodeLogic): I must have been braindead when I
	introduced RESULT_TYPE_NOPROM
	(geniCodeMultiply): fixed logic for decision if mul is optimized to
	left shift
	* src/SDCCsymt.c (computeType): op is int; added RESULT_TYPE_OTHER;
	limited promotion to int only for '*'
	* src/SDCCsymt.h (computeType): op is int, removed RESULT_TYPE_NOPROM

2004-03-09 Hans Dorn <hjdorn AT users.sourceforge.net>

	* src/pic16/gen.c (genSkip),
	(genc16bit2lit), (gencjneshort): commented out
	(is_LitOp): new helper function, checks operand type
	(genCmpEq): rewritten

2004-03-08 Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/tests/bug-908454.c: added

2004-03-07 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (addCast): fixed bug #908454 by promoting bits to char
	* src/SDCCicode.c (usualBinaryConversions): op needs int type
	(geniCodeCast): cosmetic, don't preserve bit storage class
	(geniCodeLeftShift): added promotion
	(geniCodeLogic): fixed regression
	* src/SDCCsymt.c (computeTypeOr): accept bits too
	(compareType): 2nd part of fix for bug #908454, needed for bitfields

2004-03-07  Borut Razem <borut.razem AT siol.net>

	* support/Util/findme.c: alloca() replaced with malloc()/free() pair

2004-03-06 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/ralloc.c (pic16_genPackRegisters): reverted to old
	version of pic16_genPackRegisters which does not check if ic is a
	CAST operator,
	* src/pic16/gen.c (ifxForOp): disabled new and untested code in
	function cause string1.c regression test fails

2004-03-06 Bernhard Held <bernhard AT bernhardheld.de>

	* sim/ucsim/configure.in,
	* sim/ucsim/configure,
	* sim/ucsim/doc/Makefile.in: use docdir
	* src/SDCC.y: fixed sbit atrributes
	* src/SDCCast.c (getResultTypeFromType): added support for bitfields
	* src/SDCCast.c (decorateType): |^& need special promotion handling
	* src/SDCCast.h,
	* src/SDCCsymt.h: moved definition of RESULT_TYPE
	* src/SDCCsymt.h (computeType),
	* src/SDCCicode.c: computeType() needs op
	* src/SDCCsymt.c (checkTypeSanity),
	* doc/sddman.lyx: "plain" bitfields are unsigned
	* src/SDCCsymt.c (computeTypeOr): added
	* src/SDCCsymt.c (computeType): added support for bitfields, fixed
	|^& ops
	* src/SDCCval.c (val*): computeType() needs op
	* src/SDCCval.c (valCastLiteral): fixed casting of bitfields
	* support/regression/tests/onebyte.c: added tests for |^&

2004-03-06 Hans Dorn <hjdorn AT users.sourceforge.net>

	* src/pic16/gen.c: (genpic16Code) use copy of printILine's output
	for writing icode into asm output.

2004-03-05 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.c: added some debug lines enabled
	with macro DEBUG_CHECK,
	* src/pic16/genarith.c: more debug in genPlus,
	* (pic16_genUMult8XLit_16, pic16_genUMult8X8_16): removed,
	* (pic16_genUMult16X16_16, pic16_genUMult16XLit_16): NEW,
	* src/pic16/gen.c: added prototypes for pic16_genMult16X16_16,
	* (aopForSym): onStack symbols are re-placed in data memspace,
	and onStack flag is cleared,
	* (pic16_popGetTempReg, pic16_popReleaseTempReg): modified to
	copy temporary pcodeop,
	* (genPcall): added warning for not updating PCLATU,
	* (genFunction): removed test with IFFUNC_CALLEESAVES, its
	always true for pic16 port,
	* (genMultOneWord): NEW, supports integer multiplication,
	* (genMult): modified to call genMultOneWord,
	* (ifxForOp): added warning when return NULL,
	* src/pic16/glue.c (pic16emitRegularMap): symbol implicit
	flag is set before call to operandFromSymbol for implicit
	added structures,
	* src/pic16/main.c (_pic16_finaliseOptions): options.float_rent,
	options.intlong_rent are set by default,
	* (_hasNativeMulFor): modified to allow port generation of integer
	multiplication,
	* src/pic16/ralloc.c (pic16_allocDirReg): commented out line which
	set regtype to REG_SFR for all registers, restricting seting the
	accessBank flag for registers 0<= r < 0x80 and 0xf80<=r<=0xfff,

2004-03-05 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peephole.def: added 251.b and 253.x. 253.x are applied
	more than 500 times in the regression tests

2004-03-05 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* support/Util/SDCCerr.h,
	* support/Util/SDCCerr.c,
	* src/SDCC.y (struct_or_union_specifier, enum_specifier,
	enumerator_list),
	* src/SDCCsymt.c (addSymChain): show location of oriignal definition
	for symbol conflicts.
	* support/valdiags/tests/enum.c,
	* support/valdiags/tests/tentdecl.c,
	* support/valdiags/tests/struct.c: expect possible error messages
	referring to original symbol definitions.
	* src/SDCC.y (struct_or_union_specifier, struct_declarator),
	* src/SDCCsymt.h,
	* src/SDCCsymt.c (promoteAnonStructs): support anonymous struct/union

2004-03-03 Hans Dorn <hjdorn AT users.sourceforge.net>

	* src/pic16/gen.c (gencjne): fixed for right=REG / left=LIT

2004-02-03 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/ralloc.c (newReg): fixed bug #908929

2004-03-02 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/ds390/gen.c: added missing #include "main.h"

2004-03-02 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.c (checkAddSym): NEW, adds a symbol to set while
	checking if symbol is already in set,
	* src/pic16/device.h: prototype for checkAddSym,
	* src/pic16/gen.c: (_G): added entry interruptvector,
	* (assignResultValue): removed some commented out lines,
	* (genFunction): check for ISR via sym->type, absolute section for
	interrupt code is created via a new pBlock, the goto instruction is
	placed now correctly at the interrupt vector position, changed all
	references from ivec to _G.interruptvector,
	* WREG,STATUS,BSR are not saved in stack upon an entry to interrupt
	is the interrupt is a high priority one, same for return from ISR,
	* src/pic16/glue.c: changed all calls of addSetHead for publics and
	externs to calls of checkAddSym,
	* src/pic16/pcode.c (pic16_pBlockConvert2*): emit warning when
	pic16_pcode_verbose flag is set,
	* src/pic16/pcode.h: extern to pic16_pcode_verbose,
	* src/pic16/pcoderegs.c: message about how many registers are saved
	will only be emitted if pic16_pcode_verbose flag is set,

2004-03-02 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/ds390/ralloc.h,
	* src/ds390/ralloc.c (ds390_regWithIdx),
	* src/ds390/gen.c (emitcode),
	* src/ds390/main.h,
	* src/ds390/main.c (instructionSize, ds390newAsmLineNode, updateOpRW,
	ds390opcodeCompare, asmLineNodeFromLineNode, getInstructionSize,
	ds390operandCompare, getRegsRead, getRegsWritten,
	initializeAsmLineNode): customized instruction size calculation for
	ds390, started basis for some register optimizations
	* src/ds390/gen.c (gen390Code, emitcode): associate iCodes with
	corresponding assembly output
	* src/ds390/gen.c (genFunction, genEndFunction): added case to handle
	missing push/pop of r0/r1. Optimized push/pops

2004-03-01 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/main.c (instructionSize): fixed ACALL size
	* src/mcs51/main.c (updateOpRW): fixed bug with @dptr, @a+dptr operands

2004-03-01 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/device.c (pic16_dump_section): fixed a bug that allowed
	the sorting of rlist with NULL elements
	* (print_idataType, print_idata): NEW to create idata sections
	* src/pic16/device.h: idataSymSet new variable
	* src/pic16/gen.c (genFunction): fixed some bugs in string
	comparing, improved the absolute section creation for ISRs,
	added FSR0L/FSR0H in registers that are saved in an ISR,
	* (genInline): fixed the processing of inline snippets,
	now they undergo no process by the peephole optimizer
	* src/pic16/glue.c (pic16emitRegularMap): symbols with initialiser
	are placed in idataSymSet,
	* (pic16emitStaticSeg): extern symbols are added in externs,
	* src/pic16/ralloc.c (pic16_allocDirReg): work around to reduce bank
	switching when aboslute variables are placed in access bank memory
	* (pic16_writeUsedRegs): added call to pic16_dump_idata,
	* (packRegsForSupport,packRegsForAccUse,packRegsForOneuse):
	commented out with #if,
	* (pic16_packRegisters): reintroduce the check for CAST because some
	symbols are not correctly handled,
	* src/pic16/pcode.h: changed the definition of pCodeAsmDir to hold a
	pCodeInstruction instead of pCode,
	* src/pic16/pcode.c (pic16_newpCodeAsmDir): modified for the new
	pCodeAsmDir definition,
	* (pic16_pCode2str, genericPrint): when an AsmDir pcode has a NULL
	directive, then the argument directive is emitted without the leading
	tab, hack for inline labels which must be in the first column,
	* (compareLabel,pic16_findNextInstruction),
	* (pic16_findPrevInstruction): added case for PO_ASMDIR,
	* (insertBankSwitch): modified for the new pCodeAsmDir,

2004-03-01 Hans-Juergen Dorn <hans.dorn AT apl-landau.de>
	patch applied by Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (pic16_popGet): case PO_DIR, adds the offset to
	instance,
	* (pushSide): commented out with #if,
	* (assignResultValue): fixed some typos in saving
	registers,
	* (genPcall): FIXED and sync'ed with genCall,
	* (genDataPointerGet,genDataPointerSet): using offset not leoffset
	* (genNearPointerGet): fixed to handle some more cases,
	implementation scheme via table reads,
	* (genConstPointerGet): modified to access code memory correct,
	* (genCodePointerGet,genNearPointerSet,genGenPointerSet): modified
	and improved to handle some cases
	* glue.c (printIvalType,printIvalChar,emitStaticSeg): use "DB"
	instead of "RETLW" for init data
	* src/pic16/ralloc.c (pic16_allocDirReg): warning when a symbol is
	not IN_DIRSPACE, work around to reduce bank switching when aboslute
	variables are placed in access bank memory (<0x80 and >=0xf80),
	* src/pic16/pcode.c: added SFRs TBLPTR, TABLAT, added opcodes TBLRD,
	TBLRD_POSTINC,TBLRD_POSTDEC,TBLRD_PREINC,TBLWT,TBLWT_POSTINC,
	TBLWT_POSTDEC,TBLWT_PREINC
	* Fixed initialisation of BSR, set "alias" for SSAVE to "0"
	* (pic16_emitDB,pic16_flushDB): New functions to generate "DB"
	directives
	* (pic16_pCodeConstString): use "DB" instead of "RETLW"
	* src/pic16/pcode.h: added TBLRD*,TBLWT*, added pic16_emitDB,
	pic16_flushDB, made pic16_newpCodeAsmDir public, added TBLPTR, TABLAT
	* src/pic16/ralloc.h: added IDX_BSR,IDX_TBLPTR*,IDX_TABLAT

2004-02-29  Borut Razem <borut.razem AT siol.net>

	* src/Makefile.in, src/SDCCutil.c, support/Util/findme.c,
	support/Util/findme.h, support/Util/system.h: enhance binary relative
	search for lib and include by using findProgramPath()

2004-02-28 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCpeeph.h,
	* src/SDCCpeeph.c (pcDistance),
	* src/port.h,
	* src/mcs51/ralloc.h,
	* src/mcs51/ralloc.c (mcs51_regWithIdx),
	* src/mcs51/main.h,
	* src/mcs51/main.c (instructionSize, asmLineNode, updateOpRW,
	mcs51opcodeCompare, asmLineNodeFromLineNode, getInstructionSize,
	mcs51operandCompare, getRegsRead, getRegsWritten): made instruction
	size calculation port specific,	started basis for some register
	optimizations
	* src/mcs51/gen.c (genFunction, genEndFunction): added case to handle
	missing push/pop of r0/r1. Optimized push/pops
	* src/mcs51/ralloc.c (packregisters): fixed bug #727095
	* device/lib/_modsint.c (_modsint),
	* device/lib/_modslong.c (_modslong): fixed sign of result in non-asm
	and stack version so regression tests pass

2004-02-26 Bernhard Held <bernhard AT bernhardheld.de>

	* src/Makefile.in (dep): include SLIBOBJS in dependency check
	* src/SDCCast.c (decorateType): catch another small optimization
	with '?' operator
	* src/SDCCsymt.c (computeType): added comments and cosmetic changes
	* src/SDCCval.c (valMult, valDiv, valMod, valPlus, valMinus, valShift):
	modified to finally use computeType() all over SDCC,
	see Feature Request #877103
	* src/SDCCval.h: cosmetic
	* src/SDCCicode.c (operandOperation): fixed EQ_OP bug, now same as in
	valCompare(); regression tested in muldiv.c
	* support/regression/tests/muldiv.c (testMod): mod sign follows
	dividend only

2004-02-23 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): fixed bug #902362
	* doc/INSTALL.txt: fixed install instructions for win32

2004-02-21 Bernhard Held <bernhard AT bernhardheld.de>

	* device/include/Makefile.in (install): fixed by replacing spaces
	by tabs
	* doc/README.txt,
	* doc/INSTALL.txt: updated for release
	* doc/sdccman.lyx: added warning for --xstack being buggy

2004-02-20 Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic16/ralloc.c (packRegsForAccUse):  disabled functions with #if
	to eliminate build warnings.
	* src/pic16/gen.c (pic16_popGet): fixed for gcc 2.95.4

2004-02-20 Vangelis Rokas <vrokas AT otenet.gr>
	   Hans-Juergen Dorn <hans.dorn AT apl-landau.de>

	* doc/sdccman.lyx: removed PIC16 from PIC16 Port Specific Options,
	removed -penable-stack, added comment for stack pragma, added
	warning for not initializing the stack/frame registers, removed
	comment at interrupts section

	Stack is made permanent, there is no ability to disable stack usage.
	* src/pic16/device.h,
	* src/pic16/device.c: removed all references to USE_STACK macro,
	* src/pic16/device.c (pic16_dump_section): when no elements in
	rlist, free rlist before return,
	* (pic16_dump_int_registers): NEW, internal registers are a new set
	of general purpose registers reused by each function,
	* (checkAddReg): returns 1 if registers is added to set,
	* (pic16_groupRegistersInSection): when a registers is of type
	PO_GPR_TEMP add it in pic16_int_regs and not in pic16_rel_udata,
	* src/pic16/device.h: memRange and Assigned Memory are deleted,
	SRCASECMP macro is moved here from device.c
	* src/pic16/genarith.c (pic16_pCodeOpType): added cases for
	PO_PCLATU, PO_PRODL, PO_PRODH,
	* (pic16_pCodeOpType, genMinus,
	changed compares to "a" register, with AOP_ACC,
	* (pic16_genPlus): fixed some bugs and indented properly,
	* (pic16_addSign): changed size to size+offset in the MOVWF
	instruction,
	* (pic16_genUMult8XLit_8): NEW, uses processor MULLW instruction to
	multiply 8-bit operand by literal, result is 8-bit,
	* (pic16_genUMult8X8_8): NEW, uses processor MULWF instruction to
	multiply 2 8-bit operand, result is 8-bit,
	* (pic16_genMult8X8_8): modified to call genUMult8X*_8 functions and not
	genUMult8X*_16,
	* src/pic16/gen.c: changed accUse to contain WREG only,
	* (pic16_emitcomment): renamed to pic16_emitpcomment,
	* (aopForSym): allocated dir register when IN_DIRSPACE(space) is,
	true, do not use immediate addressing any more unless sym is a
	pointer in codespace,
	* (aopForRemat): do not use immediate addressing when symbol not in
	codespace and when symbol's address is requested,
	* (aopOp): for-loop in if(sym->accUse) is modified for the new
	accUse size (= 1),
	* (aopGet): added case for AOP_ACC and don't return "accumulator
	bug" but WREG instead,
	* (popGetTempReg): pushes contents of temporary register in stack,
	* (popReleaseTempReg): pops contents of temporary register from
	stack. Use popGetTempReg/popReleaseTempReg in aligned pairs,
	* (pic16_popGet): separated case AOP_ACC to return register WREG
	from processor registers, AOP_PCODE not checks if pcop is PO_DIR
	or PO_IMMEDIATE and initializes their instance/offset appropriately,
	* The whole issue with aopForSym,aopForRemat,popGet) is to minimize
	the use of immediate pointers to certain cases only.

	* (pic16_pushpCodeOpReg, pic16_poppCodeOpReg): use pic16_popGet2p,
	* (pic16_loadFromReturn, pic16_storeForReturn: NEW,
	* (assignResultValue, genCall, genRet): modified to use the new
	function return value scheme with WREG,PRODL,PRODH,FSR0L and FSR0,
	genPcall is still broken,
	* (genFunction): added code to create 'A' type pBlocks when
	interrupt functions are generated, code not extensively tested yet,
	ISRs push WREG,STATUS,BSR,PRODL,PRODH,FSR0L,FSR0H registers on stack,
	* (genEndFunction): modified so ISRs pop stored registers from stack,
	* (genMultOneByte): cleanup,
	* (AccRsh): added flag andmask, to and result with appropriate mask,
	* (genUnpackBits,genPackBits): fixed and can handle bit fields,
	* (genDataPointerGet): fixed and reenabled its use,
	* (genNearDataPointerGet): bugs fixed,
	* (genDataPointerSet): bugs fixed,
	* src/pic16/genutils.c: added functions pic16_DumpValue,pic16_DumpAop,
	pic16_DumpSymbol, pic16_DumpOp,
	* src/pic16/genutils.h: function prototypes for the above functions,
	* src/pic16/glue.c: new flags initsfpnt, to initialize stack/frame
	pointers,
	* (pic16emitRegularMap): many many many improvements, but needs a
	major cleanup,
	* src/pic16/main.c: enable_stack in pic16_options is removed,
	* (_pic16_parseOptions): removed command line options -penable-stack,
	* (_process_pragma): emit stack symbol only when stack pragma is
	processed,
	* src/pic16/pcode.c: pic16_pc_fsr0 is removed, all operations are
	redirected to FSR0L/FSR0H pair,
	* (pic16_get_op, pic16_get_op2): modifications and improvements,
	* (pic16_getRegFromInstruction, pic16_getRegFromInstruction2): added
	cases PO_PRODL,PO_PRODH, pic16_getRegFromInstruction2 returns sane
	for immediates,
	* (insertBankSwitch): modified to handle cases like: (alfa + 1)
	* (dumpPicOptype): NEW,
	* src/pic16/pcode.h: added PO_PCLATU,PO_PRODL,PO_PRODH in enum,
	* src/pic16/pcoderegs.c (pCodeRegMapLiveRangesInFlow): fixed bug
	with movff instruction,
	* src/pic16/ralloc.c: renamed typeRegWithIdx to pic16_typeRegWithIdx,
	added pic16_int_regs, some packRegsFor* functions are commented out,
	because produce errors,
	* src/pic16/NOTES: minor modifications

2004-02-18  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/aslink.h, as/mcs51/lkarea.c, as/mcs51/lkdata.c, as/mcs51/lkmain.c,
	as/mcs51/lkmem.c, src/SDCCglob.h, src/SDCCmain.c: added options --stack-size and
	--pack-iram.
	* doc/sdccman.lyx: described options --stack-size and --pack-iram.
	* as/mcs51/lkaomf51.c: fixed bug #895763

2004-02-17 Bernhard Held <bernhard AT bernhardheld.de>

	* device/include/c8051f320.h: added. Contributed by Maarten Brock.

2004-02-17 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* doc/sdccman.lyx: added details about the HC08 storage classes and
	interrupts, fixed the register usage info for z80 & gbz80

2004-02-17 Vangelis Rokas <vrokas AT otenet.gr>

	* doc/sdccman.lyx: added more pic16 port documentation
	* device/include/pic16/: added header pic18fregs.h

2004-02-16 Bernhard Held <bernhard AT bernhardheld.de>

	* doc/sdccman.lyx: added Vangelis' contribution

2004-02-16 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCClrange.c (rlivePoint): live range of SEND operand should
	extend to the next CALL or PCALL, not just to the next CALL.

2004-02-16 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/gen.c (genInline): fixed bug #896482 with inline assembly

2004-02-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (packRegsForAssign, reassignAliasedSym): fixed
	bug #895752 and a better fix for bug #716790

2004-02-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.c (processFuncArgs): fixed bug #896796

2004-02-14 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: minor changes, minor changed

2004-02-13 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (usualBinaryConversions): removed pic16 from ports
	which can't handle SDCC_NEWONEBYTEOPS,
	(geniCodeMultiply): removed conversion from mult to shift for pic14
	and pic16

2004-02-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.h,
	* src/hc08/gen.c (storeRegToAop, aopOp, aopAdrStr, accopWithAop,
	rmwWithAop): Ported my 2003-10-02 fix for bug #663539 to the hc08,
	thus fixing bug #895406

2004-02-11 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/_modsint.c,
	* device/lib/_modslong.c: sign follows divisor only
	* src/hc08/gen.c (genMultOneByte): if result size is 1,
	signs or signedness can be ignored
	* src/SDCCast.c (addCast): cosmetic - added lineno to CAST
	* src/SDCCast.c (resultTypePropagate): added even more ops: +, - and *,
	added optimization for IFX,
	(decorateType): Mult/Div/ModOneByte ops can handle all kind of signed
	arguments;
	reenabled optimization for IFX, which was removed on 2004-01-11
	* src/SDCCast.h: added return type IFX
	* src/SDCCicode.c: Mult/Div/ModOneByte ops can handle all kind of signed
	arguments with 8 or 16 bit results; pic14 and pic16 ports use old
	promotion behaviour; env. var. SDCC_NEWONEBYTEOPS selects the new,
	SDCC_OLDONEBYTEOPS selects the old behaviour
	* src/SDCCsymt.c (computeType): type2 can be NULL (for LEFT_OP);
	changed again and commented promotion rule
	* src/SDCCval.c (valDiv): promotion no longer necessary
	* src/ds390/gen.c (genMultOneByte) (genDivOneByte) (genModOneByte),
	* src/mcs51/gen.c (genMultOneByte) (genDivOneByte) (genModOneByte):
	rewritten
	* support/regression/tests/onebyte.c: added

2004-02-11 Vangelis Rokas <vrokas AT otenet.gr>

	* gen.c (genInline): reverted to old code for assemnling inline
	code because of bug reported James Chadd

2004-02-10 Vangelis Rokas <vrokas AT otenet.gr>

	* ralloc.h: missing declarations from previous patch,
	seems that patch for ralloc.h was never applied, fixed

2004-02-10 Hans-Juergen Dorn <hans.dorn AT apl-landau.de>
	   patch committed by Vangelis Rokas <vrokas AT otenet.gr>

	* pcode.c,
	* pcode.h,
	* ralloc.h: added FSR0L, FSR0H and other missing PIC16 SFR's for
	indirect addressing. Marked FSR0 as deprecated
	* gen.c (pointerCode): commented out, not needed now
	(pic16_popGet2p): new MOVFF helper function
	(genGenPointerGet),
	(genGenPointerSet): reimplemented with MOVFF and POSTINC0
	(shiftRLong): removed duplicate debugging info

2004-02-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/ds390/gen.c (genNearPointerGet),
	* src/mcs51/gen.c (genNearPointerGet): allow the genDataPointerGet()
	optimization with bits, but not bitfields.
	* src/ds390/ralloc.c (packRegisters),
	* src/mcs51/ralloc.c (packRegisters): fixed bug #884453 & #880832

2004-02-09 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCcse.c (algebraicOpts): copy operands before modification

2004-02-09 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.h,
	* src/SDCCicode.c (operandFromSymbol),
	* src/mcs51/ralloc.c (verifyRegsAssigned, serialRegAssign),
	* src/ds390/ralloc.c (verifyRegsAssigned, serialRegAssign),
	* src/z80/ralloc.c (verifyRegsAssigned, serialRegAssign),
	* src/hc08/ralloc.c (verifyRegsAssigned, serialRegAssign),
	* src/pic/ralloc.c (verifyRegsAssigned, serialRegAssign),
	* src/pic16/ralloc.c (verifyRegsAssigned, serialRegAssign): fixed
	bug #892038
	* src/SDCCast.c (createIvalStruct, createIvalArray, gatherAutoInit),
	* src/SDCCglue.c (emitRegularMap, printIvalStruct, printIvalArray,
	printIvalCharPtr, printIvalPtr, printIval, emitStaticSeg, emitOverlay)
	* src/SDCCsymt.c (newSymbol),
	* src/SDCC.y (struct_or_union_specifier, enum_specifier,
	enumerator_list),
	* src/SDCCval.h,
	* src/SDCCval.c (newiList): fixed bug #885705

2004-02-08  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* doc/sdccman.lyx: added section 3.1.4: sdcclib.
	* as/mcs51/lkmem.c: report the size of the stack in .mem file.

2004-02-08 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/c8051f120.h,
	* device/include/c8051f300.h,
	* device/include/c8051f310.h: added/updated header files for Silicon
	Laboratories (formerly Cygnal) CPUs. Contributed by Maarten Brock.
	* doc/sdccman.lyx: minor changes, recommended diff -Naur and diff -u
	in new section Submitting patches

2004-02-08 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (genNearPointerGet, genPagedPointerGet,
	genFarPointerGet, genCodePointerGet, genGenPointerGet,
	genNearPointerSet, genPagedPointerSet, genFarPointerSet,
	genGenPointerSet),
	* src/ds390/gen.c (genNearPointerGet, genPagedPointerGet,
	genFarPointerGet, genCodePointerGet, genGenPointerGet,
	genNearPointerSet, genPagedPointerSet, genFarPointerSet,
	genGenPointerSet),
	* src/pic16/gen.c (genNearPointerGet, genPagedPointerGet,
	genFarPointerGet, genCodePointerGet, genGenPointerGet,
	genNearPointerSet, genPagedPointerSet, genFarPointerSet,
	genGenPointerSet),
	* src/pic/gen.c (genNearPointerGet, genPagedPointerGet,
	genFarPointerGet, genCodePointerGet, genGenPointerGet,
	genNearPointerSet, genPagedPointerSet, genFarPointerSet,
	genGenPointerSet): fixed bug #892400
	* src/pic16/gen.c (genSkipz, AccRol): disabled functions with #if 0
	to eliminate build warnings.
	* src/SDCCast.c (processParms),
	* src/SDCC.y (function_declarator2, declarator2_function_attributes):
	fixed bug 751859
	* support/valdiag/valdiag.py: added GCC to the list of defines active
	when compiling with gcc

2004-02-07 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* support/Util/SDCCerr.h,
	* support/Util/SDCCerr.c,
	* src/SDCCast.c (decorateType, sizeofOp): complain when sizeof is used
	with an incomplete type (fixed bug #883734)
	* src/SDCCicode.c (geniCodeCast): fixed bug #890510

2004-02-07 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/pic16/gen.c (genCmpEq, shiftRLong): fixed declarations

2004-02-06 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (decorateType),
	* src/SDCCicode.c (geniCodeParms, geniCodeCall): fixed bugs in my ANSI
	function pointer implementation
	* support/regression/tests/funptrs.c: added tests to verify both forms
	of function pointers work correctly. Added tests to verify parameters
	are passed in the correct order.

2004-02-06  Vangelis Rokas <vrokas AT otenet.gr>

	* device.c (regCompare): registers are sorted by ascending
	address and increasing size,
	* main.c (_pic16_finaliseOptions): removed the declaration
	of compiler macro MCU. Now a macro of the format pic18fxxxx
	will be defined from the command line

2004-02-06  Hans-Juergen Dorn <hans.dorn AT apl-landau.de>
	    patch committed by Vangelis Rokas <vrokas AT otenet.gr>

	* pcode.c (pic16initMnemonics): fixed typo in assignment to PCOP_RLNCF
	PCOP_RLCF was overwritten!
	* gen.c (genSkip): commented out calls to pic16_emitcode,
	* (genCmpEQ): fixed "long" compares, only high word did get compared,
	* (genlshTwo),
	* (genRRC): added debugging info,
	* (shiftL2Left2Result): Fixed bug, if offr > offl. Result got
	overwritten while shifting,
	* (shiftR2Left2Result): Fixed bug, if offr < offl. Result got
	overwritten while shifting,
	* (AccLsh),
	* (AccRsh),
	* (shiftLLeftOrResult),
	* (shiftRLeftOrResult),
	* (shiftRLong),
	* (shiftLLong): Implemented with pic16_emitpcode
	* (genlshFour): Replaced pic16_aopPut with pic16_emitpcode,
	* (genLeftShift): Fixed bug, operand for shift by variable always
	was "and"ed with 0x0f,
	* (genLeftShiftLiteral),
	* (genrshTwo),
	* (genRightShiftLiteral): added debugging info,
	* (genrshFour): added comment,
	* (genRightShift): determined signedness from operand "left"
	instead of "result"

2004-02-04 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeParms),
	* src/SDCCast.c (decorateType, processParms): support for ANSI-style
	function pointers, fixed function pointer bugs #861242 and #861896

2004-01-31 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/c8051f000.h,
	* device/include/c8051f120.h,
	* device/include/c8051f300.h: added header files for Silicon
	Laboratories (formerly Cygnal) CPUs. Contributed by Maarten Brock.

2004-01-31 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (processParams): added new type flow and restructured
	(gatherAutoInit): added new type flow
	(addCast): cosmetic changes
	(getLeftResultType): added new type flow for array indices, patch
	provided by Stas, see FR #877103
	(decorateType): SDCC_NEWTYPEFLOW removed, new type flow is now standard;
	array index patch by Stas
	* src/SDCCast.h: added prototype getResultTypeFromType()
	* src/SDCCval.h,
	* src/SDCCval.c (resolveIvalSym) (resolveIvalSym),
	* src/pic/glue.c (pic14emitStaticSeg),
	* src/pic16/glue.c (pic16emitStaticSeg),
	* src/SDCCglue.c (emitRegularMap) (emitStaticSeg): added new type flow
	for initialization of symbols
	* src/SDCCicode.c (geniCodeArray): removed warning W_ARRAY_BOUND
	* support/Util/SDCCerr.h:
	* support/Util/SDCCerr.c: replaced W_ARRAY_BOUND by W_IDX_OUT_OF_BOUNDS
	* .version: bumped version number to 2.3.8
	* device/include/Makefile.in (install),
	* doc/Makefile (install): changed to 'rm `find ...`' construct to
	avoid warnings

2004-01-30 Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/tests/libmullong.c: fixed for 64 bit hosts
	Slade Rich fixed an optimization bug
	* src/pic/pcodepeep.c,
	* src/pic/pcoderegs.c
	* doc/Makefile (install): added test for directory

2004-01-30 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (getRegPtr, getRegGpr),
	* src/ds390/ralloc.c (getRegPtr, getRegGpr),
	* src/pic/ralloc.c (getRegPtr, getRegGpr),
	* src/pic16/ralloc.c (getRegPtr, getRegGpr),
	* src/z80/ralloc.c (getRegGpr): fixed bug #883361
	* as/mcs51/asexpr.c (term),
	* as/hc08/asexpr.c (term): fixed bug #887146

2004-01-29 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (genMult): handle single byte result product
	* src/SDCCopt.c (killDeadCode): never convert ADDRESS_OF iCode to
	DUMMY_READ_VOLATILE (fixed bug #886367)

2004-01-27 Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/tests/libmullong.c: fixed logic, on little endian
	hosts we ended without a mullong_wrapper()

2004-01-27 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* ChangeLog: changed "@" to " AT " in hopes of reducing spam and
	virus/worm forged address usage.

2004-01-27 Bernhard Held <bernhard AT bernhardheld.de>

	Fixed promotion, it should be done on AST level:
	* src/SDCCast.c (addCast): added promotion to int
	(decorateType): updated call to upCast()
	* src/SDCCicode.c (geniCodeLeftShift): removed call to
	usualUnaryConversions()

2004-01-26  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/tests/literalop.c (mulWrapper): Added a
	wrapper to remove integer overflow warnings.

	* support/regression/tests/float_trans.c: Made work on host.

	* support/regression/ports/ucz80/spec.mk (UCZ80): Made detect the
	location of sz80.

	* support/regression/generate-cases.py (main): Changed from inline
	to a main method.

	* doc/Makefile (install): Changed to depth first to get rid of
	missing directory install warning.

	* as/Makefile (install-doc): Made work on Mac.

2004-01-25 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c: added an additional type flow in decorateType() of
	opposite direction, see feature request #860006; it's enabled at runtime
	by setting the environment variable SDCC_NEWTYPEFLOW
	* src/SDCCast.h: changed prototype of decorateType()
	* src/SDCCglue.c (emitRegularMap): updated call of decorateType()
	* src/SDCCicode.c (geniCodeDivision) (geniCodeModulus): promotion from
	'char' to 'int' can be omitted, if both operands are 'unsigned char';
	see feature request #877103
	* src/SDCCval.c: updated call of decorateType()
	(valBitwise): fixed bug #882876
	(valMinus): added promotion
	(valLogicAndOr): result is unsigned
	(cheapestVal) (constVal): literals from 0...255 are 'unsigned char' now
	* src/SDCCsymt.c (computeType),
	* src/mcs51/gen.c (genCmpGt) (genCmpLt): literal 'unsigned char'
	must not cause an unsigned operation
	* src/pic/glue (pic14emitRegularMap),
	* src/pic16/glue.c (pic16emitRegularMap): updated call of decorateType()

2004-01-23 Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic/pcode.c (PCodeID): commented out left over debug code

2004-01-20 Bernhard Held <bernhard AT bernhardheld.de>

	* support/valdiag/tests/overflow.c: added shift tests
	* src/pic/device.c,
	* src/pic/gen.c,
	* src/pic/gen.h,
	* src/pic/glue.c,
	* src/pic/main.c,
	* src/pic/pcode.c,
	* src/pic/pcode.h,
	* src/pic/pcodepeep.c,
	* src/pic/pcoderegs.c,
	* src/pic/ralloc.c,
	* src/pic/ralloc.h: applied patch from Slade Rich;
	added support for multiple code pages and multiple RAM banks on the
	PIC 14 port. The ASM files now no longer simply assume all the
	code / RAM are in the same page / bank. This means the linker can
	safely allocate code/RAM of separate ASM files to different pages/banks.
	* doc/sdccman.lyx: added Slade's tips
	* src/mcs51/peeph.def: fixed bug #880768

2004-01-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/ralloc.c (rematStr): fixed bug #879282
	* src/SDCCast.c (decorateType): fixed bug #880197

2004-01-20  Michael Hope  <michaelh AT juju.net.nz>

	* sim/ucsim/gui.src/serio.src/main.cc: Fixed unconditional use of
	getopt.h.

	* debugger/mcs51/cmd.c (getValBasic): Changed strtof to strtod as
	strtof is not part of C89 and isn't included with Mac OS X.

2004-01-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/gen.c (genPlusIncr, genUminus, genMinusDec, genCmp,
	shiftL2Left2Result): fixed bug #879326
	(genAnd, genOr, genXor): fixed bug when result was of type AOP_CRY
	(genMultOneByte): fixed bug in signed vs unsigned multiplication
	* sim/ucsim/hc08.src/inst.cc (inst_clr): added missing effective
	address fetch for clr instruction
	* device/lib/hc08/_mulint.c: created optimized assembly version
	* src/SDCCdflow.c (computeDataFlow): fixed bug #878209

2004-01-19 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (geniCodeArray): applied patch from Stas Sergeev
	proposed in FR #877103

2004-01-18 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (cheapestVal): added missing checks
	* src/SDCCicode.c (usualBinaryConversions): fixed condition
	* src/SDCCicode.c (geniCodeAdd): fixed part of bug #877103

2004-01-16 Klaus Flittner <klaus_flittner AT gmx.de>

	* src/ds390/gen.c (aopOp3): fixed the assignment of different dptrs to
	equal operands

2004-01-16 Vangelis Rokas <vrokas AT otenet.gr>

	* src/SDCCmain.c (linkEdit): variable $3 of the linker command is
	loaded with the linker search paths (-L arguments) and the libraries
	to be linked with the current source (-l arguments). Changes
	currently will affect only the pic16 port.
	* src/pic16/main.c (_pic16_finaliseOptions): add to the linker
	include path the port specific paths and port specific libraries,
	* gplink command now contains the $3 argument,
	* src/pic16/device.h,
	* src/pic16/device.c,: structure PIC_device is made public and
	renamed to PIC16_device, the same for variable Pics which is renamed
	to Pics16. Updated all references to them.
	* src/pic16/glue.c (pic16glue): corrected bug with code
	initialization which bypassed the variable initializations block.

	* device/lib/pic16/Makefile.rules: removed --penable-stack from
	COMPILE_FLAGS and added the --nostdinc option

2004-01-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/include/mc68hc908jb8.h: Register defs for another member
	of the hc08 family. Contributed by Bjorn Bringert - thanks!

2004-01-14 Vangelis Rokas <vrokas AT otenet.gr>

	Documenting changes from previous commits.
	* configure.in (version 1.56),
	* configure: initially I've added AC_CONFIG_SUBDIRS(device/lib/pic16)
	when generating output files to configure the pic16 library,
	but now I've commented it out, since gputils aren't installed in the
	SF compile farm, so library won't compile

	* device/lib/Makefile.in (version 1.56): initially I've added in
	target 'all' the prerequestive 'model-pic16' so it compiled the
	pic16 library, but now I've commented it out for the same reasons
	above,
	* added targets 'model-pic16' and 'objects-pic16' to compile the
	library
	* added target 'port-specific-objects-pic16' to handle the
	generated libraries and copy them into the build/ directory
	* added target 'clean-intermediate-pic16' to clean intermediate
	files into pic16 directory
	* in target 'installdirs' added line to create directory pic16 in
	the installation path

	* device/include/Makefile.in (version 1.11): in target 'install'
	added lines to copy all header files to installation path,
	* in target 'installdirs' added line create directory for pic16
	headers in the installation path

2004-01-13 Klaus Flittner <klaus_flittner AT gmx.de>

	* src/ds390/gen.c (genCall): fixed a double use of acc and b after
	 a function call

2004-01-13 Bernhard Held <bernhard AT bernhardheld.de>

	* configure,
	* device/lib/configure.in,
	* device/lib/configure: fixed for autoconf 2.57

2004-01-13 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/main.c (_parseOptions): fixed the portmode= command line
	option so that it actually works. Made it specific to the z80, since
	the gbz80 doesn't have these kinds of I/O ports.

2004-01-13 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/include/z180.h,
	* device/lib/_memcpy.c,
	* device/lib/_memmove.c,
	* device/lib/_mulint.c,
	* device/lib/ser_ir.c,
	* device/lib/ser_ir_cts_rts.c,
	* device/lib/_strcmp.c,
	* device/lib/_strtok.c: fixed pragmas to non-deprecated form
	* src/z80/main.c (_process_pragma): add support for pragmas bank and
	portmode; added deprecation warning for bank= and protmode= forms.
	Also, guard against buffer overflow.
	* src/z80/gen.c (aopGet): generate better code for sfr banked read

2004-01-13 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/hc08/main.c (_hc08_genAssemblerPreamble): fixed bug #875487. Also
	changed interrupt vector table generation to only emit declared vectors.
	* device/include/Makefile.in: added missing backslash
	* device/lib/pic16/Makefile.rules: add $(MODELFLAGS) to $(CFLAGS)

2004-01-13 Vangelis Rokas <vrokas AT otenet.gr>

	Mainly changes to support compilation of the device libraries
	* src/pic16/device.c: stack is allocated via symbol and not
	via literal number. The symbol is placed in the corresponding
	position of the data ram
	* (pic16_dump_section): relocatable and absolute uninitialized
	data are now emitted in sorted order to reduce section naming,
	* src/pic16/ralloc.c (newReg): fixed bug with SFR's that
	weren't marked as being in the access bank,

2004-01-13 Vangelis Rokas <vrokas AT otenet.gr>

	Added portion of GNU PIC Library under the directory
	device/include/pic16 and device/lib/pic16. These files
	contain the declarations of SFRs for the PIC18Fxx2 devices.
	The directory is initialized via configure from toplevel.

2004-01-12 Klaus Flittner <klaus_flittner AT gmx.de>

	* src/ds390/gen.c (operandsEqu): fixed a little typo, that prevented
	the spilllocations to be compared correctly

2004-01-12 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): fixed bug introduced today

2004-01-12  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, support/Util/SDCCerr.h, support/Util/SDCCerr.c,
	doc/sdccman.lyx: upper case pragmas are deprecated

2004-01-12 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): replacing 'ul > 0' by  '!ul' results
	in simpler and even better code

2004-01-11 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (operandOperation): fixed bug #874819
	* src/SDCCast.c (decorateType): fixed
	char foo (unsigned long ul) { return ul > 0; }

2004-01-11 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: Moved and added some sections, small changes
	all over. Telling LaTeX to be less strict with word spacing
	to better keep the right margin. Changed some notes about
	maintainance of the ports in section 3.2.1 - is it OK like this?

2004-01-11 Vangelis Rokas <vrokas AT otenet.gr>

	SDCC source changes:
	* src/SDCCopt.c (cntToFcall, cnvToFloatCast, cnvFromFloatCast,
	convilong): modified to inform the pic16 port that builtin functions
	are external

	PIC16 PORT specific changes:
	* src/pic16/device.c pic16_dump_equates() added,
	processor registers declared internally by the port are emitted in
	the translation as equates,
	* src/pic16/gen.c: inline code is passed unprocessed to the
	translation,
	* (pic16_popGetLit2): fnuction modified to take second operand as
	pCodeOp pointer and not as literal,
	* (popRegFromIdx): prefixed with pic16_,
	* (pic16_popCombine2): modified to receive already allocated pCode
	operands,
	* (pic16_pushpCodeOpReg, pic16_poppCodeOpReg): added
	* (genFunction): initializes local stack frame and pushes on stack
	all the registers used by this function,
	* (genEndFunction): restores all registers from stack and restores
	stack frame,
	* src/pic16/glue.c (pic16emitRegularMap): various changes and
	improvements,
	* (pic16glue): changed the program startup sequence,
	* added new dbName code 'A' for functions placed in absolute section
	* src/pic16/main.c: added function attribute _naked,
	* added pragma 'code' to place a fnuction at an absolute address,
	* added command line arguments --debug-ralloc and --pcode-verbose,
	* (_pic16_finiliseOptions): options.all_callee_saves is set by default
	* src/pic16/pcode.c (pic16_pBlockConvert2Absolute) added,
	* (pic16_newpCodeOpLit2): modified to take the second operand as
	pCodeOp pointer,
	* (pic16_printpBlock): modified to emit each function in a separate
	section,
	* (pic16_get_op): modified to use the gpasm modifiers LOW,HIGH and
	UPPER for immediate operands,
	* src/pic16/pcodepeeph.c: added peephole support for the LFSR
	instruction,
	* src/pic16/peeph.def: all peepholes with movff are commented out,
	because there is a problem in the pcode peep optimizer,
	* src/pic16/ralloc.c: the register allocator can now reuse local
	function symbols for another function. This saves register usage.
	* src/pic16/ralloc.h: added flag isLocal in structure regs,

	Added file src/pic16/NOTES with information about program writing on
	the current port version.

2004-01-11 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peephole.def: added peepholes 177.c,d (redundant moves)
	and peephole 252 (array access)

2004-01-09  Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c : fixed #872250: -l command line defined library
	  files are scanned before standard library files

2004-01-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (decorateType): fixed bug #874046

2004-01-09  Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: remove previous installation

2004-01-09 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCCglue.c (createInterruptVect): don't append 7(5) padding
	bytes for last interrupt vector (mcs51)
	* sdcc.spec: fixed typo

2004-01-09 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (genFunction, genEndFunction, genReceive, getTempRegs,
	gen51Code): more efficient parameter receive for --model-large
	("bug" #845294)

2004-01-09 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/ds390/main.c,
	* src/z80/main.c: added missed needLinkerScript flags (more than
	one port structure defined in these file)
	* src/ds390/gen.c (aopForSym, aopOp, operandsEqu, aopOp3): fixed
	bug #795325

2004-01-08 Vangelis Rokas <vrokas AT otenet.gr>

	* src/SDCCmain.c: removed various references to DEFAULT_PORT
	* src/port.h: added flag needLinkerScript in port->linker
	structure to inform whether to create a .lnk file or not,
	* src/avr/main.c,
	* src/ds390/main.c,
	* src/hc08/main.c,
	* src/mcs51/main.c,
	* src/pic/main.c,
	* src/pic16/main.c,
	* src/xa51/main.c,
	* src/z80/main.c: changed appropriately to configure
	needLinkerScript flag
	* src/pic/gen.c,
	* src/pic16/gen.c (genAddrOf): fixed bug #863624
	* src/pic/glue.c: added variable udata_section_name to
	override default uninitialized data segment definition for
	devices only with SHAREBANK memory (reported from Erik Epetrich)
	* (pic14emitOverlay): modified to emit a commented overlay segment
	directive when no overlay data exist
	* (picglue): modified to emit uninitialized data segment
	according to udata_section_name
	* src/pic/main.c (_pic14_parseOptions): added command line
	options --udata-section-name=[name] to override default
	udata definition name
	* modified _linkCmd and _asmCmd to include compiler passed
	arguments via -W option
	* src/pic16/main.c: added $l in _asmCmd, changed extension for
	object file from '.rel' to '.o' in port->linker structure,
	changed size of fptr from 2 to 3 in port structure

2004-01-07  Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: update PATH
	* support/scripts/sdcc.ico: craeted

2004-01-07 Bernhard Held <bernhard AT bernhardheld.de>

	* device/include/Makefile.in: fix install
	* doc/Makefile: fix install

2004-01-07 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.c (processFuncArgs): fixed superflous allocation noted
	in bug #860505
	* src/SDCCmem.c (printAllocInfoSeg, printAllocInfo): minor changes to
	how the function variable allocation summary is displayed; also
	include information about variables allocated to the overlay
	segment

2004-01-06  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkmain.c: Help about -Y option
	* as/mcs51/lkarea.c: Fixed gcc warnings

2004-01-06 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (valShift): changed from 16 to 32 bit shift count,
	fixed warning
	* support/valdiag/tests/overflow.c: added
	* src/SDCCast.c (decorateType),
	* src/SDCCicode.c (geniCodeLeftShift): added promotion to int for
	LEFT_OP (left shift)

2004-01-06  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkmain.c: stack must be after data when option -Y is not used
	(default behaviour).

2004-01-06 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	A python script to validate compiler diagnostic messages. It can be
	used to verify that sdcc complains about bad c source code and
	gives a good location of the error.
	* support/valdiag/Makefile,
	* support/valdiag/valdiag.py,
	* support/valdiag/tests/*

2004-01-06 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y (enum_specifier, enumerator_list, opt_assign_expr),
	* src/SDCCsymt.c (newEnumType),
	* src/SDCCsymt.h
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: fixed bug #871258 and some other unreported
	enum related bugs.
	* support/regression/tests/enum.c: added test for enum values that
	require at least 2 bytes of storage.

2004-01-06 Vangelis Rokas <vrokas AT otenet.gr>

	* src/common.h: added ifndef/define/endif macros
	around the header file.
	Bug reported from Jesus Calvino-Fraga

2004-01-06 Bernhard Held <bernhard AT bernhardheld.de>

	* sdcc.spec: updated
	* device/include/Makefile.in: don't install CVS directories
	* device/lib/Makefile.in: added removal of CVS directories after install
	* doc/Makefile: fixed install, added local_icons
	* sim/ucsim/gui.src/Makefile.in: fixed an old typo
	* src/mcs51/gen.c (genRightShift): fixed bug #870788
	* src/ds390/gen.c (genRightShift): fixed bug #870788
	* src/SDCCast.c (decorateType): fixed bug #870781

2004-01-06 Vangelis Rokas <vrokas AT otenet.gr>

	PIC16 port related changes:
	* device.c: removed pic16_finalMapping and pic16_finalMappingSize,
	added variable stackPos,

	* gen.c: genCall, assignResultValue: added support for
	pushing/retrieving function parameters to/from stack,
	genFunction,genEndFunction: setup stack frame for the
	generated function,
	genAddrOf: will be changed according to bug 863624

	* added files genutils.c and genutils.h which contain gen*
	debugged and optimised functions extracted from gen.c

	* glue.c: added variable 'externs' which holds extern symbols,
	pic16emitRegularMap: is modified to properly handle relocatable
	 symbols under the new scheme,
	pic16createInterruptVect: is modified
	pic16printPublics: is modified to emit 'global'	assembler directives,
	added pic16_printExterns to print extern symbols,
	pic16glue: initializes stack/frame pointer in the beginning of
	the assembly output. Temporary hack, will be corrected later,
	because gplink yet does not support stack and SDCC does not
	yet support a type of crt0.o object to create the final binary.

	* Removed many lines that contain 8051 legacy code.
	* The code is finally placed under a 'code' directive.
	* Added port specific options.

	* _process_pragma: simplified since now we do not need *special*
	include file to define SFR registers. But a separate header
	will be needed. This will be developed later.
	* _pic16_parseOptions: added, parses port specific options:
	--pgen-banksel,	--obanksel=, --pomit-config-words, --pomit-ivt,
	--pleave-reset-vector, --penable-stack, --pstack-model, --debug-xtra
	--preplace-udata-with=

	* _pic16_setDefaultOptions: modified to initialize section names,
	but hack is temporarly out of order since it needs improvement.
	* _pic16_genAssemblerPreamble: configuration words are emitted by
	their address instead of their name. This part is incomplete and
	supports only the 18Fxx2 devices. Other devices will emit an error
	during assembly since they do not contain the same set of config
	registers
	* _pic16_genIVT: is modified,

	* pcode.c: added definitions for some hardware registers that are needed
	for stack support
	* added flag is2LitOp and variable pci_magic in pCodeInstruction.
	All PCI entries are updated. Now LFSR is supported.
	* Removed pic16_pciTRIS is mentioned by mdubuc in source
	* added pic16_newpCodeOpLit2 to support instructions with
	two literal arguments
	* pic16_pCode2str: corrected code that emits assembler instructions
	with two literal operands and those that have an access bit modifier
	* genericPrint: now PC_ASMDIR pCodes, can emit a label if it exists,
	this fixes a bug which caused some labels to be lost, when an
	assembler directive was added, i.e. banksel,
	* pic16_FixRegisterBanking: improved logic that causes the insertion
	of bank switching,
	* InlineFunction: functions that are called once, are not any more
	inlined. This can be a port option in the future,

	* pcode.h: added pCodeOpLit2 and added variable label in pCodeAsmDir

	* ralloc.c: added pic16_rel_udata and pic16_fix_udata variables which
	hold the corresponding uninitialized symbols,
	* pic16_allocProcessorRegister: registers have explicit marked the
	accessBank field,
	* pic16_allocInternalRegister: registers are explicit marked as
	not used,
	* pic16_writeUsedRegs: pic16_dynDirectBitRegs was missing from the
	processing list, so bit registers were lost,
	*

	* ralloc.h: added field 'accessBank' and original symbol operand
	in register definition,
	* removed the field isMapped from register definition,

	** Several functions have been removed from various sources:
	BanksUsedFlow2,BanksUsedFlow,FixBankFlow,InstructionRegBank,
	pic16_addMemRange,pic16_isREGinBank,pic16_dump_map,pic16_dump_cblock
	isSFR,validAddress,mapRegister,assignRegister,pic16_assignFixedRegisters
	pic16_assignRelocatableRegisters

	** others have been introduced:
	pic16_areRegsSame,pic16_dump_section,checkAddReg,pic16_groupRegistersInSection
	pic16_popGetLit2,pic16_popCombine2,pushw,pushaop

2004-01-05 Vangelis Rokas <vrokas AT otenet.gr>

	* support/scripts/inc2h.pl: changed definition of BIT_AT
	to emit 'sbit at' instead of 'bit at'. This was a request.

	PIC16 port related preliminary changes:
	* gen.c: prefixed function popRegFromString with
	pic16_ and all references to it corrected
	* pcode.c: all pic16_pc_* hardware registers prefixed
	with underscore (_),
	pic16_popCopyGPR2Bit(): function sets register wasUsed=1
	* ralloc.c: newReg(): when register is REG_SFR then
	set address to rIdx,
	pic16_allocProcessorRegister(): marks register wasUsed=0
	pic16_writeUsedRegs(): added a call to assign processor
	registers via pic16_assignFixedRegisters

2004-01-04  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/aslink.h, as/mcs51/lkarea.c, as/mcs51/lkdata.c,
	as/mcs51/lkmain.c, as/mcs51/lkmem.c: 8051 linker can now pack
	variables in unused register banks.  Also the SSEG is placed
	wherever there is enough space for it, and IDATA can be anywhere
	in internal RAM.  For now compile using	-Wl-Y[stack_size].
	The mem file is different for this option as well, since it
	makes no sense of talking about DSEG lenght.

2004-01-02 Vangelis Rokas <vrokas AT otenet.gr>

	* src/SDCClrange.c: fixed bug 869095 that caused segfault
	in certain cases, e.g. when ROM assignment, patch provided
	from Albert den Haan.

2004-01-01 Bernhard Held <bernhard AT bernhardheld.de>

	Many signedness and type propagation fixes:
	* src/SDCCicode.c: made geniCodeCast() static
	replaced SPEC_ by IS_ (cosmetic)
	(operandOperation): fixed div and mod operation
	(usualBinaryConversions): added support for promotion of char
	(geniCodeMultiply): replaced (unsigned long) by (TYPE_UDWORD)
	(geniCodeDivision): replaced (unsigned long) by (TYPE_UDWORD)
	(geniCodeAdd): an array index will stay unsigned, even if promoted
	from char to int
	(geniCodeArray): ditto
	* src/SDCCicode.h: made geniCodeCast() static: removed prototype
	* src/SDCCsymt.c (computeType): added more support for char;
	promotion of char is selectable by promoteCharToInt, fixed signedness
	for all cases
	(powof2): replaced (unsigned long) by (TYPE_UDWORD)
	* src/SDCCsymt.h (powof2): replaced (unsigned long) by (TYPE_UDWORD)
	* src/SDCCval (val*): replaced signedness calculation by
	computeType()
	rearranged if-branches (cosmetic)
	(valShift): added warning W_SHIFT_CHANGED
	(valCompare): fixed problem with different types
	* src/hc08/rallo.c (leastUsedLR): fixed gcc 3.3 warning
	* support/regression/tests/literalop.c: added many cases
	* support/regression/tests/ast_constant_folding.c: changed finally to
	'unsigned int'
	* .version: new year, new version: 2.3.7
	* src/SDCCmain.c (main): applied patch #866468
	* debugger/mcs51/sdcdb.c (parseCmdLine): added -k for ucsim, patch
	provided by Scott Bronson
	* doc/sdccman.lyx: updated documentation for sdcdb
	updated and added chapter tips

2004-01-01 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.h: missing from yesterday's commits

2003-12-31 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y (struct_or_union_specifier),
	* support/Util/SDCCerr.c,
	* support/Util/SDCCerr.h: verify that struct & union tags are used
	as declared.

2003-12-29 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCglobl.h: missing from yesterday's commits

2003-12-28 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y (external_definition, type_specifier2, sfr_reg_bit,
	sft_attributes, struct_declaration, parameter_declaration,
	type_name, start_block, declaration_list),
	* src/SDCC.lex (check_type): support redefinition of typedef names

2003-12-22 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c (genPlus): added special handling for 256 byte
	aligned xdata arrays. Erik helped me with the if clause.

2003-12-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/lib/ds390/tinibios.c (CpuSpeed): suppress unreachable code
	warning

2003-12-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.h,
	* src/SDCCast.c (newAst_),
	* src/SDCCicode.h,
	* src/SDCCicode.c (ast2iCode, newiCode),
	* src/SDCCglobl.h,
	* src/SDCC.y (logical_and_expr, logical_or_expr, conditional_expr,
	expr, statement, expression_statement, selection_statement,
	iteration_statement, expr_opt, jump_statement): foundation for tracking
	sequence points
	* src/SDCCopt.c (killDeadCode): fixed bug #861580 (needs the sequence
	point code too)

2003-12-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* support/Util/SDCCerr.c,
	* src/SDCCast.h,
	* src/SDCCast.c (createCase, createDefault, decorateType),
	* src/SDCClabel.c (labelUnreach),
	* src/SDCC.y (labeled_statement, jump_statement): More improvements
	to error messages.
	* support/Util/SDCCerr.c (werrorfl): fixed a non-standard declaration
	(with thanks to Stas Sergeev)
	* device/include/time.h,
	* device/lib/time.c (CheckTime): suppress unreachable code warning

2003-12-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (createIvalCharPtr),
	* src/SDCCglue.c (printChar): fixed bug #862241 (an error in my fix for
	bug #753752)
	* support/regression/tests/nullstring.c: tests for these two bugs

2003-12-18 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* support/Util/SDCCerr.h,
	* support/Util/SDCCerr.c (E_NOT_ALLOWED),
	* src/SDCC.y (struct_declaration, struct_or_union_specifier): complain
	about storage class and 'at' used inside struct or union
	* src/SDCCBBlock.c (iCodeFromeBBlock),
	* src/SDCCcse.c (ifxOptimize),
	* src/SDCCglue.c (emitRegularMap, initPointer, printIvalStruct,
	printIvalArray, printiValFuncPtr, printIvalCharPtr, printIvalPtr,
	printIval, emitStaticSeg, emitOverlay),
	* src/SDCClabel.c (deleteIfx),
	* src/SDCCopt.c (replaceRegEqv, eBBlockFromiCode),
	* src/SDCCast.c (resolveSymbols, createIvalStruct, createIvalArray,
	gatherAutoInit, processParms),
	* support/Util/SDCCerr.h,
	* support/Util/SDCCerr.c (werrorfl): Support for better error location
	reporting for post-parse errors.

2003-12-16 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCval.c (valPlus, valMinus, valShift): fixed some problems with
	implicit casts via union; they don't work on big endian systems
	(possible fix for bug #861138)

2003-12-16 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	(committed by Erik Petrich <epetrich AT ivorytower.norman.ok.us> on Frieder's behalf)
	* src/mcs51/main.c: fixed the fix for bug #737001

2003-12-15  Borut Razem <borut.razem AT siol.net>

	* support/scripts/sdcc.nsi: updated for NSIS 2.0 beta 4

2003-12-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* support/makebin/makebin.c: put output in binary mode

2003-12-13 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/main.c: fixed bug #737001 for the mcs51. SDCC clears
	xdata and data memory on startup. Set the environment variable
	SDCC_NOGENRAMCLEAR to disable this.
	* src/mcs51/peephole.def,
	* src/ds390/peephole.def: using the atomic test and clear instruction jbc
	(allows non-interrupt and interrupt code to safely compete for a resource
	without the non-interrupt code having to disable interrupts)

2003-12-13 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeAdd),
	* src/SDCCast.c (decorateType): fixed bug #857753 (need to be careful
	with valFromType if type might be a pointer and host is big endian).
	* src/SDCCast.c (decorateType): unary plus compatible with all arithmetic
	types, not just integer types.
	* src/SDCCsymt.c (addSymChain): clarified error message when symbol is
	multiply defined with mismatching "at" address.

2003-12-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/ds390/main.c (PORT tininative_port): fixed bug #858416
	* src/SDCCglue.c (printChar, printIvalChar, emitStaticSeg),
	* src/SDCCast.c (createIvalCharPtr, stringToSymbol): handle strings
	with embedded nulls (fixed bug #753752)

2003-12-12 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/main.c(_mcs51_genRAMCLEAR): using r0 instead of r1/r2.
	Apparently this did not see much testing (endless loop)

2003-12-11 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/ralloc.c: set DISABLE_PACK_HL = 1 as a temporary fix to bug #855165

2003-12-10 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCdebug.c (outputDebugSymbols, outputDebugStackSymbols, dumpSymInfo):
	gracefully handle NULL memmap pointers

2003-12-08 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCopt.c (killDeadCode): change iCode type to DUMMY_READ_VOLATILE
	instead of deleting the iCode when an operand is volatile
	* src/z80/gen.c (genDummyRead),
	* src/mcs51/gen.c (genDummyRead),
	* src/ds390/gen.c (genDummyRead),
	* src/hc08/gen.c (genDummyRead): handle operands in IC_LEFT and/or IC_RIGHT,
	not just IC_RIGHT
	* src/SDCCicode.c (geniCodeCall): fixed bug #851607
	* src/SDCC.y: fixed bug #850420

2003-12-05 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Applied z80 i/o port patch from Peter Townson and fixed some operators
	to better handle operands in A register.
	* device/include/z180.h
	* src/SDCC.y
	* src/SDCCglue.c
	* src/z80/gen.c
	* src/z80/gen.h
	* src/z80/main.c
	* src/z80/peeph-z80.def
	* src/z80/peeph.def
	* src/z80/z80.h

2003-12-03 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.c (addSymChain, compareTypeExact): fixed bug #838241 again

2003-12-01 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/lib/hc08/_mullong.c: Removed extra #endif

2003-12-01 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* sim/ucsim/hc08.src/inst.cc,
	* sim/ucsim/hc08.src/hc08mac.h: fixed some problems with CC flag bits and
	carries from x to h
	* src/hc08/gen.c (aopAdrStr): fixed problem with 16 bit immediate
	* src/hc08/gen.c (XAccRsh): fixed problem with right shift
	* device/include/stdarg.h: fixed varargs for hc08
	* device/lib/Makefile.in,
	* device/lib/hc08/Makefile,
	* device/lib/hc08/_mulint.c,
	* device/lib/hc08/_mullong.c: fixed some endian problems

2003-11-28 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* sdcc/src/mcs51/gen.c (genMultOneByte): help peephole 105
	* sdcc/src/mcs51/peeph.def: added peephole 186.e array access in code space
	* device/lib/_gptrget.c,
	* device/lib/_gptrput.c: P2 not used any more (related to #850747, #785979)

2003-11-27 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCClrange.c (findNextUseSym, rlivePoint): fixed bug #849795
	* src/SDCCast.c (astErrors): fixed bug #846007
	* src/SDCCsymt.c (checkFunction): fixed follow-up bug on bug #846007

2003-11-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (decorateType): disabled a transformation I added in
	revision 1.188 (access to fields of a structure at an absolute address);
	it breaks with bitfields, extern declarations, and gcse analysis.
	* src/SDCCopt.c (isLocalWithoutDef): if ADDRESS_OF applied to a symbol, it
	could be assigned through a pointer, so don't complain.
	* src/SDCCast.c (astErrors),
	* src/SDCCast.h,
	* src/SDCCglue.c (emitRegularMap): fixed bug #847813

2003-11-26 Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/main.c (_pic16_genIVT): fixed interrupt vector table
	* src/pic16/main.c (_pic16_genAssemblerPreamble): re-enabled the
	output of __config directives, since gpasm now supports them
	* src/pic16/main.c (_pic16_finaliseOptions): define MCU
	pre-processor macro, i.e. -DMCU=p18f452
	* src/pic16/ralloc.c: renamed packRegisters to pic16_packRegisters,
	and modified to handle 'cast' icode similarly to '=' icode
	* src/pic16/device.h (typedef struct PIC_device): added field
	'extMIface' to indicate that chip has external memory interface
	* src/pic16/device.c: added chips 18F248, 18F258, 18F448, 18F458,
	18F6520, 18F6620, 18F6680, 18F6720, 18F8520, 18F8620, 18F8680,
	18F8720

2003-11-26 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y (pointer): fixed bug #846006
	* support/Util/SDCCerr.c: made W_PTR_TYPE_INVALID message clearer
	* src/SDCCast.c (decorateType): fixed bug #846009
	* src/ds390/peeph.def,
	* src/ds390/gen.c (genAnd, genOr),
	* src/mcs51/peeph.def,
	* src/mcs51/gen.c (genAnd, genOr): fixed bug #846777

2003-11-25 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Fixed several common-sub-expression bugs (#772861, #768380, & #755323)
	* src/SDCCdflow.c
	* src/SDCCcse.c
	* src/SDCCcse.h
	* src/SDCCBBlock.h
	* src/SDCCBBlock.c

2003-11-23 Klaus Flittner <klaus_flittner AT gmx.de>

	fixed bug #845089
	* src/SDCCbitv.h,
	* src/SDCCbitv.c: added function to free a bitvector
	* src/SDCClrange.h,
	* src/SDCClrange.c: added function to recompute the liveranges
	* src/avr/ralloc.c,
	* src/ds390/ralloc.c,
	* src/hc08/ralloc.c,
	* src/mcs51/ralloc.c,
	* src/pic/ralloc.c,
	* src/pic16/ralloc.c,
	* src/xa51/ralloc.c,
	* src/z80/ralloc.c: recompute the liveranges after register packing

2003-11-21 Klaus Flittner <klaus_flittner AT gmx.de>

	* src/SDCCloop.c (newInduction): fixed bug #845630

2003-11-21 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.c (compareTypesExact): disabled debugging output
	inadvertantly left behind from my 2003-11-12 change

2003-11-20 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Updated headers I neglected to commit yesterday.
	* src/SDCClrange.h,
	* src/SDCCicode.h

2003-11-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcse.c (algebraicOpts): fixed bug #773153
	* src/SDCClrange.c (rlivePoint): need to mark IC_RESULT used if POINTER_SET op
	* src/SDCCopt.c (eBBlockFromiCode),
	* src/SDCClrange.c (hashiCodeKeys, sequenceiCode, computeLiveRanges): seperated
	the creation of the key hash table from the sequencing so it can be used
	earlier (for some GCSE bug fixes still pending)

2003-11-15 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c (genPlus): generate shortcut for adding 0xab00
	* support/regression/tests/addsub.c: testing genPlus shortcut

2003-11-15  Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: fixed bug #841645: -MM command line option passed to sdcpp

2003-11-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcse.c (cseBBlock): fixed bug #527779
	* src/SDCCcse.c (deleteGetPointers): rewrote so that the set
	ordering is immaterial.
	* src/SDCCdflow.c (mergeInExprs): fixed bug #587536

2003-11-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeAddressOf): fixed part of bug #840381
	* src/SDCCopt.c (replaceRegEqv, isLocalWithoutDef): fixed other part
	(SIGSEV) of bug #840381
	* src/SDCCmain.c (linkEdit, assemble): fixed bug #841606 (don't
	unlink new file before rename if new and old filenames are the same)

2003-11-13 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/main.c: started fixing bug #737001 (SDCC not clearing
	uninitialized variables) for the mcs51. Set environment variable
	SDCC_GENRAMCLEAR to test.
	xdata initialization slightly shorter

2003-11-12 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.h,
	* src/SDCCsymt.c (addSymTypeChain, compareTypesExact): fixed bugs
	#838241 & 780691 (basicly the same bug)
	* src/SDCCBBlock.c (iCode2eBBlock): fixed bug #840148
	* src/SDCCBBlock.c (iCodeFromeBBlock): fixed bug #840162

2003-11-11 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (linkEdit): "fix" #834252

2003-11-11 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (removePostIncDecOps, removePreIncDecOps),
	* src/SDCCast.h,
	* src/SDCC.y: fixed bug #819403

2003-11-08 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* support/regression/fwk/lib/testfwk.c: printn is recursive and thus needs
	the reentrant attribute.
	* src/hc08/gen.c (genPackBits): added missing stack readjustment
	* sim/ucsim/hc08.src/inst.cc (inst_mov): fixed bugs with mov instruction
	simulation
	* src/SDCCast.c (decorateType): fixed bug with storage class not being
	updated during pointer dereference; f.e. ~(((char *)1)*) was being
	erroneously reduced to a literal.
	* src/hc08/ralloc.c (packRegisters, rematStr),
	* src/hc08/gen.c (aopForRemat): allow literals to be rematerialized in
	some cases

2003-11-08 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/main.c: fixed bug #838385. Thanks to Josef Pavlik for finding and fixing
	* doc/sdccman.lyx: changed from 'article' to 'book'
	* doc/Makefile: readded test_suite_spec and cdbfileformat

2003-11-08 Bernhard Held <bernhard AT bernhardheld.de>

	* device/include/stdlib.h: include malloc.h to comply with ANSI
	* support/regression/tests/malloc.c: include stdlib.h instead of malloc.h

2003-11-07 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/Makefile: sdccman.pdf should build with correct references (more info in commit msg)
	* doc/clean.mk: also remove *.out files
	* doc/sdccman.lyx: some additions, larger top/bottom margins

2003-11-07 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCC.y: fixed bug #837365
	* support/regression/tests/bitopcse.c
	* src/hc08/gen.c (genPointerGet): Don't assume pointer operand is
	a symbol (might be valop instead)
	* device/lib/Makefile.in: added errno.c to HC08SOURCES
	* device/lib/clean.mk: added hc08 to the cleaning list

2003-11-04  Borut Razem <borut.razem AT siol.net>

	* configure, configure.in, sdcc_vc_in.h, sdcconf_in.h: reverted changes,
	  made 2003-11-04
	* support/Util/NewAlloc.c, as/hc08/lklibr.c, as/mcs51/lklibr.c,
	  as/z80/aslist.c, as/z80/assym.c: removed inclusion of nonstandard malloc.h;
	  malloc is declared in standard stdlib.h

2003-11-06 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/lib/hc08/Makefile: need to clean .rel not .o files
	* src/hc08/gen.c (genDjnz): can't use djnz with extended addressing mode

2003-11-06 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/port.h,
	* src/hc08/main.c,
	* src/mcs51/main.c,
	* src/ds390/main.c,
	* src/z80/main.c,
	* src/avr/main.c,
	* src/pic/main.c,
	* src/pic16/main.c,
	* src/xa51/main.c: added hasExtBitOp & oclsExpense functions to ports
	* src/SDCCicode.c: changed several IS_FARSPACE tests to isOclsExpensive
	tests (which uses the port's oclsExpense function)
	* src/SDCC.y,
	* src/SDCCast.c,
	* src/SDCCicode.c,
	* src/hc08/gen.c,
	* src/ds390/gen.c,
	* src/mcs51/gen.c: added support for the SWAP iCode (RFE #834167)

2003-11-04 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCcse.c (ifxOptimize),
	* src/SDCClabel.c (labelIfx, deleteIfx): When the condition to
	an IFX iCode is volatile, convert to DUMMY_READ_VOLATILE instead
	deleting the IFX iCode.
	* src/hc08/ralloc.c: reduced unneeded slocs
	* src/hc08/gen.c: fixed bug in asmopToBoolean

2003-11-04  Borut Razem <borut.razem AT siol.net>

	* configure, configure.in, sdcc_vc_in.h, sdcconf_in.h,
	  support/Util/NewAlloc.c, as/hc08/lklibr.c, as/mcs51/lklibr.c,
	  as/z80/aslist.c, as/z80/assym.c: decision to include malloc.h
	  transferred to configure

2003-11-03 Bernhard Held <bernhard AT bernhardheld.de>

	Use headers defined in the C[++] standards:
	* sim/ucsim/gui.src/serio.src/fileio.cc
	* sim/ucsim/gui.src/serio.src/frontend.cc
	* sim/ucsim/gui.src/serio.src/main.cc
	* sim/ucsim/gui.src/serio.src/posix_signal.cc
	* support/Util/NewAlloc.c
	* as/hc08/lklibr.c
	* as/mcs51/lklibr.c
	* as/z80/aslist.c
	* as/z80/assym.c

2003-11-03  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* Added MSVC projects for hc08 assembler and linker:
	all.dsp, config.dsp, sdcc.dsw, /as/hc08/as_hc08.dsp,
	/as/hc08/link_hc08.dsp

2003-11-03 Martin Helmling <Martin.Helmling AT octo-soft.de>

	* debugger/mcs51/cmd.c: allows filename starting with digit(+ some debug)

2003-11-02 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (linkEdit): "fixed" again bug #833605

2003-11-01 Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/main.c: xdata initialization is 13 bytes shorter now

2003-10-31  Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpplib.h,
	  support/cpp2/cpplib.c,
	  support/cpp2/cpplex.c,
	  support/cpp2/cppinit.c: introduced #pragma preproc_asm [ + | - ]
	  to switch _asm block preprocessing on / off. Default is
	  #pragma preproc_asm +

2003-10-31  Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpplex.c: Fixed _WIN32 problem with CR-CR-LF sequences
	  when outputting comment blocks (when executed with -C option) and
	  _asm (SDCPP specific) blocks

2003-10-31 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* as/hc08/lkrloc.c (relr): Fixed ihx output, fixed lastAreaIndex warning

2003-10-31 Klaus Flittner <klaus_flittner AT gmx.de>

	* src/SDCCcse.c (updateSpillLocation): fixed bug #808027

2003-10-31 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (linkEdit): "fixed" bug #833605
	* src/SDCCast.c (decorateType): fixed bug #832664

2003-10-31  Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpplex.c: fixed for SDCPP:
	  comments(when executed with -C option) and _asm blocks
	  were included even if they where in skipped #if block.
	  Applied solution from GCC cpp 3.3.2

2003-10-31  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex: sdcc now understands both formats:
	  '# <line_number> <file_name>' and
	  '#line <line_number> <file_name>'
	* support/cpp2/cppmain.c: sdcpp now generates the standard
	  '# <line_number> <file_name>' instead of former
	  '#line <line_number> <file_name>'

2003-10-30  Borut Razem <borut.razem AT siol.net>

	* support/cpp2/cpphash.h,
	* support/cpp2/cpplib.h
	* support/cpp2/cpplex.c,
	* support/cpp2/cppmain.c,
	* support/cpp2/cppinit.c: fixed bug #828015 - Syntax variation for _asm character constants

2003-10-30 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Fixed a number of problems revealed by bug #827883.
	* src/SDCCloop.c (loopInvariants): Spill location of the
	result operand should be recomputed if extracted from
	a loop. Also, don't extract assignments of an iTemp
	from a literal.
	* src/SDCCast.c (isConformingBody): loop reversal should
	not occur if the control variable is involved with a
	relational operator.

2003-10-28 Bernhard Held <bernhard AT bernhardheld.de>

	* .version: bumped to 2.3.6 to reflect the big improvements
	made by Erik and Klaus. Thanks!

2003-10-28 Klaus Flittner <klaus_flittner AT gmx.de>

	Replaced the livrange code.
	* src/SDCClrange.c: added new LR code
	* src/SDCCloop.c,
	* src/SDCCBBlock.h: removed remainig parts from old LR code
	* src/ds390/ralloc.c,
	* src/ds390/gen.c: minor fixes to make it work with new code

2003-10-28 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* as/hc08/asm.h,
	* as/hc08/lkrloc.c,
	* src/hc08/gen.c,
	* src/hc08/ralloc.c: Fix various warnings related to the hc08
	* src/SDCCicode.c (geniCodePreInc, geniCodePreDec): Fixed bug #829717
	(tweaked fix for bug #818696)

2003-10-23 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/ralloc.c (joinPushes): Fixed bug #828742

2003-10-23 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCmain.c,
	* sdccconf_in.h: Fixed bug #828387 (--disable-hc08-port didn't work)
	* src/mcs51/gen.c (gencjneshort),
	* src/ds390/gen.c (gencjneshort): Made comparison with AOP_IMMD operand
	more efficient (per Scott Bronson's suggestion)

2003-10-22 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Extended the semantics of the critical keyword to include
	individual statements. See RFE #827755 and #799831
	* src/SDCC.y
	* src/SDCCicode.c
	* src/SDCCopt.c
	* src/SDCCast.c
	* support/Util/SDCCerr.c
	* support/Util/SDCCerr.h
	* src/mcs51/gen.c
	* src/ds390/gen.c
	* src/hc08/gen.c

2003-10-19  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex: fixed bug #825944 - defined yytext_ptr to make it compile with flex 2.5.31

2003-10-19 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodePreInc, geniCodePreDec, ast2iCode):
	Fixed bug #818696
	* src/SDCCast.c (ast_print): Fixed --dumptree so that preincrement
	and predecrement operand is displayed

2003-10-13 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (valMinus): fixed bug #826041

2003-10-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Some hc08 related updates that I missed earlier
	* sim/ucsim/stypes.h
	* support/regression/ports/hc08/spec.mk

2003-10-15 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	New target "hc08" for the Motorola 68hc08 family of micros

	* configure
	* configure.in
	* Makefile
	* src/hc08/*
	* src/SDCCmain.c
	* src/port.h
	* sim/ucsim/hc08.src/*
	* sim/ucsim/configure.in
	* src/ucsim/configure
	* sim/ucsim/packages_in.mk
	* as/hc08/*
	* as/Makefile
	* device/include/mc68hc908qy.h
	* device/lib/hc08/*
	* device/lib/Makefile.in
	* support/regression/ports/hc08/*
	* support/regression/Makefile

2003-10-14 Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c: fixed bug revealed by ast_constant_folding.c
	regression test
	* src/ds390/gen.c (genCast): fixed bug #821957

2003-10-13 Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/logf.c: "fixed" overlay bug
	* support/regression/ports/host/spec.mk: added m library
	* support/regression/ports/mcs51-stack-auto/spec.mk: added float funcs
	* support/regression/tests/float_trans: added (for Eric)

2003-10-12 Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (genCpl): fixed bug
	http://sf.net/mailarchive/message.php?msg_id=6263915

2003-10-10 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (decorateType): added extended constant folding
	* src/SDCCsymt.c (computeType): cleanup
	* src/SDCCval.c (valShift): minor optimization
	* support/regression/tests/ast_constant_folding.c: added

2003-10-09  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCmain.c: removed some unintended changes

2003-10-09  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCmain.c (setParseWithComma): fixed bug #816685
	* src/z80/gen.c: fixed part of bug #817589
	* src/SDCCsymt.c (checkFunction): fixed bug #817895

2003-10-08 Bernhard Held <bernhard AT bernhardheld.de>

	Replaced cast (void **) with (void *) to avoid gcc 3 warning:
	* src/SDCCcflow.c
	* src/SDCCcse.c
	* src/SDCCdflow.c
	* src/SDCClabel.c
	* src/SDCClrange.c
	* src/SDCCmem.c
	* src/SDCCopt.c
	* src/SDCCpeeph.c
	* src/SDCCset.c
	* src/avr/ralloc.c
	* src/ds390/ralloc.c
	* src/izt/ralloc.c
	* src/mcs51/ralloc.c
	* src/pic/ralloc.c
	* src/pic16/ralloc.c
	* src/xa51/ralloc.c
	* src/z80/ralloc.c
	* src/z80/gen.c: removed unused label "release:"

2003-10-06  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex: removed definition of unused variables
	  save_optimize and save_options

2003-10-06 Bernhard Held <bernhard AT bernhardheld.de>

	* clean.mk: removed '=' in "-maxdepth=1"
	* src/SDCCloop.c: replace LRKLAUS with SDCC_LRKLAUS
	* src/SDCClrange.c: replace LRKLAUS with SDCC_LRKLAUS

2003-10-06  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, src/SDCC.lex: use dbuf for "_asm" definitions;
	  my_unput() replaced by unput()

2003-10-05 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCloop.c (assignmentsToSym, loopInduction): cast argument of
	setToNull() to (void *) to avoid gcc3.x's warning: "dereferencing
	type-punned pointer will break strict-aliasing rules"
	Old LR behaviour is again default; Klaus' LR can be choosen by
	defining the environment variable LRKLAUS
	* src/SDCCBBlock.h
	* src/SDCCloop.c
	* src/SDCClrange.c
	* src/ds390/ralloc.c (spillThis): applied Klaus' patch
	* clean.mk: fixed removal of files in bin/CVS/
	* device/lib/clean.mk: fixed removal of directories small and large
	* support/Util/SDCCerr.c: changed W_INT_OVL to ERROR_LEVEL_PEDANTIC
	* src/SDCCicode.c,
	* src/SDCCval.c: removed superflous test for pedantic

2003-10-05  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, support/Util/SDCCerr.c, sdcc/support/Util/SDCCerr.h:
	  Fixed bug #816692: introduced new ERROR_LEVEL_PEDANTIC warning
	  message "unmatched #pragma SAVE and #pragma RESTORE"

2003-10-04  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: various additions and updates (interrupts, inline
	  assembly, critical functions, atomic, nojtbound)

2003-10-04 Bernhard Held <bernhard AT bernhardheld.de>

	Applied liferange patch from Klaus Flittner <klaus_flittner AT gmx.de>
	* src/SDCCBBlock.h
	* src/SDCCloop.c
	* src/SDCCloop.h
	* src/SDCClrange.c

2003-10-03  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.h,
	* src/z80/gen.c (aopOp, aopGet, aopPut, genDummyRead),
	* src/mcs51/gen.h
	* src/mcs51/gen.c (aopOp, aopGet, aopPut, genDummyRead),
	* src/ds390/gen.h
	* src/ds390/gen.c (aopOp, aopGet, aopPut, genDummyRead),
	* src/SDCCicode.c (ast2iCode, geniCodeDummyRead): Fixed bug #663539
	* src/SDCCopt.c (killDeadCode): Fixed bugs #663539 & #816705

2003-10-02  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (genRet): fixed bug #524753
	* src/z80/gen.c (genCast): fixed internal error on cast from
	pointer to long
	* src/z80/gen.c (_saveRegsForCall, emitCall): adapted Johan's
	fix for bug #477835 to the z80
	* src/z80/gen.c (genZ80code, _vemit2, _emit2): added support
	for tracking iCodes in the peephole optimizer for z80

2003-10-01  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeJumpTable, geniCodeSwitch): fixed
	the other part of bug #814548
	* src/SDCCpeeph.c (labelInRange): fixed bug #814558

2003-09-30  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCcse.c: fixed part of bug #814548

2003-09-28  Borut Razem <borut.razem AT siol.net>

	* src/asm.c: rewrite of printILine() to use temporary file instead
	  a pipe
	* src/xa51/main.c: commented out declaration of int rewinds

2003-09-27  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeJumpTable): Fixed bug #813206

2003-09-26  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCdflow.c (computeDataFlow): Fixed bug #810746
	* src/asm.c (printILine): Fixed bug #811015

2003-09-22  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	*link/z80/lklibr.c, as/mcs51/lklibr.c: Improved memory allocation and
	freeing.

2003-09-21  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (setupToPreserveCarry): Fixed bug #796955
	* src/z80/gen.c (setupPair, genMovePairPair): Fixed setupPair
	to correctly handle general case of AOP_PAIRPTR
	* src/z80/gen.c (aopGet, aopPut): Generalized AOP_PAIRPTR handling

2003-09-21  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/ralloc.c (fillGaps),
	* src/ds390/ralloc.c (fillGaps): fixed bug #810093 (yet another
	register positioning bug)

2003-09-21  Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/_fsdiv.c: replaced (1<<31) by (1ul<<31)

2003-09-19  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (loadDptrFromOperand, genFarPointerGet,
	genCodePointerGet, genGenPointerGet, genFarPointerSet,
	genGenPointerSet): handle AOP_DPTR correctly when loading dptr
	(ralloc doesn't intentionally do this now, but perhaps later)
	* src/mcs51/ralloc.c (serialRegAssign, fillGaps),
	* src/ds390/ralloc.c (serialRegAssign, fillGaps): fixed some
	register positioning bugs (Fixed bug #762602 and #795325)
	* src/SDCCicode.c (geniCodeDerefPtr): Track output class correctly
	(Fixed bug #808779)
	* src/z80/gen.c: increased _vemit2's buffer[] to handle long
	lines that --i-code-in-asm generates

2003-09-18  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	*link/z80/lklibr.c, as/mcs51/lklibr.c: Fixed Linux segfaults when
	trying to fclose a FILE* that was already closed.

2003-09-18  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.c (structElemType): fixed bug #808291 (members
	of const struct should be treated as if const themselves)

2003-09-18  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (valPlus, valMinus): fixed bug #808337

2003-07-06  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* support/librarian/sdcclib.c: Generate correct offsets for libraries with
	Unix (/n) and DOS (/r/n) line terminations.

2003-09-17  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCopt.c (cnvFromFloatCast, cnvToFloatCast): fixed
	bug #613775

2003-09-16  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c (genFunction, genEndFunction),
	* src/ds390/gen.c (genFunction, genEndFunction): Moved save
	and restore of EA so that stack offsets to parameters are
	correct when using both critical and reentrant/stack-auto.
	* src/z80/gen.c (aopOp): removed erroneous assertion about sloc
	size (can be triggered in error if sloc is shared between
	different sized objects)
	* device/include/float.h: fixed macros to explicitly use
	unsigned long where needed

2003-09-15  Bernhard Held <bernhard AT bernhardheld.de>

	Feature req. 799831: added code to allow nesting of critical functions
	* src/mcs51/gen.c (genFunction, genEndFunction)
	* src/ds390/gen.c (genFunction, genEndFunction)

2003-09-14  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCsymt.c (sclsFromPtr),
	* src/SDCCsymt.h,
	* src/SDCCast.c (decorateType): fixed bug #462971. Also, better
	support for standard C idiom of memory mapped variables; for
	example, *((xdata int*)0x1234) = 1 is now internally equivalent
	to xdata int at 0x1234 tempvar = 1.
	* sim/ucsim/z80.src/inst_xd.cc: fixed bug #805483 with patch
	provided by Akiya ISHIDA

2003-09-13  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (cheapestVal): reenabled to reduce int to char
	* src/SDCCval.c (constVal): added reduction from int to char
	* src/SDCCval.c (valMult, valDiv): fixed sign handling
	* src/SDCCval.c (valShift): fixed after change of cheapestVal()
	* src/SDCCval.c (valCompare): fixed EQ_OP and NE_OP; they have
	to ignore the sign
	* support/regression/tests/shifts.c: fixed

2003-09-13  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (genXor): Fixed bug #805445

2003-09-12  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Fixed bug #621531 (const & volatile confusion in the type chain).
	DCL_PTR_CONST, DCL_PTR_VOLATILE, & IS_PTR_CONST now exclusively
	refer to the const or volatile state of the pointer itself.

	* src/SDCCast.c
	* src/SDCCglue.c
	* src/SDCCicode.c
	* src/SDCCsymt.c
	* src/SDCCval.c
	* src/SDCC.y
	* src/SDCCsymt.h
	* src/pic/gen.c
	* src/pic/ralloc.c
	* src/pic16/gen.c
	* src/pic16/ralloc.c
	* support/regression/tests/const.c

2003-09-10  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	When checking for duplicated modules, use absolute paths
	instead of relative paths.  Files changed:

	* as/mcs51/lklib.c
	* link/z80/lklib.c

2003-09-09  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCicode.c (geniCodeLogic): fixed bug #797572

2003-09-07  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* device/include/string.h: added size_t typedef, changed
	prototypes to use size_t, eliminated separate reentrant and
	non-reentrant declarations, added _memmove declaration
	* device/lib/_memcpy.c: changed to use size_t instead of int,
	changed /4 to >>2 to avoid division library call
	* device/lib/_memcmp.c,
	* device/lib/_memset.c,
	* device/lib/_strncat.c,
	* device/lib/_strncpy.c,
	* device/lib/_strncmp.c: changed to use size_t instead of int
	* device/lib/_memmove.c: new file (fixed bug #772294)
	* device/lib/Makefile.in: added _memmove.c
	* device/lib/z80/asm_strings.s: fixed bug #772290
	* support/regression/tests/bitfields.c: attempt to fix host assertion
	failure on amd64-unknown-linux2.2

2003-09-06  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (aopPut, spillPairReg): fixed bug #800998
	* src/z80/gen.c (genFunction, genEndFunction): fixed "bug" #774700
	* as/z80/asmain.c (main): fixed bug #801766

2003-09-06  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (ast2iCode): fixed differences in iCode with different
	compilers

2003-09-05  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCast.c (isConformingBody): fixed loop reversal bug
	reported in bug #800609

2003-09-04  Vangelis Rokas <vrokas AT otenet.gr>

	* Top header beautifications in src/pic16 directory:
	  device.c, device.h, gen.c, gen.h, genarith.c, glue.c, pcode.c,
	  pcodeflow.c, pcodeflow.h, pcode.h, pcodepeep.c, pcoderegs.c,
	  pcoderegs.h, ralloc.c, ralloc.h
	* main.c: added top header and GPL license notice
	* pcode.c: fixed the if-conditional warning

2003-09-04  Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/_mullong.c: replaced int by short for gcc

2003-08-31  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/SDCCpeeph.c (notVolatile, notVolatileVariable): handle IFX
	and JUMPTABLE iCodes properly now (worked by accident before)
	* src/mcs51/gen.c (leftRightUseAcc),
	* src/ds390/gen.c (leftRightUseAcc): handle IFX and JUMPTABLE
	iCode properly now. Use getSize instead of nRegs since a & b
	aren't part of the nRegs tally.

2003-08-31  Vangelis Rokas <vrokas AT otenet.gr>

	* src/pic16/main.c: corrected offsets of interrupt vectors in _pic16_genIVT()
	* src/pic16/pcode.c: fix to disable inserting BANKSEL directive
	  before instructions that use the _STATUS register

2003-08-31  Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (freeAsmop): fixed off by one in stack offset (AOP_STK)
	* src/mcs51/gen.c (genNearPointerSet): added missing opcode for
	fetching of the pointer
	* src/mcs51/gen.c (genNearPointerGet): added reuse of PREG,
	copied from genNearPointerSet()
	* src/mcs51/gen.c (genNearPointerGet): don't pop r0/r1, if RESULTONSTACK
	* src/mcs51/gen.c: changed order of freeAsmop(left/right/result)-calls.
	If they pop r0/r1 they must be called in the opposite order than aopOp().
	* device/lib/_mullong.c: fixed for "--model-large --int-long-reent"
	(resp. --stack-auto), prepared for --xstack

2003-08-28  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: reverted tables to those in cvs 1.64

2003-08-28  Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/_startup.c: quick & dirty fix for ds390/ds400;
	these ports have their own __sdcc_external_start()

2003-08-26  Bernhard Held <bernhard AT bernhardheld.de>

	pic patch provided by Slade Rich <slade_rich AT yahoo.com>
	* src/pic/glue.c (pic14printPublics): fixed bug introduced when symbol
	type for bits was changed. It resulted in bit variables becoming
	global, which is not permitted in PIC 14 assembly output.

2003-08-23  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: various additions and updates. Rearranged sections

2003-08-22  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	Z80 and MCS51 linkers complaint if a public symbol is defined
	in more than one library module:

	* as/mcs51/lklib.c
	* link/z80/lklib.c
	* as/mcs51/Makefile.in

2003-08-22  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	A few small changes that speed up the peephole optimizer.

	* src/SDCCpeeph.c

2003-08-22  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Try to make the peephole optimizer smarter by maintaining
	an association between the assembly source code and the
	iCodes that originated them. Put this information to use
	with a new peephole rule condition "notVolatile" so that
	the rules can be aggressive yet still safe.

	* src/SDCCpeeph.c
	* src/SDCCpeeph.h
	* src/mcs51/gen.c
	* src/mcs51/peeph.def

2003-08-20  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Fixed bug #741761

	* src/mcs51/gen.c (aopForSym, leftRightUseAcc),
	* src/ds390/gen.c (aopForSym, leftRightUseAcc): preserve A and B
	if the left or right operand symbols have the accuse flag set.

2003-08-20  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Changed the type of the result of the ! (NOT) operator to char;
	previously it returned the same type as the source. This allows
	us to eliminate all the genFloatNot functions (all of its target
	implementations were very buggy) since !float can use the same
	code as !long now.

	* src/SDCCicode.c (ast2iCode): ! returns char
	* src/mcs51/gen.c (genNot, genNotFloat),
	* src/ds390/gen.c (genNot, genNotFloat),
	* src/z80/gen.c (genNot, genNotFloat),
	* src/pic/gen.c (genNot, genNotFloat),
	* src/pic16/gen.c (genNot, genNotFloat): eliminated genNotFloat

2003-08-19  Bernhard Held <bernhard AT bernhardheld.de>

	pic patch provided by Slade Rich <slade_rich AT yahoo.com>
	1. Interrupt would not compile properly. Ensure PCLATH register is saved
	   during interrupts. Ensure WSAVE is located at a shared bank address.
	2. Fixed page selection in some places
	3. Fixed BTFSS/C to where necessary use registers directly and not simply
	   the registers name strings.
	4. Fixed "signed / unsigned compare" compiler warnings.
	5. The PIC port manages its own allocation of the general purpose
	   registers, but makes no attempt to reuse them. As a result when
	   compiling it soon runs out of general purpose registers. Some
	   additional code was added to the files pcode.c and device.c to walk
	   through the function call tree and rename the registers so that they
	   get reused.

	* src/pic/device.c
	* src/pic/gen.c
	* src/pic/glue.c
	* src/pic/pcode.c
	* src/pic/pcode.h
	* src/pic/ralloc.c
	* src/pic/ralloc.h
	* src/pic/genarith.c: Fixed problems with PIC 14 port in functions
	genPlus() & genMinus() when the result is the same as left or right

2003-08-18  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c (isUnsplitable, fetchPairLong): fixed bug #770454

2003-08-18  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Made bitfield a distinct type from bit so that bitfields
	convert as per ANSI C and bits retain their traditional
	boolean style behaviour. Implemented bitfield support in
	the z80 port.

	* src/SDCCsymt.h,
	* src/SDCCsymt.c,
	* src/SDCCast.c,
	* src/cdbFile.c,
	* src/mcs51/gen.c,
	* src/ds390/gen.c: bit v bitfield split
	* src/z80/gen.c: New support for bitfields
	* support/regression/tests/bitfields.c: reenabled z80,
	added more tests

2003-08-17  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	Rules 246.x, 247.x relate to bitfields, the others speed up
	access to xdata mapped I/O devices.

	* src/mcs51/peeph.def: added 26 peepholes 246.x - 248.x, 180.x

2003-08-16  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Cleaned up genPackBits and genUnpackBits and added two helper
	functions, emitPtrByteGet & emitPtrByteSet. Added optimizations
	for literal assignments in genPackBits (thanks to Frieder for
	reminding me).

	* src/mcs51/gen.c
	* src/ds390/gen.c

2003-08-16  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Fixed bug #748310 (pointer to function type mishandled when the
	function name is omitted). Also fixed a SIGSEGV when a function
	attribute (reentrant, etc) is used on a non-function or on a
	function but misplaced before the parameter list.

	* src/SDCC.y (abstract_declarator, abstract_declaractor2): fixed
	bug #748310
	* src/SDCC.y (declarator2_function_attributes): avoided SIGSEGV
	* support/Util/SDCCerr.h,
	* support/Util/SDCCerr.c: Added func attr misuse error msg

2003-08-13  Bernhard Held <bernhard AT bernhardheld.de>

	Fixed bug #787649 by anonymous
	* src/SDCCglue.c (emitRegularMap): added emission of sloc for func ptr
	* src/ds390/gen.c (aopForSym): fixed func ptr in sloc

2003-08-14  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Fixed numerous bitfield problems.

	* src/SDCC.y: More bitfield related error checking
	* src/SDCCsymt.h,
	* src/SDCCsymt.c (compStructSize): fixed bitfield offset calc
	* support/Util/SDCCerr.h,
	* support/Util/SDCCerr.c: Added & edited some bitfield err msgs
	* src/mcs51/gen.c (genPackBits, genUnpackBits): fixed mask bugs
	* src/ds390/gen.c (genPackBits, genUnpackBits): fixed mask bugs
	* support/regression/tests/bitfields.c: tests added

2003-08-13  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Made the constant following the "interrupt" keyword optional. If
	omitted, the function will not automatically be given an entry
	in the interrupt vector table (similar to #pragma NOIV, but
	less syntacticly kludgy). The interrupt number is also now
	range checked. Also fixed a bug in the high order bit example
	in the manual.

	* src/SDCC.y
	* src/SDCCmem.c
	* src/SDCCglue.c
	* src/SDCCsymt.h
	* support/Util/SDCCerr.c
	* support/Util/SDCCerr.h
	* doc/sdccman.lyx

2003-08-13  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCcse.c (algebraicOpts): fix bug converting op from value to type
	* src/SDCCicode.c (operandOperation): rewritten some ops
	(*, ==, unary_minus) to fix possible overflows and to accord with ANSI
	* src/SDCCsymt.c (computeType): literals are handled the same way as any
	other type
	* src/SDCCval.c (cheapestVal): removed, it doesn't accord with ANSI (can
	be re-activated by defining REDUCE_LITERALS)
	* src/SDCCval.c (constVal): fixed; hex and octal constants can be
	unsigned, but are signed by default
	* src/SDCCval.c (constVal): rearranged
	* src/SDCCval.c (valMod): preliminary fix
	* src/SDCCval.c (valCastLiteral): use TYPE_* types
	* support/regression/literalop.c: added, work in progress

2003-08-12  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	Generate warnings for useless declarations like "char data;"
	that don't do what new users expect.

	* src/SDCC.y
	* support/Util/SDCCerr.h
	* support/Util/SDCCerr.c

2003-08-09  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (valMult): fix overflow detection of negative int

2003-08-07  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/ralloc.c (joinPushes): made compatible with new signedness

	Changes to support big endian targets:

	* src/ports.h
	* src/SDCCglue.c
	* src/avr/main.c
	* src/ds390/main.c
	* src/izt/i186.c
	* src/mcs51/main.c
	* src/pic/main.c
	* src/pic16/main.c
	* src/xa51/main.c
	* src/z80/main.c

2003-08-06  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (cheapestVal): changed behaviour to the same as constVal()
	* device/lib/time.c: fixed warning "integer overflow in expression"

2003-08-05  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCval.c (cheapestVal, valueFromLit): use TYPE_* types
	* src/SDCCval.c (constVal): changed default to signed; hex and octal
	constants are unsigned; added recognition of "u" flag for unsigned
	* src/SDCCval.c (valMult): fixed signdness, added warning for overflow
	* src/SDCCval.c (valDiv, valMod): fixed signdness
	* src/SDCCicode.c (operandOperation): fixed critical typo; fixed
	signedness of modulo, left and right shift
	* support/Util/SDCCerr.c: added warning "integer overflow in expression"
	* support/Util/SDCCerr.h: added warning W_INT_OVL
	* src/SDCCast.c (decorateType): fixed gcc3.3 warning
	* src/SDCCast.c (ast_print): improved output of constants

2003-08-04  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	Fixed some warnings when building with MSVC:

	* as/mcs51/asdata.c
	* as/z80/asdata.c
	* as/mcs51/asm.h
	* as/z80/asm.h
	* link/z80/aslink.h
	* link/z80/lkdata.c
	* link/z80/lkeval.c
	* link/z80/lkgb.c
	* link/z80/lkihx.c
	* link/z80/lks19.c
	* link/z80/lksym.c
	* support/cpp2/cpplib.c
	* src/ds390/gen.c
	* src/mcs51/gen.c

2003-08-03  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCast.c (constExprTree): fix bug #781827 by Carl Worth <cworth AT isi.edu>

2003-08-01  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* support/librarian/clean.mk: Do not remove Makefile.
	* support/librarian/Makefile: added.

2003-08-01  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	Added librarian to MSVC build:
	* all.dsp
	* sdcc.dsw
	* support/librarian/librarian.dsp

	'configure' not needed for librarian, removed:
	* support/librarian/configure
	* support/librarian/configure.in
	* support/librarian/config_in.h
	* support/librarian/Makefile.in

	Hopefully these ones built the librarian and the rest of sdcc properly:
	* Makefile
	* Makefile.common.in

	Messed up 'configure', so revert to previous version:
	* configure
	* configure.in

2003-07-31  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (operandOperation): 3. fix, this time for Alpha; ULONG has 64 bits
	there, while the mantissa of a double is "only" 53 bits wide.

2003-07-31  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	Adding sdcclib to the build.  MSVC project coming soon.
	Files added/changed:

	* support/librarian/clean.mk
	* support/librarian/configure
	* support/librarian/configure.in
	* support/librarian/config_in.h
	* support/librarian/Makefile.bcc
	* support/librarian/Makefile.in
	* support/librarian/sdcclib.c
	* Makefile.bcc
	* Makefile
	* Makefile.common.in
	* configure
	* configure.in

2003-07-29  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	Linker now complaints if linked modules have conflicting options, for
	example, one compiled using --model-large and another one compiled with
	--model-small.  The following files were modified:

	* as/mcs51/asdata.c
	* as/mcs51/aslink.h
	* as/mcs51/asm.h
	* as/mcs51/asmain.c
	* as/mcs51/asout.c
	* as/mcs51/i51pst.c
	* as/mcs51/lkdata.c
	* as/mcs51/lklibr.c
	* as/mcs51/lkmain.c
	* as/z80/asdata.c
	* as/z80/asm.h
	* as/z80/asmain.c
	* as/z80/asout.c
	* as/z80/z80pst.c
	* link/z80/aslink.h
	* link/z80/lkdata.c
	* link/z80/lklibr.c
	* link/z80/lkmain.c
	* src/SDCCglue.c

2003-07-28  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	*link/z80/aslink.h, link/z80/lklibr.c, as/mcs51/aslink.h,
	as/mcs51/lklibr.c: Generate a warning when a library is not found.

2003-07-28  Bernhard Held <bernhard AT bernhardheld.de>

	* src/z80/mappings.i: fix _mul[us][int,long] entries

2003-07-26  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	*src/SDCCmain.c: do not search for crt0.o when using --nostdlib

2003-07-24  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (operandOperation): really fixed problem with bitops
	* support/regression/tests/bitopcse.c: added
	fixed warning:
	* src/avr/gen.c:
	* src/pic/gen.c:
	* src/pic16/gen.c:
	* src/z80/gen.c:
	* src/xa51/gen.c:

2003-07-24  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	added support for new library format to z80, gbz80 linkers:
	*link/z80/aslink.h
	*link/z80/lklex.c
	*link/z80/lklib.c
	*link/z80/lklist.c

2003-07-24  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCicode.c (operandOperation): fixed problem with bitops and 0xffffffff;
	after {double d = 0xffffffff; long l = d;} l will be 0x80000000 (LONG_MIN)

2003-07-23  Bernhard Held <bernhard AT bernhardheld.de>

	added DUMMY_READ_VOLATILE:
	* src/SDCC.y:
	* src/avr/gen.c:
	* src/xa51/gen.c:
	* src/z80/gen.c:
	* src/pic/gen.c:
	* src/pic16/gen.c:
	* src/mcs51/gen.c:
	* src/ds390/gen.c:
	* src/SDCCcse.c (algebraicOpts): many improvements
	* src/SDCCcse.h: removed algebraicOpts()
	* src/SDCCicode.c (picDummyRead): added

2003-07-23  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkmem.c: Changed message "Insufficient DRAM memory" to
	"Insufficient space in data memory".

2003-07-20  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/mcs51/gen.c: fixed bug #771358
	* src/z80/gen.c: fixed bug #759087

2003-07-20  Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic16/glue.c: minor cleanup by Vangelis

2003-07-19  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* device/include/regc515c.h: fixed #758477
	* device/lib/_gptrget.c: saving some cycles in generic pointer get
	* device/lib/_gptrput.c: saved a few bytes
	* my tab spacing is 8, yours too?)
	* device/lib/_ser.c: process RX bytes earlier than TX bytes
	* device/lib/serial.c: process RX bytes earlier than TX bytes
	* src/mcs51/gen.c(genGenPointerGet/Set): removed writing of type after postincrement

2003-07-18  Erik Petrich <epetrich AT ivorytower.norman.ok.us>

	* src/z80/gen.c: fixed some right shift bugs (#772726 among them)

2003-07-17  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* link/z80/lklibr.c: fixed bug when there is a '.' in a library path.

2003-07-17  Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/Makefile.in: bad fix, reverted to 1.43

2003-07-16  Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/Makefile.in: added missing z80 object files

2003-07-14  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCcse.c (algebraicOpts): CSE fun with &|^ and 0x00/0xff literals
	pic16 progress by Vangelis:
	* src/SDCCglobl.h:
	* src/SDCCmain.c:
	* src/pic/Makefile:
	* src/pic:
	* pic/Makefile:
	* pic16/device.c:
	* pic16/device.h:
	* pic16/gen.c:
	* pic16/gen.h:
	* pic16/genarith.c:
	* pic16/glue.c:
	* pic16/main.c:
	* pic16/pcode.c:
	* pic16/pcode.h:
	* pic16/pcodepeep.c:
	* pic16/peeph.def:

2003-07-13  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/SDCCmain.c, src/SDCCglobl.h: added option --no-std-crt0

2003-07-12  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* sdcc.dsw, all.dsp, link/z80/linkgbz80.dsp, as/z80/as-gbz80.dsp:
	added gbz80 build to MSVC project.
	* src/SDCCmain.c, src/SDCCglue.c, src/z80/main.c, src/z80/z80.dsp,
	link/z80/aslink.h, linkz80.dsp: cleaned up z80 and gbz80 asm files
	from 8051 stuff and setup so it links using a .lnk file.

2003-07-06  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* support/librarian/sdcclib.c: sdcc librarian.
	* as/mcs51/aslink.h, as/mcs51/lklib.c: Support for libraries created
	with sdcclib.

2003-07-03  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkmain.c: properly handle extensions in function afile.

2003-07-02  Borut Razem <borut.razem AT siol.net>

	* src/port.h, src/SDCCmain.c, src/pic/glue.h, src/pic/main.c,
	src/pic16/glue.h, sdcc/src/pic16/main.c, src/izt/i186.c,
	src/izt/tlcs900h.c, src/avr/main.c, src/ds390/main.c, src/mcs51/main.c,
	src/xa51/main.c, src/z80/main.c:
	virtualization of glue() function: each port has it's own glue function,
	which is accessed by do_glue function pointer in PORT.general structure

2003-07-01 Kevin Vigor <kevin AT vigor.nu>

	* DS800C400 fun, improved ROM interface and tinibios.

2003-06-27 Kevin Vigor <kevin AT vigor.nu>

	* More support for DS80C400. Now includes beginning of interface to ROM.

2003-06-25  Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (gencjneshort): fixed bug #760345

2003-06-20  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkaomf51.c: Make sure the size of the last procedure is correct.

2003-06-19  Borut Razem <borut.razem AT siol.net>

	* src/z80/main.c: fixed Z80 port again: missing -k library paths in linker command line

2003-06-19  Borut Razem <borut.razem AT siol.net>

	* src/SDCCutil.h, src/SDCCutil.c, src/SDCCglobl.h, src/SDCCmain.c, src/z80/main.c:
	fixed Z80 port - crt0.o: cannot open.

2003-06-19  Bernhard Held <bernhard AT bernhardheld.de>

	* support/Util/MySystem.c (merge_command): revert bad fix

2003-06-18  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex, src/SDCCmain.c: fixed some warnings, introduced with changes made 15.06.1003

2003-06-18  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/SDCCglobl.h, src/SDCCmain.c, doc/sdccman.lyx:
	option --use-stdout sends errors to stdout instead of stderr.

2003-06-18  Bernhard Held <bernhard AT bernhardheld.de>

	* support/Util/MySystem.c (merge_command): quick fix for Linux segfault with \"cmd\" arg

2003-06-15  Borut Razem <borut.razem AT siol.net>

	* support/cpp2/sdcc.h: HAVE_DOS_BASED_FILE_SYSTEM defined for _WIN32
	* src/SDCC.lex: cloneXxx and copyAndFreeXxx functions for options and optimize stack handling
	* src/SDCCglobl.h, src/SDCCmain.c, src/ds390/main.c, src/mcs51/main.c, src/z80/main.c:
	fixed width array of pointers replaced with sets;
	multiple include and lib paths ared transferred to preprocessor and linker
	* src/SDCCset.c, src/SDCCset.h: added function setFromSetNonRev() and mergeSets()
	* src/SDCCsymt.c: reimplemented function inCalleeSaveList() by using sets instead
	fixed width array of pointers
	* src/SDCCutil.c, src/SDCCutil.h: added functions fputStrSet(), appendStrSet(), joinStrSet();
	removed functions addToList(), join(), joinn(), pathCharsEquivalent(), pathCharTransform(),
	fixupPath(), getPathDifference()
	* src/ds390/gen.c, src/mcs51/gen.c: reimplemented function  inExcludeList() by using sets instead
	fixed width array of pointers

2003-06-11  Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic16/ralloc.c: fix warnings
	* src/pic16/pcode.c: fix warning

2003-06-10  Scott Dattalo  <scott AT dattalo.com>

	 Scott D. for Vangelis Rokas (vrokas AT otenet.gr). I (scott) don't
	know all the details, but essentially this set of changes enable
	the pic16 port to generate movff instructions and generate assembler
	directives,
	* src/SDCCmain.c:
	* src/pic16/gen.c:
	* src/pic16/glue.c:
	* src/pic16/pcode.c:
	* src/pic16/device.c:
	* src/pic16/main.c:
	* src/pic16/pcode.h:
	* src/pic16/pcoderegs.c:
	* src/pic16/ralloc.c:
	* src/pic16/ralloc.h:

2003-06-08  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* support/Util/SDCCerr.c, src/SDCCglobl.h, src/SDCCmain.c, doc/sdccman.lyx:
	added option --vc, so sdcc errors and warnings are compatible with
	Microsoft Visual Studio.

2003-06-07  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* device/lib/_atof.c, device/lib/Makefile.in, device/include/stdlib.h,
	  device/lib/libfloat.lib: added atof function.

2003-06-04  Bernhard Held <bernhard AT bernhardheld.de>

	* doc/sdccman.lyx: updated to Lyx 1.3
	* doc/cdbfileformat.lyx: updated to Lyx 1.3
	* doc/test_suite_spec.lyx: updated to Lyx 1.3
	* doc/Makefile: added fix for the \tabularnewline problem, thanks to Jesus

2003-06-03  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCpeeph.c: separate peepRules2pCode() for pic16 by "Vangelis Rokas" <vrokas AT otenet.gr>

2003-06-02  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: cvs revision keywords, passing pdf information in latex preamble,
	  additions to the "related tools/documentation" section

2003-06-02  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCglue.c (tempfileandname): added check for missing TMP/TEMP/TMPDIR variable

2003-05-29  Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic/device.c: added 16F819, patch by "David I. Lehn" <dlehn AT vt.edu>
	* src/SDCCcse.c (algebraicOpts): fixed "c * 1"

2003-05-28  Bernhard Held <bernhard AT bernhardheld.de>

	* doc/sdccman.lyx: fix double dash and other minor things
	* doc/Makefile: fix double dash

2003-05-28  Karl Bongers(patches from Martin Helmling)
	* debugger/mcs51/sdcdb.c,cmd.c,break.c and .h files. Martin adds
	  condition and ignore commands.

2003-05-28  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: Changes all over, index improved, smaller margins. The manual
	  is in parts still quite out of date, I did changes as far as I felt makes sense
	  for a non-native english speaker.
	  Please feel free to add to the manual or to correct my changes.
	* doc/Makefile: undid touching the date of intermediate tex files.

2003-05-26  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* doc/sdccman.lyx: Manual has an index now

2003-05-25  Bernhard Held <bernhard AT bernhardheld.de>

	Finalize muluint/mulsint and mululong/mulslong merging:
	* device/lib/_mulint.c
	* device/lib/_mullong.c
	* device/lib/gbz80/mul.s
	* device/lib/gbz80/stubs.s
	* device/lib/z80/mul.s
	* device/lib/z80/stubs.s
	* src/SDCCsymt.c (initCSupport)

2003-05-25  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkaomf51.c: Address space 'z' was missing.
	* src/avr/avr.dsp, src/ds390/ds390.dsp, src/mcs51/mcs51.dsp,
	  src/pic/pic.dsp, src/pic16/pic16.dsp, src/xa51/xa51.dsp,
	  src/x80/z80.dsp: peep.rul is bigger now, so /Zm1000 is used
	  instead of /Zm500.

2003-05-25  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/peeph.def: added rules 244.x, 245.x. Although they pass
	  the regression tests I'm not brave enough to enable 245.b, 245.c
	* doc/sdccman.lyx: added latex preamble for hyperref package.
	  Using pdflatex this will give you a hyperlinked pdf file with
	  bookmarks. (prepend '%' before /usepackage if this breaks something)

2003-05-24  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	 * doc/sdccman.lyx: updated information about .adb files (fixed bug 742649)

2003-05-22  Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic16/pcode.c (pic16_get_op_from_instruction): fixed a gcc 3.x warning

2003-05-21    <johan AT balder>

	* src/SDCCglue.c (printIval): fixed bug #739934

2003-05-19  Bernhard Held <bernhard AT bernhardheld.de>

	Applied patch from bug 737905 (renamed yylineo to mylineno):
	* src/altlex.c
	* src/SDCCast.c
	* src/SDCglobl.h
	* src/SDCC.lex
	* src/SDCCsymt.c
	* src/SDCCval.c
	* src/pic16/pcode.c: Cleaned warnings
	* src/pic16/pcodeflow.c: Cleaned warnings
	* src/pic16/pcoderegs.c: Cleaned warnings

2003-05-19  Scott Dattalo  <scott AT dattalo.com>

	* src/pic16/pcode.c: Cleaned warnings
	* src/pic16/pcodepeep.c: Cleaned warnings
	* src/pic16/ralloc.c: Cleaned warnings

2003-05-19  Bernhard Held <bernhard AT bernhardheld.de>

	* doc/sdccman.lyx: fixed bug 739745
	* src/pic16/pcode.c (pic16_get_op): fixed warning on alpha

2003-05-18  Bernhard Held <bernhard AT bernhardheld.de>

	* src/port.h: removed DEFAULT_PORT, it's not yet pic16 ;-)
	it can be defined with CFLAGS when running configure
	* src/SDCCmain.c: fixed compiling + linking with object files

2003-05-18  Vangelis Rokas (vrokas AT otenet.gr)

	* configure.in: configure for pic16 port,
	    added --disable-pic16-port
	* sdccconf_in.h: added macro OPT_DISABLE_PIC16
	* src/SDCCmain.c: linkOptions is changed to set *,
	    added if/endif conditional macros to remove options help
	    messages from optionsTable when a port is not configured, added
	    support for the PIc16 port in the ports table, when executing
	    the compiler with no port specified on command line, a default
	    port is selected with the new macro DEFAULT_PORT which is
	    defined in port.h, in setDefaultOptions() linkOptions is removed
	    from initialization assignment, since now it is a set,
	    parseCmdLine uses setParseWithComma for linkOptions, in
	    linkEdit() linkOptions are accessed with new function indexSet()
	    which returns the i'th item of a set variable. See SDCCset.c, in
	    linkEdit() when calling buildCmdLine(), added linkOptions as
	    last argument. Now users can pass arguments to gplink via the
	    -Wl option, main() uses pic16glue() to glue up pic16 programs
	* src/SDCCpeeph.c: various changes to support pic16
	* src/SDCCset.c: added function  void *indexSet(set *, int)  to
	    return the i'th item of the set
	* src/SDCCset.h: added function prototype for indexSet()
	* src/SDCCsymt.c: in checkSClass(), added support for PIC16
	* src/clean.mk: added pic16 in CLEANALLPORTS variable
	* src/port.h: added TARGET_ID_PIC16,TARGET_IS_PIC16 macro,
	    added macro DEFAULT_PORT
	* src/pic/main.c: corrected arguments of gplnk in _linkCmd
	* src/pic16/gen.c: bug fix in genCpl(), now the correct code is
	    generated
	* src/pic16/glue.c: commented out some error producing lines
	* src/pic16/main.c: __config directives are commented out to stop
	    gpasm complaining and test the linkage with gplink, _linkCmd and
	    _asmCmd changed to be more gplink and gpasm friendly
	* src/pic16/peeph.def: peep rule 3 is commented out, since it
	    produced an error when parsed, peep rule 12 is added to utilize
	    movff, but it is commented out since the pCode does not support
	    yet a command with 2 address arguments

2003-05-18    <johan AT balder>

	* src/ds390/gen.c (genArrayInit): removed obsolete and buggy ARRAYINIT
	* src/ds390/main.c (genArrayInit): removed obsolete and buggy ARRAYINIT
2003-05-17  Karl Bongers(apply patches from Martin Helmling)

	* debugger/mcs51/sdcdb.c,cmd.c,break.c and .h files.
	Added feature to script commands from file.

2003-05-14  Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/_strtok.c: fixed bug #734355 by Lenny Story and Tim Woodall
	* src/SDCCutil.c: include ctype.h for win32

2003-05-13  Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic16/*: removed CR from many files, reported by Vangelis Rokas

2003-05-12  Karl Bongers(apply development patches from Martin Helmling)

	* debugger/mcs51/sdcdb.c,simi.c,cmd.c,break.c and .h files.
	Fixed so you can set breakpoints prior to run, run does not stop
	on entry now.  Add tbreak.  Other enhancements and fixes for use
	with ddd.

2003-05-12  Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: fixed the problem with searching the DATADIR as the last resort on *nix

2003-05-11  Borut Razem <borut.razem AT siol.net>

	* src/SDCCutil.c: WIN32 version of getBinPath() calls GetModuleFileName() to determine
	the path of bin directory, so that PATH is the only env. variable, which has to be set
	in case of standard installation.
	* src/ds390/ds390.dsp: increased value of /Zm option to 1000
	* src/pic/main.c: add quotes to file name parameters for gplink and gpasm
	* src/SDCCglobl.h, src/SDCCmain.c, doc/sdccman.lyx: added --print-search-dirs command line option

2003-05-04  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (linkEdit): fixed buffer overflow for gbz80
	* support/regression/Makefile: inter-port-clean is no longer nesessary, the
	temp files are in the port dir; clean the gen/test directory when
	generating new test.c
	* support/regression/ports/host/spec.mk: defined OBJEXT for target clean
	* support/regression/tests/vaargs.c: fixed gcc 3.3 warning
	* support/regression/tests/zeropad.c: added

2003-05-09    <johan AT balder>

	* src/SDCCglue.c: fixed bug #597940

2003-05-05  Karl Bongers(apply patches from Martin Helmling)

	* debugger/mcs51/sdcdb.c,simi.c,cmd.c,symtab.c and .h files.
	cache sfr, optimize next,step, fix off by one sourceline,
	support ddd list function.
	* sim/ucsim/cmd.src/newcmd.cc - small fix for sdcdb use.

2003-05-04  Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/HTMLgen.py: added compare_s2f()
	* support/regression/Makefile: redo 1.27
	* support/regression/generate-cases.py: redo 1.5

2003-04-30  Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/tests/float.c: workaround 33 bit hex constant
	* support/regression/tests/simplefloat.c: fix division for host

2003-04-29  Scott Dattalo  <scott AT dattalo.com>

	* src/pic/pcoderegs.c Applied patch from Jim Hawkridge <jim AT jimhawkridge.uk.eu.org>
	that tame's the PIC's over-aggressive optimizer.

2003-04-29  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	 * src.dsw, link/z80/aslink.h, link/z80/linkz80.dsp: z80 linker
	 support for MSVC.

2003-04-29  Kevin Vigor <kevin AT vigor.nu>

	Initial support for DS80C400. "Hello world" runs on TINIm400
	(with polled I/O).

2003-04-28  Karl Bongers(apply patches for Martin Helmling)

	 * debugger/mcs51/sdcdb.c,simi.c,cmd.c,symtab.c and .h files.
	 * Some notes on ddd usage added in debugger/README
	 Martin Helmling adding more features and fixes for ddd GUI debugger.
	 Code added for nexti, stepi, up, down, and other adjustments.

2003-04-28  Scott Dattalo  <scott AT DATTALO.COM>

	* src/pic/pCodepeep.c non-wildcard asmops are now handled
	* src/pic/peeph.def Added two rules to optimize carry manipulation
	* src/pic/* removed debug printfs

2003-04-28  Bernhard Held <bernhard AT bernhardheld.de>

	* debugger/mcs51/cmd.c: added header newalloc.h

2003-04-26  Bernhard Held <bernhard AT bernhardheld.de>

	* as/Makefile: new EXEEXT
	* as/z80/Makefile: remove trailing slash of BUILDIR
	* as/z80/clean.mk: new EXEEXT
	* Makefile.common.in: add to CFLAGS (and others), don't replace it
	* support/cpp2/Makefile.in: new EXEEXT
	* src/pic/glue.c (pic14emitRegularMap): fixed warning

2003-04-24  Bernhard Held <bernhard AT bernhardheld.de>

	Cygwin's gcc always appends .exe: 'gcc -o a a.c' creates a.exe;
	EXEEXT was introduced to fix all related problems with targets
	"clean", "install" and "uninstall"; a couple of further flaws
	especially with "clean" have been fixed too
	* as/mcs51/Makefile.in
	* as/mcs51/clean.mk
	* as/z80/Makefile
	* Makefile
	* clean.mk
	* debugger/mcs51/Makefile.in
	* debugger/mcs51/clean.mk
	* link/z80/Makefile
	* link/z80/Makefile.in
	* link/z80/clean.mk
	* link/Makefile
	* packihx/Makefile.in
	* packihx/clean.mk
	* sim/ucsim/Makefile
	* sim/ucsim/clean.mk
	* sim/ucsim/avr.src/Makefile.in
	* sim/ucsim/avr.src/clean.mk
	* sim/ucsim/s51.src/Makefile.in
	* sim/ucsim/s51.src/clean.mk
	* sim/ucsim/xa.src/Makefile.in
	* sim/ucsim/xa.src/clean.mk
	* sim/ucsim/z80.src/Makefile.in
	* sim/ucsim/z80.src/clean.mk
	* sim/ucsim/main_in.mk
	* sim/ucsim/packages_in.mk
	* sim/ucsim/gui.src/Makefile.in
	* sim/ucsim/gui.src/serio.src/Makefile.in
	* sim/ucsim/gui.src/serio.src/clean.mk
	* src/Makefile.in
	* src/clean.mk
	* support/cpp2/Makefile.in
	* support/cpp2/clean.mk
	* support/makebin/Makefile
	* support/makebin/clean.mk
	* support/scripts/sdcc_mingw32: --program-suffix no longer needed
	* doc/sdccman.lyx: --program-suffix no longer needed

2003-04-23  Karl Bongers(apply patches for Martin Helmling)

	 * debugger/mcs51/sdcdb.c,simi.c,cmd.c,..
	 Martin Helmling added support for ddd GUI debugger.
	 Code added to display assembly, set variables, and other commands
	 to interface to ddd.

2003-04-23  Bernhard Held <bernhard AT bernhardheld.de>

	* as/Makefile: fix target clean
	* as/clean.mk: fix target clean
	* as/z80/clean.mk: fix target clean

2003-04-22  Bernhard Held <bernhard AT bernhardheld.de>

	* Makefile.common.in: added  AT EXEEXT AT
	* configure.in: removed all mingw32 stuff
	* configure: rebuilt from configure.in
	* doc/sdccman.lyx: updated section "installation"
	* support/scripts/sdcc_mingw32: adapted to configure
	* support/scripts/sdcc_cygwin_mingw32: added

2003-04-22  Scott Dattalo  <scott AT dattalo.com>

	* src/pic Added object file support for the PIC port
	* src/pic Applied patch from Craig Franklin (this started the object file support)
	* src/regression Updated the PIC regression tests for object files

2003-04-20  Borut Razem <borut.razem AT siol.net>

	* sdcc/as/mcs51/lklex.c: make getfid() more robust and fixed gcc warning:
	  lklex.c: In function `getfid':
	  lklex.c:203: warning: array subscript has type `char'
	* src/SDCCglobl.h: small change in stack handling macros, to avoid crash when compiled
	  with MSVC with global optimization enabled (probably an cl compiler bug ;-)
	* support/Util/SDCCerr.c, support/Util/SDCCerr.h: added function fatal(), called from
	  stack handling macros

2003-04-19  Borut Razem <borut.razem AT siol.net>

	* "handling space characters in file path" task:
	* src/SDCCmacro.c: fixed bug in handlig quote at the end of line
	* support/Util/BuildCmd.c: define par as NULL if parameter value is invalid
	* support/Util/MySystem.h: make it self-sufficient
	* src/avr/main.c, src/ds390/main.c, src/mcs51/main.c, src/pic/main.c, src/xa51/main.c,
	  src/z80/main.c, sdcc/as/mcs51/lklex.c:
	  handling space characters in file path
	* src/SDCCmain.c: introduced setDataPaths() function, {datadir} macro
	  (it will be used by assemblers, which have their own includes, e.g. gpasm)
	* support/Util/MySystem.c: handling space characters in executable's path

2003-04-19  Bernhard Held <bernhard AT bernhardheld.de>

	* as/z80/Makefile: fix permanent rebuild of z80
	* sim/ucsim/gui.src/Makefile.in: target "install" builds the same packages as target "all"
	* support/regression/tests/bitfields.c: added Johan's bitfields.c

2003-04-18 	Kevin Vigor <kevin AT vigor.nu>

	* src/SDCCopt.c: add special case optimization to replace modulo by
	  a power of two with a bitwise AND.

2003-04-18    <johan AT balder>

	* src/mcs51/gen.c (getFreePtr): fixed bug #635354

2003-04-17    <johan AT balder>

	* src/mcs51/ralloc.c (packRegsForAssign): fixed bug #716790 and removes lot's of redundant register usage around function calls
	* src/mcs51/ralloc.c (packRegisters): fixed bug #720667

2003-04-13  Borut Razem <borut.razem AT siol.net>

	* doc/sdccman.lyx: updated info about #pragma SAVE/RESTORE nesting
	* configure.in, configure: fixed problems on cygwin/WinCVS environmet with ports.* line endings;
	  fixed mingw problem in adl_NORMALIZE_PATH

2003-04-12  Borut Razem <borut.razem AT siol.net>

	* fixed "#pragma SAVE/RESTORE can not be nested":
	* src/SDCC.lex: reworked pragma handling functions
	* sdcc/src/SDCCglobl.h: reworked stack handling macros
	* support/Util/SDCCerr.c, support/Util/SDCCerr.h: added E_STACK_VIOLATION error

2003-04-12  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCutil.c (pathEquivalent): defined but not used
	* debugger/mcs51/sdcdb.c: replace SDCC_LIB_DIR
	* configure.in: remove sdcc_datadir, sdcc_lib_dir and sdcc_include_dir
	* configure: rebuilt from configure.in
	* sdccconf_in.h: remove SDCC_LIB_DIR and SDCC_INCLUDE_DIR
	* sdcc_vc_in.h: remove SDCC_LIB_DIR and SDCC_INCLUDE_DIR
	* device/include/Makefile.in: replace sdcc_datadir
	* device/lib/Makefile.in: replace sdcc_datadir
	* Makefile.common.in: add LDFLAGS from configure
	* packihx/Makefile.in: use LDFLAGS
	* src/Makefile.in: use LDFLAGS
	* support/cpp2/Makefile.in: add LDFLAGS from configure
	* support/makebin/Makefile: use LDFLAGS
	* .version: bumped version number to 2.3.5

2003-04-12  Borut Razem <borut.razem AT siol.net>

	* completed "different paths" task:
	* src/SDCCmacro.c: fixed bug in handling quotes
	* src/SDCCutil.c, src/SDCCutil.c: rewritten getPrefixFromBinPath()
	* src/SDCCmain.c: _discoverPaths() replaced with setBinPaths(), setIncludePath() and setLibPath()

2003-04-12  Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic/pcoderegs.c (Remove1pcode): fix warning on alpha

2003-04-11 kevin Vigor <kevin AT vigor.nu>

	* ds390/gen.c ds390/peeph.def: fix bug 706781

2003-04-11  Borut Razem <borut.razem AT siol.net>

	* support/Util/dbuf.c, support/Util/dbuf.h: update to version 1.1.1 - re-added C++ stuff to make it still more portable

2003-04-10  Scott Dattalo  <scott AT dattalo.com>

	* src/pic/* Applied the pointer-to-function patch from Steve Tell.
	* src/pic/* Fixed several pointer bugs. (PIC port broke when the ruonly bit was
	 set - this bit used to not be set...).
	* src/pic/gen.c Fixed buf 609268 ==> x = (x+1) & 0xf; generated
	  bad code in PIC Port
	* src/regression/and2.c added to test bug 609268
	* src/regression/Makefile added and2.c to regression test


2003-04-08    <johan AT CP255758-A>

	* src/mcs51/gen.c (gen51Code): display reg usage in --icode-in-asm
	* src/mcs51/ralloc.c (serialRegAssign): update the registers in use and save some slocs
	* src/SDCCicode.h: added riu to show the register usage in --icode-in-asm

2003-04-07  Bernhard Held <bernhard AT bernhardheld.de>

	* configure.in: fully support prefix, exec_prefix, datadir, docdir;
	fix bug #487815
	* support/cpp2/Makefile.in: fix bug #487815
	* configure: rebuilt from configure.in
	* Makefile.common.in: docdir changed, new path suffixes
	* sdccconf_in.h: new RETSIGTYPE, and other PATHs
	* sdcc_vc_in.h: reflect changes from sdccconf.h
	* src/SDCCglobl.h: remove *SEPARATOR_CHARS, they are now in sdccconf.h
	* src/SDCCutil.h: remove BINDIR hack
	* doc/sdccman.lyx: update new path hierarchy

2003-04-06    Paul Stoffregen <paul AT pjrc.com>

	* src/SDCCpeeph.c: added okToRemoveSLOC test

2003-04-06    Paul Stoffregen <paul AT pjrc.com>

	* device/lib/printf_fast.c: added leading zero format ("%06d", etc)

2003-04-06    Paul Stoffregen <paul AT pjrc.com>

	* src/SDCCpeeph.c: added labelIsReturnOnly test
	* src/mcs51/peeph.def: Peephole 244: replace ljmp to ret with ret

2003-04-05    <johan AT balder>

	* src/SDCCcse.c (cseAllBlocks): fixed bug #460088
	* src/SDCCloop.c (DEFSETFUNC): fixed bug #460088
	* src/SDCCopt.c (eBBlockFromiCode): fixed bug #460088
	* src/SDCCast.c: fixed a warning
	* src/SDCCast.h: fixed a warning
	* src/SDCCicode.c (operandFromAst): fixed a warning

2003-04-04    <johan AT balder>

	* src/SDCCloop.c (DEFSETFUNC): undid the fix for bug #519584
	* src/SDCCast.c (decorateType): fixed bug #715076
	* src/SDCC.y: fixed bug #702907

2003-04-03    <johan AT balder>

	* device/lib/_mulint.c (_muluint): new #pragma LESS_PEDANTIC
	* src/SDCCopt.c (eBBlockFromiCode): new #pragma LESS_PEDANTIC
	* src/SDCCglobl.h (PRAGMA_LESSPEDANTIC): new #pragma LESS_PEDANTIC
	* src/SDCC.lex (doPragma): new #pragma LESS_PEDANTIC
	* src/SDCCmain.c (parseCmdLine): new #pragma LESS_PEDANTIC

2003-04-03  Bernhard Held <bernhard AT bernhardheld.de>

	* _decdptr.c: fix return values
	* _gptrget.c: fix return values
	* _gptrgetc.c: fix return values
	* _gptrput.c: fix return values
	* _mulint.c: fix return values
	* as/z80/Makefile: fix 'make -j' problem

2003-04-02  Bernhard Held <bernhard AT bernhardheld.de>

	* Makefile.common.in: unused PORT, SCC and SAS removed, fixed docdir
	* configure.in: big cleanup, updated to autoconf 2.5x
	* configure: rebuilt from configure.in
	* sdccconf_in.h: new RETSIGTYPE, and other PATHs
	* sdcc_vc_in.h: reflect changes from sdccconf.h
	* doc/Makefile: fixed a flaw in "make install"

2003-04-02    <johan AT balder>

	* src/ds390/gen.c (genCmp): no comments
	* src/mcs51/gen.c (genCmp): no comments
	* src/SDCCopt.c (eBBlockFromiCode): detect missing return values
	* src/SDCCast.c (ast_print): fixed the function type in --dumptree

2003-04-01  Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/generate-cases.py: place generated file in given sub directory
	* support/regression/ports/host/spec.mk: prevent removal of testfwk.o
	* support/regression/Makefile: improvements for 'make -j';
	side effect: it's simpler and faster now

2003-03-31  Borut Razem <borut.razem AT siol.net>

	* src/z80/main.c: link-{port} and as-{port} defined without path
	* src/src.dsp: support/Util/MySystem.h and src/SDCCutil.h added to project

2003-03-31  Bernhard Held <bernhard AT bernhardheld.de>

	* Makefile, src/Makefile.in: add dependencies, so that 'make -j' works

2003-03-30  Borut Razem <borut.razem AT siol.net>

	* support/Util/BuildCmd.c, support/Util/BuildCmd.h: rewrite buildCmdLine(),
	  changed type of list parameter to set
	* src/ds390/main.c: changed type of parameter asmOptions to set in _tininative_do_assemble()
	* src/port.h: changed type of do_assemble() parameter to set
	* src/SDCCmain.c: type of asmOptions changed to set, introduced setParseWithComma(),
	  sdcpp defined without path, removed variable VersionString, introduced set binPathSet,
	  definition of "cppoutfilename" macro with NULL value in preProcess()
	* src/SDCCglobl.h: included "SDCCset.h", added declaration of setParseWithComma()
	* src/SDCCglue.c: removed variable VersionString, inroduced spacesToUnderscores()
	* support/Util/MySystem.c, support/Util/MySystem.h: rewrite, char *ExePathList[]
	  replaced with set *binPathSet
	* shash_add() deallocates the item, if allready exsists, before adding the new one
	* src/SDCCmacro.c: handling macros with empty or NULL values in _evalMacros()

2003-03-30  Scott Dattalo  <scott AT dattalo.com>

	* src/pic/gen.c: Commit patch from Steve Tell <tell AT telltronics.org> that fixes
	  a nested for loop bug in the PIC port
	* src/regression/nestfor.c: new regression test file Steve wrote to test nested
	  for loops

2003-03-29  Bernhard Held <bernhard AT bernhardheld.de>

	* support/Util/dbuf.h: remove C++ stuff to make it portable

2003-03-28  Borut Razem <borut.razem AT siol.net>

	* src/SDCC.lex: Fix for bug #711240: dynamic buffer handling of C
	  literal strings in stringLiteral()
	* support/Util/dbuf.c, support/Util/dbuf.h: added: dynamic buffer handling
	* src/Makefile.bcc, src/Makefile.in, src/src.dsp: added support/Util/dbuf.c
	  to the project

2003-03-27  Paul Stoffregen <paul AT pjrc.com>

	* src/SDCCpeeph.c (pcDistance): accurate byte distance for mcs51

2003-03-26    <johan AT balder>

	* src/mcs51/gen.c (saveRegisters): catched symbol abuse
	* src/ds390/gen.c (saveRegisters): catched symbol abuse
	* src/SDCCast.c (decorateType): fixed " -v < 3"

2003-03-23  Bernhard Held <bernhard AT bernhardheld.de>

	* doc/cdbfile.html: removed, replaced by cdbfileformat.lyx
	Added Lenny Story's debug infrastructure changes:
	* src/Makefile.in:  added new files cdbFile.c and SDCCdebug.c
	* src/Makefile.bcc: added new files cdbFile.c and SDCCdebug.c
	* src/cdbFile.c: added
	* src/SDCCdebug.c: added
	* src/SDCCdebug.h: added
	* src/SDCCast.c (createFunction)
	* src/SDCCglue.c (emitRegularMap, emitStaticSeg, emitOverlay, glue)
	* src/SDCCmain.c (parseCmdLine, main)
	* src/SDCCmem.c (redoStackOffsets)
	* src/SDCCsymt.c (cdbStructBlock, cdbTypeInfo, cdbSymbol, cdbStruct, cdbStructBlock)
	* src/SDCCsymt.h
	* src/common.h
	* src/avr/gen.c (genAVRCode)
	* src/ds390/gen.c (gen390Code)
	* src/mcs51/gen.c (gen51Code)
	* src/pic/gen.c (genpic14Code)
	* src/pic/glue.c (pic14emitRegularMap, pic14emitStaticSeg, pic14emitOverlay, picglue)
	* src/xa51/gen.c (genXA51Code)
	* src/SDCCast.c: fixed "void foo(void){char c; -c < 0;}"

2003-03-22  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c (genCodePointerGet): quicker code for bug #700797
	* src/mcs51/peeph.def: added rules 177, 241.x to 243, touched 181, 182.x, 193.x

2003-03-22    <johan AT balder>

	* src/SDCCicode.c (geniCodeDerefPtr): fixed bug #698231

2003-03-21  Bernhard Held <bernhard AT bernhardheld.de>

	* support/scripts/sdcc_mingw32: adapted to configure from autoconf 2.54
	* doc/cdbfileformat.lyx: added, written by Lenny Story
	* doc/Makefile: added cdbfileformat.lyx
	* doc/clean.mk: added cdbfileformat.lyx

2003-03-20  Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/peeph.def: fix bug #705773

2003-03-20    <johan AT balder>

	An sfr/sbit can have an "at #" AND an initializer
	* src/SDCCsymt.c (checkSClass):
	* src/SDCCmem.c (allocGlobal):
	* src/SDCCmem.c (allocLocal):
	* src/SDCCast.c (createBlock):

2003-03-17  Bernhard Held <bernhard AT bernhardheld.de>

	* src/ds390/peeph.def: fix bug #704878: added rule 213.b suggested by Jan Rejlek

2003-03-16    <johan AT balder>

	Undid the hackup of const and volatile, the problem is much bigger
	* src/SDCC.y:1.65
	* src/SDCCast.c:1.171
	* src/SDCCglue.c:1.138
	* src/SDCCicode.c:1.146
	* src/SDCCsymt.c:1.150
	* src/SDCCval.c:1.65

2003-03-15  Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/ralloc.c (packRegsForAssign): fixed bug #703541
	* src/ds390/gen.c (genAddrOf): fixed bug #704087

2003-03-13    <johan AT balder>

	Hackup const and volatile modifiers in type chains a bit:
	* src/SDCC.y:1.63
	* src/SDCCast.c:1.169
	* src/SDCCglue.c:1.136
	* src/SDCCicode.c:1.143
	* src/SDCCsymt.c1.146
	* src/SDCCsymt.h1.59
	* src/SDCCval.c:1.63

2003-03-12    <johan AT balder>

	* src/SDCCBBlock.h: more LRH debugging junk
	* src/SDCCcflow.h: more LRH debugging junk
	* src/SDCCloop.c: more LRH debugging junk
	* src/SDCC.y (struct_declaration): fixed bug #697590
	* src/SDCCsymt.[hc] (cloneSpec): NEVER EVER use this again
	* src/ds390/gen.c (aopForRemat): fixed bug #700031
	* src/SDCCglue.c (emitStaticSeg): fixed bug #700797

2003-03-11 Kevin Vigor <kevin AT vigor.nu>
	* src/SDCCpeeph.c: quit being lazy and made proper fix (peephole
	test function names must now match exactly).
	* src/SDCCcse.c: added special case in findCheaperOp to allow
	extending a short integer. Makes less awful code for bug 700121 test case.

2003-03-11  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/lkmain.c: Added ASlink-Warning to messages
	* as/mcs51/lkaomf51.c: Fixed bug when linking asmblink example

2003-03-11 Kevin Vigor <kevin AT vigor.nu>

	* src/SDCCpeeph.c: fix so that operandsNotEqualX functions are
	actually called (operandsNotEqual() was called for all
	operandsNotEqualX tests).

2003-03-11 Kevin Vigor <kevin AT vigor.nu>

	* src/SDCCcse.c: fix findCheaperOp to prevent replacing int types
	with shorter literals. Fixes bug 700121.

2003-03-11    <johan AT balder>

	* src/SDCCsymt.c (compareType): a (void *) can be assigned to any pointer

2003-03-11  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCloop.c (mergeRegions): an evil beast is dead
	* src/SDCCmain.c (preProcess): minor cleanup: eliminate preOutName

2003-03-10  Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: pipe preprocessor's output
	* support/Util/MySystem.c, support/Util/MySystem.h: added my_popen()
	* sdcc_vc_in.h: define pclose as _pclose for WIN32
	* src/SDCCglue.c, src/SDCCglue.h: added set pipeSet, added function closePipes,
	which closes all pipes in pipeSet set
	* src/SDCCset.c: free deleted item in function deleteSetItem()
	* src/src.dsp, src/z80/z80.dsp: files support/Util/BuildCmd.c and support/Util/MySystem.c
	moved from z80 to src subproject
	* .version: increased version number to 2.3.4

2003-03-10  Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/ports/mcs51/spec.mk: increase timeout for CF's sparc to 30s
	* support/regression/ports/ds390/spec.mk: increase timeout for CF's sparc to 25s
	* support/regression/ports/xa51/spec.mk: fix typo

2003-03-09  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCglobl.h: PATH_MAX is already defined in mingw32 headers

2003-03-09  Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: pipe preprocessor's output
	* support/Util/MySystem.c, support/Util/MySystem.h: added my_popen()
	* sdcc_vc_in.h: define pclose as _pclose for WIN32
	* src/SDCCglue.c, src/SDCCglue.h: added set pipeSet, added function closePipes,
	which closes all pipes in pipeSet set
	* src/SDCCset.c: free deleted item in function deleteSetItem()
	* src/src.dsp, src/z80/z80.dsp: files support/Util/BuildCmd.c and support/Util/MySystem.c
	moved from z80 to src subproject

2003-03-09  Borut Razem <borut.razem AT siol.net>

	* src/SDCCglue.c: re-implemented tempfilename() and tempfile(): using mkstemp() if available
	* src/SDCCsymt.h: fixed MSVC and BORLANDC compilation (included SDCCglobl.h instead srccconf.h)
	* sdcc_vc_in.h: explicitly undefined HAVE_MKSTEMP which is not available on BORLANDC and MSVC
	* src/SDCCset.h: removed inclusion of sdccconf.h or sdcc_vc.h
	* src/SDCCglobl.h: unification of WIN32 native definitions

2003-03-09  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c: applied in-/dec patch mentioned on sdcc-devel 2003-03-01

2003-03-08  Bernhard Held <bernhard AT bernhardheld.de>

	* src/configure.in:   check for endianess (even while cross-compiling)
	* src/configure:      check for endianess (even while cross-compiling)
	* src/configure_in.h: check for endianess (even while cross-compiling)
	* src/avr/gen.c:        remove old endianess stuff
	* src/mcs51/gen.c:      remove old endianess stuff
	* src/ds390/gen.c:      remove old endianess stuff
	* src/pic/gen.c:        remove old endianess stuff
	* src/pic/genarith.c:   remove old endianess stuff
	* src/pic/glue.c:       fix endianess check
	* src/pic16/gen.c:      remove old endianess stuff
	* src/pic16/genarith.c: remove old endianess stuff
	* src/pic16/glue.c:     fix endianess check
	* src/xa51/gen.c:       remove old endianess stuff
	* src/z80/gen.c:        fix endianess check
	* src/SDCCglue.c:       fix endianess check
	* src/ds390/peeph.def: fix bug 700036

2003-03-08  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCsymt.h: use appropriate data-types on host for SDCC's int and long
	* src/configure: find appropriate data-types on host for SDCC's int and long
	* src/configure.in: find appropriate data-types on host for SDCC's int and long
	* src/sdccconf_in.h: find appropriate data-types on host for SDCC's int and long
	* src/xa51/gen.c: use %d, not %ld for 4 byte variables

2003-03-07    <johan AT balder>

	Just a big NOOP:
		some minor cleanups before the big shot
		OP_DEFS and OP_USES now use Kevin's protection
		new option --nolabelopt

	* src/SDCCBBlock.c:
	* src/SDCCast.c,:
	* src/SDCCcflow.c:
	* src/SDCCcse.c:
	* src/SDCCicode.c:
	* src/SDCCicode.h:
	* src/SDCClabel.c:
	* src/SDCCloop.c:
	* src/SDCCmain.c:
	* src/ds390/ralloc.c:
	* src/mcs51/ralloc.c:
	* src/pic/ralloc.c:
	* src/xa51/ralloc.c:
	* src/z80/ralloc.c:

2003-03-06  Bernhard Held <bernhard AT bernhardheld.de>

	* src/pic/pcode.c (get_op): fix 64 bit warnings
	* src/pic/pcode.c (pCode2str): fix 64 bit warnings
	* src/SDCChasht.c (newHashTable): fix 64 bit warnings
	* src/SDCCsymt.c (checkTypeSanity): fix 64 bit warnings
	* support/regression/tests/malloc.c: fix 64 bit warnings

2003-03-04  Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (genMinus): fixed bug 696436

2003-03-02  Borut Razem <borut.razem AT siol.net>

	* src/SDCCmain.c: added BORLANDC, corrected MSVC in printVersionInfo()

2003-02-26  Bernhard Held <bernhard AT bernhardheld.de>

	* configure.in: test for mkstemp
	* sdccconf_in.h: add HAVE_MKSTEMP

2003-02-24  Bernhard Held <bernhard AT bernhardheld.de>

	* device/include/ctype.h: removed warning while using --stack-auto
	* device/include/malloc.h: removed warning while using --stack-auto
	* device/include/string.h: removed warning while using --stack-auto

2003-02-23  Borut Razem <borut.razem AT siol.net>

	* src/asm.h: corrected assertion in function printILine(): _pipe() was not executed on MSVC,
	because NDEBUG is defined (see man assert)
	* sdcc_vc_in.h: vsnprintf is defined as _vsnprintf on MSVC

2003-02-23  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/mcs51/gen.c (genUminusFloat): avoided dptr in-/decrement for xdata variables
	* src/mcs51/peeph.def: added rule suggested by Gernot Fink, white space/comment changes

2003-02-18  Frieder Ferlemann <Frieder.Ferlemann AT web.de>

	* src/SDCCpeeph.c: added peephole conditions testing for same arguments
	* src/mcs51/peeph.def: added rules 238a-d which remove redundant moves

2003-02-18    <johan AT balder>

	* as/mcs51/asmain.c (asmbl): module can start with a digit
	* as/z80/asmain.c (asmbl): module can start with a digit

2003-02-16  Bernhard Held <bernhard AT bernhardheld.de>

	* sim/ucsim/mkecho: inserted #!/bin/sh for Cygwin, so that it's executable
	* src/asm.c: fix pipe() for Mingw32

2003-02-15  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCglue.h: make tmpfileNameSet available for preOutName
	* src/SDCCmain.c (preProcess): make sure, that preOutName will be deleted;
	make -V work again; --c1mode reads now from stdin
	* doc/sdccman.lyx: added --c1mode
	* support/Util/SDCCerr.c: new messages for c1 mode
	* support/Util/SDCCerr.h: new messages for c1 mode
	* src/SDCC.lex (checkCurrFile): test if fullSrcFileName is NULL for c1mode

2003-02-15    <johan AT balder>

	* src/asm.c: new options: --no-c-code-in-asm and --i-code-in-asm

2003-02-14  Bernhard Held <bernhard AT bernhardheld.de>

	* doc/sdccman.lyx: Environment variables, -o and other minor things

2003-02-14    <johan AT balder>

	* src/xa51/main.c: before anyone really tries to use it :)

	* Install doc's in share/sdcc/doc
	* removed some obsolete files
	* Do a proper make distclean and uninstall
	M Makefile.common.in
	R sdccbuild.sh
	M as/Makefile
	M device/include/Makefile.in
	M device/lib/Makefile.in
	M doc/sdccman.lyx
	M link/Makefile
	M sim/ucsim/doc/Makefile.in
	M src/clean.mk
	R src/avr/peeph.rul
	R src/xa51/peeph.rul
	M support/cpp2/Makefile.in
	M support/makebin/Makefile


2003-02-13  Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/ports/host/spec.mk: use cc as host compiler for max osx

2003-02-10  Borut Razem <borut.razem AT siol.net>

	* doc/bccinst.txt, packihx/packihx.c, sdcc_vc_in.h, src/SDCCset.h,
	support/cpp2/config.in: Borland C++ build doesn't depend on Cygwin configure
	* Bcc.ini, Makefile.bcc, as/mcs51/Makefile.bcc,
	device/examples/ds390/tinitalk/Makefile.bcc, packihx/Makefile.bcc,
	support/cpp2/Makefile.bcc, src/Makefile.bcc, src/avr/Makefile.bcc,
	src/ds390/Makefile.bcc, src/izt/Makefile.bcc, src/mcs51/Makefile.bcc,
	src/pic/Makefile.bcc, src/pic16/Makefile.bcc, src/xa15/Makefile.bcc,
	src/z80/Makefile.bcc: Borland Makefile cleanup
	* as/z80/Makefile.bcc: Added Borland Makefile
	* support/cpp2/borland.h: Removed

2003-02-10  Bernhard Held <bernhard AT bernhardheld.de>

	* doc/sdccman.lyx: new pragma NOIV by "Johannes Stezenbach" <js AT convergence.de>
	* src/SDCC.lex: new pragma NOIV
	* src/SDCCglobl.h: new pragma NOIV
	* src/SDCCmem.c: new pragma NOIV

2003-02-09  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c: signal handling is switched off by SDCC_LEAVE_SIGNALS

2003-02-09  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c: signal handling is switched off by --debug
	* doc/Makefile: small fix for install; use clean.mk again
	* doc/clean.mk: clean *.pdf and *.html too

2003-02-08  Bernhard Held <bernhard AT bernhardheld.de>

	* device/lib/_mulint.c: small fix for large/ds390 --int-long-reent resp. --stack-auto
	* device/lib/printfl.c: fix a ds390 bug by making it portable
	* src/SDCCsymt.c (initCSupport): fix compile warning on Cygwin
	* src/SDCCopt.c (cnvToFloatCast): fix compile warning on Cygwin
	* src/SDCCopt.c (cnvFromFloatCast): fix compile warning on Cygwin
	* debugger/mcs51/cmd.c: converted multi-line string literals
	* sim/ucsim/globals.cc: converted multi-line string literals
	* src/SDCCmain.c: introduced signal handler to remove temp files
	* doc/Makefile: small tweaks, implement clean
	* doc: removed generated files

2003-02-05  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/aslink.h, as/mcs51/lkihx.c, as/mcs51/lkrloc.c:  Applied
	patch from Jan Rejlek <jr AT apex-lib.cz> to fix Bug 677692: "Extended
	Address Record is not correctly generated for DS390."

2003-02-02  Borut Razem <borut.razem AT siol.net>

	* Makefile.bcc: removed non existing cpp project and non compilable izt project from makefile
	* as/mcs51/asm.h: fixed compilation with Borland C
	* support/cpp2/Makefile.bcc: added rule to generate auto-host.h
	* support/cpp2/auto-host_vc_in.h: fixed compilation with Borland C
	* src/mcs51/mcs51a.dsp: corrected misspelled project name from msc51a to mcs51a
	* src/avr/Makefile.bcc, src/ds390/Makefile.bcc, src/izt/Makefile.bcc,
	src/mcs51/Makefile.bcc, src/pic16/Makefile.bcc, src/xa51/Makefile.bcc,
	src/z80/Makefile.bcc: delete $(LIB) only if exist
	* src/Makefile.bcc, src/pic/Makefile.bcc:  fixed compilation with Borland C

2003-02-02  Bernhard Held <bernhard AT bernhardheld.de>

	* device/include/malloc.h: introduced NULL
	* device/include/string.h: introduced NULL
	* device/include/stdlib.h: introduced NULL
	* device/lib/_memcpy.c: removed NULL
	* device/lib/_strcat.c: removed NULL
	* device/lib/_strchr.c: removed NULL
	* device/lib/_strcmp.c: removed NULL
	* device/lib/_strcpy.c: removed NULL
	* device/lib/_strcspn.c: removed NULL
	* device/lib/_strlen.c: removed NULL
	* device/lib/_strncat.c: removed NULL
	* device/lib/_strncmp.c: removed NULL
	* device/lib/_strncpy.c: removed NULL
	* device/lib/_strpbrk.c: removed NULL
	* device/lib/_strrchr.c: removed NULL
	* device/lib/_strspn.c: removed NULL
	* device/lib/_strstr.c: removed NULL
	* device/lib/_strtok.c: removed NULL
	* device/lib/malloc.c: removed NULL, include own header

2003-02-02    <johan AT balder>

	* src/mcs51/ralloc.c (packForPush): fixed bug #631653, maybe other ports need this too? At least now some new alerts in SDCCBBlock.c and SDCCicode.c gives an early warning
	* support/regression/fwk/lib/testfwk.c: div and mod isn't broken anymore
	* regressions ds390/spec.mk and mcs51/spec.mk (timeout): my good old balder isn't fast enough for some tests
	* src/z80/gen.c (genZ80Code): added c-lines in asm comments
	* as/z80/asm.h (NINPUT): increased for long c-comments in regression tests
	* src/z80/gen.c (genRightShiftLiteral): fixed the (char)(-3)>>8 (I think)

2003-02-01  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/SDCCmain.c: Fixed bug 678574: "ds390: ASlink-Error-Stack overlaps
	area 'DATA'"

2003-02-01    <johan AT balder>

	* src/SDCCval.c (valBitwise): fixed Karl's "2 | (1<<8)"

2003-01-31    <johan AT CP255758-A>

	* src/ds390/main.c (_ds390_genAssemblerPreamble): applied Jan Rejlek's >64K startup patch

2003-01-30    <johan AT balder>

	* src/SDCCBBlock.c: automatic bug detection
	* src/SDCCicode.c: automatic bug detection

2003-01-29  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* src/SDCCglobl.h:   now --xram-size 0 works
	* src/SDCCmain.c:    now --xram-size 0 works

2003-01-29    <johan AT balder>

	* src/almosteverything: changed OP_DEFS and OP_USES from macros to functions to catch symbol abuse (a hot topic in the bug list :)

2003-01-29  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* as/mcs51/aslink.h: Added options --xram-size and --code-size
	* as/mcs51/lkdata.c: Added options --xram-size and --code-size
	* as/mcs51/lkmain.c: Added options --xram-size and --code-size
	* as/mcs51/lkmem.c:  Added options --xram-size and --code-size
	* src/SDCCglobl.h:   Added options --xram-size and --code-size
	* src/SDCCmain.c:    Added options --xram-size and --code-size

2003-01-28  Bernhard Held <bernhard AT bernhardheld.de>

	* src/ds390/gen.c: fix deps by replacing <common.h> with "common.h"
	* src/SDCC.lex: rename P_OVERLAY to P_OVERLAY_ for cross-gcc 3.2 MINGW32

2003-01-27    <johan AT balder>

	* src/SDCC.y: fixed bug #613764

2003-01-26    <johan AT balder>

	* src/SDCClrange.c:  fixed Bernhard's "char * code ptr = &c"
	* src/SDCCsymt.h: fixed bug #673374
	* src/SDCCglue.c: fixed bug #661910
	* src/SDCCast.c: fixed bug #458099 and 673374

2003-01-26  Bernhard Held <bernhard AT bernhardheld.de>

	* as/mcs51/strcmpi.c: added, provides Aurelien Jarno's as_strcmpi(); strcmpi() is not ANSI
	* as/mcs51/strcmpi.h: added
	* as/mcs51/asm.h: remove ugly "#define strcmpi strcmp"
	* as/mcs51/aslink.h: remove ugly "#define strcmpi strcmp"
	* as/mcs51/asmain.c: strcmpi -> as_strcmpi
	* as/mcs51/assym.c: strcmpi -> as_strcmpi
	* as/mcs51/lkmem.c: strcmpi -> as_strcmpi
	* as/mcs51/lknoice.c: strcmpi -> as_strcmpi
	* as/mcs51/lksym.c: strcmpi -> as_strcmpi
	* as/mcs51/Makefile.aslink: new module strcmpi
	* as/mcs51/Makefile.asx8051: new module strcmpi
	* as/mcs51/Makefil.bcc: new module strcmpi
	* as/mcs51/Makefile.in: new module strcmpi
	* sim/ucsim/s51.src/uc390.cc (get_mem_size): make RAM big enough for tinibios

2003-01-26    <johan AT balder>

	* src/SDCCglue.c: reverted back to 1.124
	* src/SDCCast.c: reverted back to 1.156
	* src/mcs51/gen.c (aopGet): applied Frieder's efficiency patch

2003-01-25    <johan AT balder>

	* src/SDCCglue.c: A better fix for bug #661910
	* src/SDCCast.c: A better fix for bug #661910
	* src/SDCCglue.c (emitRegularMap): That was a little too efficient

2003-01-24  Bernhard Held <bernhard AT bernhardheld.de>

	* src/Makefile.in: remove spawn.o
	* src/SDCCmain.c: remove spawn.h
	* src/SDCCmain.c (printVersionInfo): report MINGW32 instead of UNIX
	* src/spawn.c: removed
	* src/spawn.h: removed
	* support/regression/ports/ds390/spec.mk: link with -r

2003-01-24    <johan AT CP255758-A>

	* src/ds390/gen.c (aopOp): fixed bug #667458
	* src/SDCCglue.c (emitRegularMap): fixed bug #458099 again
	* src/SDCCast.c (createIvalCharPtr): fixed bug #661910
	(createIvalCharPtr): an ival doesn't always have a storage class anymore

2003-01-24  Bernhard Held <bernhard AT bernhardheld.de>

	* src/mcs51/peeph.def: better assembler identation by Frieder
	* src/mcs51/gen.c: better assembler identation by Frieder

2003-01-22  Bernhard Held <bernhard AT bernhardheld.de>

	* as/z80/string.h: removed for gcc 3.2
	* support/makebin/makebin.c: #include <string.h> for gcc 3.2
	* src/pic/pcode.c (get_op_from_instruction): fix concatenation of string literals with __FUNCTION__ for gcc 3.2

2003-01-19  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (linkEdit): rename mem and map files even in case of failure
	* src/SDCCpeeph.c (replaceRule): fix bug #663503
	* support/regression/Makefile: separate temp files for ports
	* support/regression/generate-cases.py: separate temp files for ports
	* src/mcs51/peeph.def: Frieder: removed 237 (obsolete by 236g and 105); added 237 a/b
	* src/ds390/peeph.def: Frieder: removed 237 (obsolete by 236g and 105); added 237 a/b

2003-01-19  Bernhard Held <bernhard AT bernhardheld.de>

	* moved tinitalk to device/examples/ds390

2003-01-14  Bernhard Held <bernhard AT bernhardheld.de>

	* as/mcs51/lkmem.c: rflag is for DS390
	* src/SDCCglobl.h: removed out_name and options stackOnData, genericPtr
	* src/SDCCmain.c (optionsTable, setDefaultOptions): removed --stack-after-data and --generic
			 (linkEdit): move mem- and map-files the same way as ihx-files
	* src/z80/main.c (_setDefaultOptions): removed --generic
	* src/SDCCmain.c (_processC1Arg, parseCmdLine, main): --c1mode works again
	* src/SDCCglue.c (createInterruptVect, glue): --c1mode works again
	* src/pic/glue.c (picglue): --c1mode works again
	* src/pic16/glue.c (pic16glue): --c1mode works again
	* src/asm.c (printCLine): fix #660034

2003-01-13  Bernhard Held <bernhard AT bernhardheld.de>

	* src/ds390/peeph.def: fix #123; add 14 rules by Fiorenzo D. Ramaglia <fd.ramaglia AT tin.it>, 1 by Frieder
	* src/mcs51/peeph.def: fix #123; add 14 rules by Fiorenzo, 1 by Frieder
	* src/mcs51/gen.c (genFunction): emit r0 instead of ar0 by Fiorenzo
	* as/mcs51/lkmem (summary): better fix for sp problem
	* src/SDCCglue.c (glue): __start_stack - 1, saves 1 byte!
	* src/ds390/main.c (_ds390_finaliseOptions, _tininative_finaliseOptions): stack_loc = 0x400008
	* support/regression/ports/*/spec.mk: moving testfwk-object to port dir allow parallel execution of regression tests
					      remove --stack-after-data

2003-01-12  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (main): port->finaliseOptions() moved for z80 linking
	* src/SDCCutil.c (join): ugly bug: missing '\0'
	* as/mcs51/lkmem.c (summary): sp on address 7 is safe

2003-01-11  Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (assemble, linkEdit): preparations for -o
	* src/port.h: typo
	* src/pic/main.c (_asmCmd): gpasm supports -o
	* src/z80/main.c: more general macros
	* device/lib/Makefile.in: remove intermediate files

2003-01-11  Bernhard Held <bernhard AT bernhardheld.de>

	* .version: Bumped version number to 2.3.3
	* src/SDCCBBlock.c: new option -o
	* src/SDCCglobl.h: new option -o
	* src/SDCCglue.c: new option -o
	* src/SDCCmain.c: new option -o
	* src/asm.c: new option -o
	* src/ds390/main.c: new option -o
	* src/pic/glue.c: new option -o
	* src/pic/pcode.c: new option -o
	* src/pic/ralloc.c: new option -o
	* src/pic16/glue.c: new option -o
	* src/pic16/pcode.c: new option -o
	* src/pic16/ralloc.c: new option -o
	* src/z80/main.c: new option -o
	* device/lib/Makefile.in: use -o
	* support/regression/ports/ds390/spec.mk: use -o
	* support/regression/ports/gbz80/spec.mk: use -o
	* support/regression/ports/mcs51/spec.mk: use -o
	* support/regression/ports/mcs51-stack-auto/spec.mk: use -o
	* support/regression/ports/z80/spec.mk: use -o
	* support/regression/ports/ucz80/spec.mk: use -o
	* support/regression/ports/xa51/spec.mk: use -o
	* support/regression/fwk/lib/timeout.c: fix usage string

2003-01-09  Bernhard Held <bernhard AT bernhardheld.de>
	* src/mcs51/gen.c (genPlus): replaced "mov b,acc" by "mov b,a" Fiorenzo D. Ramaglia <fd.ramaglia AT tin.it>

2003-01-07    <johan AT balder>

	* src/SDCCast.c (decorateType): fixed bug #600035

2003-01-07  Bernhard Held <bernhard AT bernhardheld.de>
	* as/mcs51/lkmem.c: added several l-modifiers to printf to remove warnings
	* as/mcs51/lkaomf51.c: #include <ctype.h> to remove warnings
	* src/pic/main.c (_hasNativeMulFor): outcommented unused variables to remove warnings
	* src/pic/pcode.c: outcommented unused variable to remove warnings
	* src/pic/ralloc.c: outcommented unused variable to remove warnings

2003-01-06    <karl AT turbobit.com>
	* sim/ucsim/cmd.src/command.cc: fixed so "break xram r 0x7654" works again in
	regression tests.

2003-01-06    <johan AT balder>

	* src/SDCCicode.c: fixed array add

2002-01-05  Bernhard Held <bernhard AT bernhardheld.de>
	* src/SDCCmacro.c: MAX_STRING_LENGTH increased to 2048; was too small for regression tests
	* support/regression/ports/host/support.c: #include <stdarg.h> for gcc 3.2

2003-01-04    <johan AT balder>

	* src/SDCCval.c (getNelements): fixed the initialized array of structures

2002-12-29  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>
	* as/mcs51/Makefile.bcc: fixed typo lkomf51.o -> lkaomf51.o

2002-12-28  Bernhard Held <bernhard AT bernhardheld.de>
	* src/mcs51/peeph.def: added rules 234 and 235 from Frieder Ferlemann <frieder.ferlemann AT web.de>
	* support/regression/tests/bug-524697.c: fit mem usage into 8032

2002-12-28  Bernhard Held <bernhard AT bernhardheld.de>
	* src/mcs51/gen.c (aopGetUsesAcc): inserted missing "return FALSE"

2002-12-27  Bernhard Held <bernhard AT bernhardheld.de>
	* as/mcs51/Makefile.in: fixed typo lkomf51.o -> lkaomf51.o

2002-12-26  Bernhard Held <bernhard AT bernhardheld.de>
	* src/mcs51/main.c: removed {bindir}{sep} from aslink

2002-12-10  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* in /sdcc/as/mcs51/ changed these files in order to create an
	aomf51 file: aslink.h, lkdta.c, lklex.c, lklibr.c, lklist.c,
	lkmain.c.  Also added: lkmem.c and lkaomf51.c.  Changed the
	following files to include the previous two files: aslink.dsp,
	Makefile.aslink, Makefile.bcc, and Makefile.in.

	* Changed /sdcc/src/SDCCmain.c so it creates files with extension
	.adb instead of .cdb

2002-11-09  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* /sdcc/as/mcs51/lklist.c: Now reports memory usage using the
	value from option --iram-size.

2002-09-20  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>

	* /sdcc/as/mcs51/lklist.c: added boundary check before using
	dram[] array.

2002-09-18    <wiml AT hhhh.org>

	* SDCClrange.h: exposed setFromRange() and setToRange()
	* mcs51/ralloc.c: fixed over-eager packRegsForSupport() and
	  packRegsForAccUse() (bug 542397)
	* mcs51/gen.c: MOVA() is now a function to avoid calling aopGet()
	  multiple times and emitting the fetch operations more than once
	  added aopGetUsesAcc() function to allow binary operators to
	  fetch their operands in the correct order; made genMinus() emit
	  compact code for X = LITERAL - Y

2002-09-00  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>
	* /sdcc/as/mcs51/lklist.c: Fixed incorrect number of parameters to
	sprintf() in line 1267.

2002-09-08  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>
	* /sdcc/src/SDCCglue.c: Generate areas REG_BANK_[0-3] only for 8051
	like ports.

2002-09-04  Jesus Calvino-Fraga <jesusc AT ece.ubc.ca>
	Changes to aslink (All the changes are marked with 'JCF'):

	* /sdcc/as/mcs51/aslink.h: External definition of sflag and
	summary().

	* /sdcc/as/mcs51/lkarea.c: Computes the size of area BSEG_BYTES from
	area BSEG.  Also moves, if possible, the DATA area down into the internal
	ram so more space is available.

	* /sdcc/as/mcs51/lkdata.c: Definition of memory summary output flag
	sflag.

	* /sdcc/as/mcs51/lklist.c: For the BSEG area report the size in bits,
	not bytes.  Function summary() which creates a memory usage summary
	file with extension .mem.  Reports of overlaping stack and small stack
	size.  If the space for the stack is less than 16 bytes aslink trows a
	warning.

	* /sdcc/as/mcs51/lkmain.c: Creation of some of the default areas for
	the 8051.  Option 'y' for memory summary output file.

	Changes to sdcc (All the changes are marked with 'JCF'):

	* /sdcc/src/SDCCglobl.h: External definition of RegBankUsed[4].

	* /sdcc/src/SDCCglue.c:  If a register bank is used, creates an
	overlaying area	for it (uses RegBankUsed[4]).

	* /sdcc/src/SDCCmain.c: Definition RegBankUsed[4]; marks register
	bank zero as used by default.  By default aslink locates the stack
	(equivalent to --stack-after-data).  Pass option 'y' to aslink for
	the creation of the .mem file.  Delegates the allocation of data area
	to aslink (it is not longer 0x30 by default).  If --stack-loc passes
	the begining of the stack area to aslink.

	* /sdcc/src/SDCCmem.c:  If a register bank is used, marks it so
	glue() in SDCCglue.c creates an area for it.

2002-09-03  Borut Razem <borut.razem AT siol.net>
	* sdcc/src/SDCCglue.c, sdcc/src/SDCCglue.h, sdcc/src/SDCCmain.c,
	sdcc/src/pic/glue.c:
	introduced atexit() handler for teporay files removal in case of
	errors, assertions, ...

2002-08-29  Borut Razem <borut.razem AT siol.net>
	* sdcc/support/cpp2/auto-host_vc_in.h:
	re-definition of O_BINARY and other O_XXX as _O_BINARY and _O_XXX, so the problem
	with the returned value from read() in sdcc/support/cpp2/cppfiles.c is solved for MSC.
	Maybe there is a similar problem with BORLANDC? It should be checked!

	* sdcc/src/ds390/ralloc.c, sdcc/src/mcs51/ralloc.c, sdcc/src/z80/ralloc.c:
	corrected improper use of assert: the assignment to clr variable was done inside the assert.
	In case that NDEBUG was defined, the assert macro was substituted with no-op, so the assignment
	was not executed, and the compiler (cl) launched a warning:
	ralloc.c(1442) : warning C4700: local variable 'clr' used without having been initialized

2002-08-28  Bernhard Held <bernhard AT bernhardheld.de>
	* src/SDCCglue.c (printIvalArray): iterative calculation of array length

2002-08-28  Jesus Calvino-Fraga and Borut Razem <borut.razem AT siol.net>
	* sdcc/sdcc.dsw: added sdcpp, sdcppa, yacc, conf projects

	* sdcc/src/src.dsp, sdcc/src/avr/avr.dsp, sdcc/src/ds390/ds390.dsp,
	  sdcc/src/mcs51/mcs51.dsp, sdcc/src/pic/pic.dsp, sdcc/src/z80/z80.dsp,
	  sdcc/src/xa51/xa51.dsp, sdcc/src/avr/avra.dsp,
	  sdcc/src/ds390/ds390a.dsp, sdcc/src/mcs51/mcs51a.dsp,
	  sdcc/src/pic/pica.dsp, sdcc/src/z80/z80a.dsp,
	  sdcc/src/xa51/xa51a.dsp, sdcc/as/as_z80.dsp,
	  sdcc/as/aslink.dsp, sdcc/as/asx8051.dsp, sdcc/packihx/packihx.dsp:
	- added Release configuration in VS projects
	- review of compiler an linker options
	- VC .exe files are generated in bin_vc directory, not to interfere
	  with binaries generated from other projects (cygwin, mingw, bcc ...)

	* sdcc/src/yacc.dsp: added

	* sdcc/config.dsp, sdcc/configure_vc.awk, sdcc/sdcc_vc_in.h:
	added - genarate sdcc_vc.h using sdcc_vc_in.h as template
	and insert the version number definitions from .version

	* sdcc/support/cpp2/sdcpp.dsp: added - VC project for sdcpp

	* sdcc/support/cpp2/sdcppa.dsp, sdcc/support/cpp2/auto-host_vc_in.h:
	added - genarate auto-host.h using auto-host_vc_in.h as template

	* sdcc/sdcc_vc.h,
	removed from CVS, generated automatically

2002-08-25  Bernhard Held <bernhard AT bernhardheld.de>
	* support/scripts/inc2h.pl: use gputils or gpasm (from Nathan Hurst)

2002-08-11  Borut Razem <borut.razem AT siol.net>
	* support/Util/NewAlloc.c: removed unneeded #include "sdccconf.h" (suggested by Jesus Calvino-Fraga)

2002-08-10  Borut Razem <borut.razem AT siol.net>
	* src/SDCCmain.c (main):
	file preOutName was unlinked before closed. This seems to be OK on UNIX and cygwin
	platforms, but it doesn't work with Visual Studio: the opened file can not be removed.
	The consequence was that some temporary files were not removed.

	* src/SDCCglue.c:
	unification of code in functions tempfilename() and tempfile():
	function tempnam() is defined in Visual Studio 6.0 and .NET

	* sdcc/sdcc.dsw: removed project sdcpp, added project xa51a

	* sdcc/src/src.dsp, sdcc/src/avr/avr.dsp, sdcc/src/ds390/ds390.dsp,
	  sdcc/src/mcs51/mcs51.dsp, sdcc/src/pic/pic.dsp, sdcc/src/z80/z80.dsp:
	- removed compiler command line option /WX: Treats all warnings as errors
	- update a list of source files, included into the project

	* sdcc/src/avr/avra.dsp, sdcc/src/ds390/ds390a.dsp, sdcc/src/mcs51/mcs51a.dsp,
	  sdcc/src/pic/pica.dsp, sdcc/src/z80/z80a.dsp:
	changed project type to Generic Project so that can be correcly converted to VS.NET project

	* sdcc/as/mcs51/asm.h: definition of PATH_MAX for MSC

	* sdcc/src/SDCCast.c: solved MSC error in function decorateType()

	* sdcc/src/SDCC.y: added missing ending ';' to rules to get rid of bison warnings

	* dcc/src/ds390/ralloc.c, sdcc/src/mcs51/ralloc.c:
	added return 0 statements after assert() to make compiler happy

	* sdcc/src/xa51/peeph.rul, sdcc/src/xa51/peeph.def, sdcc/src/z80/ralloc.c:
	added newline in the def file to keep MSC compiler satisfied

	* sdcc/src/z80/gen.c:
	- function strcasecmp() is not defined in MSC (and probably also in BORLANDC),
	  so it is replaced with STRCASECMP, which is defined as stricmp in case of MSC and BORLANDC
	- solved MSC error in function aopDump()

	* sdcc_vc.h: define PREFIX as "\\sdcc"

2002-07-18  Bernhard Held <bernhard AT bernhardheld.de>
	* src/SDCCast.c (decorateType): fixed access to array of structures http://sourceforge.net/mailarchive/forum.php?thread_id=902690&forum_id=4107

2002-06-22  Scott Dattalo <scott AT dattalo.com>
	* src/pic/*: Numerous bug fixes. Flow analysis has been enhanced.
	- Rewrote the register banking algorithm.
	- Added pCode live-range analysis to registers (for now, only non-used and
	singly-used registers optimized away)

	* src/pic/pcoderegs.[ch]: Added new files for pCode live-range analysis

	* support/scripts/inc2h.pl Kevin L. Pauba <klpauba AT cox.net> submitted this perl script for converting MicroChip include files into SDCC Pic include files.

2002-05-10  Scott Dattalo <scott AT dattalo.com>
	* src/pic/*: Added support for multiplication. Fixed many,many bugs.

2002-04-22  Michael Hope  <michaelh AT vroom>

	* device/lib/z80/printf.c: Changed emitter to volatile to work around a pcall bug.

	* configure.in (DD_COPT): Added include support required for gbdk.

	* .version: Bumped version number just to increase it.

	* src/SDCCmain.c: Added -nostdinc to the default options.

2002-04-15  Michael Hope  <michaelh AT vroom>

	* device/lib/z80/printf.c (sprintf): Added.

	* src/z80/ralloc.c (packRegisters): Disabled pack HL use for GB as it's broken.

	* src/z80/peeph.def: Added transpose redundent load rule.

	* src/z80/main.c: Added force callee saves for jaune.

	* src/port.h: Removed the i186 and tlcs-900h ports as they weren't being being developed.

	* src/SDCCmain.c: Pulled the options definition out so that you can add port specific options without changing the main file.

2002-03-28  Johan Knol  <johan AT balder>

	* src/SDCCval.c: fixed bug #532436

2002-03-14  Scott Dattalo <scott AT dattalo.com>
	* /src/port.h:
	Added "char *Processor" field to the port structure.

	* /src/SDCCmain.c:
	Added -p option. Allows port dependent processor to be specified.

	* all ports:
	Initialized the new field char *Processor field to NULL in all ports

	* /src/pic/*:
	Compiler generated registers for interrupt context saving
	were not getting allocated.

2002-03-16  Sandeep Dutta  <sandeep AT ddi.com>

	* /src/SDCCast.c:
	Fixed left shift. Will promote the left side of a left shift
	if a) left shifting more than size of operand or b) when assigned
	to something size > size of left side

2002-03-14  Scott Dattalo <scott AT dattalo.com>
	* src/pic/*
	tons of changes. Register allocation has been
	rewritten. Added customization for the various PICs. Flow
	analysis is restructured. ...

	* src/pic/device.h:
	Added

	* src/pic/device.c:
	Added. device.c is a PIC port hack to accomodate variations
	in PIC devices.

2002-03-13  Michael Hope  <michaelh AT vroom>

	* src/z80/gen.c (genGenPointerGet): Fixed a bug where a pointer in HL is dereferenced into HL but HL is not spilled.  Yeah.

2002-03-04  johanknol  <johanknol AT manik>

	* /src/SDCCval.c: fixed

	const unsigned char arr[][2] = { { 0, 1 } };
	t18.c:1: error: Initializer element is not constant

2002-03-04  bela  <bela AT manik>

	* /device/include/mcs51reg.h:
	ds89c420 register definition update

2002-03-03    <johan AT FRIJA>

	* support/Util/SDCCerr.c: did something, but don't no why anymore

	* support/regression/tests/bug-524691.c: made it a little less shy

	* src/SDCCast.c (decorateType): fixed bug #524697

	* src/SDCCast.c: made some lineno improvements

	* src/SDCCval.c (getNelements): changed warning to error

	* src/SDCCglue.c (printIvalArray): changed warning to error

	* src/SDCCicode.c: fixed a warning for mingw

	* src/SDCCast.c (decorateType): fixed the << promotion for ops

	* src/SDCCicode.c (geniCodeDivision): divide is shift only for unsigned (bug #524685)

2002-03-02  Sandeep Dutta  <sandeep AT ddi.com>

	* src/ds390/peeph.def:
	Added some more peephole rules

	* src/ds390/gen.c: Various fixes & enhancements

	* src/SDCClrange.c, src/SDCClrange.h:
	functions "alldefsoutofrange" and "notusedinblock" moved to SDCClrange.c

	* src/ds390/ralloc.c:
	various fixes & enhancements (ds390) specific

	* src/avr/ralloc.c, src/mcs51/ralloc.c, src/pic/ralloc.c, src/xa51/ralloc.c, src/z80/ralloc.c:
	Functions "allDefsOutOfRange" & "notUsedinBlock" moved to SDCClrange.c
	from rallocs.

	* sdcc/src/SDCCcse.c: Better fix for bug # 514308

2002-03-02    <johan AT FRIJA>

	* src/SDCCast.c (decorateType): fixed bug #524708

	* src/SDCCval.c (floatFromVal): fixed the literal void (whatever that may be)

	* src/SDCCicode.c (geniCodePtrPtrSubtract): fixed bug #524691

2002-03-01  Michael Hope  <michaelh AT vroom>

	* src/SDCCsymt.c (initCSupport): Removed managling of support function names.

	* src/z80/ralloc.c (packRegsForIYUse): Fixed fp bug where four byte operands were packed into IY.

2002-03-01    <johan AT FRIJA>

	* src/SDCCglue.c (printIvalPtr): fixed bug #524211

	* src/SDCCast.c (decorateType): fixed bug #524209

	* src/SDCCval.c (valNot): fixed bug #524195

2002-02-26    <johan AT balder>

	* src/xa51/gen.c: fixed a warning

	* src/SDCCglue.c (printIvalFuncPtr): fixed bug #522534

	* src/SDCCast.c (decorateType): fixed bug #522534

2002-02-23    <johan AT balder>

	* src/SDCCdflow.c (computeDataFlow): fixed bug #460088

2002-02-22    <johan AT balder>

	* src/SDCCast.c: fixed bug #514865

	* src/SDCCy.c ("SDCC.y"): fixed bug #516625

2002-02-21  Sandeep Dutta  <sandeep AT ddi.com>

	* sdcc/src/SDCCloop.c:
	Previous fix was not good. basic blocks that have "break" or "return" are
	not really partof a loop , but live ranges used in these blocks should
	be live thru the entire loop, so set partOfLoop but don't add them to
	loop region

2002-02-21    <johan AT FRIJA>

	* src/SDCCcse.c: fixed bug #514308

2002-02-20  Sandeep Dutta  <sandeep AT ddi.com>

	* src/SDCCloop.c:
	Fixed BUG #519583. If a conditional block ended in a return/break
	statement inside a loop, it was not being considered part of the loop.

	* src/SDCCcflow.c: Removed fix (Fixed in SDCCloop.c)

2002-02-10  Karl Bongers <karl AT turbobit.com>

	* debugger/*:
	Fixed up SDCDB debugger somewhat.  Updated debugger/README
	with lots of comments and notes.

	* device/examples/test2.c:
	Fix bug, "red" variable not being initialized(compiler complained).

	* device/examples/Makefile, examples/test3.c:
	Add Makefile in device/examples folder, compiles test3.c
	for use as a multiple module SDCDB test case.

	* sim/ucsim/cmd.src/cmdset.cc:
	Took out debug printfs in ucsim "next" command.

	* sim/ucsim/xa.src:
	Karl and Johan start ucsim XA support.  Most dissassembly working,
	about 75% emulation done(plenty of work remaining).

	* sim/ucsim/z80.src:
	Add Z80 support to ucsim, add test-ucz80 regression test,
	notice ucsim/z80 emulation fails on examples/test3.c/itoa code.
	Notice z80 compiler fails on examples/test3.c/crc code.

2002-01-30  Sandeep Dutta  <sandeep AT ddi.com>

	* src/mcs51/gen.c, src/mcs51/main.c, src/mcs51/ralloc.c:
	Added support for --parms-in-bank1

	* src/ds390/peeph.def:
	added a few more peephole optimzations

	* src/ds390/main.c:
	1) added __builtin_inp & __builtin_outp used to read in data of given length
	   from a memory mapped port
	2) added __builtin_memcmp
	3) added __builtin_swapw swap bytes of a short

	* src/ds390/gen.c, src/ds390/gen.h, src/ds390/ralloc.c:
	1) handle multiple send & receives from register bank1
	2) ralloc can now allocate DPTR1 to some liveRanges

	* src/SDCCsymt.c, src/SDCCsymt.h:
	changes to handle multiple sends & receives

	* src/SDCCptropt.h:
	added some pointer arithmetic optimization

	* src/SDCCptropt.c:
	added some pointer arithmetic optimizations but not stable yet so not
	called from anywhere (will get this working shortly)

	* src/SDCCopt.c: fixed for multiple sends & receives

	* src/SDCCmain.c:
	1) added options --parms-in-bank1 (ds390/mcs51) & --protect-sp-update
	2) preprocessing done AFTER port->finalizeoptions . This allows ports to
	   set preprocessor defines (depending on options)

	* src/SDCCicode.c, src/SDCCicode.h:
	changes made to handle multiple sends & receives

	* src/SDCCglobl.h:
	Added options --protect-sp-update (ds390) and --parms-in-bank1 (ds390/mcs51)

	* src/SDCCcse.c, src/SDCCcse.h:
	added function findbackward def (to be used in upcoming optimization)

	* src/SDCCcflow.c, src/SDCCcflow.h:
	added function returnAtEnd - to determine if a basic block terminates with
	a RETURN iCode

	* src/SDCCast.c, src/SDCCast.h:
	added option parms-in-bank1

	* device/lib/_divsint.c, device/lib/_divslong.c, device/lib/_divuint.c
	* device/lib/_divulong.c, device/lib/_modsint.c, device/lib/_modslong.c
	* device/lib/_modulong.c, device/lib/_mulint.c, device/lib/_mullong.c:
	adjusted for --parms-in-bank1 option

	* device/include/string.h:
	donot redefine "reentrant" keyword

	* device/include/ds80c390.h: Added some more SFRs

2002-01-28  Bernhard Held  <bernhard AT bernhardheld.de>

	* sim/ucsim: Merged branch ucsim-034-pre3 to main trunk; new version 0.4

2002-01-26  Bernhard Held  <bernhard AT bernhardheld.de>

	* src/SDCCast.c (funcOfType): fix usage of double --float-reent

2002-01-22  Bernhard Held  <bernhard AT bernhardheld.de>

	* support/regression/fwk/lib/testfwk.c (main): Removed workaround for bug #505387

2002-01-18  Paul Stoffregen  <paul AT pjrc.com>

	* Added --xram-movc option

2002-01-13  Bernhard Held  <bernhard AT bernhardheld.de>

	* support/regression/Makefile: don't include test-mcs51-stack-auto in target all

2002-01-11  Johan Knol

	* Added math lib of Jesus Calvino-Fraga

2002-01-08  Bernhard Held  <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (processFile): fix processing of ../../src.c
	* support/regression/Makefile: new target test-mcs51-stack-auto
	* support/regression/ports/mcs51-stack-auto/spec.mk: added

2002-01-04  Bernhard Held  <bernhard AT bernhardheld.de>

	* src/SDCCglue.h: printIvalCharPtr(), not printIvalChar()

2002-01-04  Bernhard Held  <bernhard AT bernhardheld.de>

	* support/regression/ports/mcs51/support.c: correct setup of timer / UART

2002-01-03  Bernhard Held  <bernhard AT bernhardheld.de>

	* src/SDCCsymt.c (processFuncArgs): fix #498307 by Johan

	* src/SDCCglue.h: add definition for printIvalChar()

2002-01-02  Bernhard Held  <bernhard AT bernhardheld.de>

	* src/SDCCast.c: fix #498138 by Johan

	* src/SDCCglue.c: fix #498138 by Johan

2002-01-02  Bernhard Held  <bernhard AT bernhardheld.de>

	* support/regression/Makefile: fix clean

	* support/regression/ports/ds390/support.c: fix transmission of last character

2001-12-29  Sandeep Dutta  <sandeep AT ddi.com>

	* /sdcc/src/ds390/gen.c:
	a) improved computing address of stack variable
	b) took out some #if 0 code
	c) improved parmBytes adjustment
	d) improved genPlusIncr & genMinusIncr
	e) genCmp could generate bad code (when left assigned to DPTR)
	f) Fixed bug in hasInc

	* /sdcc/src/ds390/ralloc.c:
	a) packRegsForSupport could mess up live information (Fixed)
	b) packRegsDPTRuse could be incorrect for left & right shift

	* /sdcc/src/mcs51/ralloc.c:
	packRegsForSupport could mess up the live information (Fixed)

	* /sdcc/src/mcs51/gen.c: Fixed a bug in hasInc

	* /sdcc/src/SDCCast.c:
	can reverse a loop even if function call is present as long
	as the loop control variable is local & is not passed as parameter

2001-12-24  Sandeep Dutta  <sandeep AT ddi.com>

	* /sdcc/ChangeLog: *** empty log message ***

	* /sdcc/src/ds390/gen.c, /sdcc/src/ds390/main.c:
	More builtin function additions for TININative

	* /sdcc/src/ds390/ralloc.c:
	Had broken the regression testsuite

	* /sdcc/src/SDCCast.c: Fixed a bug in dumptree

	* /sdcc/src/SDCCsymt.c, /sdcc/src/SDCCsymt.h:
	Added funcattr hasStackParms will be set for reentrant functions when there
	are paramteres on the stack, this helps in minimizing frame pointer generation
	typeFromStr can handle function pointers now

	* /sdcc/doc/builtins.txt, /sdcc/doc/TININative.txt:
	*** empty log message ***

2001-12-24  Sandeep Dutta  <sandeep AT ddi.com>

	* /src/ds390/gen.c, /src/ds390/main.c:
	More builtin function additions for TININative

	* /src/ds390/ralloc.c:
	Had broken the regression testsuite

	* /src/SDCCast.c: Fixed a bug in dumptree

	* /src/SDCCsymt.c, /src/SDCCsymt.h:
	Added funcattr hasStackParms will be set for reentrant functions when there
	are paramteres on the stack, this helps in minimizing frame pointer generation
	typeFromStr can handle function pointers now

	* /doc/builtins.txt, /doc/TININative.txt:
	*** empty log message ***


2001-12-24  Sandeep Dutta  <sandeep AT ddi.com>

	* /src/ds390/gen.c, /src/ds390/main.c, /src/ds390/peeph.def, /src/ds390/ralloc.c:
	ALPHA version for -mTININative

	* /src/izt/i186.c, /src/izt/tlcs900h.c, /src/mcs51/main.c, /src/pic/main.c, /src/z80/main.c, /src/avr/main.c:
	updated to reflect changes in the port structure

	* /src/port.h:
	added function do_assemble (similar to do_link) if non-null this function
	will be called to do assembly (-mTININative) requires a multi command
	assembly
	added function genAssemblerEnd will be called to generate assembler Epilogue

	* /src/SDCCsymt.c:
	added _JavaNative to debug info printing

	* /src/SDCCmain.c: added option --tini-libid
	added port->do_assemble function (-mTININative) has a multi command assemble

	* /src/SDCCglue.c: Disabled "constExpr" check
	added port->genAssemblerEnd function

	* /src/SDCCglobl.h: Added option --tini-libid value

	* /src/SDCCast.h:
	tookout optimizeCompare from the header (has no external references)

	* /src/SDCCast.c: made one more function "static"

2001-12-23  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/mappings.i: Added z80asm support.

	* src/z80/main.c: Added z80asm support on --asm=z80asm

	* src/z80/gen.c: Fixed asm portability issues.

	* src/asm.c (tvsprintf): Removed old code, added 'N' for function name.  For extern support.

	* src/SDCCglue.c (printExterns): Added global/extern split.

2001-12-17  Bernhard Held  <bernhard AT bernhardheld.de>

	* support/regression/Makefile: added test for mcs51 model large

	* support/regression/ports/mcs51-large/spec.mk: added test for mcs51 model large

	* support/regression/ports/gbz80/spec.mk: added -mgbz80

2001-12-05  Michael Hope  <michaelh AT juju.net.nz>

	* src/diff.1 (Index): Many, many optmisiations.  Dhrystone up to 201.

1904-01-06  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/ralloc.c (packRegsForIYUse): Fixed the case where an operand is in direct space.

	* src/z80/gen.c (makeFreePairId): Optimised IY load by using a spare pair.

2001-12-02  Bernhard Held  <bernhard AT bernhardheld.de>

	* src/mcs51/gen.c (genFunction): avoid excess "inc sp"

	* support/regression/tests/simplefloat.c: Port to mcs51.

2001-11-25  Michael Hope  <michaelh AT juju.net.nz>
	* support/regression/tests/bug-485362.c: Added.

	* support/regression/tests/simplefloat.c (testDivNearOne): Added.

	* src/z80/gen.c (aopOp): Fixed case where left and result are in the same spill loc and they have different sizes.

	* src/z80/peeph.def: Added rules for optimising two byte compares on the same thing, and to optimise two ptr assign.

	* src/z80/gen.c (aopDump): Added a dump function.

2001-11-25  Bernhard Held  <bernhard AT bernhardheld.de>
	* sim/ucsim/s51.src/glob.cc: DS390 SFRs and bits added.

	* sim/ucsim/s51.src/port.cc: Port 4 and 5 added.

	* sim/ucsim/s51.src/regs51.h: DS390 SFRs added.

	* sim/ucsim/s51.src/uc390.cc: Some details improved, CKRDY works for tinibios.

	* sim/ucsim/s51.src/uc390cl.h: Work in progress.

	* sim/ucsim/sim.src/uccl.h: 6 ports for DS390.

	* support/regression/fwk/lib/testfwk.c: Run with tinibios.

	* support/regression/ports/mcs51/spec.mk: Fine tuninig.

	* support/regression/ports/ds390/support.c: Use tinibios.

	* support/regression/ports/ds390/spec.mk: Fine tuning, use tinibios.

2001-11-23  Michael Hope  <michaelh AT juju.net.nz>support/regression/tests/bug-460010.c

	* src/z80/ralloc.c (packRegsForHLUse3): Changed to not pack into HL if anything is in direct space.
	(packRegsForHLUse3): Added packing support for send, cast, and return value from a call.

	* src/z80/peeph.def: Added rules for optimising pushes of part of a pair.

	* src/z80/gen.c (emitCall): Changed the stack fixup to not use HL.

2001-11-18  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/gen.c (genCmp): Fixed compare on unsigned.

	* src/z80/ralloc.c (packRegsForHLUse3): Created and optimised.
	(packRegsForIYUse): Created and optimised.

2001-11-07  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/tests/float.c (testFloatAdd): Fixed up warning.
2001-11-18  Bernhard Held  <bernhard AT bernhardheld.de>

	* sdcc/support/regression/tests/bug-460010.c: fix seg violation on host

	* sdcc/support/regression/tests/muldiv.c: fix output on mcs51

	* sdcc/support/regression/tests/stacks.c: fix DSEG overflow on mcs51

2001-11-07  Bernhard Held  <bernhard AT bernhardheld.de>

	* sdcc/sim/device/lib/_gptrget.c: mem region 5 (idata) added

	* sdcc/sim/device/lib/_gptrput.c: mem region 5 (idata) added

2001-11-07  Bernhard Held  <bernhard AT bernhardheld.de>

	* sdcc/sim/ucsim/globals.cc: New: IXRAM.

	* sdcc/sim/ucsim/stypes.h: New: IXRAM.

	* sdcc/sim/ucsim/s51.src/uc390.cc: New: IXRAM.

2001-11-07  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/ralloc.c (packRegsForHLUse): Banned IFXs from being packed into HL.
	(packRegsForHLUse): Added rule to pack address of/pointer get for itemps into HL for the Z80.
	(packRegsForAccUse2): Added rule to pack hbit IFXs into A.

	* src/z80/main.c (_setDefaultOptions): Made float code re-entrant by default.

	* src/z80/gen.c (aopGetLitWordLong): Added word support for floats.
	(genNotFloat): Added.
	(genUminusFloat): Added.

	* device/lib/z80/Makefile: Added floating pt stubs.

	* device/lib/Makefile.in (Z80SOURCES): Added floating pt support.

	* src/z80/gen.c (genIpush): Fixed up a push of one byte when left is in a pair.

	* device/lib/_fsadd.c (__fsadd): Fixed up return where the numbers are hugely different.

2001-11-07  Bernhard Held  <bernhard AT bernhardheld.de>

	* sdcc/sim/ucsim/s51.src/glob.cc: Minor fix.

	* sdcc/sim/ucsim/s51.src/regs51.h: Minor fix.

	* sdcc/support/regression/Makefile: Add port ds390.

	* sdcc/support/regression/ports/mcs51/spec.mk: Minor change.

	* sdcc/support/regression/ports/z80/spec.mk: Minor change.

	* sdcc/support/regression/ports/ds390/spec.mk: Added.

	* sdcc/support/regression/ports/ds390/support.c: Added.

	* sdcc/support/regression/ports/ds390/uCsim.cmd: Added.

	* sdcc/support/regression/ports/mcs51/timeout.c: Cut.

	* sdcc/support/regression/fwk/lib/timeout.c: Paste.

2001-11-04  Michael Hope  <michaelh AT juju.net.nz>

	* device/include/malloc.h: Added z80 and gbz80 support.

	* device/lib/gbz80/heap.s: Added.

	* device/lib/z80/heap.s: Added.

	* device/lib/malloc.c: Added z80 and gbz80 support.

	* support/regression/tests/malloc.c (testMalloc): Added.

	* src/SDCCmain.c (parseCmdLine): Added support for -Wp.

	* support/regression/tests/bug-478094.c: Added.

	* src/z80/gen.c (commitPair): Fixed silly gbz80/z80 commit to static bug.

2001-11-04  Bernhard Held  <bernhard AT bernhardheld.de>

	* sdcc/sim/ucsim/s51.src/uc390cl.h: Improvement for ds390 to run regression tests

	* sdcc/sim/ucsim/s51.src/uc390.h: Improvement for ds390 to run regression tests

	* sdcc/sim/ucsim/s51.src/regs51.h: Improvement for ds390 to run regression tests

	* sdcc/sim/ucsim/s51.src/glob.cc: Improvement for ds390 to run regression tests

	* sdcc/support/regression/tests/bug-460010.c: Small change for ds390

2001-11-04  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/peeph-gbz80.def: Removed a bad sub optimisation.

2001-11-03  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/tests/bug-477927.c: Added.

	* src/z80/peeph.def: Added minor rules.

	* src/z80/gen.c (genPlusIncr): Added an extra plusinc rule.

	* src/z80/peeph.def: Added jump optimisation modification.

2001-11-01  Michael Hope  <michaelh AT juju.net.nz>

	* src/SDCCmain.c (linkEdit): Added runtime path detection to the mcs51 port.

2001-10-30  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/tests/funptrs.c: Added.

2001-10-29  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/ralloc.c (packRegsForHLUse): Fixed up bad spill due to pushing one byte via HL.

2001-10-28  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/gen.c (genArrayInit): Made it work for on stack arrays.

	* src/z80/main.c (gbz80_port =): Added rle support to the gbz80 port.

	* src/z80/gen.c (genMinus): Fixed for where the result is one byte.
	(movLeft2ResultLong): Created.

	* src/z80/ralloc.c (packRegsForHLUse): Added a couple of simple cases for the GB.
	(joinPushes): Added.  Joins two char pushes into a word push.

2001-10-27  Michael Hope  <michaelh AT juju.net.nz>

	* support/cpp2/Makefile.in (install): Added creation of dest dir.

	* support/makebin/Makefile (install): Added creation of dest dir.

2001-10-24 Karl Bongers <karl AT turbobit.com>

	* configure.in, configure, Makefile, support/cpp: Removed cpp folder, since we have new cpp2 preprocessor code.

2001-10-21  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/ralloc.c: Turned off faulty pack for one use.

	* src/z80/peeph-gbz80.def: Removed redundent restart options.

	* src/z80/gen.c (genMult): Added native mul for constants on the z80 and gbz80.

2001-10-21  Bernhard Held  <bernhard AT bernhardheld.de>

	* support/regression/Makefile: Improved clean

	* support/regression/ports/gbz80/spec.mk: Added clean

	* support/regression/ports/host/spec.mk: Added clean

	* support/regression/ports/z80/spec.mk: Added clean

	* support/regression/ports/mcs51/spec.mk: Added clean, little improvements

	* support/regression/ports/mcs51/timeout.c: little improvements

2001-10-17  Michael Hope  <michaelh AT juju.net.nz>

	* device/lib/malloc.c (MEMHEADER): Fixed against new pedantic pointers.

	* support/regression/fwk/include/testfwk.h: Fixed up to use function pts correctly.

	* support/regression/generate-cases.py: Fixed up to use function pts correctly.

2001-10-16  Bernhard Held  <bernhard AT bernhardheld.de>

	* support/regression/port/mcs51/spec.mk: add timeout for uCsim

	* support/regression/port/mcs51/timeout.c: add timeout for uCsim

2001-10-13  Michael Hope  <michaelh AT juju.net.nz>
	* src/z80/gen.c (emitCall): Fixed up missing spill of HL when used to assign the result value.

	* src/z80/ralloc.c: Turned off pack for one use as it's quite broken.

	* src/SDCCmain.c (linkEdit): Added support for passing a legacy command line through the processor.

	* src/mcs51/main.c (_linkCmd): Added bin path to command.

	* src/SDCCmain.c (initValues): Added support for when it it called just to link.

	* as/mcs51/lklibr.c (libfil;): Turned off 'library file' message.

	* src/SDCCval.c (constVal): Fixed usage of 'L' modifier problems on ppc.

	* support/regression/tests/longor.c: Added.

2001-10-11  Bernhard Held  <bernhard AT bernhardheld.de>

	* as/mcs51/asdata.c: replaced FILENAME_MAX with PATH_MAX

	* as/mcs51/aslink.h: define PATH_MAX

	* as/mcs51/asm.h: define PATH_MAX

	* as/mcs51/asmain.c: replaced FILENAME_MAX with PATH_MAX

	* as/mcs51/asnoice.c: replaced FILENAME_MAX with PATH_MAX

	* as/mcs51/lklex.c: replaced FILENAME_MAX with PATH_MAX

	* as/mcs51/lkmain.c: replaced FILENAME_MAX with PATH_MAX

	* src/SDCCglobl.h: define PATH_MAX

	* src/SDCCmacro.c: replaced FILENAME_MAX with PATH_MAX

	* src/SDCCmain.c: replaced FILENAME_MAX with PATH_MAX

2001-10-11  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/gen.c (gencjneshort): Fixed

	* src/z80/ralloc.c (packRegsForHLUse): Added pack into HL for cast then ipush.

2001-10-09  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/tests/bug-469671.c: Added.

	* src/z80/gen.c (shiftIntoPair): Fixed up warning.

2001-10-08  Michael Hope  <michaelh AT juju.net.nz>

	* src/SDCCmain.c: Added --fommit-frame-pointer option and implemented in the z80 port.

	* src/z80/gen.c (genPlus): Fixed to work with extended stack.  Also fixed genMinus, genCmp.  genUMinus is still left.

2001-10-08  Bernhar Held  <bernhard AT bernhardheld.de>

	* src/SDCCmain.c (preProcess): added define SDCC_NOOVERLAY

	* src/device/lib/_mulint.c  : removed hint: nooverlay bug

	* src/device/lib/_mullong.c : removed hint: nooverlay bug

	* src/device/lib/_divuint.c : removed hint: nooverlay bug

	* src/device/lib/_divulong.c: removed hint: nooverlay bug

	* src/device/lib/_moduint.c : removed hint: nooverlay bug

	* src/device/lib/_modulong.c: removed hint: nooverlay bug

2001-10-07  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/gen.c (setupPair): Added 'extended stack' support for the z80.  Can now have local variables or parameters of more than 127 bytes in size.  Increadibly slow, but it will work.  Currently anything involving the carry flag.

	* support/Util/NewAlloc.c (freeTrace): Changed free for the gc case to not free at all.  Fixes runtime segfault.

	* support/regression/tests/scott-compare3.c (c_abcd): Fixed up casts.

2001-10-07    <johan AT FRIJA>

	* device/lib/gets.c (gets): fixed the return value.

2001-10-06  Michael Hope  <michaelh AT juju.net.nz>
	* src/SDCCmain.c (WRITE_SEG_LOC): Fixed up to use Safe_strdup.

	* src/SDCCpeeph.c (peepHole): Fixed all leaks.  Added trace support for freeing lines.  Optimised restart logic to re-run instead of restart.  Now compiles dscan.c on ~60MB instead of ~200MB.

	* support/Util/NewAlloc.c: Added ability to use libgc instead of malloc.  Added Safe_free and Safe_strdup.  Added trace support where you can log allocations and free all at once.

	* src/z80/gen.c (genZ80Code): Added de-allocation via trace support.

	* src/pic/gen.c: Removed Safe_strdup.

	* configure.in: Added option to enable libgc support.

	* src/SDCCbitv.c (bitVectnBitsOn): Optimised.
	(bitVectUnion): Optimised.
	(bitVectIntersect): Optimised.
	(bitVectBitsInCommon): Optimised.
	(bitVectCplAnd): Optimised.

	* support/makebin/makebin.c (usage): Removed getopt as mingw32 doesn't have it.  Sigh.

2001-10-03 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCmain.c: distinguish between assembler debug and plain options

	* src/avr/main.c:   remove standard assembler options

	* src/ds390/main.c: remove standard assembler options

	* src/mcs51/main.c: remove standard assembler options

	* src/port.h: removed "PENDING" comment

2001-10-03 Bernhard Held <bernhard AT bernhardheld.de>

	* src/device/lib/_mulint.c  : new, with assember functions

	* src/device/lib/_mullong.c : new, with assember functions

	* src/device/lib/_divuint.c : with assember functions

	* src/device/lib/_divsint.c : with assember functions

	* src/device/lib/_divulong.c: with assember functions

	* src/device/lib/_divslong.c: with assember functions

	* src/device/lib/_moduint.c : with assember functions

	* src/device/lib/_modsint.c : with assember functions

	* src/device/lib/_modulong.c: with assember functions

	* src/device/lib/_modslong.c: with assember functions

	* src/device/lib/libint.lib:  replaced _muluint.c  and _mulsint.c  by _mulint.c

	* src/device/lib/liblong.lib: replaced _mululong.c and _mulslong.c by _mullong.c

	* src/device/lib/Makefile.in: replaced _muluint.c  and _mulsint.c  by _mulint.c
	                              replaced _mululong.c and _mulslong.c by _mullong.c

2001-10-03 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCsymt.c: sequence of specifiers in pintTypeChain() corrected

2001-10-01 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCglue.c: test, if win32api is available for MINGW

2001-10-01 Bernhard Held <bernhard AT bernhardheld.de>

	* src/SDCCsymt.c: no more _modifier in printTypeChain()
	* support/regression/tests/driverstruct.c: REENTRANT for mcs51
	* support/regression/ports/gbz80/spec.mk: removed GENERIC
	* support/regression/ports/host/spec.mk: removed GENERIC
	* support/regression/ports/mcs51/spec.mk: removed GENERIC
	* support/regression/ports/z80/spec.mk: removed GENERIC

2001-10-01  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/fwk/lib/testfwk.c (__printf): Removed GENERIC.

	* support/regression/tests/bug-467035.c: Created.

2001-10-01    <johan AT FRIJA>

	* src/SDCC.y: fixed bug #466586 part 1

2001-10-01  Johan Knol <johan.knol AT iduna.nl>

	* SDCCicode.c: z80 has no generic pointers
	* removed -s from strip in all Makefile(.in)'s. It is not needed, but Solaris chocks on it.

2001-09-30  Michael Hope  <michaelh AT juju.net.nz>

	* sim/ucsim/cmd.src/Makefile.in ($(PRJDIR)/libcmd.a): Changed all ar references to $(AR) for Solaris.

2001-09-29  Michael Hope  <michaelh AT juju.net.nz>

	* Makefile (sdcc-libs): Added makebin to the list of standard targets.

	* support/regression/ports/z80/spec.mk: Updated to use env for sdcc bin dir for automatic regression.

2001-09-25  Michael Hope  <michaelh AT juju.net.nz>

	* configure.in: Fixed up so that ucsim is only configured once.

	* support/cpp2/configure.in: Fixed to use the program transform to append the .exe for the win32 build.

	* src/SDCCutil.c (getPrefixFromBinPath): Fixed up to work with win32 in all of its glory.
	(getPathDifference): As above.

	* src/SDCCmain.c (preProcess): Changed to use a temporary file in a proper temp directory.  Fixed case where pre-processing only.

	* src/SDCCglue.c (tempfilename): Added function for pre-processor.

2001-09-23  Michael Hope  <michaelh AT juju.net.nz>
	* .version: Updated to 2.3.1

	* src/z80/main.c (z80_port =): Added macro based linker and assembler command line support.
	Added copyright header.

	* src/SDCCmain.c: Shifted various functions into SDCCutil.c
	(assemble): Added support for macro based assembler commands.
	(linkEdit): Added support for macro based linker commands.
	(preProcess): Changed the pre-processor to use macros.
	(_setPaths): Added functionality to autodetect the include, lib and bin dir paths.
	(_discoverPaths): Added support for overriding the install directory using the SDCCDIR env variable.

	* device/lib/z80/crt0.s: Added module name for debugging.

2001-09-20  Michael Hope  <michaelh AT juju.net.nz>

	* src/SDCCmain.c (printVersionInfo): Added the build date to the version info.

	* src/SDCChasht.c (hTabDeleteByKey): Fixed delete as it would delete the last item from a bucket even if it wasn't the real one.

	* src/SDCCglue.c: Moved gc_strdup to SDCCutil.c

	* src/Makefile.in: Added SDCCmacro and SDCCutil

2001-09-19  Michael Hope  <michaelh AT juju.net.nz>

	* src/SDCCmain.c (printVersionInfo): Added the build date to the version info.

2001-09-16    <johan AT FRIJA>

	* support/Util/SDCCerr.c: fixed up the error/warning/info database. I only changed the E_ W_ I_ prefix to what SDCCerr.c says it is.

2001-09-15    <johan AT FRIJA>

	* src/mcs51/ralloc.c: (findAssignToSym): fixed bug #460662 part 1
	* src/ds390/ralloc.c (findAssignToSym): fixed bug #460662 part 1

2001-09-11    <johan AT FRIJA>

	* src/SDCCval.c (valDiv Mod Minus Plus Shift): keep litteral expressions as small as possible (bug #460010)

2001-09-10  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/tests/bug-460444.c: Added test case.

	* src/z80/gen.c (genOr): bug 460444: if (a ^ lit) was broken for &, |, and ^.
	(genCast): Added justification for all of the asserts.

2001-09-10  Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/support.c: _xdata replaced by xdata

	* support/regression/spec.mk: removed _generic

2001-09-09  Michael Hope  <michaelh AT juju.net.nz>

	* src/pic/ralloc.c (debugLogRegType): Removed some old types to get it to compile.

	* src/z80/gen.c (shiftR2Left2Result): Improved the case when v = v >> n for small values of n to use less code space and time.
	(genrshTwo): Fixed v = v >> n where v is a negative int and n is > 8: bug 460010.

	* src/z80/peeph.def: Added a rule to optimise shift then compare.

	* support/regression/tests/bug-460000.c (testShiftByParam): Added test case.

	* support/regression/tests/bug-460010.c: Added test case.

	* support/regression/Makefile (test-host): Removed a silly 'clean' target when testing against gcc.

2001-09-09  Bernhard Held <bernhard AT bernhardheld.de>

	* support/regression/Makefile: inter-port-clean adjusted for mcs51

	* support/regression/testfwk.c: removed workaround for bug #436344

	* support/regression/tests/bp.c: use less memory with mcs51

	* support/regression/tests/bug-441448.c: use less memory

	* support/regression/tests/ports/mcs51/spec.mk: cleanup, use --stack-after-data

	* support/regression/collate-results.py: typo

2001-09-08  Michael Hope  <michaelh AT juju.net.nz>

	* support/regression/tests/fetchoverlap.c: Added new test case.

	* support/regression/tests/bp.c: Added new test case.

	* support/regression/tests/bug-448984.c: Added new test case.

	* support/regression/tests/pow2shifts.c: Added new test case.

	* src/z80/gen.c: Turned off the noise it normally generates for the release.
	(genlshTwo): Fixed right shift for count > 8.

	* src/z80/ralloc.c: Disabled most of the ACC packing rules as they weren't getting hit and weren't at all safe.

2001-09-08    <johan AT FRIJA>

	* src/SDCCicode.c (geniCodeCall): a CPOINTER can be used as a function

2001-09-07    <johan AT FRIJA>

	* src/SDCCicode.c (newiCodeCondition): fixed bug #456235 (1.77)

	* src/SDCCglue.c (emitRegularMap): only delete a symbol when it is a symbol

2001-09-06    <johan AT FRIJA>

	* src/SDCC.y: this could be a fix for bug #458744 (1.37)
	* bernhard noted me at this: "() equals to (void)" (1.38)

2001-09-05    <johan AT FRIJA>

	* src/SDCCglue.c (emitRegularMap): a fix for bug #458099/2

2001-09-04    <johan AT FRIJA>

	* src/SDCCsymt.c (checkSClass): a fix for bug #458099/1


2001-09-04  Paul Stoffregen  <paul AT pjrc.com>

	* pragma noinduction broke memcpy on mcs51 large model.  Moved it inside z80 optimization

2001-09-03  Michael Hope  <michaelh AT juju.net.nz>

	* link/z80/aslink.h: Fixed path for PATH_MAX

2001-09-02  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/gen.c (fetchLitPair): Changed so that it properly caches direct space references.

	* support/regression/tests/addsub.c: Added cases to cover all the +, - combinations.

	* support/regression/tests/uminus.c: Added a test for the unary minus operator.

	* src/z80/gen.c (genUminus): Fixed add, sub, and uminus on the gbz80 port for longs.  Had to shift some functions about to do it.

2001-09-01  Michael Hope  <michaelh AT juju.net.nz>

	* src/z80/gen.c: Fixed up generator to pass the regresion tests, specifically fixing loads for longs, genCmp, and turned on the map file.
	(genCmp): Fixed up genCmp for the GB with longs.

	* device/lib/gbz80/Makefile: Fixed up all the libraries to pass the regression tests.

	* support/regression/ports/host/spec.mk: Updated to compile with the new type specifiers.

	* device/lib/Makefile.in (Z80SOURCES): Removed old _mululong, _mulslong, and unneeded _mulint.

	* device/lib/_mullong.c (_mulslong): Changed to actually return a value :)

2001-08-30  Paul Stoffregen  <paul AT pjrc.com>

	* added peepholes 223 to 231 to mcs51 port.  These improve code when using large model.

2001-08-30  Michael Hope  <michaelh AT juju.net.nz>

	* device/lib/gbz80/crt0.s (init): Fixed up support for the gbz80 such that it will at least run (and fail badly) the regression tests.

	* src/z80/gen.c (genPlus): Changed bad long add for gb to a fall through.

2001-08-29  Michael Hope  <michaelh AT juju.net.nz>

	* link/z80/aslink.h: Fixed long file name support.  Is now based off PATH_MAX instead of a constant.

	* src/z80/gen.c: Fixed add and sub for the case where left or right are in static space.

2001-08-30 Bernhard Held   <bernhard AT bernhardheld.de>

	* sim/ucsim/configure:    little improvement of Cygwin-detection
	* sim/ucsim/configure.in: little improvement of Cygwin-detection
	* sim/ucsim/cmd.src/newcmdcl.h: include <sys/types.h> to define fd_set automated build
	* support/regression/tests/bug-221100.c: small changes for mcs51
	* support/regression/tests/bug-221168.c: small changes for mcs51
	* support/regression/tests/bug-227710.c: small changes for mcs51
	* support/regression/tests/staticinit.c: small changes for mcs51
	* as/mcs51/aslink.h: accept everything as symbol name in rel-files, bug fix ID 452601
	* as/mcs51/lklex.c:  accept everything as symbol name in rel-files, bug fix ID 452601
	* as/mcs51/lksym.c:  accept everything as symbol name in rel-files, bug fix ID 452601

$Revision$
